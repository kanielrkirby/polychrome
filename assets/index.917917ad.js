var se=Object.defineProperty;var le=(o,t,e)=>t in o?se(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var j=(o,t,e)=>(le(o,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function e(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=e(l);fetch(l.href,i)}})();let O;const oe=new Uint8Array(16);function ie(){if(!O&&(O=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!O))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return O(oe)}const M=[];for(let o=0;o<256;++o)M.push((o+256).toString(16).slice(1));function ne(o,t=0){return(M[o[t+0]]+M[o[t+1]]+M[o[t+2]]+M[o[t+3]]+"-"+M[o[t+4]]+M[o[t+5]]+"-"+M[o[t+6]]+M[o[t+7]]+"-"+M[o[t+8]]+M[o[t+9]]+"-"+M[o[t+10]]+M[o[t+11]]+M[o[t+12]]+M[o[t+13]]+M[o[t+14]]+M[o[t+15]]).toLowerCase()}const ae=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),J={randomUUID:ae};function re(o,t,e){if(J.randomUUID&&!t&&!o)return J.randomUUID();o=o||{};const s=o.random||(o.rng||ie)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let l=0;l<16;++l)t[e+l]=s[l];return t}return ne(s)}const de=document.title;function A(o){let t=parseInt(o[0]+o[1],16)/255,e=parseInt(o[2]+o[3],16)/255,s=parseInt(o[4]+o[5],16)/255,l=Math.max(t,e,s),i=Math.min(t,e,s),u,h,f=t*.299+e*.587+s*.114,r=(l+i)/2;if(l==i)u=h=0;else{let d=l-i;switch(h=r>.5?d/(2-l-i):d/(l+i),l){case t:u=(e-s)/d+(e<s?6:0);break;case e:u=(s-t)/d+2;break;default:u=(t-e)/d+4;break}u=u*60}return{r:t,g:e,b:s,h:u,s:h,l:r,lum:f}}function H(o,t,e){o>360?o-=360:o<0&&(o+=360),t>1?t=1:t<0&&(t=0),e>1?e=1:e<0&&(e=0),t*=100;const s=t*Math.min(e,1-e)/100,l=i=>{const u=(i+o/30)%12,h=e-s*Math.max(Math.min(u-3,9-u,1),-1);return Math.round(255*h).toString(16).padStart(2,"0")};return`${l(0)}${l(8)}${l(4)}`}const k={get info(){let o=localStorage.getItem("info");return o?JSON.parse(o):(localStorage.setItem("info",JSON.stringify({firstVisit:!0})),this.info)},set info(o){let t=this.info;if(o)for(let[e,s]of Object.entries(o))t[e]=s;localStorage.setItem("info",JSON.stringify(t))},get settings(){let o=localStorage.getItem("settings");return o?JSON.parse(o):(localStorage.setItem("settings",JSON.stringify({lastColorAlgorithmIndex:2,cookiesOk:!1})),this.settings)},set settings(o){let t=this.settings;if(o)for(let[e,s]of Object.entries(o))t[e]=s;localStorage.setItem("settings",JSON.stringify(t))},savedPalettes:{get items(){let o=localStorage.getItem("saved-palettes"),t;if(o){let e=[];t=JSON.parse(o);for(let s of t)e.push(s);return e}else return[]},set items(o){localStorage.setItem("saved-palettes",JSON.stringify(o))},addItem(o){let t=this.items;t.push(o),this.items=t},removeItem(o){this.items.splice(o,1)}}},C={create:{cmds:[],cmdIndex:-1,push(o){this.cmds.splice(this.cmdIndex+1,1/0,o),this.cmdIndex=this.cmds.length-1},undo(){this.cmdIndex>-1&&(this.cmds[this.cmdIndex].undo(),this.cmdIndex--)},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}},palettes:{cmds:[],cmdIndex:-1,push(o){this.cmds.splice(this.cmdIndex+1,1/0,o),this.cmdIndex=this.cmds.length-1},undo(){if(this.cmdIndex>-1){let o=this.cmds[this.cmdIndex];this.cmdIndex--,o.undo()}},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}}},U=document.querySelector(".toolbar");function R(o,t,e){return s=>{document.title=de+" | "+o;const l=document.querySelector("main.visible");l&&l.classList.remove("visible");const i=t;if(i==null||i.classList.add("visible"),o=="Palettes")document.body.parentElement.style.overflow="",document.body.style.overflow="",U.classList.add("palettes"),U.classList.remove("create"),e.draw(k.savedPalettes.items);else if(o=="Create")if(document.body.parentElement.style.overflow="hidden",document.body.style.overflow="hidden",U.classList.add("create"),U.classList.remove("palettes"),s)e.generate(s);else{let u=e.generate(),h=[];for(let f of u)h.push(f.hex);history.replaceState("","",h.join("-"))}else U.classList.remove("palettes","create"),document.documentElement.style.overflow="",document.body.style.overflow=""}}const g=(o,t)=>Math.random()*(t-o)+o,ce=()=>btoa(parseInt(re(),16).toString(36)).replaceAll("=","");function E(o,t){const e=document.createElement("div");e.classList.add("tooltip","appearing");const s=document.createElement("h2");return s.innerHTML=o,e.append(s),t!=null&&t.pos?(e.style.left=t.pos[0]+"px",e.style.top=t.pos[1]+"px"):e.classList.add("centered"),setTimeout(()=>{t&&t.pos&&(e.clientWidth+t.pos[0]>document.body.clientWidth?(e.style.translate="-100%",e.clientHeight+t.pos[1]>document.body.clientHeight&&(e.style.translate="-100 -100%")):e.clientHeight+t.pos[1]>document.body.clientHeight&&(e.style.translate="0 -100%"))},0),e.addEventListener("animationend",()=>{e.classList.remove("appearing"),setTimeout(()=>{e.classList.add("disappearing"),e.addEventListener("animationend",()=>{e.remove()},{once:!0})},(t==null?void 0:t.duration)||1e3)},{once:!0}),e}function P(o,t){let e=document.createElement("div");e.classList.add("popover");let s=document.createElement("div");if(s.classList.add("clear-overlay"),(t==null?void 0:t.type)=="menu"||(t==null?void 0:t.type)=="tool-menu"){let l=document.createElement("ul");l.classList.add("list");for(let i of o){let u=document.createElement("div");i.id&&(u.id=i.id),u.classList.add("choice"),i.content&&(u.innerHTML=i.content),i.class&&u.classList.add(i.class),l.append(u)}e.append(l),document.body.append(s)}else if((t==null?void 0:t.type)=="color-picker"){let l=document.createElement("canvas");l.id="color-picker",l.classList.add("color-picker");let i=l.getContext("2d"),{h:u}=A(t.hex),h=`hsl(${u}, 100%, 50%)`,f=i.createLinearGradient(0,0,i.canvas.width,0);f.addColorStop(0,"#fff"),f.addColorStop(1,h),i.fillStyle=f,i.fillRect(0,0,i.canvas.width,i.canvas.height);let r=i.createLinearGradient(0,0,0,i.canvas.height);r.addColorStop(0,"rgba(0,0,0,0)"),r.addColorStop(1,"black"),i.fillStyle=r,i.fillRect(0,0,i.canvas.width,i.canvas.height);let d=document.createElement("div");d.classList.add("color-picker-cursor");let c=document.createElement("input");c.setAttribute("min","0"),c.setAttribute("max","360"),c.setAttribute("type","range");let p=document.createElement("div");p.classList.add("huebar");let y=document.createElement("div");y.classList.add("huebar-cursor");let a=document.createElement("input");a.setAttribute("min","0"),a.setAttribute("max","360"),a.setAttribute("type","range"),l.append(d,c),p.append(y,a),e.append(l,p)}return(t==null?void 0:t.type)=="tool-menu"&&(e.style.translate="0 -100%"),e}function K(o,t){let e=document.createElement("div");e.classList.add("confirmation-screen",o.value+"-confirmation");let s=document.createElement("div");s.classList.add("box");let l=document.createElement("h2");l.innerHTML=o.message;let i=document.createElement("ul"),u=document.createElement("div");u.classList.add("overlay"),s.append(l,i),e.append(s,u);for(let{message:h,value:f,call:r}of t){let d=document.createElement("li");d.innerHTML=h,d.classList.add(f),i.append(d),d.addEventListener("click",()=>{r&&r(),e.remove()},{once:!0})}document.body.append(e)}function W(o,t){let e=document.createElement("div");e.classList.add("confirmation-screen",t);let s=document.createElement("h2");s.innerHTML=o;let l=document.createElement("textarea"),i=document.createElement("div");i.classList.add("overlay");let u=document.createElement("div");u.classList.add("box");let h=document.createElement("ul"),f=document.createElement("li");f.classList.add("yes"),f.innerHTML="Confirm";let r=document.createElement("li");return r.innerHTML="Cancel",r.classList.add("no"),h.append(r,f),u.append(s,l,h),e.append(u,i),e}function me(){let o=document.createElement("div");o.classList.add("confirmation-screen","settings-popover");let t=document.createElement("div");t.classList.add("box");let e=document.createElement("div");e.classList.add("overlay");let s=document.createElement("h2");s.innerText="Settings";let l=document.createElement("ul");l.classList.add("options");let i=document.createElement("li"),u=document.createElement("label");u.innerText="Algorithm";let h=document.createElement("select");h.id="algorithm";let f=document.createElement("option");f.value="random",f.innerText="Random Algorithm";let r=document.createElement("option");r.value="monochromatic",r.innerText="Monochromatic";let d=document.createElement("option");d.value="analogous",d.innerText="Analogous";let c=document.createElement("option");c.value="complementary",c.innerText="Complementary";let p=document.createElement("option");p.value="split-complementary",p.innerText="Split Complementary";let y=document.createElement("option");y.value="triadic",y.innerText="Triadic";let a=document.createElement("option");a.value="tetradic",a.innerText="Tetradic";let m=document.createElement("option");m.value="square",m.innerText="Square";let b=document.createElement("option");b.value="randomize",b.innerText="Randomize Colors";let n=document.createElement("ul");n.classList.add("confirmation");let x=document.createElement("li");x.classList.add("yes"),x.innerText="Confirm";let L=document.createElement("li");L.classList.add("no"),L.innerText="Cancel",n.append(L,x),h.append(b,r,d,c,p,y,a,m,f),h.selectedIndex=k.settings.lastColorAlgorithmIndex;let S=document.createElement("li");S.classList.add("horizontal");let w=document.createElement("div"),I=document.createElement("label");I.innerText="Cookies";let Y=document.createElement("label");Y.innerText="That's fine!",Y.setAttribute("for","cookies-ok");let V=document.createElement("label");V.innerText="No thanks.",V.setAttribute("for","cookies-not-ok");let $=document.createElement("div"),z=document.createElement("div");$.classList.add("op"),z.classList.add("op");let N=document.createElement("input");N.id="cookies-ok",N.value="cookies-ok",N.setAttribute("type","radio"),N.classList.add("true");let B=document.createElement("input");return B.id="cookies-not-ok",B.value="cookies-not-ok",B.setAttribute("type","radio"),B.classList.add("false"),k.settings.cookiesOk?N.checked=!0:B.checked=!0,N.addEventListener("change",()=>{N.checked?B.checked=!1:B.checked=!0}),B.addEventListener("change",()=>{B.checked?N.checked=!1:N.checked=!0}),$.append(N,Y),z.append(B,V),S.append(I,w),w.append($,z),i.append(u,h),l.append(i,S),t.append(s,l,n),o.append(e,t),o}let D=document.querySelector(".saved-palettes-wrapper");class ue{constructor(){j(this,"items",[]);this.items=k.savedPalettes.items}draw(t){for(;D.childElementCount>0;)D.lastChild.remove();if(t)for(let s=0;s<t.length;s++){let l=t[s],i=document.createElement("div");i.setAttribute("data-palette-index",s.toString()),i.classList.add("palette-container");let u=document.createElement("div");u.classList.add("palette");let h=document.createElement("div");h.classList.add("options");let f=document.createElement("div");f.classList.add("more");let r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","0 0 100 100");let d=document.createElementNS("http://www.w3.org/2000/svg","use");d.setAttribute("href","#icon-more-horizontal");for(let c=0;c<l.length;c++){let p=l[c],{lum:y}=A(p),a=document.createElement("div");a.setAttribute("data-color-index",c.toString()),a.classList.add("swatch"),a.style.backgroundColor="#"+p,y<.5&&a.classList.add("isLight");let m=document.createElement("h2");m.innerHTML="#"+p,m.classList.add("text"),a.append(m),u.append(a)}r.append(d),f.append(r),h.append(f),i.append(u,h),D.append(i)}let e=document.querySelector(".palettes-page .when-empty");D.childElementCount==0?e.classList.remove("hidden"):e.classList.add("hidden")}addItem(t,e){typeof e=="number"?this.items.splice(e,0,t):this.items.push(t),k.savedPalettes.items=this.items,this.draw(this.items)}removeItem(t){this.items.splice(t,1),k.savedPalettes.items=this.items,this.draw(this.items)}}function F(o){if(o.algorithm.details=="slot"){let t=[];for(let e=0;e<6;e++)t.push(Math.round(g(0,15)).toString(16));return t.join("")}else for(let t of o.slots)if(!t.isLocked){let e=[];for(let s=0;s<6;s++)e.push(Math.round(g(0,15)).toString(16));t.hex=e.join(""),t.sync()}}function X(o,t){if(o.algorithm.details=="slot")if(Math.random()>.5){let e=0,s=0,l=0,i=o.slots[t-2],u=o.slots[t-1],h=o.slots[t],f=o.slots[t+1];if(h){let{h:r,s:d,l:c}=A(h.hex);if(e=r,u){let{s:p,l:y}=A(u.hex);s=d-(d-p)/2,l=c-(c-y)/2}else if(f){let{s:p,l:y}=A(f.hex);s=d-(p-d)/2,l=c-(y-c)/2}else s=d*g(.7,1.3),l=c*g(.7,1.3)}else if(u){let{h:r,s:d,l:c}=A(u.hex);if(e=r,i){let{s:p,l:y}=A(i.hex);s=d+(d-p)/2,l=c+(c-y)/2}else s=d*g(.7,1.3),l=c*g(.7,1.3)}else s=g(.2,1),l=g(.1,.9);return s*=g(.95,1.05),l*=g(.95,1.05),H(e,s,l)}else{let e,s,l,i,u,h,f;for(let{hex:r}of o.slots){let{h:d,s:c,l:p}=A(r);typeof e!="number"&&(e=d),(typeof l!="number"||c>l)&&(l=c),(typeof s!="number"||c<s)&&(s=c),(typeof u!="number"||p>u)&&(u=p),(typeof i!="number"||p<i)&&(i=p)}return h=g(s,l)*g(.95,1.05),f=g(i,u)*g(.95,1.05),H(e,h,f)}else if(o.algorithm.details=="increment"||Math.random()>.5){let e=[],s=g(0,360),l=0,i=0,u=0,h=0,f=0,r=0,d=0,c=0;for(let p of o.slots)p.isLocked||e.push(p);for(let p=0;p<e.length;p++)if(p==0){let y=o.slots[0];l=g(.1,1),i=g(.1,.9),y.hex=H(s,l,i),y.sync(),u=l,h=i,u<.4?f=g(.7,1):u>.6?f=g(.1,.3):u>.5?f=g(.1,.2):f=g(.8,.9),h<.4?r=g(.7,1):h>.6?r=g(.1,.3):h>.5?r=g(.1,.2):r=g(.8,.9),d=(f-u)/o.slots.length,c=(r-h)/o.slots.length}else{let y=o.slots[p];l=u+d*p,i=h+c*p,y.hex=H(s,l,i),y.sync()}}else{let e=g(0,360),s,l,i;for(let u of o.slots)u.isLocked||(s=g(.2,1),l=g(.2,.8),typeof i!="number"&&(e=i=g(0,360)),u.hex=H(e,s,l),u.sync())}}function G(o,t){if(o.algorithm.details=="slot")if(Math.random()>.5){let e=0,s=0,l=0,i=o.slots[t-2],u=o.slots[t-1],h=o.slots[t],f=o.slots[t+1];if(h){let{h:r,s:d,l:c}=A(h.hex);if(u){let{h:p,s:y,l:a}=A(u.hex),m=r-p;m>180?m=r-p-360:m<-180&&(m=r-p+360),e=r-m/2,s=d-(d-y)/2,l=c-(c-a)/2}else if(f){let{h:p,s:y,l:a}=A(f.hex),m=p-r;m>180?m=p-r-360:m<-180&&(m=p-r+360),e=r-m/2,s=d-(y-d)/2,l=c-(a-c)/2}else e=r*g(.7,1.3),s=d*g(.7,1.3),l=c*g(.7,1.3)}else if(u){let{h:r,s:d,l:c}=A(u.hex);if(i){let{h:p,s:y,l:a}=A(i.hex),m=r-p;m>180?m=r-p-360:m<-180&&(m=r-p+360),e=r+m/2,s=d+(d-y)/2,l=c+(c-a)/2}else e=r*g(.7,1.3),s=d*g(.7,1.3),l=c*g(.7,1.3)}else e=g(0,360),s=g(.2,1),l=g(.1,.9);return e*=g(.95,1.05),s*=g(.95,1.05),l*=g(.95,1.05),H(e,s,l)}else{let e,s,l,i,u,h,f,r,d,c,p=Math.random();for(let{hex:y}of o.slots){let{h:a,s:m,l:b}=A(y);if(typeof e!="number")e=a;else if(typeof s!="number"){let n=e,x=n-a;x>180?n-=360:x<-180&&(n+=360),x=n-a,(x<-25||x>25)&&(s=a)}else if(typeof l!="number"){let n=e,x=s,L=n-a,S=x-a;L>180?n-=360:L<-180&&(n+=360),S>180?x-=360:S<-180&&(x+=360),L=n-a,S=x-a,(L>25||L<-25)&&(S>25||S<-25)&&(l=a)}(typeof u!="number"||m>u)&&(u=m),(typeof i!="number"||m<i)&&(i=m),(typeof f!="number"||b>f)&&(f=b),(typeof h!="number"||b<h)&&(h=b)}return l&&p<.333?r=l:s&&p>.666?r=s:r=e,d=g(i,u)*g(.95,1.05),c=g(h,f)*g(.95,1.05),H(r,d,c)}else if(o.algorithm.details=="increment"||Math.random()>.5){let e=0,s=0,l=0,i=0,u=0,h=0,f=0,r=0,d=0,c=0,p=0,y=0;for(let a=0;a<o.slots.length;a++){let m=o.slots[a];if(!m.isLocked)if(!i)e=i=g(0,360),s=u=g(.1,1),l=h=g(.1,.9),m.hex=H(e,s,l),m.sync(),i=e,u=s,h=l,Math.random()>.5?f=e+g(90,120):f=e-g(75,90),u<.4?r=g(.7,1):u>.6?r=g(.1,.3):u>.5?r=g(.1,.2):r=g(.8,.9),h<.4?d=g(.7,1):h>.6?d=g(.1,.3):h>.5?d=g(.1,.2):d=g(.8,.9),c=(f-i)/o.slots.length,p=(r-u)/o.slots.length,y=(d-h)/o.slots.length;else{let b=o.slots[a];e=i+c*a,s=u+p*a,l=h+y*a,b.hex=H(e,s,l),b.sync()}}}else{let e,s,l,i,u,h;for(let f of o.slots)if(!f.isLocked){if(s=g(.2,1),l=g(.2,.8),typeof i!="number")e=i=g(0,360);else if(typeof u!="number")e=u=i+30*g(.975,1.025);else if(typeof h!="number")e=h=i-30*g(.975,1.025);else{let r=Math.random();r<.333?e=i:r>.666?e=u:e=h}f.hex=H(e,s,l),f.sync()}}}function Z(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,u,h,f,r,d=Math.random();for(let{hex:c}of o.slots){let{h:p,s:y,l:a}=A(c);if(typeof t!="number")t=p;else if(typeof e!="number"){let m=t,b=m-p;b>180?m-=360:b<-180&&(m+=360),b=m-p,(b<-90||b>90)&&(e=p)}(typeof l!="number"||y>l)&&(l=y),(typeof s!="number"||y<s)&&(s=y),(typeof u!="number"||a>u)&&(u=a),(typeof i!="number"||a<i)&&(i=a)}return d>.5&&e?h=e*g(.925,1.025):h=t*g(.925,1.025),f=g(s,l)*g(.95,1.05),r=g(i,u)*g(.95,1.05),H(h,f,r)}else{let t,e,s,l,i;for(let u of o.slots)u.isLocked||(e=g(.2,1),s=g(.2,.8),typeof l!="number"?t=l=g(0,360):typeof i!="number"?t=i=l+150*g(.975,1.025):Math.random()<.5?t=l*g(.975,1.025):t=i*g(.975,1.025),u.hex=H(t,e,s),u.sync())}}function Q(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,u,h,f,r,d,c=Math.random();for(let{hex:p}of o.slots){let{h:y,s:a,l:m}=A(p);if(typeof t!="number")t=y;else if(typeof e!="number"){let b=t,n=b-y;n>180?b-=360:n<-180&&(b+=360),n=b-y,(n<-30||n>30)&&(e=y)}else if(typeof s!="number"){let b=t,n=e,x=b-y,L=n-y;x>180?b-=360:x<-180&&(b+=360),L>180?n-=360:L<-180&&(n+=360),x=b-y,L=n-y,(x>30||x<-30)&&(L>30||L<-30)&&(s=y)}(typeof i!="number"||a>i)&&(i=a),(typeof l!="number"||a<l)&&(l=a),(typeof h!="number"||m>h)&&(h=m),(typeof u!="number"||m<u)&&(u=m)}return c<.333&&s?f=s:c>.666&&e?f=e:f=t,r=g(l,i)*g(.95,1.05),d=g(u,h)*g(.95,1.05),H(f,r,d)}else{let t,e,s,l,i,u;for(let h of o.slots)if(!h.isLocked){if(e=g(.2,1),s=g(.2,.8),typeof l!="number")t=l=g(0,360);else if(typeof i!="number")t=i=l+150*g(.975,1.025);else if(typeof u!="number")t=u=l-150*g(.975,1.025);else{let f=Math.random();f<.333?t=l*g(.975,1.025):f>.666?t=i*g(.975,1.025):t=u*g(.975,1.025)}h.hex=H(t,e,s),h.sync()}}}function _(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,u,h,f,r,d,c=Math.random();for(let{hex:p}of o.slots){let{h:y,s:a,l:m}=A(p);if(typeof t!="number")t=y;else if(typeof e!="number"){let b=t,n=b-y;n>180?b-=360:n<-180&&(b+=360),n=b-y,(n<-90||n>90)&&(e=y)}else if(typeof s!="number"){let b=t,n=e,x=b-y,L=n-y;x>180?b-=360:x<-180&&(b+=360),L>180?n-=360:L<-180&&(n+=360),x=b-y,L=n-y,(x>90||x<-90)&&(L>90||L<-90)&&(s=y)}(typeof i!="number"||a>i)&&(i=a),(typeof l!="number"||a<l)&&(l=a),(typeof h!="number"||m>h)&&(h=m),(typeof u!="number"||m<u)&&(u=m)}return c<.333?f=t:c>.666?f=e:f=s,r=g(l,i)*g(.95,1.05),d=g(u,h)*g(.95,1.05),H(f,r,d)}else{let t,e,s,l,i,u;for(let h of o.slots)if(!h.isLocked){if(e=g(.2,1),s=g(.2,.8),typeof l!="number")t=l=g(0,360);else if(typeof i!="number")t=i=l+120;else if(typeof u!="number")t=u=l-120;else{let f=Math.random();f<.333?t=l:f<.666?t=i:t=u}h.hex=H(t,e,s),h.sync()}}}function ee(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,u,h,f,r,d,c,p=Math.random();for(let{hex:y}of o.slots){let{h:a,s:m,l:b}=A(y);if(typeof t!="number")t=a;else if(typeof e!="number"){let n=t,x=n-a;x>180?n-=360:x<-180&&(n+=360),x=n-a,(x<-45||x>45)&&(e=a)}else if(typeof s!="number"){let n=t,x=e,L=n-a,S=x-a;L>180?n-=360:L<-180&&(n+=360),S>180?x-=360:S<-180&&(x+=360),L=n-a,S=x-a,(L>45||L<-45)&&(S>45||S<-45)&&(s=a)}else if(typeof l!="number"){let n=t,x=e,L=s,S=n-a,w=x-a,I=L-a;S>180?n-=360:S<-180&&(n+=360),w>180?x-=360:w<-180&&(x+=360),I>180?L-=360:I<-180&&(L+=360),S=n-a,w=x-a,I=L-a,(S>45||S<-45)&&(w>45||w<-45)&&(I>45||I<-45)&&(l=a)}(typeof u!="number"||m>u)&&(u=m),(typeof i!="number"||m<i)&&(i=m),(typeof f!="number"||b>f)&&(f=b),(typeof h!="number"||b<h)&&(h=b)}return typeof l=="number"&&p<.25?r=l:typeof s=="number"&&p<.5?r=s:typeof e=="number"&&p<.75?r=e:r=t,d=g(i,u)*g(.95,1.05),c=g(h,f)*g(.95,1.05),H(r,d,c)}else{let t,e,s,l,i,u,h;for(let f of o.slots)if(!f.isLocked){if(e=g(.2,1),s=g(.2,.8),typeof l!="number")t=l=g(0,360);else if(typeof i!="number")t=i=l+60;else if(typeof u!="number")t=u=l-120;else if(typeof h!="number")t=h=l+180;else{let r=Math.random();r<.25?t=l:r>.5?t=i:r>.75?t=u:t=h}f.hex=H(t,e,s),f.sync()}}}function te(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,u,h,f,r,d,c,p=Math.random();for(let{hex:y}of o.slots){let{h:a,s:m,l:b}=A(y);if(typeof t!="number")t=a;else if(typeof e!="number"){let n=t,x=n-a;x>180?n-=360:x<-180&&(n+=360),x=n-a,(x<-85||x>85)&&(e=a)}else if(typeof s!="number"){let n=t,x=e,L=n-a,S=x-a;L>180?n-=360:L<-180&&(n+=360),S>180?x-=360:S<-180&&(x+=360),L=n-a,S=x-a,(L<-85||L>85)&&(S<-85||S>85)&&(s=a)}else if(typeof l!="number"){let n=t,x=e,L=s,S=n-a,w=x-a,I=L-a;S>180?n-=360:S<-180&&(n+=360),w>180?x-=360:w<-180&&(x+=360),I>180?L-=360:I<-180&&(L+=360),S=n-a,w=x-a,I=L-a,(S<-85||S>85&&w<-85||w>85&&(I<-85||I>85))&&(l=a)}(typeof u!="number"||m>u)&&(u=m),(typeof i!="number"||m<i)&&(i=m),(typeof f!="number"||b>f)&&(f=b),(typeof h!="number"||b<h)&&(h=b)}return typeof l=="number"&&p<.25?r=l:typeof s=="number"&&p<.5?r=s:typeof e=="number"&&p<.75?r=e:r=t,d=g(i,u)*g(.95,1.05),c=g(h,f)*g(.95,1.05),H(r,d,c)}else{let t,e,s,l,i,u,h;for(let f of o.slots)if(!f.isLocked){if(e=g(.2,1),s=g(.2,.8),typeof l!="number")t=l=g(0,360);else if(typeof i!="number")t=i=l+60;else if(typeof u!="number")t=u=l-120;else if(typeof h!="number")t=h=l+180;else{let r=Math.random();r<.25?t=l:r>.5?t=i:r>.75?t=u:t=h}f.hex=H(t,e,s),f.sync()}}}function fe(o,t){switch(Math.round(g(0,7))){case 0:return F(o);case 1:return X(o,t);case 2:default:return G(o,t);case 3:return Z(o);case 4:return Q(o);case 5:return _(o);case 6:return ee(o);case 7:return te(o)}}const pe=[F,X,G,Z,Q,_,ee,te,fe];let he=document.getElementById("palette");class ye{constructor(){j(this,"slots",[]);j(this,"plus",{palette:this,disabled:!1,active:!1,show(t){if(!this.active){let e=this.render(t.toString()),s=this.palette.slots[t];s?document.getElementById(s.id).after(e):(s=this.palette.slots[t+1],document.getElementById(s.id).before(e)),this.active=!0}},hide(){var t;this.active&&((t=document.getElementById("plus-button"))==null||t.parentElement.parentElement.remove(),this.active=!1)},render(t){let e=document.createElement("div");e.classList.add("plus-container");let s=document.createElement("div");s.classList.add("circle");let l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("data-color-index",t),l.setAttribute("viewBox","0 0 100 100"),l.id="plus-button";let i=document.createElementNS("http://www.w3.org/2000/svg","use");return i.setAttribute("href","#icon-plus-button"),i.setAttribute("viewBox","0 0 100 100"),l.append(i),s.append(l),e.append(s),e}});j(this,"algorithm",{list:pe,get(t){t=="slot"?this.details="slot":this.details="";let e=k.settings.lastColorAlgorithmIndex;return typeof e!="number"&&(k.settings={lastColorAlgorithmIndex:1}),this.list[e]},details:"",direction:{h:0,s:0,l:0},preference:{h:void 0,s:void 0,l:void 0}})}removeSlot(t,e){e||(e={animations:!0});let s=t.data+1;for(let i=s;i<this.slots.length;i++)this.slots[i].data--;let l=document.getElementById(t.id);if(this.slots.splice(t.data,1),e.animations==!0){let i=function(){l.remove(),l.removeEventListener("animationend",i),l.removeEventListener("animationcancel",i)};l.classList.add("deinit"),l.addEventListener("animationend",i),l.addEventListener("animationcancel",i)}else l.remove();return t}addSlot(t,e){var u;let s={palette:this,hex:t.hex,isLocked:typeof t.isLocked=="boolean"?t.isLocked:!1,id:t.id||ce(),index:typeof t.index!="number"?this.slots.length:t.index,get data(){var f;let h=parseInt((f=document.getElementById(this.id))==null?void 0:f.getAttribute("data-color-index"));return typeof h=="number"?h:this.data=this.index},set data(h){var f;(f=document.getElementById(this.id))==null||f.setAttribute("data-color-index",h.toString()),this.index=h},generate(){this.hex=this.palette.algorithm.get("slot")(this.palette,this.index),this.sync()},sync(){let h=document.getElementById(this.id);if(this.hex){let{lum:f}=A(this.hex);f<.5?h.classList.add("isLight"):h.classList.remove("isLight"),h.style.backgroundColor="#"+this.hex,h.getElementsByClassName("hex")[0].innerHTML="#"+this.hex}}};s.hex||(s.hex=this.algorithm.get("slot")(this,s.index));let l=this.createSwatch(s,e),i=document.getElementById((u=this.slots[s.index-1])==null?void 0:u.id);i?i.after(l):he.prepend(l),s.data=s.index,this.slots.splice(s.index,0,s);for(let h=s.index+1;h<this.slots.length;h++)this.slots[h].data++;return s}createSwatch(t,e){e||(e={animations:!0});let s=document.createElement("div");if(s.classList.add("swatch"),s.setAttribute("data-color-index",t.data),s.id=t.id,t.hex){s.style.backgroundColor="#"+t.hex;let{lum:b}=A(t.hex);b<.5?s.classList.add("isLight"):s.classList.remove("isLight")}if(e.animations==!0){let b=function(){s.classList.remove("init"),s.removeEventListener("animationend",b),s.removeEventListener("animationcancel",b)};s.classList.add("init"),s.addEventListener("animationend",b),s.addEventListener("animationcancel",b)}let l=document.createElement("div");l.classList.add("options");let i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("icon","x"),i.setAttribute("viewBox","0 0 100 100");let u=document.createElementNS("http://www.w3.org/2000/svg","use");u.setAttribute("href","#icon-x");let h=document.createElementNS("http://www.w3.org/2000/svg","use");h.setAttribute("viewBox","0 0 100 100"),h.setAttribute("href","#icon-lock-body");let f=document.createElementNS("http://www.w3.org/2000/svg","use");f.setAttribute("viewBox","0 0 100 100"),f.setAttribute("href","#icon-lock-arm");let r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","0 0 100 100"),r.classList.add("icon","lock"),t.isLocked&&r.classList.add("locked");let d=document.createElement("div");d.classList.add("info");let c=document.createElement("h2");c.classList.add("hex"),c.innerHTML="#"+t.hex;let p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.classList.add("icon"),p.setAttribute("viewBox","0 0 100 100");let y=document.createElementNS("http://www.w3.org/2000/svg","use");y.setAttribute("href","#icon-copy");let a=document.createElement("div");a.classList.add("detector","left");let m=document.createElement("div");return m.classList.add("detector"),i.append(u),r.append(f,h),p.append(y),d.append(c,p),l.append(i,r,d),s.append(l,a,m),s}generate(t){let e={animations:!1};if(t)if(t.length==this.slots.length)for(let s=0;s<t.length;s++)this.slots[s].hex=t[s],this.slots[s].sync();else{for(let s of this.slots)document.getElementById(s.id).remove();this.slots=[];for(let s=0;s<t.length;s++)this.addSlot({index:s,hex:t[s]},e)}else if(this.slots.length>0)this.algorithm.get()(this);else{for(let s=0;s<5;s++)this.addSlot({},e);this.algorithm.get()(this)}return this.slots}}class ge{constructor(t){j(this,"routes");j(this,"loadContent",t=>{if(t){let{base:e,ids:s}=t;typeof e!="string"&&(e=t);let l=this.routes.get(e);s?l(s):l()}else this.routes.get("404")()});j(this,"routeToURL",(t,e)=>{let s=this.deconstructURL(t,e),{base:l,ids:i}=s;this.routes.has(l)?l==="create"?i?this.idsAreValid(i)?this.loadContent(s):this.loadContent():this.loadContent(s):this.loadContent(s):this.loadContent()});j(this,"navigateTo",(t,e,s)=>{e=e||!1,e?history.replaceState("","",t):history.pushState("","","/polychrome"+t),this.routeToURL(t,s)});this.routes=new Map(t)}deconstructURL(t,e){let s=t.replace(/^\//,"").replace(/\/$/,"").split("/");return e?{site:s[0],base:s[1]||"",ids:s[2]?s[2].split("-"):null}:{base:s[0],ids:s[1]?s[1].split("-"):null}}idsAreValid(t){for(let e of t)if(!/^[a-f0-9]{6}$/.test(e)||t.length>8)return!1;return!0}}function ve(){document.querySelector("#palette").onclick=f=>t(f),document.querySelector("#palette").ontouchend=f=>t(f);let o=!1;async function t(f){let r=f.target;if(o)return;f.pointerType!="mouse"&&(o=!0,setTimeout(()=>{o=!1},75));let d=r.closest(".plus-container svg");if(d){const{ids:p}=q.deconstructURL(location.pathname),y=parseInt(d.getAttribute("data-color-index"));let a=v.addSlot({index:y+1});p.splice(y+1,0,a.hex),history.replaceState("","",p.join("-")),v.plus.hide(),C.create.push({undo(){v.removeSlot(a,{animations:!1}),p.splice(y+1,1),history.replaceState("","",p.join("-"))},redo(){v.addSlot(a,{animations:!1}),p.splice(y+1,0,a.hex),history.replaceState("","",p.join("-"))}}),v.slots.length==8&&v.plus.hide();return}let c=r.closest(".lock");if(c){let p=r.closest(".swatch"),y=parseInt(p.getAttribute("data-color-index")),a=v.slots[y];a.isLocked=!a.isLocked,c.classList.toggle("locked"),C.create.push({undo(){let m=v.slots[y],b=document.getElementById(m.id);m.isLocked=!m.isLocked,b.querySelector(".lock").classList.toggle("locked")},redo(){let m=v.slots[y],b=document.getElementById(m.id);m.isLocked=!m.isLocked,b.querySelector(".lock").classList.toggle("locked")}});return}if(r.closest(".x")){let p=r.closest(".swatch"),y=v.slots[parseInt(p.getAttribute("data-color-index"))],{ids:a}=q.deconstructURL(location.pathname);v.removeSlot(y),a.splice(y.data,1),history.replaceState("","",a.join("-")),C.create.push({undo(){v.addSlot(y,{animations:!1}),a.splice(y.data,0,y.hex),history.replaceState("","",a.join("-"))},redo(){v.removeSlot(y,{animations:!1}),a.splice(y.data,1),history.replaceState("","",a.join("-"))}});return}if(r.closest(".info")){let p=r.closest(".swatch"),y=v.slots[parseInt(p.getAttribute("data-color-index"))];if(r.closest(".hex")){let a=P([{id:""}],{type:"color-picker",hex:y.hex});p.append(a);return}if(r.closest(".icon")){await navigator.clipboard.writeText(y.hex).then(()=>{let a=E("Copied hex to clipboard!",{pos:[f.x,f.y]});a.classList.add("at-mouse-pos"),document.body.append(a)},()=>{let a=E("Copy to clipboard failed.",{pos:[f.x,f.y]});a.classList.add("at-mouse-pos"),document.body.append(a)});return}}}document.querySelector(".saved-palettes-wrapper").ontouchend=f=>e(f),document.querySelector(".saved-palettes-wrapper").onclick=f=>e(f);async function e(f){let r=f.target;if(o)return;f.pointerType!="mouse"&&(o=!0,setTimeout(()=>{o=!1},75));let d=r.closest(".swatch");if(d){let p=d.parentElement.parentElement;await navigator.clipboard.writeText(T.items[parseInt(p.getAttribute("data-palette-index"))][parseInt(d.getAttribute("data-color-index"))]).then(()=>{let y=E("Copied hex to clipboard!",{pos:[f.x,f.y]});y.classList.add("at-mouse-pos"),document.body.append(y)},()=>{let y=E("Copy to clipboard failed.",{pos:[f.x,f.y]});y.classList.add("at-mouse-pos"),document.body.append(y)});return}if(r.closest("#palettes-open")){q.navigateTo("/create/"+k.savedPalettes.items[parseInt(r.closest(".palette-container").getAttribute("data-palette-index"))].join("-"));return}if(r.closest("#palettes-copy")){await navigator.clipboard.writeText(T.items[parseInt(r.closest(".palette-container").getAttribute("data-palette-index"))].join(`
`)).then(()=>{let p=E("Copied hex to clipboard!",{pos:[f.x,f.y]});p.classList.add("at-mouse-pos"),document.body.append(p)},()=>{let p=E("Copy to clipboard failed.",{pos:[f.x,f.y]});p.classList.add("at-mouse-pos"),document.body.append(p)});return}if(r.closest("#palettes-remove")){let p=parseInt(r.closest(".palette-container").getAttribute("data-palette-index")),y=T.items[p],a={undo(){T.addItem(y,p)},redo(){T.removeItem(p)}};C.palettes.push(a),T.removeItem(p);let m=E("Removed palette.");document.body.append(m);return}let c=r.closest(".more");if(c){let p=P([{content:"Open",id:"palettes-open"},{content:"Remove",id:"palettes-remove"},{content:"Copy",id:"palettes-copy"}],{type:"menu"});c.parentElement.append(p);return}}let s=document.querySelector(".toolbar");s.ontouchend=f=>l(f),s.onclick=f=>l(f);async function l(f){if(o)return;f.pointerType!="mouse"&&(o=!0,setTimeout(()=>{o=!1},75));let r=f.target;if(r.closest(".undo")){q.deconstructURL(location.pathname,!0).base=="create"?C.create.undo():C.palettes.undo();return}if(r.closest(".redo")){q.deconstructURL(location.pathname,!0).base=="create"?C.create.redo():C.palettes.redo();return}if(r.closest(".copy")){if(q.deconstructURL(location.pathname,!0).base=="create"){let d=[];for(let{hex:c}of v.slots)d.push(c);await navigator.clipboard.writeText(d.join(`
`)).then(()=>{let c=E("Copied palette!");document.body.append(c)},()=>{let c=E("Failed to copy.");document.body.append(c)})}else{let d=[];for(let c of T.items)d.push(c.join("-"));await navigator.clipboard.writeText(d.join(`,
`)).then(()=>{let c=E("Copied palettes to clipboard!");document.body.append(c)},()=>{let c=E("Copy to clipboard failed.");document.body.append(c)})}return}if(r.closest(".generate")){let d=[];for(let{hex:p}of v.slots)d.push(p);v.generate();let c=[];for(let{hex:p}of v.slots)c.push(p);history.replaceState("","","/create/"+c.join("-")),d&&C.create.push({undo:()=>{v.generate(d),history.replaceState("","","/create/"+d.join("-"))},redo:()=>{v.generate(c),history.replaceState("","","/create/"+c.join("-"))}});return}if(r.closest(".save")){if(!k.settings.cookiesOk){document.body.append(E("You'll need to enable cookies in settings for that feature."));return}let d=[];for(let{hex:p}of v.slots)d.push(p);T.addItem(d);let c=E("Saved palette!");document.body.append(c);return}if(r.closest(".remove-all")){K({message:"Are you sure you want to delete all of your palettes? You won't be able to undo this.",value:"remove-all"},[{message:"Yes, delete away.",value:"yes",call(){for(let c=0;T.items.length;c++)T.removeItem(0);let d=E("All palettes removed.");document.body.append(d)}},{message:"No, please don't delete my stuff!",value:"no"}]);return}if(r.closest(".import")){if(q.deconstructURL(location.pathname,!0).base=="create"){let d=W("Paste hex code palette below!","import-create");document.body.append(d)}else{if(!k.settings.cookiesOk){document.body.append(E("You'll need to enable cookies in settings for that feature."));return}let d=W("Paste hex code palette below! Separate palettes by commas.","import-palettes");document.body.append(d)}return}r.closest(".more")&&(q.deconstructURL(location.pathname,!0).base=="create"?s.append(P([{content:"Save",class:"save"},{content:"Import",class:"import"},{content:"Copy",class:"copy"}],{type:"tool-menu"})):s.append(P([{content:"Remove All",class:"remove-all"},{content:"Import",class:"import"},{content:"Copy All",class:"copy"}],{type:"tool-menu"})))}let i=document.querySelector(".main-nav"),u=document.querySelector(".main-header");window.ontouchend=f=>h(f),window.onclick=f=>h(f);async function h(f){var p,y;if(o)return;f.pointerType!="mouse"&&(o=!0,setTimeout(()=>{o=!1},75));let r=f.target;if(r.closest(".clear-overlay")){document.querySelector(".popover").remove(),document.querySelector(".clear-overlay").remove();return}let d=r.closest("a");if(d){f.preventDefault();let a=d.getAttribute("href");i.classList.remove("visible"),(p=document.querySelector(".overlay"))==null||p.remove(),document.body.style.overflowY="",a!=location.pathname&&q.navigateTo(a);return}if(r.closest("#nav-button"))if(i.classList.toggle("visible"),i.classList.contains("visible")){let a=document.createElement("div");a.classList.add("overlay"),u.append(a),document.body.style.overflowY="hidden",v.plus.hide(),a.addEventListener("click",()=>{a.remove(),i.classList.remove("visible"),document.body.style.overflowY=""},{once:!0}),document.body.style.overflowY="hidden"}else(y=u.querySelector(".overlay"))==null||y.remove(),document.body.style.overflowY="";if(r.closest("#settings")){let a=me();document.body.append(a);return}let c=r.closest(".confirmation-screen");if(c){if(r.closest(".overlay")&&(c==document.querySelector(".cookies")&&(k.settings={cookiesOk:!0},k.info={firstVisit:!0}),c.remove()),c==document.querySelector(".remove-all-confirmation")){if(r.closest(".yes")){for(let m=0;T.items.length;m++)T.removeItem(0);c.remove();let a=E("All palettes removed.");document.body.append(a)}else r.closest(".no")&&c.remove();return}if(c==document.querySelector(".import-create")){let a=q.deconstructURL(location.pathname,!0).ids,m=r.closest(".yes"),b=r.closest(".no");if(m){let n=c.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-",""),x=!(/[g-z~`!#$%\^&*+=\[\]\\';,/{}|\\":<>\?]/g.test(n)||n.length==0||n.length%6!=0),L="Invalid values entered. Try again.";if(x){L="Successfully imported values.";let w=n.match(/.{1,6}/g);v.generate(w),C.create.push({undo(){v.generate(a)},redo(){v.generate(w)}})}let S=E(L);document.body.append(S),c.remove()}else b&&c.remove();return}if(c==document.querySelector(".import-palettes")){let a=r.closest(".yes"),m=r.closest(".no");if(a){let b=c.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-","").replaceAll("#","").toLowerCase(),n="Invalid values entered. Try again.",x=!(/[g-z~`!#$%\^&*+=\[\]\\';/{}|\\":<>\?]/g.test(b)||b.replaceAll(",","").length%6!=0||b.length==0);console.log(b.replaceAll(",","").length%6!=0);let L=b.split(",");for(let w of L)(w.length/6>8||!(w.length>=6))&&(x=!1);if(x){let w=0;for(let I of L)w++,T.addItem(I.match(/.{1,6}/g));n="Successfully imported values.",C.palettes.push({undo(){for(let I=w;I>0;I--)T.removeItem(T.items.length-1)},redo(){for(let I of L)T.addItem(I.match(/.{1,6}/g))}})}let S=E(n);document.body.append(S),c.remove()}else m&&c.remove();return}if(c==document.querySelector(".settings-popover")){let a=r.closest(".yes"),m=r.closest(".no");if(a){let b=k.settings;b.lastColorAlgorithmIndex=c.querySelector("#algorithm").selectedIndex,b.cookiesOk=c.querySelector("#cookies-ok").checked,k.settings=b;let n="Changes saved.";c.remove();let x=E(n);document.body.append(x)}else if(m){let b="Changes discarded.";c.remove();let n=E(b);document.body.append(n)}return}if(c==document.querySelector(".cookies-confirmation")){let a=r.closest(".yes"),m=r.closest(".no");if(a){k.settings={cookiesOk:!0},c.remove();let b=E("Thanks, enjoy the site! :)");document.body.append(b)}else if(m){k.settings={cookiesOk:!1},c.remove();let b=E("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(b)}return}}}}function be(){window.addEventListener("scroll",o,!1),window.addEventListener("touchmove",o,{passive:!1});function o(t){q.deconstructURL(location.pathname).base=="create"&&(t.preventDefault(),t.stopPropagation())}window.ontouchstart=t=>{let e=t.targetTouches[0].target.closest(".create-page .swatch");if(e&&!t.targetTouches[0].target.closest(".options div")&&!t.targetTouches[0].target.closest(".options svg")){let s=function(y){if(y.preventDefault(),l){let a=y.touches[0].clientY-f;e.style.translate="0 "+a+"px";let m=e,b=v.slots.length-r-1;if(p=0,c=0,a>0)for(let n=0;n<b;n++)p=(n*2+1)*u,m=m.nextElementSibling,a>p?(c++,m.style.translate!="0px -100%"&&(m.style.translate="0 -100%")):m.style.translate=="0px -100%"&&(m.style.translate="0 0");else for(let n=0;n<r;n++)p=(n*2+1)*u,m=m.previousElementSibling,-a>p?(c--,m.style.translate!="0px 100%"&&(m.style.translate="0 100%")):m.style.translate=="0px 100%"&&(m.style.translate="0 0")}else{let a=y.touches[0].clientX-h;e.style.translate=a+"px";let m=e,b=v.slots.length-r-1;if(p=0,c=0,a>0)for(let n=0;n<b;n++)p=(n*2+1)*i,m=m.nextElementSibling,a>p?(c++,m.style.translate!="-100%"&&(m.style.translate="-100%")):m.style.translate=="-100%"&&(m.style.translate="");else for(let n=0;n<r;n++)p=(n*2+1)*i,m=m.previousElementSibling,-a>p?(c--,m.style.translate!="100%"&&(m.style.translate="100%")):m.style.translate=="100%"&&(m.style.translate="")}},l=!1;document.body.classList.contains("vertical")&&(l=!0),v.plus.disabled=!0,v.plus.hide(),e.classList.add("is-dragging");let i=e.clientWidth/2,u=e.clientHeight/2,h=t.touches[0].clientX,f=t.touches[0].clientY,r=parseInt(e.getAttribute("data-color-index")),d=v.slots[r],c=0,p;window.addEventListener("touchmove",s,{passive:!1}),window.addEventListener("touchend",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("touchmove",s),e.style.translate=`${l?"0 ":""}${c*100}%`;function y(){e.removeEventListener("transitionend",y),e.removeEventListener("transitioncancel",y),e.classList.remove("is-released");let a=e;for(let n=0;n<c;n++)v.slots.splice(d.data,1),v.slots.splice(d.data+1,0,d),d.data++,a=a.nextElementSibling,v.slots[d.data-1].data--;for(let n=0;n>c;n--)v.slots.splice(d.data,1),v.slots.splice(d.data-1,0,d),d.data--,a=a.previousElementSibling,v.slots[d.data+1].data++;let m=e.cloneNode(!0);c>0?(a.after(m),e.remove()):c<0&&(a.before(m),e.remove()),e.style.translate="";let b=[];for(let n of v.slots){let x=document.getElementById(n.id);x.style.transition="transform 0s",x.style.translate="",setTimeout(()=>{x.style.transition=""},1),b.push(n.hex)}e=m,history.replaceState("","",b.join("-")),v.plus.disabled=!1,c&&C.create.push({undo(){v.plus.hide();let n=e=document.getElementById(d.id);for(let L=0;L<-c;L++){v.slots.splice(d.data,1),v.slots.splice(d.data+1,0,d),d.data++,n=n.nextElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S-1).toString())}for(let L=0;L>-c;L--){v.slots.splice(d.data,1),v.slots.splice(d.data-1,0,d),d.data--,n=n.previousElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S+1).toString())}m=e.cloneNode(!0),-c>0?(n.after(m),e.remove()):-c<0&&(n.before(m),e.remove());let x=[];for(let L of v.slots)x.push(L.hex);history.replaceState("","",x.join("-"))},redo(){v.plus.hide();let n=e=document.getElementById(d.id);for(let L=0;L<c;L++)v.slots.splice(d.data,1),v.slots.splice(d.data+1,0,d),d.data++,n=n.nextElementSibling,r=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(r-1).toString());for(let L=0;L>c;L--)v.slots.splice(d.data,1),v.slots.splice(d.data-1,0,d),d.data--,n=n.previousElementSibling,r=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(r+1).toString());m=e.cloneNode(!0),c>0?(n.after(m),e.remove()):c<0&&(n.before(m),e.remove());let x=[];for(let L of v.slots)x.push(L.hex);history.replaceState("","",x.join("-"))}})}e.addEventListener("transitionend",y),e.addEventListener("transitioncancel",y)},{once:!0})}},onmousedown=t=>{let e=t.target.closest(".create-page .swatch");if(e&&!t.target.closest(".options div")&&!t.target.closest(".options svg")){let s=function(y){if(l){let a=y.y-f;e.style.translate="0 "+a+"px";let m=e,b=v.slots.length-r-1;if(p=0,c=0,a>0)for(let n=0;n<b;n++)p=(n*2+1)*u,m=m.nextElementSibling,a>p?(c++,m.style.translate!="0px -100%"&&(m.style.translate="0px -100%")):m.style.translate=="0px -100%"&&(m.style.translate="");else for(let n=0;n<r;n++)p=(n*2+1)*u,m=m.previousElementSibling,-a>p?(c--,m.style.translate!="0px 100%"&&(m.style.translate="0px 100%")):m.style.translate=="0px 100%"&&(m.style.translate="")}else{let a=y.x-h;e.style.translate=a+"px";let m=e,b=v.slots.length-r-1;if(p=0,c=0,a>0)for(let n=0;n<b;n++)p=(n*2+1)*i,m=m.nextElementSibling,a>p?(c++,m.style.translate!="-100%"&&(m.style.translate="-100%")):m.style.translate=="-100%"&&(m.style.translate="");else for(let n=0;n<r;n++)p=(n*2+1)*i,m=m.previousElementSibling,-a>p?(c--,m.style.translate!="100%"&&(m.style.translate="100%")):m.style.translate=="100%"&&(m.style.translate="")}},l=!1;document.body.classList.contains("vertical")&&(l=!0),v.plus.disabled=!0,v.plus.hide(),e.classList.add("is-dragging");let i=e.clientWidth/2,u=e.clientHeight/2,h=t.x,f=t.y,r=parseInt(e.getAttribute("data-color-index")),d=v.slots[r],c=0,p;addEventListener("mousemove",s),addEventListener("mouseup",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("mousemove",s),e.style.translate=`${l?"0 ":""}${c*100}%`;function y(){e.removeEventListener("transitionend",y),e.removeEventListener("transitioncancel",y),e.classList.remove("is-released");let a=e;for(let n=0;n<c;n++)v.slots.splice(d.data,1),v.slots.splice(d.data+1,0,d),d.data++,a=a.nextElementSibling,v.slots[d.data-1].data--;for(let n=0;n>c;n--)v.slots.splice(d.data,1),v.slots.splice(d.data-1,0,d),d.data--,a=a.previousElementSibling,v.slots[d.data+1].data++;let m=e.cloneNode(!0);c>0?(a.after(m),e.remove()):c<0&&(a.before(m),e.remove()),e.style.translate="";let b=[];for(let n of v.slots){let x=document.getElementById(n.id);x.style.transition="transform 0s",x.style.translate="",setTimeout(()=>{x.style.transition=""},1),b.push(n.hex)}e=m,history.replaceState("","",b.join("-")),v.plus.disabled=!1,c&&C.create.push({undo(){v.plus.hide();let n=e=document.getElementById(d.id);for(let L=0;L<-c;L++){v.slots.splice(d.data,1),v.slots.splice(d.data+1,0,d),d.data++,n=n.nextElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S-1).toString())}for(let L=0;L>-c;L--){v.slots.splice(d.data,1),v.slots.splice(d.data-1,0,d),d.data--,n=n.previousElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S+1).toString())}m=e.cloneNode(!0),-c>0?(n.after(m),e.remove()):-c<0&&(n.before(m),e.remove());let x=[];for(let L of v.slots)x.push(L.hex);history.replaceState("","",x.join("-"))},redo(){v.plus.hide();let n=e=document.getElementById(d.id);for(let L=0;L<c;L++)v.slots.splice(d.data,1),v.slots.splice(d.data+1,0,d),d.data++,n=n.nextElementSibling,r=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(r-1).toString());for(let L=0;L>c;L--)v.slots.splice(d.data,1),v.slots.splice(d.data-1,0,d),d.data--,n=n.previousElementSibling,r=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(r+1).toString());m=e.cloneNode(!0),c>0?(n.after(m),e.remove()):c<0&&(n.before(m),e.remove());let x=[];for(let L of v.slots)x.push(L.hex);history.replaceState("","",x.join("-"))}})}e.addEventListener("transitionend",y),e.addEventListener("transitioncancel",y)},{once:!0}),ondragstart=()=>!1}}}let xe=document.querySelector(".main-nav");function Le(){onkeydown=o=>{var t,e;if(document.querySelector(".confirmation-screen")){if(o.key==="Escape"){(t=document.querySelector(".confirmation-screen"))==null||t.remove();return}return}if(o.metaKey||o.ctrlKey){let{base:s}=q.deconstructURL(location.pathname,!0);if(o.key==="z"||o.key==="Z")if(s==="palettes"){o.shiftKey?C.palettes.redo():C.palettes.undo();return}else{o.shiftKey?C.create.redo():C.create.undo();return}if(s==="create"){let l=parseInt(o.key);if(l>=0&&l<=9){o.preventDefault();let i=v.slots[l-1]||v.slots[v.slots.length-1],u=document.getElementById(i.id);C.create.push({undo(){let h=v.slots[l-1]||v.slots[v.slots.length-1],f=document.getElementById(h.id);h.isLocked=!h.isLocked,f.querySelector(".lock").classList.toggle("locked")},redo(){let h=v.slots[l-1]||v.slots[v.slots.length-1],f=document.getElementById(h.id);h.isLocked=!h.isLocked,f.querySelector(".lock").classList.toggle("locked")}}),i.isLocked=!i.isLocked,u.querySelector(".lock").classList.toggle("locked");return}}}if(o.key===" "){let{base:s}=q.deconstructURL(location.pathname,!0);if(s==="create"){o.preventDefault();let l=[];for(let{hex:u}of v.slots)l.push(u);v.generate();let i=[];for(let{hex:u}of v.slots)i.push(u);history.replaceState("","","/polychrome/create/"+i.join("-")),C.create.push({undo:()=>{v.generate(l),history.replaceState("","","/polychrome/create/"+l.join("-")),v.plus.hide()},redo:()=>{v.generate(i),history.replaceState("","","/polychrome/create/"+i.join("-"))}})}return}if(o.key==="Escape"){xe.classList.remove("visible"),(e=document.querySelector(".overlay"))==null||e.remove();return}//! NOT DONE
if(o.key==="Enter"){let s=document.activeElement;console.log(s);return}o.key}}let v=new ye,T=new ue,q=new ge([["",R("Home",document.getElementById("landing-page"))],["palettes",R("Palettes",document.getElementById("palettes-page"),T)],["create",R("Create",document.getElementById("create-page"),v)],["404",R("404 Not Found",document.getElementById("not-found-page"))]]);q.routeToURL(location.pathname,!0);setTimeout(()=>{document.querySelector(":root").style.display="initial",window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")},200);onpopstate=()=>q.navigateTo(location.pathname,!0,!0);ve();be();Le();onmouseover=o=>{if(!v.plus.disabled){const t=o.target,e=t.closest(".swatch");if(e)if(t.closest(".detector")&&v.slots.length<8){const l=t.closest(".left");let i=parseInt(e.getAttribute("data-color-index"));l&&i--,v.plus.show(i)}else v.plus.hide()}};k.info.firstVisit&&K({message:"This site relies on local storage and cookies to save palettes.",value:"cookies"},[{message:"Sure, sounds good to me.",value:"yes",call(){k.info={firstVisit:!1},k.settings={cookiesOk:!0};let o=E("Thanks, enjoy the site! :)");document.body.append(o)}},{message:"No thanks, I don't want to save palettes.",value:"no",call(){k.info={firstVisit:!1},k.settings={cookiesOk:!1};for(let t=0;t<T.items.length;t++)T.removeItem(0);let o=E("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(o)}}]);onresize=()=>{window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")};(navigator.userAgent.includes("Android")||navigator.userAgent.includes("like Mac"))&&document.body.classList.add("mobile");
