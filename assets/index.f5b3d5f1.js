var re=Object.defineProperty;var de=(o,e,t)=>e in o?re(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var P=(o,e,t)=>(de(o,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();let V;const ce=new Uint8Array(16);function ue(){if(!V&&(V=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!V))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return V(ce)}const B=[];for(let o=0;o<256;++o)B.push((o+256).toString(16).slice(1));function me(o,e=0){return(B[o[e+0]]+B[o[e+1]]+B[o[e+2]]+B[o[e+3]]+"-"+B[o[e+4]]+B[o[e+5]]+"-"+B[o[e+6]]+B[o[e+7]]+"-"+B[o[e+8]]+B[o[e+9]]+"-"+B[o[e+10]]+B[o[e+11]]+B[o[e+12]]+B[o[e+13]]+B[o[e+14]]+B[o[e+15]]).toLowerCase()}const fe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),J={randomUUID:fe};function pe(o,e,t){if(J.randomUUID&&!e&&!o)return J.randomUUID();o=o||{};const l=o.random||(o.rng||ue)();if(l[6]=l[6]&15|64,l[8]=l[8]&63|128,e){t=t||0;for(let s=0;s<16;++s)e[t+s]=l[s];return e}return me(l)}const he=document.title;function H(o){let e=parseInt(o[0]+o[1],16)/255,t=parseInt(o[2]+o[3],16)/255,l=parseInt(o[4]+o[5],16)/255,s=Math.max(e,t,l),i=Math.min(e,t,l),u,p,m=e*.299+t*.587+l*.114,a=(s+i)/2;if(s==i)u=p=0;else{let d=s-i;switch(p=a>.5?d/(2-s-i):d/(s+i),s){case e:u=(t-l)/d+(t<l?6:0);break;case t:u=(l-e)/d+2;break;default:u=(e-t)/d+4;break}u=u*60}return{r:e,g:t,b:l,h:u,s:p,l:a,lum:m}}function C(o,e,t){o>360?o-=360:o<0&&(o+=360),e>1?e=1:e<0&&(e=0),t>1?t=1:t<0&&(t=0),e*=100;const l=e*Math.min(t,1-t)/100,s=i=>{const u=(i+o/30)%12,p=t-l*Math.max(Math.min(u-3,9-u,1),-1);return Math.round(255*p).toString(16).padStart(2,"0")};return`${s(0)}${s(8)}${s(4)}`}const I={get info(){let o=localStorage.getItem("info");return o?JSON.parse(o):(localStorage.setItem("info",JSON.stringify({firstVisit:!0})),this.info)},set info(o){let e=this.info;if(o)for(let[t,l]of Object.entries(o))e[t]=l;localStorage.setItem("info",JSON.stringify(e))},get settings(){let o=localStorage.getItem("settings");return o?JSON.parse(o):(localStorage.setItem("settings",JSON.stringify({lastColorAlgorithmIndex:2,cookiesOk:!1})),this.settings)},set settings(o){let e=this.settings;if(o)for(let[t,l]of Object.entries(o))e[t]=l;localStorage.setItem("settings",JSON.stringify(e))},savedPalettes:{get items(){let o=localStorage.getItem("saved-palettes"),e;if(o){let t=[];e=JSON.parse(o);for(let l of e)t.push(l);return t}else return[]},set items(o){localStorage.setItem("saved-palettes",JSON.stringify(o))},addItem(o){let e=this.items;e.push(o),this.items=e},removeItem(o){this.items.splice(o,1)}}},T={create:{cmds:[],cmdIndex:-1,push(o){this.cmds.splice(this.cmdIndex+1,1/0,o),this.cmdIndex=this.cmds.length-1},undo(){this.cmdIndex>-1&&(this.cmds[this.cmdIndex].undo(),this.cmdIndex--)},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}},palettes:{cmds:[],cmdIndex:-1,push(o){this.cmds.splice(this.cmdIndex+1,1/0,o),this.cmdIndex=this.cmds.length-1},undo(){if(this.cmdIndex>-1){let o=this.cmds[this.cmdIndex];this.cmdIndex--,o.undo()}},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}}},Y=document.querySelector(".toolbar");function $(o,e,t){return l=>{document.title=he+" | "+o;const s=document.querySelector("main.visible");s&&s.classList.remove("visible");const i=e;if(i==null||i.classList.add("visible"),o=="Palettes")document.body.parentElement.style.overflow="",document.body.style.overflow="",Y.classList.add("palettes"),Y.classList.remove("create"),t.draw(I.savedPalettes.items);else if(o=="Create")if(document.body.parentElement.style.overflow="hidden",document.body.style.overflow="hidden",Y.classList.add("create"),Y.classList.remove("palettes"),l)t.generate(l);else{let u=t.generate(),p=[];for(let m of u)p.push(m.hex);history.replaceState("","",p.join("-"))}else Y.classList.remove("palettes","create"),document.documentElement.style.overflow="",document.body.style.overflow=""}}const y=(o,e)=>Math.random()*(e-o)+o,ye=()=>btoa(parseInt(pe(),16).toString(36)).replaceAll("=","");function w(o,e){const t=document.createElement("div");t.classList.add("tooltip","appearing");const l=document.createElement("h2");return l.innerHTML=o,t.append(l),e!=null&&e.pos?(t.style.left=e.pos[0]+"px",t.style.top=e.pos[1]+"px"):t.classList.add("centered"),setTimeout(()=>{e&&e.pos&&(t.clientWidth+e.pos[0]>document.body.clientWidth?(t.style.translate="-100%",t.clientHeight+e.pos[1]>document.body.clientHeight&&(t.style.translate="-100 -100%")):t.clientHeight+e.pos[1]>document.body.clientHeight&&(t.style.translate="0 -100%"))},0),t.addEventListener("animationend",()=>{t.classList.remove("appearing"),setTimeout(()=>{t.classList.add("disappearing"),t.addEventListener("animationend",()=>{t.remove()},{once:!0})},(e==null?void 0:e.duration)||1e3)},{once:!0}),t}function W(o,e){let t=document.createElement("div");t.classList.add("popover");let l=document.createElement("div");if(l.classList.add("clear-overlay"),(e==null?void 0:e.type)=="menu"||(e==null?void 0:e.type)=="tool-menu"||(e==null?void 0:e.type)=="tool-menu-side"){let s=document.createElement("ul");s.classList.add("list");for(let i of o){let u=document.createElement("div");i.id&&(u.id=i.id),u.classList.add("choice"),i.content&&(u.innerHTML=i.content),i.class&&u.classList.add(i.class),i.attribute&&u.setAttribute(i.attribute[0],i.attribute[1]),s.append(u)}t.append(s),document.body.append(l)}else if((e==null?void 0:e.type)=="color-picker"){let s=document.createElement("canvas");s.id="color-picker",s.classList.add("color-picker");let i=s.getContext("2d"),{h:u}=H(e.hex),p=`hsl(${u}, 100%, 50%)`,m=i.createLinearGradient(0,0,i.canvas.width,0);m.addColorStop(0,"#fff"),m.addColorStop(1,p),i.fillStyle=m,i.fillRect(0,0,i.canvas.width,i.canvas.height);let a=i.createLinearGradient(0,0,0,i.canvas.height);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"black"),i.fillStyle=a,i.fillRect(0,0,i.canvas.width,i.canvas.height);let d=document.createElement("div");d.classList.add("color-picker-cursor");let h=document.createElement("input");h.setAttribute("min","0"),h.setAttribute("max","360"),h.setAttribute("type","range");let f=document.createElement("div");f.classList.add("huebar");let g=document.createElement("div");g.classList.add("huebar-cursor");let c=document.createElement("input");c.setAttribute("min","0"),c.setAttribute("max","360"),c.setAttribute("type","range"),s.append(d,h),f.append(g,c),t.append(s,f)}return(e==null?void 0:e.type)=="tool-menu"&&t.classList.add("bottom"),t}function _(o,e){let t=document.createElement("div");t.classList.add("confirmation-screen",o.value+"-confirmation");let l=document.createElement("div");l.classList.add("box");let s=document.createElement("h2");s.innerHTML=o.message;let i=document.createElement("ul"),u=document.createElement("div");u.classList.add("overlay"),l.append(s,i),t.append(l);for(let{message:p,value:m,call:a}of e){let d=document.createElement("li");d.innerHTML=p,d.classList.add(m),i.append(d),d.addEventListener("click",()=>{a&&a(),t.remove()},{once:!0}),d.addEventListener("touchend",()=>{a&&a(),t.remove()},{once:!0})}document.body.append(t,u)}function K(o,e){let t=document.createElement("div");t.classList.add("confirmation-screen",e);let l=document.createElement("h2");l.innerHTML=o;let s=document.createElement("textarea"),i=document.createElement("div");i.classList.add("overlay");let u=document.createElement("div");u.classList.add("box");let p=document.createElement("ul"),m=document.createElement("li");m.classList.add("yes"),m.innerHTML="Confirm";let a=document.createElement("li");return a.innerHTML="Cancel",a.classList.add("no"),p.append(a,m),u.append(l,s,p),t.append(u),document.body.append(i),t}function ge(){let o=document.createElement("div");o.classList.add("confirmation-screen","settings-popover");let e=document.createElement("div");e.classList.add("box");let t=document.createElement("div");t.classList.add("overlay");let l=document.createElement("h2");l.innerText="Settings";let s=document.createElement("ul");s.classList.add("options");let i=document.createElement("li"),u=document.createElement("label");u.innerText="Algorithm";let p=document.createElement("select");p.id="algorithm";let m=document.createElement("option");m.value="random",m.innerText="Random Algorithm";let a=document.createElement("option");a.value="monochromatic",a.innerText="Monochromatic";let d=document.createElement("option");d.value="analogous",d.innerText="Analogous";let h=document.createElement("option");h.value="complementary",h.innerText="Complementary";let f=document.createElement("option");f.value="split-complementary",f.innerText="Split Complementary";let g=document.createElement("option");g.value="triadic",g.innerText="Triadic";let c=document.createElement("option");c.value="tetradic",c.innerText="Tetradic";let r=document.createElement("option");r.value="square",r.innerText="Square";let b=document.createElement("option");b.value="randomize",b.innerText="Randomize Colors";let n=document.createElement("ul");n.classList.add("confirmation");let x=document.createElement("li");x.classList.add("yes"),x.innerText="Confirm";let L=document.createElement("li");L.classList.add("no"),L.innerText="Cancel",n.append(L,x),p.append(b,a,d,h,f,g,c,r,m),p.selectedIndex=I.settings.lastColorAlgorithmIndex;let S=document.createElement("li");S.classList.add("horizontal");let E=document.createElement("div"),k=document.createElement("label");k.innerText="Cookies";let A=document.createElement("label");A.innerText="That's fine!",A.setAttribute("for","cookies-ok");let j=document.createElement("label");j.innerText="No thanks.",j.setAttribute("for","cookies-not-ok");let R=document.createElement("div"),O=document.createElement("div");R.classList.add("op"),O.classList.add("op");let U=document.createElement("input");U.id="cookies-ok",U.value="cookies-ok",U.setAttribute("type","radio"),U.classList.add("true");let M=document.createElement("input");return M.id="cookies-not-ok",M.value="cookies-not-ok",M.setAttribute("type","radio"),M.classList.add("false"),I.settings.cookiesOk?U.checked=!0:M.checked=!0,U.addEventListener("change",()=>{U.checked?M.checked=!1:M.checked=!0}),M.addEventListener("change",()=>{M.checked?U.checked=!1:U.checked=!0}),R.append(U,A),O.append(M,j),S.append(k,E),E.append(R,O),i.append(u,p),s.append(i,S),e.append(l,s,n),o.append(t,e),o}let z=document.querySelector(".saved-palettes-wrapper");class ve{constructor(){P(this,"items",[]);this.items=I.savedPalettes.items}draw(e){for(;z.childElementCount>0;)z.lastChild.remove();if(e)for(let l=0;l<e.length;l++){let s=e[l],i=document.createElement("div");i.setAttribute("data-palette-index",l.toString()),i.classList.add("palette-container");let u=document.createElement("div");u.classList.add("palette");let p=document.createElement("div");p.classList.add("options");let m=document.createElement("div");m.classList.add("more");let a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("viewBox","0 0 100 100");let d=document.createElementNS("http://www.w3.org/2000/svg","use");d.setAttribute("href","#icon-more-horizontal");for(let h=0;h<s.length;h++){let f=s[h],{lum:g}=H(f),c=document.createElement("div");c.setAttribute("data-color-index",h.toString()),c.classList.add("swatch"),c.style.backgroundColor="#"+f,g<.5&&c.classList.add("isLight");let r=document.createElement("h2");r.innerHTML="#"+f,r.classList.add("text"),c.append(r),u.append(c)}a.append(d),m.append(a),p.append(m),i.append(u,p),z.append(i)}let t=document.querySelector(".palettes-page .when-empty");z.childElementCount==0?t.classList.remove("hidden"):t.classList.add("hidden")}addItem(e,t){typeof t=="number"?this.items.splice(t,0,e):this.items.push(e),I.savedPalettes.items=this.items,this.draw(this.items)}removeItem(e){this.items.splice(e,1),I.savedPalettes.items=this.items,this.draw(this.items)}}function ee(o){if(o.algorithm.details=="slot"){let e=[];for(let t=0;t<6;t++)e.push(Math.round(y(0,15)).toString(16));return e.join("")}else for(let e of o.slots)if(!e.isLocked){let t=[];for(let l=0;l<6;l++)t.push(Math.round(y(0,15)).toString(16));e.hex=t.join(""),e.sync()}}function te(o,e){if(o.algorithm.details=="slot")if(Math.random()>.5){let t=0,l=0,s=0,i=o.slots[e-2],u=o.slots[e-1],p=o.slots[e],m=o.slots[e+1];if(p){let{h:a,s:d,l:h}=H(p.hex);if(t=a,u){let{s:f,l:g}=H(u.hex);l=d-(d-f)/2,s=h-(h-g)/2}else if(m){let{s:f,l:g}=H(m.hex);l=d-(f-d)/2,s=h-(g-h)/2}else l=d*y(.7,1.3),s=h*y(.7,1.3)}else if(u){let{h:a,s:d,l:h}=H(u.hex);if(t=a,i){let{s:f,l:g}=H(i.hex);l=d+(d-f)/2,s=h+(h-g)/2}else l=d*y(.7,1.3),s=h*y(.7,1.3)}else l=y(.2,1),s=y(.1,.9);return l*=y(.95,1.05),s*=y(.95,1.05),C(t,l,s)}else{let t,l,s,i,u,p,m;for(let{hex:a}of o.slots){let{h:d,s:h,l:f}=H(a);typeof t!="number"&&(t=d),(typeof s!="number"||h>s)&&(s=h),(typeof l!="number"||h<l)&&(l=h),(typeof u!="number"||f>u)&&(u=f),(typeof i!="number"||f<i)&&(i=f)}return p=y(l,s)*y(.95,1.05),m=y(i,u)*y(.95,1.05),C(t,p,m)}else if(o.algorithm.details=="increment"||Math.random()>.5){let t=[],l=y(0,360),s=0,i=0,u=0,p=0,m=0,a=0,d=0,h=0;for(let f of o.slots)f.isLocked||t.push(f);for(let f=0;f<t.length;f++)if(f==0){let g=o.slots[0];s=y(.1,1),i=y(.1,.9),g.hex=C(l,s,i),g.sync(),u=s,p=i,u<.4?m=y(.7,1):u>.6?m=y(.1,.3):u>.5?m=y(.1,.2):m=y(.8,.9),p<.4?a=y(.7,1):p>.6?a=y(.1,.3):p>.5?a=y(.1,.2):a=y(.8,.9),d=(m-u)/o.slots.length,h=(a-p)/o.slots.length}else{let g=o.slots[f];s=u+d*f,i=p+h*f,g.hex=C(l,s,i),g.sync()}}else{let t=y(0,360),l,s,i;for(let u of o.slots)u.isLocked||(l=y(.2,1),s=y(.2,.8),typeof i!="number"&&(t=i=y(0,360)),u.hex=C(t,l,s),u.sync())}}function se(o,e){if(o.algorithm.details=="slot")if(Math.random()>.5){let t=0,l=0,s=0,i=o.slots[e-2],u=o.slots[e-1],p=o.slots[e],m=o.slots[e+1];if(p){let{h:a,s:d,l:h}=H(p.hex);if(u){let{h:f,s:g,l:c}=H(u.hex),r=a-f;r>180?r=a-f-360:r<-180&&(r=a-f+360),t=a-r/2,l=d-(d-g)/2,s=h-(h-c)/2}else if(m){let{h:f,s:g,l:c}=H(m.hex),r=f-a;r>180?r=f-a-360:r<-180&&(r=f-a+360),t=a-r/2,l=d-(g-d)/2,s=h-(c-h)/2}else t=a*y(.7,1.3),l=d*y(.7,1.3),s=h*y(.7,1.3)}else if(u){let{h:a,s:d,l:h}=H(u.hex);if(i){let{h:f,s:g,l:c}=H(i.hex),r=a-f;r>180?r=a-f-360:r<-180&&(r=a-f+360),t=a+r/2,l=d+(d-g)/2,s=h+(h-c)/2}else t=a*y(.7,1.3),l=d*y(.7,1.3),s=h*y(.7,1.3)}else t=y(0,360),l=y(.2,1),s=y(.1,.9);return t*=y(.95,1.05),l*=y(.95,1.05),s*=y(.95,1.05),C(t,l,s)}else{let t,l,s,i,u,p,m,a,d,h,f=Math.random();for(let{hex:g}of o.slots){let{h:c,s:r,l:b}=H(g);if(typeof t!="number")t=c;else if(typeof l!="number"){let n=t,x=n-c;x>180?n-=360:x<-180&&(n+=360),x=n-c,(x<-25||x>25)&&(l=c)}else if(typeof s!="number"){let n=t,x=l,L=n-c,S=x-c;L>180?n-=360:L<-180&&(n+=360),S>180?x-=360:S<-180&&(x+=360),L=n-c,S=x-c,(L>25||L<-25)&&(S>25||S<-25)&&(s=c)}(typeof u!="number"||r>u)&&(u=r),(typeof i!="number"||r<i)&&(i=r),(typeof m!="number"||b>m)&&(m=b),(typeof p!="number"||b<p)&&(p=b)}return s&&f<.333?a=s:l&&f>.666?a=l:a=t,d=y(i,u)*y(.95,1.05),h=y(p,m)*y(.95,1.05),C(a,d,h)}else if(o.algorithm.details=="increment"||Math.random()>.5){let t=0,l=0,s=0,i=0,u=0,p=0,m=0,a=0,d=0,h=0,f=0,g=0;for(let c=0;c<o.slots.length;c++){let r=o.slots[c];if(!r.isLocked)if(!i)t=i=y(0,360),l=u=y(.1,1),s=p=y(.1,.9),r.hex=C(t,l,s),r.sync(),i=t,u=l,p=s,Math.random()>.5?m=t+y(90,120):m=t-y(75,90),u<.4?a=y(.7,1):u>.6?a=y(.1,.3):u>.5?a=y(.1,.2):a=y(.8,.9),p<.4?d=y(.7,1):p>.6?d=y(.1,.3):p>.5?d=y(.1,.2):d=y(.8,.9),h=(m-i)/o.slots.length,f=(a-u)/o.slots.length,g=(d-p)/o.slots.length;else{let b=o.slots[c];t=i+h*c,l=u+f*c,s=p+g*c,b.hex=C(t,l,s),b.sync()}}}else{let t,l,s,i,u,p;for(let m of o.slots)if(!m.isLocked){if(l=y(.2,1),s=y(.2,.8),typeof i!="number")t=i=y(0,360);else if(typeof u!="number")t=u=i+30*y(.975,1.025);else if(typeof p!="number")t=p=i-30*y(.975,1.025);else{let a=Math.random();a<.333?t=i:a>.666?t=u:t=p}m.hex=C(t,l,s),m.sync()}}}function le(o){if(o.algorithm.details=="slot"){let e,t,l,s,i,u,p,m,a,d=Math.random();for(let{hex:h}of o.slots){let{h:f,s:g,l:c}=H(h);if(typeof e!="number")e=f;else if(typeof t!="number"){let r=e,b=r-f;b>180?r-=360:b<-180&&(r+=360),b=r-f,(b<-90||b>90)&&(t=f)}(typeof s!="number"||g>s)&&(s=g),(typeof l!="number"||g<l)&&(l=g),(typeof u!="number"||c>u)&&(u=c),(typeof i!="number"||c<i)&&(i=c)}return d>.5&&t?p=t*y(.925,1.025):p=e*y(.925,1.025),m=y(l,s)*y(.95,1.05),a=y(i,u)*y(.95,1.05),C(p,m,a)}else{let e,t,l,s,i;for(let u of o.slots)u.isLocked||(t=y(.2,1),l=y(.2,.8),typeof s!="number"?e=s=y(0,360):typeof i!="number"?e=i=s+150*y(.975,1.025):Math.random()<.5?e=s*y(.975,1.025):e=i*y(.975,1.025),u.hex=C(e,t,l),u.sync())}}function oe(o){if(o.algorithm.details=="slot"){let e,t,l,s,i,u,p,m,a,d,h=Math.random();for(let{hex:f}of o.slots){let{h:g,s:c,l:r}=H(f);if(typeof e!="number")e=g;else if(typeof t!="number"){let b=e,n=b-g;n>180?b-=360:n<-180&&(b+=360),n=b-g,(n<-30||n>30)&&(t=g)}else if(typeof l!="number"){let b=e,n=t,x=b-g,L=n-g;x>180?b-=360:x<-180&&(b+=360),L>180?n-=360:L<-180&&(n+=360),x=b-g,L=n-g,(x>30||x<-30)&&(L>30||L<-30)&&(l=g)}(typeof i!="number"||c>i)&&(i=c),(typeof s!="number"||c<s)&&(s=c),(typeof p!="number"||r>p)&&(p=r),(typeof u!="number"||r<u)&&(u=r)}return h<.333&&l?m=l:h>.666&&t?m=t:m=e,a=y(s,i)*y(.95,1.05),d=y(u,p)*y(.95,1.05),C(m,a,d)}else{let e,t,l,s,i,u;for(let p of o.slots)if(!p.isLocked){if(t=y(.2,1),l=y(.2,.8),typeof s!="number")e=s=y(0,360);else if(typeof i!="number")e=i=s+150*y(.975,1.025);else if(typeof u!="number")e=u=s-150*y(.975,1.025);else{let m=Math.random();m<.333?e=s*y(.975,1.025):m>.666?e=i*y(.975,1.025):e=u*y(.975,1.025)}p.hex=C(e,t,l),p.sync()}}}function ie(o){if(o.algorithm.details=="slot"){let e,t,l,s,i,u,p,m,a,d,h=Math.random();for(let{hex:f}of o.slots){let{h:g,s:c,l:r}=H(f);if(typeof e!="number")e=g;else if(typeof t!="number"){let b=e,n=b-g;n>180?b-=360:n<-180&&(b+=360),n=b-g,(n<-90||n>90)&&(t=g)}else if(typeof l!="number"){let b=e,n=t,x=b-g,L=n-g;x>180?b-=360:x<-180&&(b+=360),L>180?n-=360:L<-180&&(n+=360),x=b-g,L=n-g,(x>90||x<-90)&&(L>90||L<-90)&&(l=g)}(typeof i!="number"||c>i)&&(i=c),(typeof s!="number"||c<s)&&(s=c),(typeof p!="number"||r>p)&&(p=r),(typeof u!="number"||r<u)&&(u=r)}return h<.333?m=e:h>.666?m=t:m=l,a=y(s,i)*y(.95,1.05),d=y(u,p)*y(.95,1.05),C(m,a,d)}else{let e,t,l,s,i,u;for(let p of o.slots)if(!p.isLocked){if(t=y(.2,1),l=y(.2,.8),typeof s!="number")e=s=y(0,360);else if(typeof i!="number")e=i=s+120;else if(typeof u!="number")e=u=s-120;else{let m=Math.random();m<.333?e=s:m<.666?e=i:e=u}p.hex=C(e,t,l),p.sync()}}}function ne(o){if(o.algorithm.details=="slot"){let e,t,l,s,i,u,p,m,a,d,h,f=Math.random();for(let{hex:g}of o.slots){let{h:c,s:r,l:b}=H(g);if(typeof e!="number")e=c;else if(typeof t!="number"){let n=e,x=n-c;x>180?n-=360:x<-180&&(n+=360),x=n-c,(x<-45||x>45)&&(t=c)}else if(typeof l!="number"){let n=e,x=t,L=n-c,S=x-c;L>180?n-=360:L<-180&&(n+=360),S>180?x-=360:S<-180&&(x+=360),L=n-c,S=x-c,(L>45||L<-45)&&(S>45||S<-45)&&(l=c)}else if(typeof s!="number"){let n=e,x=t,L=l,S=n-c,E=x-c,k=L-c;S>180?n-=360:S<-180&&(n+=360),E>180?x-=360:E<-180&&(x+=360),k>180?L-=360:k<-180&&(L+=360),S=n-c,E=x-c,k=L-c,(S>45||S<-45)&&(E>45||E<-45)&&(k>45||k<-45)&&(s=c)}(typeof u!="number"||r>u)&&(u=r),(typeof i!="number"||r<i)&&(i=r),(typeof m!="number"||b>m)&&(m=b),(typeof p!="number"||b<p)&&(p=b)}return typeof s=="number"&&f<.25?a=s:typeof l=="number"&&f<.5?a=l:typeof t=="number"&&f<.75?a=t:a=e,d=y(i,u)*y(.95,1.05),h=y(p,m)*y(.95,1.05),C(a,d,h)}else{let e,t,l,s,i,u,p;for(let m of o.slots)if(!m.isLocked){if(t=y(.2,1),l=y(.2,.8),typeof s!="number")e=s=y(0,360);else if(typeof i!="number")e=i=s+60;else if(typeof u!="number")e=u=s-120;else if(typeof p!="number")e=p=s+180;else{let a=Math.random();a<.25?e=s:a>.5?e=i:a>.75?e=u:e=p}m.hex=C(e,t,l),m.sync()}}}function ae(o){if(o.algorithm.details=="slot"){let e,t,l,s,i,u,p,m,a,d,h,f=Math.random();for(let{hex:g}of o.slots){let{h:c,s:r,l:b}=H(g);if(typeof e!="number")e=c;else if(typeof t!="number"){let n=e,x=n-c;x>180?n-=360:x<-180&&(n+=360),x=n-c,(x<-85||x>85)&&(t=c)}else if(typeof l!="number"){let n=e,x=t,L=n-c,S=x-c;L>180?n-=360:L<-180&&(n+=360),S>180?x-=360:S<-180&&(x+=360),L=n-c,S=x-c,(L<-85||L>85)&&(S<-85||S>85)&&(l=c)}else if(typeof s!="number"){let n=e,x=t,L=l,S=n-c,E=x-c,k=L-c;S>180?n-=360:S<-180&&(n+=360),E>180?x-=360:E<-180&&(x+=360),k>180?L-=360:k<-180&&(L+=360),S=n-c,E=x-c,k=L-c,(S<-85||S>85&&E<-85||E>85&&(k<-85||k>85))&&(s=c)}(typeof u!="number"||r>u)&&(u=r),(typeof i!="number"||r<i)&&(i=r),(typeof m!="number"||b>m)&&(m=b),(typeof p!="number"||b<p)&&(p=b)}return typeof s=="number"&&f<.25?a=s:typeof l=="number"&&f<.5?a=l:typeof t=="number"&&f<.75?a=t:a=e,d=y(i,u)*y(.95,1.05),h=y(p,m)*y(.95,1.05),C(a,d,h)}else{let e,t,l,s,i,u,p;for(let m of o.slots)if(!m.isLocked){if(t=y(.2,1),l=y(.2,.8),typeof s!="number")e=s=y(0,360);else if(typeof i!="number")e=i=s+60;else if(typeof u!="number")e=u=s-120;else if(typeof p!="number")e=p=s+180;else{let a=Math.random();a<.25?e=s:a>.5?e=i:a>.75?e=u:e=p}m.hex=C(e,t,l),m.sync()}}}function be(o,e){switch(Math.round(y(0,7))){case 0:return ee(o);case 1:return te(o,e);case 2:default:return se(o,e);case 3:return le(o);case 4:return oe(o);case 5:return ie(o);case 6:return ne(o);case 7:return ae(o)}}const xe=[ee,te,se,le,oe,ie,ne,ae,be];let Le=document.getElementById("palette");class Se{constructor(){P(this,"slots",[]);P(this,"plus",{palette:this,disabled:!1,active:!1,show(e){if(!this.active){let t=this.render(e.toString()),l=this.palette.slots[e];l?document.getElementById(l.id).after(t):(l=this.palette.slots[e+1],document.getElementById(l.id).before(t)),this.active=!0}},hide(e){var t;this.active&&(this.disabled=!0,setTimeout(()=>{this.disabled=!1},typeof e=="number"?e:300),(t=document.getElementById("plus-button"))==null||t.parentElement.parentElement.remove(),this.active=!1)},render(e){let t=document.createElement("div");t.classList.add("plus-container");let l=document.createElement("div");l.classList.add("circle");let s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("data-color-index",e),s.setAttribute("viewBox","0 0 100 100"),s.id="plus-button";let i=document.createElementNS("http://www.w3.org/2000/svg","use");return i.setAttribute("href","#icon-plus-button"),i.setAttribute("viewBox","0 0 100 100"),s.append(i),l.append(s),t.append(l),t}});P(this,"algorithm",{list:xe,get(e){e=="slot"?this.details="slot":this.details="";let t=I.settings.lastColorAlgorithmIndex;return typeof t!="number"&&(I.settings={lastColorAlgorithmIndex:1}),this.list[t]},details:"",direction:{h:0,s:0,l:0},preference:{h:void 0,s:void 0,l:void 0}})}removeSlot(e,t){t||(t={animations:!0});let l=e.data+1;for(let i=l;i<this.slots.length;i++)this.slots[i].data--;let s=document.getElementById(e.id);if(this.slots.splice(e.data,1),t.animations==!0){let i=function(){s.remove(),s.removeEventListener("animationend",i),s.removeEventListener("animationcancel",i)};s.classList.add("deinit"),s.addEventListener("animationend",i),s.addEventListener("animationcancel",i)}else s.remove();return e}addSlot(e,t){var u;let l={palette:this,hex:e.hex,isLocked:typeof e.isLocked=="boolean"?e.isLocked:!1,id:e.id||ye(),index:typeof e.index!="number"?this.slots.length:e.index,get data(){var m;let p=parseInt((m=document.getElementById(this.id))==null?void 0:m.getAttribute("data-color-index"));return typeof p=="number"?p:this.data=this.index},set data(p){var m;(m=document.getElementById(this.id))==null||m.setAttribute("data-color-index",p.toString()),this.index=p},generate(){this.hex=this.palette.algorithm.get("slot")(this.palette,this.index),this.sync()},sync(){let p=document.getElementById(this.id);if(this.hex){let{lum:m}=H(this.hex);m<.5?p.classList.add("isLight"):p.classList.remove("isLight"),p.style.backgroundColor="#"+this.hex,p.getElementsByClassName("hex")[0].innerHTML="#"+this.hex}}};l.hex||(l.hex=this.algorithm.get("slot")(this,l.index));let s=this.createSwatch(l,t),i=document.getElementById((u=this.slots[l.index-1])==null?void 0:u.id);i?i.after(s):Le.prepend(s),l.data=l.index,this.slots.splice(l.index,0,l);for(let p=l.index+1;p<this.slots.length;p++)this.slots[p].data++;return l}createSwatch(e,t){t||(t={animations:!0});let l=document.createElement("div");if(l.classList.add("swatch"),l.setAttribute("data-color-index",e.data),l.id=e.id,e.hex){l.style.backgroundColor="#"+e.hex;let{lum:n}=H(e.hex);n<.5?l.classList.add("isLight"):l.classList.remove("isLight")}if(t.animations==!0){let n=function(){l.classList.remove("init"),l.removeEventListener("animationend",n),l.removeEventListener("animationcancel",n)};l.classList.add("init"),l.addEventListener("animationend",n),l.addEventListener("animationcancel",n)}let s=document.createElement("div");s.classList.add("options");let i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("icon","x"),i.setAttribute("viewBox","0 0 100 100");let u=document.createElementNS("http://www.w3.org/2000/svg","use");u.setAttribute("href","#icon-x");let p=document.createElementNS("http://www.w3.org/2000/svg","use");p.setAttribute("viewBox","0 0 100 100"),p.setAttribute("href","#icon-lock-body");let m=document.createElementNS("http://www.w3.org/2000/svg","use");m.setAttribute("viewBox","0 0 100 100"),m.setAttribute("href","#icon-lock-arm");let a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("viewBox","0 0 100 100"),a.classList.add("icon","lock"),e.isLocked&&a.classList.add("locked");let d=document.createElement("div");d.classList.add("info-container");let h=document.createElement("div");h.classList.add("info");let f=document.createElement("h2");f.classList.add("hex"),f.innerHTML="#"+e.hex;let g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.classList.add("icon"),g.setAttribute("viewBox","0 0 100 100");let c=document.createElementNS("http://www.w3.org/2000/svg","use");c.setAttribute("href","#icon-copy");let r=document.createElement("div");r.classList.add("detector","left");let b=document.createElement("div");return b.classList.add("detector"),i.append(u),a.append(m,p),g.append(c),h.append(f,g),d.append(h),s.append(i,a,d),l.append(s,r,b),l}generate(e){let t={animations:!1};if(e)if(e.length==this.slots.length)for(let l=0;l<e.length;l++)this.slots[l].hex=e[l],this.slots[l].sync();else{for(let l of this.slots)document.getElementById(l.id).remove();this.slots=[];for(let l=0;l<e.length;l++)this.addSlot({index:l,hex:e[l]},t)}else if(this.slots.length>0)this.algorithm.get()(this);else{for(let l=0;l<5;l++)this.addSlot({},t);this.algorithm.get()(this)}return this.slots}}class Ee{constructor(e){P(this,"routes");P(this,"loadContent",e=>{if(e){let{base:t,ids:l}=e;typeof t!="string"&&(t=e);let s=this.routes.get(t);l?s(l):s()}else this.routes.get("404")()});P(this,"routeToURL",e=>{let t=this.deconstructURL(e),{base:l,ids:s}=t;this.routes.has(l)?l==="create"?s?this.idsAreValid(s)?this.loadContent(t):this.loadContent():this.loadContent(t):this.loadContent(t):this.loadContent()});P(this,"navigateTo",(e,t)=>{t=t||!1,t?history.replaceState("","",e):history.pushState("","","/polychrome"+e),this.routeToURL(e)});this.routes=new Map(e)}deconstructURL(e){let t=e.replace(/^\//,"").replace(/\/$/,"").split("/");return t[0]=="polychrome"?{site:"polychrome",base:t[1]||"",ids:t[2]?t[2].split("-"):null}:{site:"polychrome",base:t[0],ids:t[1]?t[1].split("-"):null}}idsAreValid(e){for(let t of e)if(!/^[a-f0-9]{6}$/.test(t)||e.length>10)return!1;return!0}}function we(){document.querySelector("#palette").onclick=m=>e(m),document.querySelector("#palette").ontouchend=m=>e(m);let o=!1;async function e(m){let a=m.target;if(o)return;m.pointerType!="mouse"&&(focus(),o=!0,setTimeout(()=>{o=!1},75));let d=a.closest(".plus-container svg");if(d){const{ids:f}=N.deconstructURL(location.pathname),g=parseInt(d.getAttribute("data-color-index"));let c=v.addSlot({index:g+1});f.splice(g+1,0,c.hex),history.replaceState("","",f.join("-")),v.plus.hide(),T.create.push({undo(){v.removeSlot(c,{animations:!1}),f.splice(g+1,1),history.replaceState("","",f.join("-")),v.plus.hide()},redo(){v.addSlot(c,{animations:!1}),f.splice(g+1,0,c.hex),history.replaceState("","",f.join("-")),v.plus.hide()}}),v.slots.length>9&&v.plus.hide();return}let h=a.closest(".lock");if(h){let f=a.closest(".swatch"),g=parseInt(f.getAttribute("data-color-index")),c=v.slots[g];c.isLocked=!c.isLocked,h.classList.toggle("locked"),T.create.push({undo(){let r=v.slots[g],b=document.getElementById(r.id);r.isLocked=!r.isLocked,b.querySelector(".lock").classList.toggle("locked")},redo(){let r=v.slots[g],b=document.getElementById(r.id);r.isLocked=!r.isLocked,b.querySelector(".lock").classList.toggle("locked")}});return}if(a.closest(".x")){let f=a.closest(".swatch"),g=v.slots[parseInt(f.getAttribute("data-color-index"))],{ids:c}=N.deconstructURL(location.pathname);v.removeSlot(g),c.splice(g.data,1),history.replaceState("","",c.join("-")),v.plus.hide(),T.create.push({undo(){v.addSlot(g,{animations:!1}),c.splice(g.data,0,g.hex),history.replaceState("","",c.join("-")),v.plus.hide()},redo(){v.removeSlot(g,{animations:!1}),c.splice(g.data,1),history.replaceState("","",c.join("-")),v.plus.hide()}});return}if(a.closest(".info")){o=!0,setTimeout(()=>{o=!1},75);let f=a.closest(".swatch"),g=v.slots[parseInt(f.getAttribute("data-color-index"))],c=m.pageX,r=m.pageY;if(a.closest(".icon")){await navigator.clipboard.writeText(g.hex).then(()=>{let b=w("Copied hex to clipboard!",{pos:[c,r]});b.classList.add("at-mouse-pos"),document.body.append(b)},()=>{let b=w("Copy to clipboard failed.",{pos:[c,r]});b.classList.add("at-mouse-pos"),document.body.append(b)});return}}}document.querySelector(".saved-palettes-wrapper").ontouchend=m=>t(m),document.querySelector(".saved-palettes-wrapper").onclick=m=>t(m);async function t(m){var g,c;let a=m.target;if(o)return;m.pointerType!="mouse"&&(focus(),o=!0,setTimeout(()=>{o=!1},75));let d=a.closest(".swatch");if(d){let r=d.parentElement.parentElement;await navigator.clipboard.writeText(q.items[parseInt(r.getAttribute("data-palette-index"))][parseInt(d.getAttribute("data-color-index"))]).then(()=>{let b=w("Copied hex to clipboard!",{pos:[m.x,m.y]});b.classList.add("at-mouse-pos"),document.body.append(b)},()=>{let b=w("Copy to clipboard failed.",{pos:[m.x,m.y]});b.classList.add("at-mouse-pos"),document.body.append(b)});return}let h=a.closest(".more");if(h){o=!0,setTimeout(()=>{o=!1},75),h.parentElement.append(W([{content:"Open",class:"palettes-open"},{content:"Remove",class:"palettes-remove"},{content:"Copy",class:"palettes-copy"}],{type:"menu"}));return}let f=a.closest(".choice");if(f){if(f.classList.contains("palettes-open")){N.navigateTo("/create/"+I.savedPalettes.items[parseInt(a.closest(".palette-container").getAttribute("data-palette-index"))].join("-"));return}if(f.classList.contains("palettes-copy")){await navigator.clipboard.writeText(q.items[parseInt(a.closest(".palette-container").getAttribute("data-palette-index"))].join(`
`)).then(()=>{let r=w("Copied hex to clipboard!",{pos:[m.x,m.y]});r.classList.add("at-mouse-pos"),document.body.append(r)},()=>{let r=w("Copy to clipboard failed.",{pos:[m.x,m.y]});r.classList.add("at-mouse-pos"),document.body.append(r)});return}if(f.classList.contains("palettes-remove")){let r=parseInt(a.closest(".palette-container").getAttribute("data-palette-index")),b=q.items[r],n={undo(){q.addItem(b,r)},redo(){q.removeItem(r)}};T.palettes.push(n),q.removeItem(r);let x=w("Removed palette.");document.body.append(x);return}}(g=document.querySelector(".popover"))==null||g.remove(),(c=document.querySelector(".clear-overlay"))==null||c.remove()}let l=document.querySelector(".toolbar");l.ontouchend=m=>s(m),l.onclick=m=>s(m);async function s(m){if(o)return;m.pointerType!="mouse"&&(focus(),o=!0,setTimeout(()=>{o=!1},75));let a=m.target;if(a.closest(".undo")){N.deconstructURL(location.pathname).base=="create"?T.create.undo():T.palettes.undo();return}if(a.closest(".redo")){N.deconstructURL(location.pathname).base=="create"?T.create.redo():T.palettes.redo();return}if(a.closest(".copy")){F();return}if(a.closest(".generate")){let d=[];for(let{hex:f}of v.slots)d.push(f);v.generate();let h=[];for(let{hex:f}of v.slots)h.push(f);history.replaceState("","","/create/"+h.join("-")),d&&T.create.push({undo:()=>{v.generate(d),history.replaceState("","","/create/"+d.join("-"))},redo:()=>{v.generate(h),history.replaceState("","","/create/"+h.join("-"))}});return}if(a.closest(".save")){X();return}if(a.closest(".remove-all")){G();return}if(a.closest(".import")){Z();return}if(a.closest(".more")){Q();return}}let i=document.querySelector(".main-nav"),u=document.querySelector(".main-header");window.ontouchend=m=>p(m),window.onclick=m=>p(m);async function p(m){var g,c,r,b,n,x,L,S;if(o)return;m.pointerType!="mouse"&&(focus(),o=!0,setTimeout(()=>{o=!1},75));let a=m.target;(g=document.querySelector(".popover"))==null||g.remove(),(c=document.querySelector(".clear-overlay"))==null||c.remove();let d=a.closest(".choice");if(d){if(d.classList.contains("copy")){F();return}if(d.classList.contains("save")){X();return}if(d.classList.contains("add-color")){ke(d);return}if(d.classList.contains("add-colors")){Ie();return}if(d.classList.contains("remove-all")){G();return}if(d.classList.contains("import")){Z();return}if(d.classList.contains("more")){Q();return}}let h=a.closest("a");if(h){m.preventDefault();let E=h.getAttribute("href");i.classList.remove("visible"),(r=document.querySelector(".overlay"))==null||r.remove(),document.body.style.overflowY="",E!=location.pathname&&N.navigateTo(E);return}if(a.closest("#nav-button"))if(i.classList.toggle("visible"),i.classList.contains("visible")){let E=document.createElement("div");E.classList.add("overlay"),u.append(E),document.body.style.overflowY="hidden",v.plus.hide(),setTimeout(()=>{E.addEventListener("click",()=>{E.remove(),i.classList.remove("visible"),document.body.style.overflowY=""},{once:!0})},50),document.body.style.overflowY="hidden"}else(b=u.querySelector(".overlay"))==null||b.remove(),document.body.style.overflowY="";if(a.closest("#settings")){let E=ge();document.body.append(E);return}let f=a.closest(".confirmation-screen");if(f){if(a.closest(".overlay")&&(f==document.querySelector(".cookies")&&(I.settings={cookiesOk:!0},I.info={firstVisit:!0}),f.remove()),f==document.querySelector(".remove-all-confirmation")){if(a.closest(".yes")){for(let k=0;q.items.length;k++)q.removeItem(0);f.remove();let E=w("All palettes removed.");document.body.append(E)}else a.closest(".no")&&f.remove();return}if(f==document.querySelector(".import-create")){let E=N.deconstructURL(location.pathname).ids,k=a.closest(".yes"),A=a.closest(".no");if(k){let j=f.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-",""),R=!(/[g-z~`!#$%\^&*+=\[\]\\';,/{}|\\":<>\?]/g.test(j)||j.length==0||j.length%6!=0),O="Invalid values entered. Try again.";if(R){O="Successfully imported values.";let M=j.match(/.{1,6}/g);v.generate(M),T.create.push({undo(){v.generate(E)},redo(){v.generate(M)}})}let U=w(O);document.body.append(U),f.remove(),(n=document.querySelector(".overlay"))==null||n.remove()}else A&&(f.remove(),(x=document.querySelector(".overlay"))==null||x.remove());return}if(f==document.querySelector(".import-palettes")){let E=a.closest(".yes"),k=a.closest(".no");if(E){let A=f.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-","").replaceAll("#","").toLowerCase(),j="Invalid values entered. Try again.",R=!(/[g-z~`!#$%\^&*+=\[\]\\';/{}|\\":<>\?]/g.test(A)||A.replaceAll(",","").length%6!=0||A.length==0);A.replaceAll(",","").length%6;let O=A.split(",");for(let M of O)(M.length/6>10||!(M.length>=6))&&(R=!1);if(R){let M=0;for(let D of O)M++,q.addItem(D.match(/.{1,6}/g));j="Successfully imported values.",T.palettes.push({undo(){for(let D=M;D>0;D--)q.removeItem(q.items.length-1)},redo(){for(let D of O)q.addItem(D.match(/.{1,6}/g))}})}let U=w(j);document.body.append(U),f.remove()}else k&&f.remove();return}if(f==document.querySelector(".settings-popover")){let E=a.closest(".yes"),k=a.closest(".no");if(E){let A=I.settings;A.lastColorAlgorithmIndex=f.querySelector("#algorithm").selectedIndex,A.cookiesOk=f.querySelector("#cookies-ok").checked,I.settings=A;let j="Changes saved.";f.remove();let R=w(j);document.body.append(R),document.querySelector(".main-nav").classList.remove("visible"),(L=document.querySelector(".overlay"))==null||L.remove()}else if(k){let A="Changes discarded.";f.remove();let j=w(A);document.body.append(j),document.querySelector(".main-nav").classList.remove("visible"),(S=document.querySelector(".overlay"))==null||S.remove()}return}if(f==document.querySelector(".cookies-confirmation")){let E=a.closest(".yes"),k=a.closest(".no");if(E){I.settings={cookiesOk:!0},f.remove();let A=w("Thanks, enjoy the site! :)");document.body.append(A)}else if(k){I.settings={cookiesOk:!1},f.remove();let A=w("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(A)}return}}}}async function F(){if(N.deconstructURL(location.pathname).base=="create"){let o=[];for(let{hex:e}of v.slots)o.push(e);await navigator.clipboard.writeText(o.join(`
`)).then(()=>{let e=w("Copied palette!");document.body.append(e)},()=>{let e=w("Failed to copy.");document.body.append(e)})}else{let o=[];for(let e of q.items)o.push(e.join("-"));await navigator.clipboard.writeText(o.join(`,
`)).then(()=>{let e=w("Copied palettes to clipboard!");document.body.append(e)},()=>{let e=w("Copy to clipboard failed.");document.body.append(e)})}}function X(){if(!I.settings.cookiesOk){document.body.append(w("You'll need to enable cookies in settings for that feature."));return}let o=[];for(let{hex:t}of v.slots)o.push(t);q.addItem(o);let e=w("Saved palette!");document.body.append(e)}function ke(o){const{ids:e}=N.deconstructURL(location.pathname);let t=parseInt(o.getAttribute("data-amount")),l=[];for(let s=0;s<t;s++)l.push(v.addSlot({})),e.push(l[s].hex);history.replaceState("","",e.join("-")),T.create.push({undo(){for(let s=0;s<t;s++)v.removeSlot(l[l.length-1-s],{animations:!1}),e.pop();history.replaceState("","",e.join("-"))},redo(){for(let s=0;s<t;s++)v.addSlot(l[s],{animations:!1}),e.push(l[s].hex);history.replaceState("","",e.join("-"))}})}function Ie(){let o=[{content:"1",class:"add-color",attribute:["data-amount","1"]},{content:"2",class:"add-color",attribute:["data-amount","2"]},{content:"3",class:"add-color",attribute:["data-amount","3"]},{content:"4",class:"add-color",attribute:["data-amount","4"]}];for(let e=v.slots.length+4;e>10;e--)o.pop();if(o.length<1){document.body.append(w("Too many colors!"));return}document.body.append(W(o,{type:"tool-menu"}))}function G(){_({message:"Are you sure you want to delete all of your palettes? You won't be able to undo this.",value:"remove-all"},[{message:"Yes, delete away.",value:"yes",call(){for(let e=0;q.items.length;e++)q.removeItem(0);let o=w("All palettes removed.");document.body.append(o)}},{message:"No, please don't delete my stuff!",value:"no"}])}function Z(){if(N.deconstructURL(location.pathname).base=="create"){let o=K("Paste hex code palette below!","import-create");document.body.append(o)}else{if(!I.settings.cookiesOk){document.body.append(w("You'll need to enable cookies in settings for that feature."));return}let o=K("Paste hex code palette below! Separate palettes by commas.","import-palettes");document.body.append(o)}}function Q(){N.deconstructURL(location.pathname).base=="create"?document.body.append(W([{content:"Save",class:"save"},{content:"Import",class:"import"},{content:"Copy",class:"copy"},{content:"Add Colors",class:"add-colors"}],{type:"tool-menu"})):document.body.append(W([{content:"Remove All",class:"remove-all"},{content:"Import",class:"import"},{content:"Copy All",class:"copy"}],{type:"tool-menu"}))}function Ae(){window.addEventListener("scroll",o,!1),window.addEventListener("touchmove",o,{passive:!1});function o(e){N.deconstructURL(location.pathname).base=="create"&&(e.preventDefault(),e.stopPropagation())}window.ontouchstart=e=>{let t=e.targetTouches[0].target.closest(".create-page .swatch");if(t&&!e.targetTouches[0].target.closest(".options div")&&!e.targetTouches[0].target.closest(".options svg")){let l=function(g){if(g.preventDefault(),s){let c=g.touches[0].clientY-m;t.style.translate="0 "+c+"px";let r=t,b=v.slots.length-a-1;if(f=0,h=0,c>0)for(let n=0;n<b;n++)f=(n*2+1)*u,r=r.nextElementSibling,c>f?(h++,r.style.translate!="0px -100%"&&(r.style.translate="0 -100%")):r.style.translate=="0px -100%"&&(r.style.translate="0 0");else for(let n=0;n<a;n++)f=(n*2+1)*u,r=r.previousElementSibling,-c>f?(h--,r.style.translate!="0px 100%"&&(r.style.translate="0 100%")):r.style.translate=="0px 100%"&&(r.style.translate="0 0")}else{let c=g.touches[0].clientX-p;t.style.translate=c+"px";let r=t,b=v.slots.length-a-1;if(f=0,h=0,c>0)for(let n=0;n<b;n++)f=(n*2+1)*i,r=r.nextElementSibling,c>f?(h++,r.style.translate!="-100%"&&(r.style.translate="-100%")):r.style.translate=="-100%"&&(r.style.translate="");else for(let n=0;n<a;n++)f=(n*2+1)*i,r=r.previousElementSibling,-c>f?(h--,r.style.translate!="100%"&&(r.style.translate="100%")):r.style.translate=="100%"&&(r.style.translate="")}},s=!1;document.body.classList.contains("vertical")&&(s=!0),v.plus.disabled=!0,v.plus.hide(),t.classList.add("is-dragging");let i=t.clientWidth/2,u=t.clientHeight/2,p=e.touches[0].clientX,m=e.touches[0].clientY,a=parseInt(t.getAttribute("data-color-index")),d=v.slots[a],h=0,f;window.addEventListener("touchmove",l,{passive:!1}),window.addEventListener("touchend",()=>{t.classList.remove("is-dragging"),t.classList.add("is-released"),removeEventListener("touchmove",l),t.style.translate=`${s?"0 ":""}${h*100}%`;function g(){t.removeEventListener("transitionend",g),t.removeEventListener("transitioncancel",g),t.classList.remove("is-released");let c=t;for(let n=0;n<h;n++)v.slots.splice(d.data,1),v.slots.splice(d.data+1,0,d),d.data++,c=c.nextElementSibling,v.slots[d.data-1].data--;for(let n=0;n>h;n--)v.slots.splice(d.data,1),v.slots.splice(d.data-1,0,d),d.data--,c=c.previousElementSibling,v.slots[d.data+1].data++;let r=t.cloneNode(!0);h>0?(c.after(r),t.remove()):h<0&&(c.before(r),t.remove()),t.style.translate="";let b=[];for(let n of v.slots){let x=document.getElementById(n.id);x.style.transition="transform 0s",x.style.translate="",setTimeout(()=>{x.style.transition=""},1),b.push(n.hex)}t=r,history.replaceState("","",b.join("-")),v.plus.disabled=!1,h&&T.create.push({undo(){v.plus.hide();let n=t=document.getElementById(d.id);for(let L=0;L<-h;L++){v.slots.splice(d.data,1),v.slots.splice(d.data+1,0,d),d.data++,n=n.nextElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S-1).toString())}for(let L=0;L>-h;L--){v.slots.splice(d.data,1),v.slots.splice(d.data-1,0,d),d.data--,n=n.previousElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S+1).toString())}r=t.cloneNode(!0),-h>0?(n.after(r),t.remove()):-h<0&&(n.before(r),t.remove());let x=[];for(let L of v.slots)x.push(L.hex);history.replaceState("","",x.join("-"))},redo(){v.plus.hide();let n=t=document.getElementById(d.id);for(let L=0;L<h;L++)v.slots.splice(d.data,1),v.slots.splice(d.data+1,0,d),d.data++,n=n.nextElementSibling,a=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(a-1).toString());for(let L=0;L>h;L--)v.slots.splice(d.data,1),v.slots.splice(d.data-1,0,d),d.data--,n=n.previousElementSibling,a=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(a+1).toString());r=t.cloneNode(!0),h>0?(n.after(r),t.remove()):h<0&&(n.before(r),t.remove());let x=[];for(let L of v.slots)x.push(L.hex);history.replaceState("","",x.join("-"))}})}t.addEventListener("transitionend",g),t.addEventListener("transitioncancel",g)},{once:!0})}},onmousedown=e=>{let t=e.target.closest(".create-page .swatch");if(t&&!e.target.closest(".options div")&&!e.target.closest(".options svg")){let l=function(g){if(s){let c=g.y-m;t.style.translate="0 "+c+"px";let r=t,b=v.slots.length-a-1;if(f=0,h=0,c>0)for(let n=0;n<b;n++)f=(n*2+1)*u,r=r.nextElementSibling,c>f?(h++,r.style.translate!="0px -100%"&&(r.style.translate="0px -100%")):r.style.translate=="0px -100%"&&(r.style.translate="");else for(let n=0;n<a;n++)f=(n*2+1)*u,r=r.previousElementSibling,-c>f?(h--,r.style.translate!="0px 100%"&&(r.style.translate="0px 100%")):r.style.translate=="0px 100%"&&(r.style.translate="")}else{let c=g.x-p;t.style.translate=c+"px";let r=t,b=v.slots.length-a-1;if(f=0,h=0,c>0)for(let n=0;n<b;n++)f=(n*2+1)*i,r=r.nextElementSibling,c>f?(h++,r.style.translate!="-100%"&&(r.style.translate="-100%")):r.style.translate=="-100%"&&(r.style.translate="");else for(let n=0;n<a;n++)f=(n*2+1)*i,r=r.previousElementSibling,-c>f?(h--,r.style.translate!="100%"&&(r.style.translate="100%")):r.style.translate=="100%"&&(r.style.translate="")}},s=!1;document.body.classList.contains("vertical")&&(s=!0),v.plus.disabled=!0,v.plus.hide(),t.classList.add("is-dragging");let i=t.clientWidth/2,u=t.clientHeight/2,p=e.x,m=e.y,a=parseInt(t.getAttribute("data-color-index")),d=v.slots[a],h=0,f;addEventListener("mousemove",l),addEventListener("mouseup",()=>{t.classList.remove("is-dragging"),t.classList.add("is-released"),removeEventListener("mousemove",l),t.style.translate=`${s?"0 ":""}${h*100}%`;function g(){t.removeEventListener("transitionend",g),t.removeEventListener("transitioncancel",g),t.classList.remove("is-released");let c=t;for(let n=0;n<h;n++)v.slots.splice(d.data,1),v.slots.splice(d.data+1,0,d),d.data++,c=c.nextElementSibling,v.slots[d.data-1].data--;for(let n=0;n>h;n--)v.slots.splice(d.data,1),v.slots.splice(d.data-1,0,d),d.data--,c=c.previousElementSibling,v.slots[d.data+1].data++;let r=t.cloneNode(!0);h>0?(c.after(r),t.remove()):h<0&&(c.before(r),t.remove()),t.style.translate="";let b=[];for(let n of v.slots){let x=document.getElementById(n.id);x.style.transition="transform 0s",x.style.translate="",setTimeout(()=>{x.style.transition=""},1),b.push(n.hex)}t=r,history.replaceState("","",b.join("-")),v.plus.disabled=!1,h&&T.create.push({undo(){v.plus.hide();let n=t=document.getElementById(d.id);for(let L=0;L<-h;L++){v.slots.splice(d.data,1),v.slots.splice(d.data+1,0,d),d.data++,n=n.nextElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S-1).toString())}for(let L=0;L>-h;L--){v.slots.splice(d.data,1),v.slots.splice(d.data-1,0,d),d.data--,n=n.previousElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S+1).toString())}r=t.cloneNode(!0),-h>0?(n.after(r),t.remove()):-h<0&&(n.before(r),t.remove());let x=[];for(let L of v.slots)x.push(L.hex);history.replaceState("","",x.join("-"))},redo(){v.plus.hide();let n=t=document.getElementById(d.id);for(let L=0;L<h;L++)v.slots.splice(d.data,1),v.slots.splice(d.data+1,0,d),d.data++,n=n.nextElementSibling,a=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(a-1).toString());for(let L=0;L>h;L--)v.slots.splice(d.data,1),v.slots.splice(d.data-1,0,d),d.data--,n=n.previousElementSibling,a=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(a+1).toString());r=t.cloneNode(!0),h>0?(n.after(r),t.remove()):h<0&&(n.before(r),t.remove());let x=[];for(let L of v.slots)x.push(L.hex);history.replaceState("","",x.join("-"))}})}t.addEventListener("transitionend",g),t.addEventListener("transitioncancel",g)},{once:!0}),ondragstart=()=>!1}}}let He=document.querySelector(".main-nav");function Te(){onkeydown=o=>{var e,t;if(document.querySelector(".confirmation-screen")){if(o.key==="Escape"){(e=document.querySelector(".confirmation-screen"))==null||e.remove();return}return}if(o.metaKey||o.ctrlKey){let{base:l}=N.deconstructURL(location.pathname);if(o.key==="z"||o.key==="Z")if(l==="palettes"){o.shiftKey?T.palettes.redo():T.palettes.undo();return}else{o.shiftKey?T.create.redo():T.create.undo();return}if(l==="create"){let s=parseInt(o.key);if(s>=0&&s<=9){o.preventDefault();let i=v.slots[s-1]||v.slots[v.slots.length-1],u=document.getElementById(i.id);T.create.push({undo(){let p=v.slots[s-1]||v.slots[v.slots.length-1],m=document.getElementById(p.id);p.isLocked=!p.isLocked,m.querySelector(".lock").classList.toggle("locked")},redo(){let p=v.slots[s-1]||v.slots[v.slots.length-1],m=document.getElementById(p.id);p.isLocked=!p.isLocked,m.querySelector(".lock").classList.toggle("locked")}}),i.isLocked=!i.isLocked,u.querySelector(".lock").classList.toggle("locked");return}}}if(o.key===" "){let{base:l}=N.deconstructURL(location.pathname);if(l==="create"){o.preventDefault();let s=[];for(let{hex:u}of v.slots)s.push(u);v.generate();let i=[];for(let{hex:u}of v.slots)i.push(u);history.replaceState("","","/polychrome/create/"+i.join("-")),T.create.push({undo:()=>{v.generate(s),history.replaceState("","","/polychrome/create/"+s.join("-")),v.plus.hide()},redo:()=>{v.generate(i),history.replaceState("","","/polychrome/create/"+i.join("-"))}})}return}if(o.key==="Escape"){He.classList.remove("visible"),(t=document.querySelector(".overlay"))==null||t.remove();return}//! NOT DONE
if(o.key==="Enter"){let l=document.activeElement;console.log(l);return}o.key}}let v=new Se,q=new ve,N=new Ee([["",$("Home",document.getElementById("landing-page"))],["palettes",$("Palettes",document.getElementById("palettes-page"),q)],["create",$("Create",document.getElementById("create-page"),v)],["404",$("404 Not Found",document.getElementById("not-found-page"))]]);N.routeToURL(location.pathname);setTimeout(()=>{document.querySelector(":root").style.display="initial",window.innerHeight>window.innerWidth?(document.body.classList.add("vertical"),document.body.classList.remove("landscape-thin")):window.innerWidth/window.innerHeight<1.6?(document.body.classList.add("landscape-thin"),document.body.classList.remove("vertical")):document.body.classList.remove("vertical","landscape-thin")},200);onresize=()=>{window.innerHeight>window.innerWidth?(document.body.classList.add("vertical"),document.body.classList.remove("landscape-thin")):window.innerWidth/window.innerHeight<1.6?(document.body.classList.add("landscape-thin"),document.body.classList.remove("vertical")):document.body.classList.remove("vertical","landscape-thin")};onpopstate=()=>N.navigateTo(location.pathname,!0);we();Ae();Te();onmouseover=o=>{if(!v.plus.disabled){const e=o.target,t=e.closest(".swatch");if(t)if(e.closest(".detector")&&v.slots.length<10){const s=e.closest(".left");let i=parseInt(t.getAttribute("data-color-index"));s&&i--,v.plus.show(i)}else v.plus.hide(0)}};let Ce=I.info.firstVisit;Ce==!0&&_({message:"This site relies on local storage and cookies to save palettes.",value:"cookies"},[{message:"Sure, sounds good to me.",value:"yes",call(){I.info={firstVisit:!1},I.settings={cookiesOk:!0};let o=w("Thanks, enjoy the site! :)");document.body.append(o)}},{message:"No thanks, I don't want to save palettes.",value:"no",call(){I.info={firstVisit:!1},I.settings={cookiesOk:!1};for(let e=0;e<q.items.length;e++)q.removeItem(0);let o=w("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(o)}}]);(navigator.userAgent.includes("Android")||navigator.userAgent.includes("like Mac"))&&document.body.classList.add("mobile");
