var le=Object.defineProperty;var oe=(s,e,t)=>e in s?le(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var N=(s,e,t)=>(oe(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&l(a)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}})();function H(s){let e=parseInt(s[0]+s[1],16)/255,t=parseInt(s[2]+s[3],16)/255,l=parseInt(s[4]+s[5],16)/255,o=Math.max(e,t,l),n=Math.min(e,t,l),a,i,u=e*.299+t*.587+l*.114,r=(o+n)/2;if(o==n)a=i=0;else{let d=o-n;switch(i=r>.5?d/(2-o-n):d/(o+n),o){case e:a=(t-l)/d+(t<l?6:0);break;case t:a=(l-e)/d+2;break;default:a=(e-t)/d+4;break}a=a*60}return{r:e,g:t,b:l,h:a,s:i,l:r,lum:u}}const A={get info(){let s=localStorage.getItem("info");return s?JSON.parse(s):(localStorage.setItem("info",JSON.stringify({firstVisit:!0})),this.info)},set info(s){let e=this.info;if(s)for(let[t,l]of Object.entries(s))e[t]=l;localStorage.setItem("info",JSON.stringify(e))},get settings(){let s=localStorage.getItem("settings");return s?JSON.parse(s):(localStorage.setItem("settings",JSON.stringify({algorithm:2,cookies:0})),this.settings)},set settings(s){let e=this.settings;if(s)for(let[t,l]of Object.entries(s))e[t]=l;localStorage.setItem("settings",JSON.stringify(e))},savedPalettes:{get items(){let s=localStorage.getItem("saved-palettes"),e;if(s){let t=[];e=JSON.parse(s);for(let l of e)t.push(l);return t}else return[]},set items(s){localStorage.setItem("saved-palettes",JSON.stringify(s))},addItem(s){let e=this.items;e.push(s),this.items=e},removeItem(s){this.items.splice(s,1)}}},k={create:{cmds:[],cmdIndex:-1,push(s){this.cmds.splice(this.cmdIndex+1,1/0,s),this.cmdIndex=this.cmds.length-1},undo(){this.cmdIndex>-1&&(this.cmds[this.cmdIndex].undo(),this.cmdIndex--)},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}},palettes:{cmds:[],cmdIndex:-1,push(s){this.cmds.splice(this.cmdIndex+1,1/0,s),this.cmdIndex=this.cmds.length-1},undo(){if(this.cmdIndex>-1){let s=this.cmds[this.cmdIndex];this.cmdIndex--,s.undo()}},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}}},h=(s,e)=>Math.random()*(e-s)+s;function I(s,e){const t=document.createElement("div");t.classList.add("tooltip","appearing");const l=document.createElement("h2");return l.innerHTML=s,t.append(l),(e==null?void 0:e.pos)&&!(navigator.userAgent.includes("Android")||navigator.userAgent.includes("like Mac"))?(t.style.left=e.pos[0]+"px",t.style.top=e.pos[1]+"px",setTimeout(()=>{t.clientWidth+e.pos[0]>document.body.clientWidth?(t.style.translate="-100%",t.clientHeight+e.pos[1]>document.body.clientHeight&&(t.style.translate="-100 -100%")):t.clientHeight+e.pos[1]>document.body.clientHeight&&(t.style.translate="0 -100%")},0)):t.classList.add("centered"),t.addEventListener("animationend",()=>{t.classList.remove("appearing"),setTimeout(()=>{t.classList.add("disappearing"),t.addEventListener("animationend",()=>{t.remove()},{once:!0})},(e==null?void 0:e.duration)||1e3)},{once:!0}),t}let j=!1;function V(s,e){let t=document.createElement("div");t.classList.add("popover");let l=new IntersectionObserver(i=>{let u=i[0];console.log(u),!u.isIntersecting&&u.intersectionRatio<1&&(t.style.translate="0 -100%")},{root:document,threshold:1});setTimeout(()=>{l.observe(t)},10),(e==null?void 0:e.type)=="tool-menu"&&t.classList.add("bottom");let o=document.createElement("div");o.classList.add("clear-overlay"),document.body.append(o);let n=document.createElement("ul");n.classList.add("list");let a=()=>{o.remove(),t.remove()};if(o.onclick=o.ontouchend=()=>{j||(j=!0,setTimeout(()=>{j=!1},75),a())},s)for(let{message:i,classes:u,attributes:r,call:d}of s){let v=document.createElement("div");if(v.classList.add("choice"),v.innerHTML=i,u)for(let y of u)v.classList.add(y);if(r)for(let y of r)v.setAttribute(y[0],y[1]);n.append(v),t.append(n),setTimeout(()=>{v.onclick=v.ontouchend=()=>{j||(j=!0,setTimeout(()=>{j=!1},75),d&&d(),a())}},25)}return t}function R(s,e){let t=document.createElement("div");t.classList.add("confirmation-screen");let l=document.createElement("h2");l.innerHTML=s;let o=document.createElement("div");o.classList.add("overlay");let n=()=>{var u;document.querySelector(".main-nav").classList.remove("visible"),t.remove(),(u=document.querySelector(".overlay"))==null||u.remove(),setTimeout(J,50)};o.onclick=o.ontouchend=n;let a=document.createElement("div");a.classList.add("box"),a.append(l),t.append(a,o);function i(){var x,c,p;(x=e==null?void 0:e.confirmation)!=null&&x.value&&t.classList.add(e.confirmation.value);let u=document.createElement("ul"),r=document.createElement("li");r.classList.add("yes"),r.innerHTML=((c=e==null?void 0:e.confirmation)==null?void 0:c.confirm.message)||"Confirm";let d=document.createElement("li");d.classList.add("no"),d.innerHTML=((p=e==null?void 0:e.confirmation)==null?void 0:p.cancel.message)||"Cancel";let v=()=>{var f;(f=e==null?void 0:e.confirmation)!=null&&f.confirm.call&&e.confirmation.confirm.call(),n()},y=()=>{var f;(f=e==null?void 0:e.confirmation)!=null&&f.cancel.call&&e.confirmation.cancel.call(),n()};return r.onclick=r.ontouchend=v,d.onclick=d.ontouchend=y,u.append(d,r),u}if((e==null?void 0:e.type)=="input"){let u=document.createElement("textarea");a.append(u)}if(e&&e.settings){let u=document.createElement("ul");u.classList.add("options");for(let{message:r,value:d,choices:v}of e.settings){let y=document.createElement("li"),x=document.createElement("label");x.innerText=r;let c=document.createElement("select");c.id=d;let p=0;for(let{message:f,value:m}of v){let b=document.createElement("option");b.innerText=f,b.id=(typeof m=="number"?m:p).toString(),p++,c.append(b)}c.selectedIndex=A.settings[d],y.append(x,c),u.append(y)}a.append(u)}a.append(i()),document.body.append(t)}let P=document.querySelector(".saved-palettes-wrapper");class ie{constructor(){N(this,"items",[]);this.items=A.savedPalettes.items}draw(e){for(;P.childElementCount>0;)P.lastChild.remove();if(e)for(let l=0;l<e.length;l++){let o=e[l],n=document.createElement("div");n.setAttribute("data-palette-index",l.toString()),n.classList.add("palette-container");let a=document.createElement("div");a.classList.add("palette");let i=document.createElement("div");i.classList.add("options");let u=document.createElement("div");u.classList.add("more");let r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","0 0 100 100");let d=document.createElementNS("http://www.w3.org/2000/svg","use");d.setAttribute("href","#icon-more-horizontal");for(let v=0;v<o.length;v++){let y=o[v],{lum:x}=H(y),c=document.createElement("div");c.setAttribute("data-color-index",v.toString()),c.classList.add("swatch"),c.style.backgroundColor="#"+y,x<.5&&c.classList.add("isLight");let p=document.createElement("h2");p.innerHTML="#"+y,p.classList.add("text"),c.append(p),a.append(c)}r.append(d),u.append(r),i.append(u),n.append(a,i),P.append(n)}let t=document.querySelector(".palettes-page .when-empty");P.childElementCount==0?t.classList.remove("hidden"):t.classList.add("hidden")}addItem(e,t){typeof t=="number"?this.items.splice(t,0,e):this.items.push(e),A.savedPalettes.items=this.items,this.draw(this.items)}removeItem(e){this.items.splice(e,1),A.savedPalettes.items=this.items,this.draw(this.items)}}function T(s,e,t){s>360?s-=360:s<0&&(s+=360),e>1?e=1:e<0&&(e=0),t>1?t=1:t<0&&(t=0),e*=100;const l=e*Math.min(t,1-t)/100,o=n=>{const a=(n+s/30)%12,i=t-l*Math.max(Math.min(a-3,9-a,1),-1);return Math.round(255*i).toString(16).padStart(2,"0")};return`${o(0)}${o(8)}${o(4)}`}function K(s){if(s.algorithm.details=="slot"){let e=[];for(let t=0;t<6;t++)e.push(Math.round(h(0,15)).toString(16));return e.join("")}else for(let e of s.slots)if(!e.isLocked){let t=[];for(let l=0;l<6;l++)t.push(Math.round(h(0,15)).toString(16));e.hex=t.join(""),e.sync()}}function W(s,e){if(s.algorithm.details=="slot")if(Math.random()>.5){let t=0,l=0,o=0,n=s.slots[e-2],a=s.slots[e-1],i=s.slots[e],u=s.slots[e+1];if(i){let{h:r,s:d,l:v}=H(i.hex);if(t=r,a){let{s:y,l:x}=H(a.hex);l=d-(d-y)/2,o=v-(v-x)/2}else if(u){let{s:y,l:x}=H(u.hex);l=d-(y-d)/2,o=v-(x-v)/2}else l=d*h(.7,1.3),o=v*h(.7,1.3)}else if(a){let{h:r,s:d,l:v}=H(a.hex);if(t=r,n){let{s:y,l:x}=H(n.hex);l=d+(d-y)/2,o=v+(v-x)/2}else l=d*h(.7,1.3),o=v*h(.7,1.3)}else l=h(.2,1),o=h(.1,.9);return l*=h(.95,1.05),o*=h(.95,1.05),T(t,l,o)}else{let t,l,o,n,a,i,u;for(let{hex:r}of s.slots){let{h:d,s:v,l:y}=H(r);typeof t!="number"&&(t=d),(typeof o!="number"||v>o)&&(o=v),(typeof l!="number"||v<l)&&(l=v),(typeof a!="number"||y>a)&&(a=y),(typeof n!="number"||y<n)&&(n=y)}return i=h(l,o)*h(.95,1.05),u=h(n,a)*h(.95,1.05),T(t,i,u)}else if(s.algorithm.details=="increment"||Math.random()>.5){let t=[],l=h(0,360),o=0,n=0,a=0,i=0,u=0,r=0,d=0,v=0;for(let y of s.slots)y.isLocked||t.push(y);for(let y=0;y<t.length;y++)if(y==0){let x=s.slots[0];o=h(.1,1),n=h(.1,.9),x.hex=T(l,o,n),x.sync(),a=o,i=n,a<.4?u=h(.7,1):a>.6?u=h(.1,.3):a>.5?u=h(.1,.2):u=h(.8,.9),i<.4?r=h(.7,1):i>.6?r=h(.1,.3):i>.5?r=h(.1,.2):r=h(.8,.9),d=(u-a)/s.slots.length,v=(r-i)/s.slots.length}else{let x=s.slots[y];o=a+d*y,n=i+v*y,x.hex=T(l,o,n),x.sync()}}else{let t=h(0,360),l,o,n;for(let a of s.slots)a.isLocked||(l=h(.2,1),o=h(.2,.8),typeof n!="number"&&(t=n=h(0,360)),a.hex=T(t,l,o),a.sync())}}function F(s,e){if(s.algorithm.details=="slot")if(Math.random()>.5){let t=0,l=0,o=0,n=s.slots[e-2],a=s.slots[e-1],i=s.slots[e],u=s.slots[e+1];if(i){let{h:r,s:d,l:v}=H(i.hex);if(a){let{h:y,s:x,l:c}=H(a.hex),p=r-y;p>180?p=r-y-360:p<-180&&(p=r-y+360),t=r-p/2,l=d-(d-x)/2,o=v-(v-c)/2}else if(u){let{h:y,s:x,l:c}=H(u.hex),p=y-r;p>180?p=y-r-360:p<-180&&(p=y-r+360),t=r-p/2,l=d-(x-d)/2,o=v-(c-v)/2}else t=r*h(.7,1.3),l=d*h(.7,1.3),o=v*h(.7,1.3)}else if(a){let{h:r,s:d,l:v}=H(a.hex);if(n){let{h:y,s:x,l:c}=H(n.hex),p=r-y;p>180?p=r-y-360:p<-180&&(p=r-y+360),t=r+p/2,l=d+(d-x)/2,o=v+(v-c)/2}else t=r*h(.7,1.3),l=d*h(.7,1.3),o=v*h(.7,1.3)}else t=h(0,360),l=h(.2,1),o=h(.1,.9);return t*=h(.95,1.05),l*=h(.95,1.05),o*=h(.95,1.05),T(t,l,o)}else{let t,l,o,n,a,i,u,r,d,v,y=Math.random();for(let{hex:x}of s.slots){let{h:c,s:p,l:f}=H(x);if(typeof t!="number")t=c;else if(typeof l!="number"){let m=t,b=m-c;b>180?m-=360:b<-180&&(m+=360),b=m-c,(b<-25||b>25)&&(l=c)}else if(typeof o!="number"){let m=t,b=l,S=m-c,L=b-c;S>180?m-=360:S<-180&&(m+=360),L>180?b-=360:L<-180&&(b+=360),S=m-c,L=b-c,(S>25||S<-25)&&(L>25||L<-25)&&(o=c)}(typeof a!="number"||p>a)&&(a=p),(typeof n!="number"||p<n)&&(n=p),(typeof u!="number"||f>u)&&(u=f),(typeof i!="number"||f<i)&&(i=f)}return o&&y<.333?r=o:l&&y>.666?r=l:r=t,d=h(n,a)*h(.95,1.05),v=h(i,u)*h(.95,1.05),T(r,d,v)}else if(s.algorithm.details=="increment"||Math.random()>.5){let t=0,l=0,o=0,n=0,a=0,i=0,u=0,r=0,d=0,v=0,y=0,x=0;for(let c=0;c<s.slots.length;c++){let p=s.slots[c];if(!p.isLocked)if(!n)t=n=h(0,360),l=a=h(.1,1),o=i=h(.1,.9),p.hex=T(t,l,o),p.sync(),n=t,a=l,i=o,Math.random()>.5?u=t+h(90,120):u=t-h(75,90),a<.4?r=h(.7,1):a>.6?r=h(.1,.3):a>.5?r=h(.1,.2):r=h(.8,.9),i<.4?d=h(.7,1):i>.6?d=h(.1,.3):i>.5?d=h(.1,.2):d=h(.8,.9),v=(u-n)/s.slots.length,y=(r-a)/s.slots.length,x=(d-i)/s.slots.length;else{let f=s.slots[c];t=n+v*c,l=a+y*c,o=i+x*c,f.hex=T(t,l,o),f.sync()}}}else{let t,l,o,n,a,i;for(let u of s.slots)if(!u.isLocked){if(l=h(.2,1),o=h(.2,.8),typeof n!="number")t=n=h(0,360);else if(typeof a!="number")t=a=n+30*h(.975,1.025);else if(typeof i!="number")t=i=n-30*h(.975,1.025);else{let r=Math.random();r<.333?t=n:r>.666?t=a:t=i}u.hex=T(t,l,o),u.sync()}}}function Z(s){if(s.algorithm.details=="slot"){let e,t,l,o,n,a,i,u,r,d=Math.random();for(let{hex:v}of s.slots){let{h:y,s:x,l:c}=H(v);if(typeof e!="number")e=y;else if(typeof t!="number"){let p=e,f=p-y;f>180?p-=360:f<-180&&(p+=360),f=p-y,(f<-90||f>90)&&(t=y)}(typeof o!="number"||x>o)&&(o=x),(typeof l!="number"||x<l)&&(l=x),(typeof a!="number"||c>a)&&(a=c),(typeof n!="number"||c<n)&&(n=c)}return d>.5&&t?i=t*h(.925,1.025):i=e*h(.925,1.025),u=h(l,o)*h(.95,1.05),r=h(n,a)*h(.95,1.05),T(i,u,r)}else{let e,t,l,o,n;for(let a of s.slots)a.isLocked||(t=h(.2,1),l=h(.2,.8),typeof o!="number"?e=o=h(0,360):typeof n!="number"?e=n=o+150*h(.975,1.025):Math.random()<.5?e=o*h(.975,1.025):e=n*h(.975,1.025),a.hex=T(e,t,l),a.sync())}}function G(s){if(s.algorithm.details=="slot"){let e,t,l,o,n,a,i,u,r,d,v=Math.random();for(let{hex:y}of s.slots){let{h:x,s:c,l:p}=H(y);if(typeof e!="number")e=x;else if(typeof t!="number"){let f=e,m=f-x;m>180?f-=360:m<-180&&(f+=360),m=f-x,(m<-30||m>30)&&(t=x)}else if(typeof l!="number"){let f=e,m=t,b=f-x,S=m-x;b>180?f-=360:b<-180&&(f+=360),S>180?m-=360:S<-180&&(m+=360),b=f-x,S=m-x,(b>30||b<-30)&&(S>30||S<-30)&&(l=x)}(typeof n!="number"||c>n)&&(n=c),(typeof o!="number"||c<o)&&(o=c),(typeof i!="number"||p>i)&&(i=p),(typeof a!="number"||p<a)&&(a=p)}return v<.333&&l?u=l:v>.666&&t?u=t:u=e,r=h(o,n)*h(.95,1.05),d=h(a,i)*h(.95,1.05),T(u,r,d)}else{let e,t,l,o,n,a;for(let i of s.slots)if(!i.isLocked){if(t=h(.2,1),l=h(.2,.8),typeof o!="number")e=o=h(0,360);else if(typeof n!="number")e=n=o+150*h(.975,1.025);else if(typeof a!="number")e=a=o-150*h(.975,1.025);else{let u=Math.random();u<.333?e=o*h(.975,1.025):u>.666?e=n*h(.975,1.025):e=a*h(.975,1.025)}i.hex=T(e,t,l),i.sync()}}}function Q(s){if(s.algorithm.details=="slot"){let e,t,l,o,n,a,i,u,r,d,v=Math.random();for(let{hex:y}of s.slots){let{h:x,s:c,l:p}=H(y);if(typeof e!="number")e=x;else if(typeof t!="number"){let f=e,m=f-x;m>180?f-=360:m<-180&&(f+=360),m=f-x,(m<-90||m>90)&&(t=x)}else if(typeof l!="number"){let f=e,m=t,b=f-x,S=m-x;b>180?f-=360:b<-180&&(f+=360),S>180?m-=360:S<-180&&(m+=360),b=f-x,S=m-x,(b>90||b<-90)&&(S>90||S<-90)&&(l=x)}(typeof n!="number"||c>n)&&(n=c),(typeof o!="number"||c<o)&&(o=c),(typeof i!="number"||p>i)&&(i=p),(typeof a!="number"||p<a)&&(a=p)}return v<.333?u=e:v>.666?u=t:u=l,r=h(o,n)*h(.95,1.05),d=h(a,i)*h(.95,1.05),T(u,r,d)}else{let e,t,l,o,n,a;for(let i of s.slots)if(!i.isLocked){if(t=h(.2,1),l=h(.2,.8),typeof o!="number")e=o=h(0,360);else if(typeof n!="number")e=n=o+120;else if(typeof a!="number")e=a=o-120;else{let u=Math.random();u<.333?e=o:u<.666?e=n:e=a}i.hex=T(e,t,l),i.sync()}}}function _(s){if(s.algorithm.details=="slot"){let e,t,l,o,n,a,i,u,r,d,v,y=Math.random();for(let{hex:x}of s.slots){let{h:c,s:p,l:f}=H(x);if(typeof e!="number")e=c;else if(typeof t!="number"){let m=e,b=m-c;b>180?m-=360:b<-180&&(m+=360),b=m-c,(b<-45||b>45)&&(t=c)}else if(typeof l!="number"){let m=e,b=t,S=m-c,L=b-c;S>180?m-=360:S<-180&&(m+=360),L>180?b-=360:L<-180&&(b+=360),S=m-c,L=b-c,(S>45||S<-45)&&(L>45||L<-45)&&(l=c)}else if(typeof o!="number"){let m=e,b=t,S=l,L=m-c,E=b-c,w=S-c;L>180?m-=360:L<-180&&(m+=360),E>180?b-=360:E<-180&&(b+=360),w>180?S-=360:w<-180&&(S+=360),L=m-c,E=b-c,w=S-c,(L>45||L<-45)&&(E>45||E<-45)&&(w>45||w<-45)&&(o=c)}(typeof a!="number"||p>a)&&(a=p),(typeof n!="number"||p<n)&&(n=p),(typeof u!="number"||f>u)&&(u=f),(typeof i!="number"||f<i)&&(i=f)}return typeof o=="number"&&y<.25?r=o:typeof l=="number"&&y<.5?r=l:typeof t=="number"&&y<.75?r=t:r=e,d=h(n,a)*h(.95,1.05),v=h(i,u)*h(.95,1.05),T(r,d,v)}else{let e,t,l,o,n,a,i;for(let u of s.slots)if(!u.isLocked){if(t=h(.2,1),l=h(.2,.8),typeof o!="number")e=o=h(0,360);else if(typeof n!="number")e=n=o+60;else if(typeof a!="number")e=a=o-120;else if(typeof i!="number")e=i=o+180;else{let r=Math.random();r<.25?e=o:r>.5?e=n:r>.75?e=a:e=i}u.hex=T(e,t,l),u.sync()}}}function ee(s){if(s.algorithm.details=="slot"){let e,t,l,o,n,a,i,u,r,d,v,y=Math.random();for(let{hex:x}of s.slots){let{h:c,s:p,l:f}=H(x);if(typeof e!="number")e=c;else if(typeof t!="number"){let m=e,b=m-c;b>180?m-=360:b<-180&&(m+=360),b=m-c,(b<-85||b>85)&&(t=c)}else if(typeof l!="number"){let m=e,b=t,S=m-c,L=b-c;S>180?m-=360:S<-180&&(m+=360),L>180?b-=360:L<-180&&(b+=360),S=m-c,L=b-c,(S<-85||S>85)&&(L<-85||L>85)&&(l=c)}else if(typeof o!="number"){let m=e,b=t,S=l,L=m-c,E=b-c,w=S-c;L>180?m-=360:L<-180&&(m+=360),E>180?b-=360:E<-180&&(b+=360),w>180?S-=360:w<-180&&(S+=360),L=m-c,E=b-c,w=S-c,(L<-85||L>85&&E<-85||E>85&&(w<-85||w>85))&&(o=c)}(typeof a!="number"||p>a)&&(a=p),(typeof n!="number"||p<n)&&(n=p),(typeof u!="number"||f>u)&&(u=f),(typeof i!="number"||f<i)&&(i=f)}return typeof o=="number"&&y<.25?r=o:typeof l=="number"&&y<.5?r=l:typeof t=="number"&&y<.75?r=t:r=e,d=h(n,a)*h(.95,1.05),v=h(i,u)*h(.95,1.05),T(r,d,v)}else{let e,t,l,o,n,a,i;for(let u of s.slots)if(!u.isLocked){if(t=h(.2,1),l=h(.2,.8),typeof o!="number")e=o=h(0,360);else if(typeof n!="number")e=n=o+60;else if(typeof a!="number")e=a=o-120;else if(typeof i!="number")e=i=o+180;else{let r=Math.random();r<.25?e=o:r>.5?e=n:r>.75?e=a:e=i}u.hex=T(e,t,l),u.sync()}}}function ne(s,e){switch(Math.round(h(0,7))){case 0:return K(s);case 1:return W(s,e);case 2:default:return F(s,e);case 3:return Z(s);case 4:return G(s);case 5:return Q(s);case 6:return _(s);case 7:return ee(s)}}const ae=[K,W,F,Z,G,Q,_,ee,ne];let D;const re=new Uint8Array(16);function de(){if(!D&&(D=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!D))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return D(re)}const C=[];for(let s=0;s<256;++s)C.push((s+256).toString(16).slice(1));function ce(s,e=0){return(C[s[e+0]]+C[s[e+1]]+C[s[e+2]]+C[s[e+3]]+"-"+C[s[e+4]]+C[s[e+5]]+"-"+C[s[e+6]]+C[s[e+7]]+"-"+C[s[e+8]]+C[s[e+9]]+"-"+C[s[e+10]]+C[s[e+11]]+C[s[e+12]]+C[s[e+13]]+C[s[e+14]]+C[s[e+15]]).toLowerCase()}const me=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),X={randomUUID:me};function ue(s,e,t){if(X.randomUUID&&!e&&!s)return X.randomUUID();s=s||{};const l=s.random||(s.rng||de)();if(l[6]=l[6]&15|64,l[8]=l[8]&63|128,e){t=t||0;for(let o=0;o<16;++o)e[t+o]=l[o];return e}return ce(l)}let fe=document.getElementById("palette");class he{constructor(){N(this,"slots",[]);N(this,"plus",{palette:this,disabled:!1,active:!1,show(e){if(!this.active){let t=this.render(e.toString()),l=this.palette.slots[e];if(l)document.getElementById(l.id).after(t);else{l=this.palette.slots[e+1];let o=document.getElementById(l.id);o==null||o.before(t)}this.active=!0}},hide(e){var t;if(this.active){if((t=document.getElementById("plus-button"))==null||t.parentElement.parentElement.remove(),this.active=!1,this.disabled)return;this.disabled=!0,setTimeout(()=>{this.disabled=!1},typeof e=="number"?e:300)}},render(e){let t=document.createElement("div");t.classList.add("plus-container");let l=document.createElement("div");l.classList.add("circle");let o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("data-color-index",e),o.setAttribute("viewBox","0 0 100 100"),o.id="plus-button";let n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttribute("href","#icon-plus-button"),n.setAttribute("viewBox","0 0 100 100"),o.append(n),l.append(o),t.append(l),t}});N(this,"algorithm",{list:ae,get(e){e=="slot"?this.details="slot":this.details="";let t=A.settings.algorithm;return this.list[t]},details:"",direction:{h:0,s:0,l:0},preference:{h:void 0,s:void 0,l:void 0}})}removeSlot(e,t){t||(t={animations:!0});let l=e.data+1;for(let n=l;n<this.slots.length;n++)this.slots[n].data--;let o=document.getElementById(e.id);if(this.slots.splice(e.data,1),t.animations==!0){let n=function(){o.remove(),o.removeEventListener("animationend",n),o.removeEventListener("animationcancel",n)};o.classList.add("deinit"),o.addEventListener("animationend",n),o.addEventListener("animationcancel",n)}else o.remove();return e}addSlot(e,t){var a;let l={palette:this,hex:e.hex,isLocked:typeof e.isLocked=="boolean"?e.isLocked:!1,id:e.id||btoa(parseInt(ue(),16).toString(36)).replaceAll("=",""),index:typeof e.index!="number"?this.slots.length:e.index,get data(){var u;let i=parseInt((u=document.getElementById(this.id))==null?void 0:u.getAttribute("data-color-index"));return typeof i=="number"?i:this.data=this.index},set data(i){var u;(u=document.getElementById(this.id))==null||u.setAttribute("data-color-index",i.toString()),this.index=i},generate(){this.hex=this.palette.algorithm.get("slot")(this.palette,this.index),this.sync()},sync(){let i=document.getElementById(this.id);if(this.hex){let{lum:u}=H(this.hex);u<.5?i.classList.add("isLight"):i.classList.remove("isLight"),i.style.backgroundColor="#"+this.hex,i.getElementsByClassName("hex")[0].innerHTML="#"+this.hex}}};l.hex||(l.hex=this.algorithm.get("slot")(this,l.index));let o=this.createSwatch(l,t),n=document.getElementById((a=this.slots[l.index-1])==null?void 0:a.id);n?n.after(o):fe.prepend(o),l.data=l.index,this.slots.splice(l.index,0,l);for(let i=l.index+1;i<this.slots.length;i++)this.slots[i].data++;return l}createSwatch(e,t){t||(t={animations:!0});let l=document.createElement("div");if(l.classList.add("swatch"),l.setAttribute("data-color-index",e.data),l.id=e.id,e.hex){l.style.backgroundColor="#"+e.hex;let{lum:m}=H(e.hex);m<.5?l.classList.add("isLight"):l.classList.remove("isLight")}if(t.animations==!0){let m=function(){l.classList.remove("init"),l.removeEventListener("animationend",m),l.removeEventListener("animationcancel",m)};l.classList.add("init"),l.addEventListener("animationend",m),l.addEventListener("animationcancel",m)}let o=document.createElement("div");o.classList.add("options");let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.classList.add("icon","x"),n.setAttribute("viewBox","0 0 100 100");let a=document.createElementNS("http://www.w3.org/2000/svg","use");a.setAttribute("href","#icon-x");let i=document.createElementNS("http://www.w3.org/2000/svg","use");i.setAttribute("viewBox","0 0 100 100"),i.setAttribute("href","#icon-lock-body");let u=document.createElementNS("http://www.w3.org/2000/svg","use");u.setAttribute("viewBox","0 0 100 100"),u.setAttribute("href","#icon-lock-arm");let r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","0 0 100 100"),r.classList.add("icon","lock"),e.isLocked&&r.classList.add("locked");let d=document.createElement("div");d.classList.add("info-container");let v=document.createElement("div");v.classList.add("info");let y=document.createElement("h2");y.classList.add("hex"),y.innerHTML="#"+e.hex;let x=document.createElementNS("http://www.w3.org/2000/svg","svg");x.classList.add("icon"),x.setAttribute("viewBox","0 0 100 100");let c=document.createElementNS("http://www.w3.org/2000/svg","use");c.setAttribute("href","#icon-copy");let p=document.createElement("div");p.classList.add("detector","left");let f=document.createElement("div");return f.classList.add("detector"),n.append(a),r.append(u,i),x.append(c),v.append(y,x),d.append(v),o.append(n,r,d),l.append(o,p,f),l}generate(e){let t={animations:!1};if(e)if(e.length==this.slots.length)for(let l=0;l<e.length;l++)this.slots[l].hex=e[l],this.slots[l].sync();else{for(let l of this.slots)document.getElementById(l.id).remove();this.slots=[];for(let l=0;l<e.length;l++)this.addSlot({index:l,hex:e[l]},t)}else if(this.slots.length>0)this.algorithm.get()(this);else{for(let l=0;l<5;l++)this.addSlot({},t);this.algorithm.get()(this)}return this.slots}}class pe{constructor(e){N(this,"routes");N(this,"loadContent",e=>{if(e){let{base:t,ids:l}=e;typeof t!="string"&&(t=e);let o=this.routes.get(t);l?o(l):o()}else this.routes.get("404")()});N(this,"routeToURL",e=>{let t=this.deconstructURL(e),{base:l,ids:o}=t;this.routes.has(l)?l==="create"?o?this.idsAreValid(o)?this.loadContent(t):this.loadContent():this.loadContent(t):this.loadContent(t):this.loadContent()});N(this,"navigateTo",(e,t)=>{t=t||!1,t?history.replaceState("","",e):history.pushState("","","/polychrome"+e),this.routeToURL(e)});this.routes=new Map(e)}deconstructURL(e){let t=e.replace(/^\//,"").replace(/\/$/,"").split("/");return t[0]=="polychrome"?{site:"polychrome",base:t[1]||"",ids:t[2]?t[2].split("-"):null}:{site:"polychrome",base:t[0],ids:t[1]?t[1].split("-"):null}}idsAreValid(e){for(let t of e)if(!/^[a-f0-9]{6}$/.test(t)||e.length>10)return!1;return!0}}function ge(){let s=!1,e=document.querySelector("#palette");e.onclick=e.ontouchend=t;async function t(d){if(s)return;s=!0,setTimeout(()=>{s=!1},75);let v=d.target,y=v.closest(".plus-container svg");if(y){const{ids:c}=B.deconstructURL(location.pathname),p=parseInt(y.getAttribute("data-color-index"));let f=g.addSlot({index:p+1});c.splice(p+1,0,f.hex),history.replaceState("","",c.join("-")),g.plus.hide(),k.create.push({undo(){g.removeSlot(f,{animations:!1}),c.splice(p+1,1),history.replaceState("","",c.join("-")),g.plus.hide()},redo(){g.addSlot(f,{animations:!1}),c.splice(p+1,0,f.hex),history.replaceState("","",c.join("-")),g.plus.hide()}}),g.slots.length>9&&g.plus.hide();return}let x=v.closest(".lock");if(x){let c=v.closest(".swatch"),p=parseInt(c.getAttribute("data-color-index")),f=g.slots[p];f.isLocked=!f.isLocked,x.classList.toggle("locked"),k.create.push({undo(){let m=g.slots[p],b=document.getElementById(m.id);m.isLocked=!m.isLocked,b.querySelector(".lock").classList.toggle("locked")},redo(){let m=g.slots[p],b=document.getElementById(m.id);m.isLocked=!m.isLocked,b.querySelector(".lock").classList.toggle("locked")}});return}if(v.closest(".x")){let c=v.closest(".swatch"),p=g.slots[parseInt(c.getAttribute("data-color-index"))],{ids:f}=B.deconstructURL(location.pathname);g.removeSlot(p),f.splice(p.data,1),history.replaceState("","",f.join("-")),g.plus.hide(),k.create.push({undo(){g.addSlot(p,{animations:!1}),f.splice(p.data,0,p.hex),history.replaceState("","",f.join("-")),g.plus.hide()},redo(){g.removeSlot(p,{animations:!1}),f.splice(p.data,1),history.replaceState("","",f.join("-")),g.plus.hide()}});return}if(v.closest(".info")){s=!0,setTimeout(()=>{s=!1},75);let c=v.closest(".swatch"),p=g.slots[parseInt(c.getAttribute("data-color-index"))];if(v.closest(".icon")){await navigator.clipboard.writeText(p.hex).then(()=>{let f=I("Copied hex to clipboard!",{pos:[d.x||d.changedTouches[d.changedTouches.length-1].pageX,d.y||d.changedTouches[d.changedTouches.length-1].pageY]});f.classList.add("at-mouse-pos"),document.body.append(f)},()=>{let f=I("Copy to clipboard failed.",{pos:[d.x||d.changedTouches[d.changedTouches.length-1].pageX,d.y||d.changedTouches[d.changedTouches.length-1].pageY]});f.classList.add("at-mouse-pos"),document.body.append(f)});return}}}let l=document.querySelector(".saved-palettes-wrapper");l.ontouchend=l.onclick=o;async function o(d){if(s)return;s=!0,setTimeout(()=>{s=!1},75);let v=d.target,y=v.closest(".swatch");if(y){let c=y.parentElement.parentElement;await navigator.clipboard.writeText(M.items[parseInt(c.getAttribute("data-palette-index"))][parseInt(y.getAttribute("data-color-index"))]).then(()=>document.body.append(I("Copied hex to clipboard!",{pos:[d.x||d.changedTouches[d.changedTouches.length-1].pageX,d.y||d.changedTouches[d.changedTouches.length-1].pageY]})),()=>document.body.append(I("Copy to clipboard failed.",{pos:[d.x||d.changedTouches[d.changedTouches.length-1].pageX,d.y||d.changedTouches[d.changedTouches.length-1].pageY]})));return}let x=v.closest(".more");if(x){s=!0,setTimeout(()=>{s=!1},75),x.parentElement.append(V([{message:"Open",call(){B.navigateTo("/create/"+A.savedPalettes.items[parseInt(v.closest(".palette-container").getAttribute("data-palette-index"))].join("-"))}},{message:"Copy",async call(){await navigator.clipboard.writeText(M.items[parseInt(v.closest(".palette-container").getAttribute("data-palette-index"))].join(`
`)).then(()=>document.body.append(I("Copied hex to clipboard!",{pos:[d.x||d.changedTouches[d.changedTouches.length-1].pageX,d.y||d.changedTouches[d.changedTouches.length-1].pageY]})),()=>document.body.append(I("Copy to clipboard failed.",{pos:[d.x||d.changedTouches[d.changedTouches.length-1].pageX,d.y||d.changedTouches[d.changedTouches.length-1].pageY]})))}},{message:"Remove",call(){let c=parseInt(v.closest(".palette-container").getAttribute("data-palette-index")),p=M.items[c];k.palettes.push({undo(){M.addItem(p,c)},redo(){M.removeItem(c)}}),M.removeItem(c),document.body.append(I("Removed palette."))}}],{type:"menu"}));return}}let n=document.querySelector(".toolbar");n.ontouchend=n.onclick=a;async function a(d){if(d.preventDefault(),s)return;s=!0,setTimeout(()=>{s=!1},75);let v=d.target;if(v.closest(".undo")){B.deconstructURL(location.pathname).base=="create"?k.create.undo():k.palettes.undo();return}if(v.closest(".redo")){B.deconstructURL(location.pathname).base=="create"?k.create.redo():k.palettes.redo();return}if(v.closest(".copy")){$();return}if(v.closest(".generate")){let y=[];for(let{hex:c}of g.slots)y.push(c);g.generate();let x=[];for(let{hex:c}of g.slots)x.push(c);history.replaceState("","","/create/"+x.join("-")),y&&k.create.push({undo:()=>{g.generate(y),history.replaceState("","","/create/"+y.join("-"))},redo:()=>{g.generate(x),history.replaceState("","","/create/"+x.join("-"))}});return}if(v.closest(".save")){te();return}if(v.closest(".remove-all")){se();return}if(v.closest(".import")){z();return}if(v.closest(".more")){ve();return}}let i=document.querySelector(".main-nav"),u=document.querySelector(".main-header");window.ontouchend=window.onclick=r;async function r(d){var v;if(!s){s=!0,setTimeout(()=>{s=!1},75);let y=d.target;if(y.closest("#settings")){d.preventDefault(),R("Settings",{confirmation:{confirm:{message:"Confirm",call(){if(s)return;s=!0,setTimeout(()=>s=!1,75);let p=A.settings,f=document.querySelector(".confirmation-screen .box ul.options").firstChild;for(let m of Object.keys(p))console.log(m),p[m]=f.querySelector("select").selectedIndex,f=f.nextSibling;p.algorithm=document.querySelector(".confirmation-screen #algorithm").selectedIndex,A.settings=p,document.body.append(I("Changes saved."))}},cancel:{message:"Cancel",call(){s||(s=!0,setTimeout(()=>s=!1,75),document.body.append(I("Changes discarded.")))}}},settings:[{message:"Algorithm",value:"algorithm",choices:[{message:"Random Algorithm"},{message:"Monochromatic"},{message:"Analogous"},{message:"Complementary"},{message:"Split Complementary"},{message:"Triadic"},{message:"Tetradic"},{message:"Square"},{message:"Randomize"}]},{message:"Cookies",value:"cookies",choices:[{message:"No, thank you",value:0},{message:"Sure, that's fine",value:1}]}]});return}let x=y.closest(".confirmation-screen");if(x){if(y.closest(".overlay")&&(x==document.querySelector(".cookies")&&(A.settings={cookies:1},A.info={firstVisit:!0}),x.remove()),x.classList.contains("remove-all")){if(y.closest(".yes")){for(let f=0;M.items.length;f++)M.removeItem(0);x.remove();let p=I("All palettes removed.");document.body.append(p)}else y.closest(".no")&&x.remove();return}if(x==document.querySelector(".cookies-confirmation")){let p=y.closest(".yes"),f=y.closest(".no");if(p){A.settings={cookies:1},x.remove();let m=I("Thanks, enjoy the site! :)");document.body.append(m)}else if(f){A.settings={cookies:0},x.remove();let m=I("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(m)}return}}let c=y.closest("a");if(c){d.preventDefault();let p=c.getAttribute("href");i.classList.remove("visible"),document.body.style.overflowY="",(v=document.querySelector(".overlay"))==null||v.remove(),p!=location.pathname&&B.navigateTo(p);return}if(y.closest("#nav-button")){i.classList.add("visible");let p=document.createElement("div");p.classList.add("overlay"),u.append(p),document.body.style.overflowY="hidden",g.plus.hide(),p.onclick=p.ontouchend=()=>{s||(s=!0,setTimeout(()=>s=!1,75),p.remove(),i.classList.remove("visible"),document.body.style.overflowY="")};return}}}}async function $(){if(B.deconstructURL(location.pathname).base=="create"){let s=[];for(let{hex:e}of g.slots)s.push(e);await navigator.clipboard.writeText(s.join(`
`)).then(()=>{let e=I("Copied palette!");document.body.append(e)},()=>{let e=I("Failed to copy.");document.body.append(e)})}else{let s=[];for(let e of M.items)s.push(e.join("-"));await navigator.clipboard.writeText(s.join(`,
`)).then(()=>{let e=I("Copied palettes to clipboard!");document.body.append(e)},()=>{let e=I("Copy to clipboard failed.");document.body.append(e)})}}function te(){if(!A.settings.cookies){document.body.append(I("You'll need to enable cookies in settings for that feature."));return}let s=[];for(let{hex:t}of g.slots)s.push(t);M.addItem(s);let e=I("Saved palette!");document.body.append(e)}function Y(s){const{ids:e}=B.deconstructURL(location.pathname);let t=[];for(let l=0;l<s;l++)t.push(g.addSlot({})),e.push(t[l].hex);history.replaceState("","",e.join("-")),k.create.push({undo(){for(let l=0;l<s;l++)g.removeSlot(t[t.length-1-l],{animations:!1}),e.pop();history.replaceState("","",e.join("-"))},redo(){for(let l=0;l<s;l++)g.addSlot(t[l],{animations:!1}),e.push(t[l].hex);history.replaceState("","",e.join("-"))}})}function ye(){var e;let s=[{message:"1",classes:["add-color"],call:()=>Y(1)},{message:"2",classes:["add-color"],call:()=>Y(2)},{message:"3",classes:["add-color"],call:()=>Y(3)},{message:"4",classes:["add-color"],call:()=>Y(4)}];for(let t=g.slots.length+4;t>10;t--)s.pop();if(s.length<1){document.body.append(I("Too many colors!")),(e=document.querySelector("popover"))==null||e.remove();return}document.body.append(V(s,{type:"tool-menu"}))}function se(){R("Are you sure you want to delete all of your palettes? You won't be able to undo this.",{confirmation:{confirm:{message:"Yes, delete away.",call(){for(let e=0;M.items.length;e++)M.removeItem(0);let s=I("All palettes removed.");document.body.append(s)}},cancel:{message:"No, please don't delete my stuff!"}}})}function z(){if(B.deconstructURL(location.pathname).base=="create")R("Paste hex code palette below!",{confirmation:{confirm:{message:"Confirm",call(){let s=B.deconstructURL(location.pathname).ids,e=document.querySelector(".confirmation-screen").querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-",""),t=!(/[g-z~`!#$%\^&*+=\[\]\\';,/{}|\\":<>\?]/g.test(e)||e.length==0||e.length%6!=0),l="Invalid values entered. Try again.";if(t){l="Successfully imported values.";let n=e.match(/.{1,6}/g);g.generate(n),k.create.push({undo(){g.generate(s)},redo(){g.generate(n)}})}let o=I(l);document.body.append(o)}},cancel:{message:"Cancel"}},type:"input"});else{if(!A.settings.cookies){document.body.append(I("You'll need to enable cookies in settings for that feature."));return}R("Paste hex code palette below! Separate palettes with commas.",{confirmation:{confirm:{message:"Confirm",call(){let e=document.querySelector(".confirmation-screen").querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-","").replaceAll("#","").toLowerCase(),t="Invalid values entered. Try again.",l=!(/[g-z~`!#$%\^&*+=\[\]\\';/{}|\\":<>\?]/g.test(e)||e.replaceAll(",","").length%6!=0||e.length==0);e.replaceAll(",","").length%6;let o=e.split(",");for(let n of o)(n.length/6>10||!(n.length>=6))&&(l=!1);if(l){let n=0;for(let a of o)n++,M.addItem(a.match(/.{1,6}/g));t="Successfully imported values.",k.palettes.push({undo(){for(let a=n;a>0;a--)M.removeItem(M.items.length-1)},redo(){for(let a of o)M.addItem(a.match(/.{1,6}/g))}})}document.body.append(I(t))}},cancel:{message:"Cancel"}},type:"input"})}}function ve(){B.deconstructURL(location.pathname).base=="create"?document.body.append(V([{message:"Save",classes:["save"],call:te},{message:"Import",classes:["import"],call:z},{message:"Copy",classes:["copy"],call:$},{message:"Add Colors",classes:["add-colors"],call:ye}],{type:"tool-menu"})):document.body.append(V([{message:"Remove All",classes:["remove-all"],call:se},{message:"Import",classes:["import"],call:z},{message:"Copy All",classes:["copy"],call:$}],{type:"tool-menu"}))}function be(){window.addEventListener("scroll",s,!1),window.addEventListener("touchmove",s,{passive:!1});function s(e){B.deconstructURL(location.pathname).base=="create"&&(e.preventDefault(),e.stopPropagation())}window.ontouchstart=e=>{let t=e.targetTouches[0].target.closest(".create-page .swatch");if(t&&!e.targetTouches[0].target.closest(".options div")&&!e.targetTouches[0].target.closest(".options svg")){let l=function(f){f.preventDefault();let m=p(f);if(m<x?m=x:m>c&&(m=c),t.style.translate=o?"0 "+m+"px":m+"px",r=Math.round(m/d),r!=u){for(let b of g.slots){let S=document.getElementById(b.id);t!=S&&(b.index<a&&a+r<=b.index?S.style.translate=v:b.index>a&&a+r>=b.index?S.style.translate=y:S.style.translate="0 0")}u=r}};for(let{id:f}of g.slots)if(document.getElementById(f).classList.contains("is-dragging"))return;let o=!1;document.body.classList.contains("vertical")&&(o=!0),g.plus.disabled=!0,g.plus.hide(),t.classList.add("is-dragging");let n=o?e.touches[0].clientY:e.touches[0].clientX,a=parseInt(t.getAttribute("data-color-index")),i=g.slots[a],u=0,r=0,d=o?t.clientHeight:t.clientWidth,v=o?"0 "+d+"px":d+"px",y=o?"0 "+-d+"px":-d+"px",x=-a*d,c=(g.slots.length-a-1)*d,p=o?f=>f.touches[0].clientY-n:f=>f.touches[0].clientX-n;window.addEventListener("touchmove",l,{passive:!1}),window.addEventListener("touchend",()=>{t.classList.remove("is-dragging"),t.classList.add("is-released"),removeEventListener("touchmove",l),t.style.translate=`${o?"0 ":""}${r*100}%`;function f(){t.removeEventListener("transitionend",f),t.removeEventListener("transitioncancel",f),t.classList.remove("is-released");let m=t;for(let L=0;L<r;L++)g.slots.splice(i.data,1),g.slots.splice(i.data+1,0,i),i.data++,m=m.nextElementSibling,g.slots[i.data-1].data--;for(let L=0;L>r;L--)g.slots.splice(i.data,1),g.slots.splice(i.data-1,0,i),i.data--,m=m.previousElementSibling,g.slots[i.data+1].data++;let b=t.cloneNode(!0);r>0?(m.after(b),t.remove()):r<0&&(m.before(b),t.remove()),t.style.translate="";let S=[];for(let L of g.slots){let E=document.getElementById(L.id);E.style.transition="transform 0s",E.style.translate="",setTimeout(()=>{E.style.transition=""},1),S.push(L.hex)}t=b,history.replaceState("","",S.join("-")),g.plus.disabled=!1,r&&k.create.push({undo(){g.plus.hide();let L=t=document.getElementById(i.id);for(let w=0;w<-r;w++){g.slots.splice(i.data,1),g.slots.splice(i.data+1,0,i),i.data++,L=L.nextElementSibling;let q=parseInt(L.getAttribute("data-color-index"));L.setAttribute("data-color-index",(q-1).toString())}for(let w=0;w>-r;w--){g.slots.splice(i.data,1),g.slots.splice(i.data-1,0,i),i.data--,L=L.previousElementSibling;let q=parseInt(L.getAttribute("data-color-index"));L.setAttribute("data-color-index",(q+1).toString())}b=t.cloneNode(!0),-r>0?(L.after(b),t.remove()):-r<0&&(L.before(b),t.remove());let E=[];for(let w of g.slots)E.push(w.hex);history.replaceState("","",E.join("-"))},redo(){g.plus.hide();let L=t=document.getElementById(i.id);for(let w=0;w<r;w++)g.slots.splice(i.data,1),g.slots.splice(i.data+1,0,i),i.data++,L=L.nextElementSibling,a=parseInt(L.getAttribute("data-color-index")),L.setAttribute("data-color-index",(a-1).toString());for(let w=0;w>r;w--)g.slots.splice(i.data,1),g.slots.splice(i.data-1,0,i),i.data--,L=L.previousElementSibling,a=parseInt(L.getAttribute("data-color-index")),L.setAttribute("data-color-index",(a+1).toString());b=t.cloneNode(!0),r>0?(L.after(b),t.remove()):r<0&&(L.before(b),t.remove());let E=[];for(let w of g.slots)E.push(w.hex);history.replaceState("","",E.join("-"))}})}t.addEventListener("transitionend",f),t.addEventListener("transitioncancel",f)},{once:!0})}},onmousedown=e=>{let t=e.target.closest(".create-page .swatch");if(t&&!e.target.closest(".options div")&&!e.target.closest(".options svg")){let l=function(f){f.preventDefault();let m=p(f);if(m<x?m=x:m>c&&(m=c),t.style.translate=o?"0 "+m+"px":m+"px",r=Math.round(m/d),r!=u){for(let b of g.slots){let S=document.getElementById(b.id);t!=S&&(b.index<a&&a+r<=b.index?S.style.translate=v:b.index>a&&a+r>=b.index?S.style.translate=y:S.style.translate="0 0")}u=r}};for(let{id:f}of g.slots)if(document.getElementById(f).classList.contains("is-dragging"))return;let o=!1;document.body.classList.contains("vertical")&&(o=!0),g.plus.disabled=!0,g.plus.hide(),t.classList.add("is-dragging");let n=o?e.y:e.x,a=parseInt(t.getAttribute("data-color-index")),i=g.slots[a],u=0,r=0,d=o?t.clientHeight:t.clientWidth,v=o?"0 "+d+"px":d+"px",y=o?"0 "+-d+"px":-d+"px",x=-a*d,c=(g.slots.length-a-1)*d,p=o?f=>f.y-n:f=>f.x-n;addEventListener("mousemove",l),addEventListener("mouseup",()=>{t.classList.remove("is-dragging"),t.classList.add("is-released"),removeEventListener("mousemove",l),t.style.translate=`${o?"0 ":""}${r*100}%`;function f(){t.removeEventListener("transitionend",f),t.removeEventListener("transitioncancel",f),t.classList.remove("is-released");let m=t;for(let L=0;L<r;L++)g.slots.splice(i.data,1),g.slots.splice(i.data+1,0,i),i.data++,m=m.nextElementSibling,g.slots[i.data-1].data--;for(let L=0;L>r;L--)g.slots.splice(i.data,1),g.slots.splice(i.data-1,0,i),i.data--,m=m.previousElementSibling,g.slots[i.data+1].data++;let b=t.cloneNode(!0);r>0?(m.after(b),t.remove()):r<0&&(m.before(b),t.remove()),t.style.translate="";let S=[];for(let L of g.slots){let E=document.getElementById(L.id);E.style.transition="transform 0s",E.style.translate="",setTimeout(()=>{E.style.transition=""},1),S.push(L.hex)}t=b,history.replaceState("","",S.join("-")),g.plus.disabled=!1,r&&k.create.push({undo(){g.plus.hide();let L=t=document.getElementById(i.id);for(let w=0;w<-r;w++){g.slots.splice(i.data,1),g.slots.splice(i.data+1,0,i),i.data++,L=L.nextElementSibling;let q=parseInt(L.getAttribute("data-color-index"));L.setAttribute("data-color-index",(q-1).toString())}for(let w=0;w>-r;w--){g.slots.splice(i.data,1),g.slots.splice(i.data-1,0,i),i.data--,L=L.previousElementSibling;let q=parseInt(L.getAttribute("data-color-index"));L.setAttribute("data-color-index",(q+1).toString())}b=t.cloneNode(!0),-r>0?(L.after(b),t.remove()):-r<0&&(L.before(b),t.remove());let E=[];for(let w of g.slots)E.push(w.hex);history.replaceState("","",E.join("-"))},redo(){g.plus.hide();let L=t=document.getElementById(i.id);for(let w=0;w<r;w++)g.slots.splice(i.data,1),g.slots.splice(i.data+1,0,i),i.data++,L=L.nextElementSibling,a=parseInt(L.getAttribute("data-color-index")),L.setAttribute("data-color-index",(a-1).toString());for(let w=0;w>r;w--)g.slots.splice(i.data,1),g.slots.splice(i.data-1,0,i),i.data--,L=L.previousElementSibling,a=parseInt(L.getAttribute("data-color-index")),L.setAttribute("data-color-index",(a+1).toString());b=t.cloneNode(!0),r>0?(L.after(b),t.remove()):r<0&&(L.before(b),t.remove());let E=[];for(let w of g.slots)E.push(w.hex);history.replaceState("","",E.join("-"))}})}t.addEventListener("transitionend",f),t.addEventListener("transitioncancel",f)},{once:!0})}ondragstart=()=>!1}}let xe=document.querySelector(".main-nav");function Le(){onkeydown=s=>{var t,l;if(document.querySelector(".confirmation-screen")){s.key==="Escape"&&((t=document.querySelector(".confirmation-screen"))==null||t.remove());return}if(s.metaKey||s.ctrlKey){let{base:o}=B.deconstructURL(location.pathname);if(s.key==="z"||s.key==="Z")if(o==="palettes"){s.shiftKey?k.palettes.redo():k.palettes.undo();return}else{s.shiftKey?k.create.redo():k.create.undo();return}}let e=parseInt(s.key);if(e>=0&&e<=9){let{base:o}=B.deconstructURL(location.pathname);if(o==="create"){s.preventDefault();let n=g.slots[e-1]||g.slots[g.slots.length-1],a=document.getElementById(n.id);k.create.push({undo(){let i=g.slots[e-1]||g.slots[g.slots.length-1],u=document.getElementById(i.id);i.isLocked=!i.isLocked,u.querySelector(".lock").classList.toggle("locked")},redo(){let i=g.slots[e-1]||g.slots[g.slots.length-1],u=document.getElementById(i.id);i.isLocked=!i.isLocked,u.querySelector(".lock").classList.toggle("locked")}}),n.isLocked=!n.isLocked,a.querySelector(".lock").classList.toggle("locked");return}}if(s.key===" "){let{base:o}=B.deconstructURL(location.pathname);if(o==="create"){s.preventDefault();let n=[];for(let{hex:i}of g.slots)n.push(i);g.generate();let a=[];for(let{hex:i}of g.slots)a.push(i);history.replaceState("","","/polychrome/create/"+a.join("-")),k.create.push({undo:()=>{g.generate(n),history.replaceState("","","/polychrome/create/"+n.join("-")),g.plus.hide()},redo:()=>{g.generate(a),history.replaceState("","","/polychrome/create/"+a.join("-"))}})}return}if(s.key==="Escape"){xe.classList.remove("visible"),(l=document.querySelector(".overlay"))==null||l.remove();return}//! NOT DONE
if(s.key==="Enter"){let o=document.activeElement;console.log(o);return}s.key}}let g=new he,M=new ie;const Se=document.title,U=document.querySelector(".toolbar");function O(s,e,t){return l=>{document.title=Se+" | "+s;const o=document.querySelector("main.visible");o&&o.classList.remove("visible");const n=e;if(n==null||n.classList.add("visible"),s=="Palettes")document.body.parentElement.style.overflow="",document.body.style.overflow="",U.classList.add("palettes"),U.classList.remove("create"),t.draw(A.savedPalettes.items);else if(s=="Create")if(document.body.parentElement.style.overflow="hidden",document.body.style.overflow="hidden",U.classList.add("create"),U.classList.remove("palettes"),l)t.generate(l);else{let a=t.generate(),i=[];for(let u of a)i.push(u.hex);history.replaceState("","",i.join("-"))}else U.classList.remove("palettes","create"),document.documentElement.style.overflow="",document.body.style.overflow=""}}let B=new pe([["",O("Home",document.getElementById("landing-page"))],["palettes",O("Palettes",document.getElementById("palettes-page"),M)],["create",O("Create",document.getElementById("create-page"),g)],["404",O("404 Not Found",document.getElementById("not-found-page"))]]);B.routeToURL(location.pathname);onpopstate=()=>B.navigateTo(location.pathname,!0);A.info.firstVisit&&R("This site relies on local storage and cookies to save palettes.",{confirmation:{confirm:{message:"Sure, sounds good to me.",call(){A.info={firstVisit:!1},A.settings={cookies:1},document.body.append(I("Thanks, enjoy the site! :)"))}},cancel:{message:"No thanks, I don't want to save palettes.",call(){A.info={firstVisit:!1},A.settings={cookies:0};for(let s=0;s<M.items.length;s++)M.removeItem(0);document.body.append(I("You won't be able to save your palettes. You can change this in settings.",{duration:2500}))}}}});(navigator.userAgent.includes("Android")||navigator.userAgent.includes("like Mac"))&&document.body.classList.add("mobile");function J(){document.querySelector(":root").style.display="initial",window.innerHeight>window.innerWidth?(document.body.classList.add("vertical"),document.body.classList.remove("landscape-thin")):window.innerWidth/window.innerHeight<1.6?(document.body.classList.add("landscape-thin"),document.body.classList.remove("vertical")):document.body.classList.remove("vertical","landscape-thin")}setTimeout(J,200);onresize=J;ge();be();Le();onmouseover=s=>{if(!g.plus.disabled){const e=s.target,t=e.closest(".swatch");if(t)if(e.closest(".detector")&&g.slots.length<10){const o=e.closest(".left");let n=parseInt(t.getAttribute("data-color-index"));o&&n--,g.plus.show(n)}else g.plus.hide(0)}};
