var se=Object.defineProperty;var le=(o,e,t)=>e in o?se(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var N=(o,e,t)=>(le(o,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerpolicy&&(n.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?n.credentials="include":l.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(l){if(l.ep)return;l.ep=!0;const n=t(l);fetch(l.href,n)}})();function H(o){let e=parseInt(o[0]+o[1],16)/255,t=parseInt(o[2]+o[3],16)/255,s=parseInt(o[4]+o[5],16)/255,l=Math.max(e,t,s),n=Math.min(e,t,s),a,i,f=e*.299+t*.587+s*.114,d=(l+n)/2;if(l==n)a=i=0;else{let r=l-n;switch(i=d>.5?r/(2-l-n):r/(l+n),l){case e:a=(t-s)/r+(t<s?6:0);break;case t:a=(s-e)/r+2;break;default:a=(e-t)/r+4;break}a=a*60}return{r:e,g:t,b:s,h:a,s:i,l:d,lum:f}}const A={get info(){let o=localStorage.getItem("info");return o?JSON.parse(o):(localStorage.setItem("info",JSON.stringify({firstVisit:!0})),this.info)},set info(o){let e=this.info;if(o)for(let[t,s]of Object.entries(o))e[t]=s;localStorage.setItem("info",JSON.stringify(e))},get settings(){let o=localStorage.getItem("settings");return o?JSON.parse(o):(localStorage.setItem("settings",JSON.stringify({algorithm:2,cookies:0})),this.settings)},set settings(o){let e=this.settings;if(o)for(let[t,s]of Object.entries(o))e[t]=s;localStorage.setItem("settings",JSON.stringify(e))},savedPalettes:{get items(){let o=localStorage.getItem("saved-palettes"),e;if(o){let t=[];e=JSON.parse(o);for(let s of e)t.push(s);return t}else return[]},set items(o){localStorage.setItem("saved-palettes",JSON.stringify(o))},addItem(o){let e=this.items;e.push(o),this.items=e},removeItem(o){this.items.splice(o,1)}}},k={create:{cmds:[],cmdIndex:-1,push(o){this.cmds.splice(this.cmdIndex+1,1/0,o),this.cmdIndex=this.cmds.length-1},undo(){this.cmdIndex>-1&&(this.cmds[this.cmdIndex].undo(),this.cmdIndex--)},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}},palettes:{cmds:[],cmdIndex:-1,push(o){this.cmds.splice(this.cmdIndex+1,1/0,o),this.cmdIndex=this.cmds.length-1},undo(){if(this.cmdIndex>-1){let o=this.cmds[this.cmdIndex];this.cmdIndex--,o.undo()}},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}}},p=(o,e)=>Math.random()*(e-o)+o;function I(o,e){const t=document.createElement("div");t.classList.add("tooltip","appearing");const s=document.createElement("h2");return s.innerHTML=o,t.append(s),(e==null?void 0:e.pos)&&!(navigator.userAgent.includes("Android")||navigator.userAgent.includes("like Mac"))?(t.style.left=e.pos[0]+"px",t.style.top=e.pos[1]+"px",setTimeout(()=>{t.clientWidth+e.pos[0]>document.body.clientWidth?(t.style.translate="-100%",t.clientHeight+e.pos[1]>document.body.clientHeight&&(t.style.translate="-100 -100%")):t.clientHeight+e.pos[1]>document.body.clientHeight&&(t.style.translate="0 -100%")},0)):t.classList.add("centered"),t.addEventListener("animationend",()=>{t.classList.remove("appearing"),setTimeout(()=>{t.classList.add("disappearing"),t.addEventListener("animationend",()=>{t.remove()},{once:!0})},(e==null?void 0:e.duration)||1e3)},{once:!0}),t}function O(o,e){let t=document.createElement("div");t.classList.add("popover");let s=new IntersectionObserver(i=>{let f=i[0];console.log(f),!f.isIntersecting&&f.intersectionRatio<1&&(t.style.translate="0 -100%")},{root:document,threshold:1});setTimeout(()=>{s.observe(t)},10),(e==null?void 0:e.type)=="tool-menu"&&t.classList.add("bottom");let l=document.createElement("div");l.classList.add("clear-overlay"),document.body.append(l);let n=document.createElement("ul");n.classList.add("list");let a=()=>{l.remove(),t.remove()};if(l.onclick=l.ontouchend=a,o)for(let{message:i,classes:f,attributes:d,call:r}of o){let y=document.createElement("div");if(y.classList.add("choice"),y.innerHTML=i,f)for(let b of f)y.classList.add(b);if(d)for(let b of d)y.setAttribute(b[0],b[1]);n.append(y),t.append(n),y.onclick=y.ontouchend=()=>{r&&r(),a()}}return t}function U(o,e){let t=document.createElement("div");t.classList.add("confirmation-screen");let s=document.createElement("h2");s.innerHTML=o;let l=document.createElement("div");l.classList.add("overlay");let n=()=>{var f;document.querySelector(".main-nav").classList.remove("visible"),t.remove(),(f=document.querySelector(".overlay"))==null||f.remove()};l.onclick=l.ontouchend=n;let a=document.createElement("div");a.classList.add("box"),a.append(s),t.append(a,l);function i(){var x,c,v;(x=e==null?void 0:e.confirmation)!=null&&x.value&&t.classList.add(e.confirmation.value);let f=document.createElement("ul"),d=document.createElement("li");d.classList.add("yes"),d.innerHTML=((c=e==null?void 0:e.confirmation)==null?void 0:c.confirm.message)||"Confirm";let r=document.createElement("li");r.classList.add("no"),r.innerHTML=((v=e==null?void 0:e.confirmation)==null?void 0:v.cancel.message)||"Cancel";let y=()=>{var m;(m=e==null?void 0:e.confirmation)!=null&&m.confirm.call&&e.confirmation.confirm.call(),n()},b=()=>{var m;(m=e==null?void 0:e.confirmation)!=null&&m.cancel.call&&e.confirmation.cancel.call(),n()};return d.onclick=d.ontouchend=y,r.onclick=r.ontouchend=b,f.append(r,d),f}if((e==null?void 0:e.type)=="input"){let f=document.createElement("textarea");a.append(f)}if(e&&e.settings){let f=document.createElement("ul");f.classList.add("options");for(let{message:d,value:r,choices:y}of e.settings){let b=document.createElement("li"),x=document.createElement("label");x.innerText=d;let c=document.createElement("select");c.id=r;let v=0;for(let{message:m,value:u}of y){let g=document.createElement("option");g.innerText=m,g.id=(typeof u=="number"?u:v).toString(),v++,c.append(g)}c.selectedIndex=A.settings[r],b.append(x,c),f.append(b)}a.append(f)}a.append(i()),document.body.append(t)}let R=document.querySelector(".saved-palettes-wrapper");class oe{constructor(){N(this,"items",[]);this.items=A.savedPalettes.items}draw(e){for(;R.childElementCount>0;)R.lastChild.remove();if(e)for(let s=0;s<e.length;s++){let l=e[s],n=document.createElement("div");n.setAttribute("data-palette-index",s.toString()),n.classList.add("palette-container");let a=document.createElement("div");a.classList.add("palette");let i=document.createElement("div");i.classList.add("options");let f=document.createElement("div");f.classList.add("more");let d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("viewBox","0 0 100 100");let r=document.createElementNS("http://www.w3.org/2000/svg","use");r.setAttribute("href","#icon-more-horizontal");for(let y=0;y<l.length;y++){let b=l[y],{lum:x}=H(b),c=document.createElement("div");c.setAttribute("data-color-index",y.toString()),c.classList.add("swatch"),c.style.backgroundColor="#"+b,x<.5&&c.classList.add("isLight");let v=document.createElement("h2");v.innerHTML="#"+b,v.classList.add("text"),c.append(v),a.append(c)}d.append(r),f.append(d),i.append(f),n.append(a,i),R.append(n)}let t=document.querySelector(".palettes-page .when-empty");R.childElementCount==0?t.classList.remove("hidden"):t.classList.add("hidden")}addItem(e,t){typeof t=="number"?this.items.splice(t,0,e):this.items.push(e),A.savedPalettes.items=this.items,this.draw(this.items)}removeItem(e){this.items.splice(e,1),A.savedPalettes.items=this.items,this.draw(this.items)}}function T(o,e,t){o>360?o-=360:o<0&&(o+=360),e>1?e=1:e<0&&(e=0),t>1?t=1:t<0&&(t=0),e*=100;const s=e*Math.min(t,1-t)/100,l=n=>{const a=(n+o/30)%12,i=t-s*Math.max(Math.min(a-3,9-a,1),-1);return Math.round(255*i).toString(16).padStart(2,"0")};return`${l(0)}${l(8)}${l(4)}`}function J(o){if(o.algorithm.details=="slot"){let e=[];for(let t=0;t<6;t++)e.push(Math.round(p(0,15)).toString(16));return e.join("")}else for(let e of o.slots)if(!e.isLocked){let t=[];for(let s=0;s<6;s++)t.push(Math.round(p(0,15)).toString(16));e.hex=t.join(""),e.sync()}}function X(o,e){if(o.algorithm.details=="slot")if(Math.random()>.5){let t=0,s=0,l=0,n=o.slots[e-2],a=o.slots[e-1],i=o.slots[e],f=o.slots[e+1];if(i){let{h:d,s:r,l:y}=H(i.hex);if(t=d,a){let{s:b,l:x}=H(a.hex);s=r-(r-b)/2,l=y-(y-x)/2}else if(f){let{s:b,l:x}=H(f.hex);s=r-(b-r)/2,l=y-(x-y)/2}else s=r*p(.7,1.3),l=y*p(.7,1.3)}else if(a){let{h:d,s:r,l:y}=H(a.hex);if(t=d,n){let{s:b,l:x}=H(n.hex);s=r+(r-b)/2,l=y+(y-x)/2}else s=r*p(.7,1.3),l=y*p(.7,1.3)}else s=p(.2,1),l=p(.1,.9);return s*=p(.95,1.05),l*=p(.95,1.05),T(t,s,l)}else{let t,s,l,n,a,i,f;for(let{hex:d}of o.slots){let{h:r,s:y,l:b}=H(d);typeof t!="number"&&(t=r),(typeof l!="number"||y>l)&&(l=y),(typeof s!="number"||y<s)&&(s=y),(typeof a!="number"||b>a)&&(a=b),(typeof n!="number"||b<n)&&(n=b)}return i=p(s,l)*p(.95,1.05),f=p(n,a)*p(.95,1.05),T(t,i,f)}else if(o.algorithm.details=="increment"||Math.random()>.5){let t=[],s=p(0,360),l=0,n=0,a=0,i=0,f=0,d=0,r=0,y=0;for(let b of o.slots)b.isLocked||t.push(b);for(let b=0;b<t.length;b++)if(b==0){let x=o.slots[0];l=p(.1,1),n=p(.1,.9),x.hex=T(s,l,n),x.sync(),a=l,i=n,a<.4?f=p(.7,1):a>.6?f=p(.1,.3):a>.5?f=p(.1,.2):f=p(.8,.9),i<.4?d=p(.7,1):i>.6?d=p(.1,.3):i>.5?d=p(.1,.2):d=p(.8,.9),r=(f-a)/o.slots.length,y=(d-i)/o.slots.length}else{let x=o.slots[b];l=a+r*b,n=i+y*b,x.hex=T(s,l,n),x.sync()}}else{let t=p(0,360),s,l,n;for(let a of o.slots)a.isLocked||(s=p(.2,1),l=p(.2,.8),typeof n!="number"&&(t=n=p(0,360)),a.hex=T(t,s,l),a.sync())}}function K(o,e){if(o.algorithm.details=="slot")if(Math.random()>.5){let t=0,s=0,l=0,n=o.slots[e-2],a=o.slots[e-1],i=o.slots[e],f=o.slots[e+1];if(i){let{h:d,s:r,l:y}=H(i.hex);if(a){let{h:b,s:x,l:c}=H(a.hex),v=d-b;v>180?v=d-b-360:v<-180&&(v=d-b+360),t=d-v/2,s=r-(r-x)/2,l=y-(y-c)/2}else if(f){let{h:b,s:x,l:c}=H(f.hex),v=b-d;v>180?v=b-d-360:v<-180&&(v=b-d+360),t=d-v/2,s=r-(x-r)/2,l=y-(c-y)/2}else t=d*p(.7,1.3),s=r*p(.7,1.3),l=y*p(.7,1.3)}else if(a){let{h:d,s:r,l:y}=H(a.hex);if(n){let{h:b,s:x,l:c}=H(n.hex),v=d-b;v>180?v=d-b-360:v<-180&&(v=d-b+360),t=d+v/2,s=r+(r-x)/2,l=y+(y-c)/2}else t=d*p(.7,1.3),s=r*p(.7,1.3),l=y*p(.7,1.3)}else t=p(0,360),s=p(.2,1),l=p(.1,.9);return t*=p(.95,1.05),s*=p(.95,1.05),l*=p(.95,1.05),T(t,s,l)}else{let t,s,l,n,a,i,f,d,r,y,b=Math.random();for(let{hex:x}of o.slots){let{h:c,s:v,l:m}=H(x);if(typeof t!="number")t=c;else if(typeof s!="number"){let u=t,g=u-c;g>180?u-=360:g<-180&&(u+=360),g=u-c,(g<-25||g>25)&&(s=c)}else if(typeof l!="number"){let u=t,g=s,S=u-c,L=g-c;S>180?u-=360:S<-180&&(u+=360),L>180?g-=360:L<-180&&(g+=360),S=u-c,L=g-c,(S>25||S<-25)&&(L>25||L<-25)&&(l=c)}(typeof a!="number"||v>a)&&(a=v),(typeof n!="number"||v<n)&&(n=v),(typeof f!="number"||m>f)&&(f=m),(typeof i!="number"||m<i)&&(i=m)}return l&&b<.333?d=l:s&&b>.666?d=s:d=t,r=p(n,a)*p(.95,1.05),y=p(i,f)*p(.95,1.05),T(d,r,y)}else if(o.algorithm.details=="increment"||Math.random()>.5){let t=0,s=0,l=0,n=0,a=0,i=0,f=0,d=0,r=0,y=0,b=0,x=0;for(let c=0;c<o.slots.length;c++){let v=o.slots[c];if(!v.isLocked)if(!n)t=n=p(0,360),s=a=p(.1,1),l=i=p(.1,.9),v.hex=T(t,s,l),v.sync(),n=t,a=s,i=l,Math.random()>.5?f=t+p(90,120):f=t-p(75,90),a<.4?d=p(.7,1):a>.6?d=p(.1,.3):a>.5?d=p(.1,.2):d=p(.8,.9),i<.4?r=p(.7,1):i>.6?r=p(.1,.3):i>.5?r=p(.1,.2):r=p(.8,.9),y=(f-n)/o.slots.length,b=(d-a)/o.slots.length,x=(r-i)/o.slots.length;else{let m=o.slots[c];t=n+y*c,s=a+b*c,l=i+x*c,m.hex=T(t,s,l),m.sync()}}}else{let t,s,l,n,a,i;for(let f of o.slots)if(!f.isLocked){if(s=p(.2,1),l=p(.2,.8),typeof n!="number")t=n=p(0,360);else if(typeof a!="number")t=a=n+30*p(.975,1.025);else if(typeof i!="number")t=i=n-30*p(.975,1.025);else{let d=Math.random();d<.333?t=n:d>.666?t=a:t=i}f.hex=T(t,s,l),f.sync()}}}function W(o){if(o.algorithm.details=="slot"){let e,t,s,l,n,a,i,f,d,r=Math.random();for(let{hex:y}of o.slots){let{h:b,s:x,l:c}=H(y);if(typeof e!="number")e=b;else if(typeof t!="number"){let v=e,m=v-b;m>180?v-=360:m<-180&&(v+=360),m=v-b,(m<-90||m>90)&&(t=b)}(typeof l!="number"||x>l)&&(l=x),(typeof s!="number"||x<s)&&(s=x),(typeof a!="number"||c>a)&&(a=c),(typeof n!="number"||c<n)&&(n=c)}return r>.5&&t?i=t*p(.925,1.025):i=e*p(.925,1.025),f=p(s,l)*p(.95,1.05),d=p(n,a)*p(.95,1.05),T(i,f,d)}else{let e,t,s,l,n;for(let a of o.slots)a.isLocked||(t=p(.2,1),s=p(.2,.8),typeof l!="number"?e=l=p(0,360):typeof n!="number"?e=n=l+150*p(.975,1.025):Math.random()<.5?e=l*p(.975,1.025):e=n*p(.975,1.025),a.hex=T(e,t,s),a.sync())}}function F(o){if(o.algorithm.details=="slot"){let e,t,s,l,n,a,i,f,d,r,y=Math.random();for(let{hex:b}of o.slots){let{h:x,s:c,l:v}=H(b);if(typeof e!="number")e=x;else if(typeof t!="number"){let m=e,u=m-x;u>180?m-=360:u<-180&&(m+=360),u=m-x,(u<-30||u>30)&&(t=x)}else if(typeof s!="number"){let m=e,u=t,g=m-x,S=u-x;g>180?m-=360:g<-180&&(m+=360),S>180?u-=360:S<-180&&(u+=360),g=m-x,S=u-x,(g>30||g<-30)&&(S>30||S<-30)&&(s=x)}(typeof n!="number"||c>n)&&(n=c),(typeof l!="number"||c<l)&&(l=c),(typeof i!="number"||v>i)&&(i=v),(typeof a!="number"||v<a)&&(a=v)}return y<.333&&s?f=s:y>.666&&t?f=t:f=e,d=p(l,n)*p(.95,1.05),r=p(a,i)*p(.95,1.05),T(f,d,r)}else{let e,t,s,l,n,a;for(let i of o.slots)if(!i.isLocked){if(t=p(.2,1),s=p(.2,.8),typeof l!="number")e=l=p(0,360);else if(typeof n!="number")e=n=l+150*p(.975,1.025);else if(typeof a!="number")e=a=l-150*p(.975,1.025);else{let f=Math.random();f<.333?e=l*p(.975,1.025):f>.666?e=n*p(.975,1.025):e=a*p(.975,1.025)}i.hex=T(e,t,s),i.sync()}}}function Z(o){if(o.algorithm.details=="slot"){let e,t,s,l,n,a,i,f,d,r,y=Math.random();for(let{hex:b}of o.slots){let{h:x,s:c,l:v}=H(b);if(typeof e!="number")e=x;else if(typeof t!="number"){let m=e,u=m-x;u>180?m-=360:u<-180&&(m+=360),u=m-x,(u<-90||u>90)&&(t=x)}else if(typeof s!="number"){let m=e,u=t,g=m-x,S=u-x;g>180?m-=360:g<-180&&(m+=360),S>180?u-=360:S<-180&&(u+=360),g=m-x,S=u-x,(g>90||g<-90)&&(S>90||S<-90)&&(s=x)}(typeof n!="number"||c>n)&&(n=c),(typeof l!="number"||c<l)&&(l=c),(typeof i!="number"||v>i)&&(i=v),(typeof a!="number"||v<a)&&(a=v)}return y<.333?f=e:y>.666?f=t:f=s,d=p(l,n)*p(.95,1.05),r=p(a,i)*p(.95,1.05),T(f,d,r)}else{let e,t,s,l,n,a;for(let i of o.slots)if(!i.isLocked){if(t=p(.2,1),s=p(.2,.8),typeof l!="number")e=l=p(0,360);else if(typeof n!="number")e=n=l+120;else if(typeof a!="number")e=a=l-120;else{let f=Math.random();f<.333?e=l:f<.666?e=n:e=a}i.hex=T(e,t,s),i.sync()}}}function G(o){if(o.algorithm.details=="slot"){let e,t,s,l,n,a,i,f,d,r,y,b=Math.random();for(let{hex:x}of o.slots){let{h:c,s:v,l:m}=H(x);if(typeof e!="number")e=c;else if(typeof t!="number"){let u=e,g=u-c;g>180?u-=360:g<-180&&(u+=360),g=u-c,(g<-45||g>45)&&(t=c)}else if(typeof s!="number"){let u=e,g=t,S=u-c,L=g-c;S>180?u-=360:S<-180&&(u+=360),L>180?g-=360:L<-180&&(g+=360),S=u-c,L=g-c,(S>45||S<-45)&&(L>45||L<-45)&&(s=c)}else if(typeof l!="number"){let u=e,g=t,S=s,L=u-c,E=g-c,w=S-c;L>180?u-=360:L<-180&&(u+=360),E>180?g-=360:E<-180&&(g+=360),w>180?S-=360:w<-180&&(S+=360),L=u-c,E=g-c,w=S-c,(L>45||L<-45)&&(E>45||E<-45)&&(w>45||w<-45)&&(l=c)}(typeof a!="number"||v>a)&&(a=v),(typeof n!="number"||v<n)&&(n=v),(typeof f!="number"||m>f)&&(f=m),(typeof i!="number"||m<i)&&(i=m)}return typeof l=="number"&&b<.25?d=l:typeof s=="number"&&b<.5?d=s:typeof t=="number"&&b<.75?d=t:d=e,r=p(n,a)*p(.95,1.05),y=p(i,f)*p(.95,1.05),T(d,r,y)}else{let e,t,s,l,n,a,i;for(let f of o.slots)if(!f.isLocked){if(t=p(.2,1),s=p(.2,.8),typeof l!="number")e=l=p(0,360);else if(typeof n!="number")e=n=l+60;else if(typeof a!="number")e=a=l-120;else if(typeof i!="number")e=i=l+180;else{let d=Math.random();d<.25?e=l:d>.5?e=n:d>.75?e=a:e=i}f.hex=T(e,t,s),f.sync()}}}function Q(o){if(o.algorithm.details=="slot"){let e,t,s,l,n,a,i,f,d,r,y,b=Math.random();for(let{hex:x}of o.slots){let{h:c,s:v,l:m}=H(x);if(typeof e!="number")e=c;else if(typeof t!="number"){let u=e,g=u-c;g>180?u-=360:g<-180&&(u+=360),g=u-c,(g<-85||g>85)&&(t=c)}else if(typeof s!="number"){let u=e,g=t,S=u-c,L=g-c;S>180?u-=360:S<-180&&(u+=360),L>180?g-=360:L<-180&&(g+=360),S=u-c,L=g-c,(S<-85||S>85)&&(L<-85||L>85)&&(s=c)}else if(typeof l!="number"){let u=e,g=t,S=s,L=u-c,E=g-c,w=S-c;L>180?u-=360:L<-180&&(u+=360),E>180?g-=360:E<-180&&(g+=360),w>180?S-=360:w<-180&&(S+=360),L=u-c,E=g-c,w=S-c,(L<-85||L>85&&E<-85||E>85&&(w<-85||w>85))&&(l=c)}(typeof a!="number"||v>a)&&(a=v),(typeof n!="number"||v<n)&&(n=v),(typeof f!="number"||m>f)&&(f=m),(typeof i!="number"||m<i)&&(i=m)}return typeof l=="number"&&b<.25?d=l:typeof s=="number"&&b<.5?d=s:typeof t=="number"&&b<.75?d=t:d=e,r=p(n,a)*p(.95,1.05),y=p(i,f)*p(.95,1.05),T(d,r,y)}else{let e,t,s,l,n,a,i;for(let f of o.slots)if(!f.isLocked){if(t=p(.2,1),s=p(.2,.8),typeof l!="number")e=l=p(0,360);else if(typeof n!="number")e=n=l+60;else if(typeof a!="number")e=a=l-120;else if(typeof i!="number")e=i=l+180;else{let d=Math.random();d<.25?e=l:d>.5?e=n:d>.75?e=a:e=i}f.hex=T(e,t,s),f.sync()}}}function ie(o,e){switch(Math.round(p(0,7))){case 0:return J(o);case 1:return X(o,e);case 2:default:return K(o,e);case 3:return W(o);case 4:return F(o);case 5:return Z(o);case 6:return G(o);case 7:return Q(o)}}const ne=[J,X,K,W,F,Z,G,Q,ie];let P;const ae=new Uint8Array(16);function re(){if(!P&&(P=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!P))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return P(ae)}const C=[];for(let o=0;o<256;++o)C.push((o+256).toString(16).slice(1));function de(o,e=0){return(C[o[e+0]]+C[o[e+1]]+C[o[e+2]]+C[o[e+3]]+"-"+C[o[e+4]]+C[o[e+5]]+"-"+C[o[e+6]]+C[o[e+7]]+"-"+C[o[e+8]]+C[o[e+9]]+"-"+C[o[e+10]]+C[o[e+11]]+C[o[e+12]]+C[o[e+13]]+C[o[e+14]]+C[o[e+15]]).toLowerCase()}const ce=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),z={randomUUID:ce};function me(o,e,t){if(z.randomUUID&&!e&&!o)return z.randomUUID();o=o||{};const s=o.random||(o.rng||re)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,e){t=t||0;for(let l=0;l<16;++l)e[t+l]=s[l];return e}return de(s)}let ue=document.getElementById("palette");class fe{constructor(){N(this,"slots",[]);N(this,"plus",{palette:this,disabled:!1,active:!1,show(e){if(!this.active){let t=this.render(e.toString()),s=this.palette.slots[e];if(s)document.getElementById(s.id).after(t);else{s=this.palette.slots[e+1];let l=document.getElementById(s.id);l==null||l.before(t)}this.active=!0}},hide(e){var t;if(this.active){if((t=document.getElementById("plus-button"))==null||t.parentElement.parentElement.remove(),this.active=!1,this.disabled)return;this.disabled=!0,setTimeout(()=>{this.disabled=!1},typeof e=="number"?e:300)}},render(e){let t=document.createElement("div");t.classList.add("plus-container");let s=document.createElement("div");s.classList.add("circle");let l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("data-color-index",e),l.setAttribute("viewBox","0 0 100 100"),l.id="plus-button";let n=document.createElementNS("http://www.w3.org/2000/svg","use");return n.setAttribute("href","#icon-plus-button"),n.setAttribute("viewBox","0 0 100 100"),l.append(n),s.append(l),t.append(s),t}});N(this,"algorithm",{list:ne,get(e){e=="slot"?this.details="slot":this.details="";let t=A.settings.algorithm;return this.list[t]},details:"",direction:{h:0,s:0,l:0},preference:{h:void 0,s:void 0,l:void 0}})}removeSlot(e,t){t||(t={animations:!0});let s=e.data+1;for(let n=s;n<this.slots.length;n++)this.slots[n].data--;let l=document.getElementById(e.id);if(this.slots.splice(e.data,1),t.animations==!0){let n=function(){l.remove(),l.removeEventListener("animationend",n),l.removeEventListener("animationcancel",n)};l.classList.add("deinit"),l.addEventListener("animationend",n),l.addEventListener("animationcancel",n)}else l.remove();return e}addSlot(e,t){var a;let s={palette:this,hex:e.hex,isLocked:typeof e.isLocked=="boolean"?e.isLocked:!1,id:e.id||btoa(parseInt(me(),16).toString(36)).replaceAll("=",""),index:typeof e.index!="number"?this.slots.length:e.index,get data(){var f;let i=parseInt((f=document.getElementById(this.id))==null?void 0:f.getAttribute("data-color-index"));return typeof i=="number"?i:this.data=this.index},set data(i){var f;(f=document.getElementById(this.id))==null||f.setAttribute("data-color-index",i.toString()),this.index=i},generate(){this.hex=this.palette.algorithm.get("slot")(this.palette,this.index),this.sync()},sync(){let i=document.getElementById(this.id);if(this.hex){let{lum:f}=H(this.hex);f<.5?i.classList.add("isLight"):i.classList.remove("isLight"),i.style.backgroundColor="#"+this.hex,i.getElementsByClassName("hex")[0].innerHTML="#"+this.hex}}};s.hex||(s.hex=this.algorithm.get("slot")(this,s.index));let l=this.createSwatch(s,t),n=document.getElementById((a=this.slots[s.index-1])==null?void 0:a.id);n?n.after(l):ue.prepend(l),s.data=s.index,this.slots.splice(s.index,0,s);for(let i=s.index+1;i<this.slots.length;i++)this.slots[i].data++;return s}createSwatch(e,t){t||(t={animations:!0});let s=document.createElement("div");if(s.classList.add("swatch"),s.setAttribute("data-color-index",e.data),s.id=e.id,e.hex){s.style.backgroundColor="#"+e.hex;let{lum:u}=H(e.hex);u<.5?s.classList.add("isLight"):s.classList.remove("isLight")}if(t.animations==!0){let u=function(){s.classList.remove("init"),s.removeEventListener("animationend",u),s.removeEventListener("animationcancel",u)};s.classList.add("init"),s.addEventListener("animationend",u),s.addEventListener("animationcancel",u)}let l=document.createElement("div");l.classList.add("options");let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.classList.add("icon","x"),n.setAttribute("viewBox","0 0 100 100");let a=document.createElementNS("http://www.w3.org/2000/svg","use");a.setAttribute("href","#icon-x");let i=document.createElementNS("http://www.w3.org/2000/svg","use");i.setAttribute("viewBox","0 0 100 100"),i.setAttribute("href","#icon-lock-body");let f=document.createElementNS("http://www.w3.org/2000/svg","use");f.setAttribute("viewBox","0 0 100 100"),f.setAttribute("href","#icon-lock-arm");let d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.setAttribute("viewBox","0 0 100 100"),d.classList.add("icon","lock"),e.isLocked&&d.classList.add("locked");let r=document.createElement("div");r.classList.add("info-container");let y=document.createElement("div");y.classList.add("info");let b=document.createElement("h2");b.classList.add("hex"),b.innerHTML="#"+e.hex;let x=document.createElementNS("http://www.w3.org/2000/svg","svg");x.classList.add("icon"),x.setAttribute("viewBox","0 0 100 100");let c=document.createElementNS("http://www.w3.org/2000/svg","use");c.setAttribute("href","#icon-copy");let v=document.createElement("div");v.classList.add("detector","left");let m=document.createElement("div");return m.classList.add("detector"),n.append(a),d.append(f,i),x.append(c),y.append(b,x),r.append(y),l.append(n,d,r),s.append(l,v,m),s}generate(e){let t={animations:!1};if(e)if(e.length==this.slots.length)for(let s=0;s<e.length;s++)this.slots[s].hex=e[s],this.slots[s].sync();else{for(let s of this.slots)document.getElementById(s.id).remove();this.slots=[];for(let s=0;s<e.length;s++)this.addSlot({index:s,hex:e[s]},t)}else if(this.slots.length>0)this.algorithm.get()(this);else{for(let s=0;s<5;s++)this.addSlot({},t);this.algorithm.get()(this)}return this.slots}}class pe{constructor(e){N(this,"routes");N(this,"loadContent",e=>{if(e){let{base:t,ids:s}=e;typeof t!="string"&&(t=e);let l=this.routes.get(t);s?l(s):l()}else this.routes.get("404")()});N(this,"routeToURL",e=>{let t=this.deconstructURL(e),{base:s,ids:l}=t;this.routes.has(s)?s==="create"?l?this.idsAreValid(l)?this.loadContent(t):this.loadContent():this.loadContent(t):this.loadContent(t):this.loadContent()});N(this,"navigateTo",(e,t)=>{t=t||!1,t?history.replaceState("","",e):history.pushState("","","/polychrome"+e),this.routeToURL(e)});this.routes=new Map(e)}deconstructURL(e){let t=e.replace(/^\//,"").replace(/\/$/,"").split("/");return t[0]=="polychrome"?{site:"polychrome",base:t[1]||"",ids:t[2]?t[2].split("-"):null}:{site:"polychrome",base:t[0],ids:t[1]?t[1].split("-"):null}}idsAreValid(e){for(let t of e)if(!/^[a-f0-9]{6}$/.test(t)||e.length>10)return!1;return!0}}function he(){let o=document.querySelector("#palette");o.onclick=o.ontouchend=t;let e=!1;async function t(r){if(r.preventDefault(),e)return;r.pointerType!="mouse"&&(focus(),e=!0,setTimeout(()=>{e=!1},75));let y=r.target,b=y.closest(".plus-container svg");if(b){const{ids:c}=B.deconstructURL(location.pathname),v=parseInt(b.getAttribute("data-color-index"));let m=h.addSlot({index:v+1});c.splice(v+1,0,m.hex),history.replaceState("","",c.join("-")),h.plus.hide(),k.create.push({undo(){h.removeSlot(m,{animations:!1}),c.splice(v+1,1),history.replaceState("","",c.join("-")),h.plus.hide()},redo(){h.addSlot(m,{animations:!1}),c.splice(v+1,0,m.hex),history.replaceState("","",c.join("-")),h.plus.hide()}}),h.slots.length>9&&h.plus.hide();return}let x=y.closest(".lock");if(x){let c=y.closest(".swatch"),v=parseInt(c.getAttribute("data-color-index")),m=h.slots[v];m.isLocked=!m.isLocked,x.classList.toggle("locked"),k.create.push({undo(){let u=h.slots[v],g=document.getElementById(u.id);u.isLocked=!u.isLocked,g.querySelector(".lock").classList.toggle("locked")},redo(){let u=h.slots[v],g=document.getElementById(u.id);u.isLocked=!u.isLocked,g.querySelector(".lock").classList.toggle("locked")}});return}if(y.closest(".x")){let c=y.closest(".swatch"),v=h.slots[parseInt(c.getAttribute("data-color-index"))],{ids:m}=B.deconstructURL(location.pathname);h.removeSlot(v),m.splice(v.data,1),history.replaceState("","",m.join("-")),h.plus.hide(),k.create.push({undo(){h.addSlot(v,{animations:!1}),m.splice(v.data,0,v.hex),history.replaceState("","",m.join("-")),h.plus.hide()},redo(){h.removeSlot(v,{animations:!1}),m.splice(v.data,1),history.replaceState("","",m.join("-")),h.plus.hide()}});return}if(y.closest(".info")){e=!0,setTimeout(()=>{e=!1},75);let c=y.closest(".swatch"),v=h.slots[parseInt(c.getAttribute("data-color-index"))];if(y.closest(".icon")){await navigator.clipboard.writeText(v.hex).then(()=>{let m=I("Copied hex to clipboard!",{pos:[r.x||r.changedTouches[r.changedTouches.length-1].pageX,r.y||r.changedTouches[r.changedTouches.length-1].pageY]});m.classList.add("at-mouse-pos"),document.body.append(m)},()=>{let m=I("Copy to clipboard failed.",{pos:[r.x||r.changedTouches[r.changedTouches.length-1].pageX,r.y||r.changedTouches[r.changedTouches.length-1].pageY]});m.classList.add("at-mouse-pos"),document.body.append(m)});return}}}let s=document.querySelector(".saved-palettes-wrapper");s.ontouchend=s.onclick=l;async function l(r){if(r.preventDefault(),e)return;r.pointerType!="mouse"&&(focus(),e=!0,setTimeout(()=>{e=!1},75));let y=r.target,b=y.closest(".swatch");if(b){r.preventDefault();let c=b.parentElement.parentElement;await navigator.clipboard.writeText(M.items[parseInt(c.getAttribute("data-palette-index"))][parseInt(b.getAttribute("data-color-index"))]).then(()=>document.body.append(I("Copied hex to clipboard!",{pos:[r.x||r.changedTouches[r.changedTouches.length-1].pageX,r.y||r.changedTouches[r.changedTouches.length-1].pageY]})),()=>document.body.append(I("Copy to clipboard failed.",{pos:[r.x||r.changedTouches[r.changedTouches.length-1].pageX,r.y||r.changedTouches[r.changedTouches.length-1].pageY]})));return}let x=y.closest(".more");if(x){e=!0,setTimeout(()=>{e=!1},75),x.parentElement.append(O([{message:"Open",call(){B.navigateTo("/create/"+A.savedPalettes.items[parseInt(y.closest(".palette-container").getAttribute("data-palette-index"))].join("-"))}},{message:"Copy",async call(){await navigator.clipboard.writeText(M.items[parseInt(y.closest(".palette-container").getAttribute("data-palette-index"))].join(`
`)).then(()=>document.body.append(I("Copied hex to clipboard!",{pos:[r.x||r.changedTouches[r.changedTouches.length-1].pageX,r.y||r.changedTouches[r.changedTouches.length-1].pageY]})),()=>document.body.append(I("Copy to clipboard failed.",{pos:[r.x||r.changedTouches[r.changedTouches.length-1].pageX,r.y||r.changedTouches[r.changedTouches.length-1].pageY]})))}},{message:"Remove",call(){let c=parseInt(y.closest(".palette-container").getAttribute("data-palette-index")),v=M.items[c];k.palettes.push({undo(){M.addItem(v,c)},redo(){M.removeItem(c)}}),M.removeItem(c),document.body.append(I("Removed palette."))}}],{type:"menu"}));return}}let n=document.querySelector(".toolbar");n.ontouchend=n.onclick=a;async function a(r){if(r.preventDefault(),e)return;r.pointerType!="mouse"&&(focus(),e=!0,setTimeout(()=>{e=!1},75));let y=r.target;if(y.closest(".undo")){B.deconstructURL(location.pathname).base=="create"?k.create.undo():k.palettes.undo();return}if(y.closest(".redo")){B.deconstructURL(location.pathname).base=="create"?k.create.redo():k.palettes.redo();return}if(y.closest(".copy")){V();return}if(y.closest(".generate")){let b=[];for(let{hex:c}of h.slots)b.push(c);h.generate();let x=[];for(let{hex:c}of h.slots)x.push(c);history.replaceState("","","/create/"+x.join("-")),b&&k.create.push({undo:()=>{h.generate(b),history.replaceState("","","/create/"+b.join("-"))},redo:()=>{h.generate(x),history.replaceState("","","/create/"+x.join("-"))}});return}if(y.closest(".save")){_();return}if(y.closest(".remove-all")){ee();return}if(y.closest(".import")){$();return}if(y.closest(".more")){ye();return}}let i=document.querySelector(".main-nav"),f=document.querySelector(".main-header");window.ontouchend=window.onclick=d;async function d(r){var y,b;if(!e){r.pointerType!="mouse"&&(e=!0,setTimeout(()=>{e=!1},75));let x=r.target,c=x.closest("a");if(c){r.preventDefault();let m=c.getAttribute("href");i.classList.remove("visible"),document.body.style.overflowY="",(y=document.querySelector(".overlay"))==null||y.remove(),m!=location.pathname&&B.navigateTo(m);return}if(x.closest("#nav-button"))if(i.classList.toggle("visible"),i.classList.contains("visible")){let m=document.createElement("div");m.classList.add("overlay"),m.onclick=m.ontouchend=()=>{m.remove(),i.classList.remove("visible"),document.body.style.overflowY=""},f.append(m),document.body.style.overflowY="hidden",h.plus.hide()}else(b=f.querySelector(".overlay"))==null||b.remove(),document.body.style.overflowY="";if(x.closest("#settings")){U("Settings",{confirmation:{confirm:{message:"Confirm",call(){let m=A.settings,u=document.querySelector(".confirmation-screen .box ul.options").firstChild;for(let g of Object.keys(m))console.log(g),m[g]=u.querySelector("select").selectedIndex,u=u.nextSibling;m.algorithm=document.querySelector(".confirmation-screen #algorithm").selectedIndex,A.settings=m,document.body.append(I("Changes saved."))}},cancel:{message:"Cancel",call(){document.body.append(I("Changes discarded."))}}},settings:[{message:"Algorithm",value:"algorithm",choices:[{message:"Random Algorithm"},{message:"Monochromatic"},{message:"Analogous"},{message:"Complementary"},{message:"Split Complementary"},{message:"Triadic"},{message:"Tetradic"},{message:"Square"},{message:"Randomize"}]},{message:"Cookies",value:"cookies",choices:[{message:"No, thank you",value:0},{message:"Sure, that's fine",value:1}]}]});return}let v=x.closest(".confirmation-screen");if(v){if(x.closest(".overlay")&&(v==document.querySelector(".cookies")&&(A.settings={cookies:1},A.info={firstVisit:!0}),v.remove()),v.classList.contains("remove-all")){if(x.closest(".yes")){for(let u=0;M.items.length;u++)M.removeItem(0);v.remove();let m=I("All palettes removed.");document.body.append(m)}else x.closest(".no")&&v.remove();return}if(v==document.querySelector(".cookies-confirmation")){let m=x.closest(".yes"),u=x.closest(".no");if(m){A.settings={cookies:1},v.remove();let g=I("Thanks, enjoy the site! :)");document.body.append(g)}else if(u){A.settings={cookies:0},v.remove();let g=I("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(g)}return}}}}}async function V(){if(B.deconstructURL(location.pathname).base=="create"){let o=[];for(let{hex:e}of h.slots)o.push(e);await navigator.clipboard.writeText(o.join(`
`)).then(()=>{let e=I("Copied palette!");document.body.append(e)},()=>{let e=I("Failed to copy.");document.body.append(e)})}else{let o=[];for(let e of M.items)o.push(e.join("-"));await navigator.clipboard.writeText(o.join(`,
`)).then(()=>{let e=I("Copied palettes to clipboard!");document.body.append(e)},()=>{let e=I("Copy to clipboard failed.");document.body.append(e)})}}function _(){if(!A.settings.cookies){document.body.append(I("You'll need to enable cookies in settings for that feature."));return}let o=[];for(let{hex:t}of h.slots)o.push(t);M.addItem(o);let e=I("Saved palette!");document.body.append(e)}function D(o){const{ids:e}=B.deconstructURL(location.pathname);let t=[];for(let s=0;s<o;s++)t.push(h.addSlot({})),e.push(t[s].hex);history.replaceState("","",e.join("-")),k.create.push({undo(){for(let s=0;s<o;s++)h.removeSlot(t[t.length-1-s],{animations:!1}),e.pop();history.replaceState("","",e.join("-"))},redo(){for(let s=0;s<o;s++)h.addSlot(t[s],{animations:!1}),e.push(t[s].hex);history.replaceState("","",e.join("-"))}})}function ge(){let o=[{message:"1",classes:["add-color"],call:()=>D(1)},{message:"2",classes:["add-color"],call:()=>D(2)},{message:"3",classes:["add-color"],call:()=>D(3)},{message:"4",classes:["add-color"],call:()=>D(4)}];for(let e=h.slots.length+4;e>10;e--)o.pop();if(o.length<1){document.body.append(I("Too many colors!"));return}document.body.append(O(o,{type:"tool-menu"}))}function ee(){U("Are you sure you want to delete all of your palettes? You won't be able to undo this.",{confirmation:{confirm:{message:"Yes, delete away.",call(){for(let e=0;M.items.length;e++)M.removeItem(0);let o=I("All palettes removed.");document.body.append(o)}},cancel:{message:"No, please don't delete my stuff!"}}})}function $(){if(B.deconstructURL(location.pathname).base=="create")U("Paste hex code palette below!",{confirmation:{confirm:{message:"Confirm",call(){let o=B.deconstructURL(location.pathname).ids,e=document.querySelector(".confirmation-screen").querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-",""),t=!(/[g-z~`!#$%\^&*+=\[\]\\';,/{}|\\":<>\?]/g.test(e)||e.length==0||e.length%6!=0),s="Invalid values entered. Try again.";if(t){s="Successfully imported values.";let n=e.match(/.{1,6}/g);h.generate(n),k.create.push({undo(){h.generate(o)},redo(){h.generate(n)}})}let l=I(s);document.body.append(l)}},cancel:{message:"Cancel"}},type:"input"});else{if(!A.settings.cookies){document.body.append(I("You'll need to enable cookies in settings for that feature."));return}U("Paste hex code palette below! Separate palettes with commas.",{confirmation:{confirm:{message:"Confirm",call(){let e=document.querySelector(".confirmation-screen").querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-","").replaceAll("#","").toLowerCase(),t="Invalid values entered. Try again.",s=!(/[g-z~`!#$%\^&*+=\[\]\\';/{}|\\":<>\?]/g.test(e)||e.replaceAll(",","").length%6!=0||e.length==0);e.replaceAll(",","").length%6;let l=e.split(",");for(let n of l)(n.length/6>10||!(n.length>=6))&&(s=!1);if(s){let n=0;for(let a of l)n++,M.addItem(a.match(/.{1,6}/g));t="Successfully imported values.",k.palettes.push({undo(){for(let a=n;a>0;a--)M.removeItem(M.items.length-1)},redo(){for(let a of l)M.addItem(a.match(/.{1,6}/g))}})}document.body.append(I(t))}},cancel:{message:"Cancel"}},type:"input"})}}function ye(){B.deconstructURL(location.pathname).base=="create"?document.body.append(O([{message:"Save",classes:["save"],call:_},{message:"Import",classes:["import"],call:$},{message:"Copy",classes:["copy"],call:V},{message:"Add Colors",classes:["add-colors"],call:ge}],{type:"tool-menu"})):document.body.append(O([{message:"Remove All",classes:["remove-all"],call:ee},{message:"Import",classes:["import"],call:$},{message:"Copy All",classes:["copy"],call:V}],{type:"tool-menu"}))}function ve(){window.addEventListener("scroll",o,!1),window.addEventListener("touchmove",o,{passive:!1});function o(e){B.deconstructURL(location.pathname).base=="create"&&(e.preventDefault(),e.stopPropagation())}window.ontouchstart=e=>{let t=e.targetTouches[0].target.closest(".create-page .swatch");if(t&&!e.targetTouches[0].target.closest(".options div")&&!e.targetTouches[0].target.closest(".options svg")){let s=function(m){m.preventDefault();let u=v(m);if(u<x?u=x:u>c&&(u=c),t.style.translate=l?"0 "+u+"px":u+"px",d=Math.round(u/r),d!=f){for(let g of h.slots){let S=document.getElementById(g.id);t!=S&&(g.index<a&&a+d<=g.index?S.style.translate=y:g.index>a&&a+d>=g.index?S.style.translate=b:S.style.translate="0 0")}f=d}};for(let{id:m}of h.slots)if(document.getElementById(m).classList.contains("is-dragging"))return;let l=!1;document.body.classList.contains("vertical")&&(l=!0),h.plus.disabled=!0,h.plus.hide(),t.classList.add("is-dragging");let n=l?e.touches[0].clientY:e.touches[0].clientX,a=parseInt(t.getAttribute("data-color-index")),i=h.slots[a],f=0,d=0,r=l?t.clientHeight:t.clientWidth,y=l?"0 "+r+"px":r+"px",b=l?"0 "+-r+"px":-r+"px",x=-a*r,c=(h.slots.length-a-1)*r,v=l?m=>m.touches[0].clientY-n:m=>m.touches[0].clientX-n;window.addEventListener("touchmove",s,{passive:!1}),window.addEventListener("touchend",()=>{t.classList.remove("is-dragging"),t.classList.add("is-released"),removeEventListener("touchmove",s),t.style.translate=`${l?"0 ":""}${d*100}%`;function m(){t.removeEventListener("transitionend",m),t.removeEventListener("transitioncancel",m),t.classList.remove("is-released");let u=t;for(let L=0;L<d;L++)h.slots.splice(i.data,1),h.slots.splice(i.data+1,0,i),i.data++,u=u.nextElementSibling,h.slots[i.data-1].data--;for(let L=0;L>d;L--)h.slots.splice(i.data,1),h.slots.splice(i.data-1,0,i),i.data--,u=u.previousElementSibling,h.slots[i.data+1].data++;let g=t.cloneNode(!0);d>0?(u.after(g),t.remove()):d<0&&(u.before(g),t.remove()),t.style.translate="";let S=[];for(let L of h.slots){let E=document.getElementById(L.id);E.style.transition="transform 0s",E.style.translate="",setTimeout(()=>{E.style.transition=""},1),S.push(L.hex)}t=g,history.replaceState("","",S.join("-")),h.plus.disabled=!1,d&&k.create.push({undo(){h.plus.hide();let L=t=document.getElementById(i.id);for(let w=0;w<-d;w++){h.slots.splice(i.data,1),h.slots.splice(i.data+1,0,i),i.data++,L=L.nextElementSibling;let q=parseInt(L.getAttribute("data-color-index"));L.setAttribute("data-color-index",(q-1).toString())}for(let w=0;w>-d;w--){h.slots.splice(i.data,1),h.slots.splice(i.data-1,0,i),i.data--,L=L.previousElementSibling;let q=parseInt(L.getAttribute("data-color-index"));L.setAttribute("data-color-index",(q+1).toString())}g=t.cloneNode(!0),-d>0?(L.after(g),t.remove()):-d<0&&(L.before(g),t.remove());let E=[];for(let w of h.slots)E.push(w.hex);history.replaceState("","",E.join("-"))},redo(){h.plus.hide();let L=t=document.getElementById(i.id);for(let w=0;w<d;w++)h.slots.splice(i.data,1),h.slots.splice(i.data+1,0,i),i.data++,L=L.nextElementSibling,a=parseInt(L.getAttribute("data-color-index")),L.setAttribute("data-color-index",(a-1).toString());for(let w=0;w>d;w--)h.slots.splice(i.data,1),h.slots.splice(i.data-1,0,i),i.data--,L=L.previousElementSibling,a=parseInt(L.getAttribute("data-color-index")),L.setAttribute("data-color-index",(a+1).toString());g=t.cloneNode(!0),d>0?(L.after(g),t.remove()):d<0&&(L.before(g),t.remove());let E=[];for(let w of h.slots)E.push(w.hex);history.replaceState("","",E.join("-"))}})}t.addEventListener("transitionend",m),t.addEventListener("transitioncancel",m)},{once:!0})}},onmousedown=e=>{let t=e.target.closest(".create-page .swatch");if(t&&!e.target.closest(".options div")&&!e.target.closest(".options svg")){let s=function(m){m.preventDefault();let u=v(m);if(u<x?u=x:u>c&&(u=c),t.style.translate=l?"0 "+u+"px":u+"px",d=Math.round(u/r),d!=f){for(let g of h.slots){let S=document.getElementById(g.id);t!=S&&(g.index<a&&a+d<=g.index?S.style.translate=y:g.index>a&&a+d>=g.index?S.style.translate=b:S.style.translate="0 0")}f=d}};for(let{id:m}of h.slots)if(document.getElementById(m).classList.contains("is-dragging"))return;let l=!1;document.body.classList.contains("vertical")&&(l=!0),h.plus.disabled=!0,h.plus.hide(),t.classList.add("is-dragging");let n=l?e.y:e.x,a=parseInt(t.getAttribute("data-color-index")),i=h.slots[a],f=0,d=0,r=l?t.clientHeight:t.clientWidth,y=l?"0 "+r+"px":r+"px",b=l?"0 "+-r+"px":-r+"px",x=-a*r,c=(h.slots.length-a-1)*r,v=l?m=>m.y-n:m=>m.x-n;addEventListener("mousemove",s),addEventListener("mouseup",()=>{t.classList.remove("is-dragging"),t.classList.add("is-released"),removeEventListener("mousemove",s),t.style.translate=`${l?"0 ":""}${d*100}%`;function m(){t.removeEventListener("transitionend",m),t.removeEventListener("transitioncancel",m),t.classList.remove("is-released");let u=t;for(let L=0;L<d;L++)h.slots.splice(i.data,1),h.slots.splice(i.data+1,0,i),i.data++,u=u.nextElementSibling,h.slots[i.data-1].data--;for(let L=0;L>d;L--)h.slots.splice(i.data,1),h.slots.splice(i.data-1,0,i),i.data--,u=u.previousElementSibling,h.slots[i.data+1].data++;let g=t.cloneNode(!0);d>0?(u.after(g),t.remove()):d<0&&(u.before(g),t.remove()),t.style.translate="";let S=[];for(let L of h.slots){let E=document.getElementById(L.id);E.style.transition="transform 0s",E.style.translate="",setTimeout(()=>{E.style.transition=""},1),S.push(L.hex)}t=g,history.replaceState("","",S.join("-")),h.plus.disabled=!1,d&&k.create.push({undo(){h.plus.hide();let L=t=document.getElementById(i.id);for(let w=0;w<-d;w++){h.slots.splice(i.data,1),h.slots.splice(i.data+1,0,i),i.data++,L=L.nextElementSibling;let q=parseInt(L.getAttribute("data-color-index"));L.setAttribute("data-color-index",(q-1).toString())}for(let w=0;w>-d;w--){h.slots.splice(i.data,1),h.slots.splice(i.data-1,0,i),i.data--,L=L.previousElementSibling;let q=parseInt(L.getAttribute("data-color-index"));L.setAttribute("data-color-index",(q+1).toString())}g=t.cloneNode(!0),-d>0?(L.after(g),t.remove()):-d<0&&(L.before(g),t.remove());let E=[];for(let w of h.slots)E.push(w.hex);history.replaceState("","",E.join("-"))},redo(){h.plus.hide();let L=t=document.getElementById(i.id);for(let w=0;w<d;w++)h.slots.splice(i.data,1),h.slots.splice(i.data+1,0,i),i.data++,L=L.nextElementSibling,a=parseInt(L.getAttribute("data-color-index")),L.setAttribute("data-color-index",(a-1).toString());for(let w=0;w>d;w--)h.slots.splice(i.data,1),h.slots.splice(i.data-1,0,i),i.data--,L=L.previousElementSibling,a=parseInt(L.getAttribute("data-color-index")),L.setAttribute("data-color-index",(a+1).toString());g=t.cloneNode(!0),d>0?(L.after(g),t.remove()):d<0&&(L.before(g),t.remove());let E=[];for(let w of h.slots)E.push(w.hex);history.replaceState("","",E.join("-"))}})}t.addEventListener("transitionend",m),t.addEventListener("transitioncancel",m)},{once:!0})}ondragstart=()=>!1}}let be=document.querySelector(".main-nav");function xe(){onkeydown=o=>{var t,s;if(document.querySelector(".confirmation-screen")){o.key==="Escape"&&((t=document.querySelector(".confirmation-screen"))==null||t.remove());return}if(o.metaKey||o.ctrlKey){let{base:l}=B.deconstructURL(location.pathname);if(o.key==="z"||o.key==="Z")if(l==="palettes"){o.shiftKey?k.palettes.redo():k.palettes.undo();return}else{o.shiftKey?k.create.redo():k.create.undo();return}}let e=parseInt(o.key);if(e>=0&&e<=9){let{base:l}=B.deconstructURL(location.pathname);if(l==="create"){o.preventDefault();let n=h.slots[e-1]||h.slots[h.slots.length-1],a=document.getElementById(n.id);k.create.push({undo(){let i=h.slots[e-1]||h.slots[h.slots.length-1],f=document.getElementById(i.id);i.isLocked=!i.isLocked,f.querySelector(".lock").classList.toggle("locked")},redo(){let i=h.slots[e-1]||h.slots[h.slots.length-1],f=document.getElementById(i.id);i.isLocked=!i.isLocked,f.querySelector(".lock").classList.toggle("locked")}}),n.isLocked=!n.isLocked,a.querySelector(".lock").classList.toggle("locked");return}}if(o.key===" "){let{base:l}=B.deconstructURL(location.pathname);if(l==="create"){o.preventDefault();let n=[];for(let{hex:i}of h.slots)n.push(i);h.generate();let a=[];for(let{hex:i}of h.slots)a.push(i);history.replaceState("","","/polychrome/create/"+a.join("-")),k.create.push({undo:()=>{h.generate(n),history.replaceState("","","/polychrome/create/"+n.join("-")),h.plus.hide()},redo:()=>{h.generate(a),history.replaceState("","","/polychrome/create/"+a.join("-"))}})}return}if(o.key==="Escape"){be.classList.remove("visible"),(s=document.querySelector(".overlay"))==null||s.remove();return}//! NOT DONE
if(o.key==="Enter"){let l=document.activeElement;console.log(l);return}o.key}}let h=new fe,M=new oe;const Le=document.title,j=document.querySelector(".toolbar");function Y(o,e,t){return s=>{document.title=Le+" | "+o;const l=document.querySelector("main.visible");l&&l.classList.remove("visible");const n=e;if(n==null||n.classList.add("visible"),o=="Palettes")document.body.parentElement.style.overflow="",document.body.style.overflow="",j.classList.add("palettes"),j.classList.remove("create"),t.draw(A.savedPalettes.items);else if(o=="Create")if(document.body.parentElement.style.overflow="hidden",document.body.style.overflow="hidden",j.classList.add("create"),j.classList.remove("palettes"),s)t.generate(s);else{let a=t.generate(),i=[];for(let f of a)i.push(f.hex);history.replaceState("","",i.join("-"))}else j.classList.remove("palettes","create"),document.documentElement.style.overflow="",document.body.style.overflow=""}}let B=new pe([["",Y("Home",document.getElementById("landing-page"))],["palettes",Y("Palettes",document.getElementById("palettes-page"),M)],["create",Y("Create",document.getElementById("create-page"),h)],["404",Y("404 Not Found",document.getElementById("not-found-page"))]]);B.routeToURL(location.pathname);onpopstate=()=>B.navigateTo(location.pathname,!0);A.info.firstVisit&&U("This site relies on local storage and cookies to save palettes.",{confirmation:{confirm:{message:"Sure, sounds good to me.",call(){A.info={firstVisit:!1},A.settings={cookies:1},document.body.append(I("Thanks, enjoy the site! :)"))}},cancel:{message:"No thanks, I don't want to save palettes.",call(){A.info={firstVisit:!1},A.settings={cookies:0};for(let o=0;o<M.items.length;o++)M.removeItem(0);document.body.append(I("You won't be able to save your palettes. You can change this in settings.",{duration:2500}))}}}});(navigator.userAgent.includes("Android")||navigator.userAgent.includes("like Mac"))&&document.body.classList.add("mobile");function te(){document.querySelector(":root").style.display="initial",window.innerHeight>window.innerWidth?(document.body.classList.add("vertical"),document.body.classList.remove("landscape-thin")):window.innerWidth/window.innerHeight<1.6?(document.body.classList.add("landscape-thin"),document.body.classList.remove("vertical")):document.body.classList.remove("vertical","landscape-thin")}setTimeout(te,200);onresize=te;he();ve();xe();onmouseover=o=>{if(!h.plus.disabled){const e=o.target,t=e.closest(".swatch");if(t)if(e.closest(".detector")&&h.slots.length<10){const l=e.closest(".left");let n=parseInt(t.getAttribute("data-color-index"));l&&n--,h.plus.show(n)}else h.plus.hide(0)}};
