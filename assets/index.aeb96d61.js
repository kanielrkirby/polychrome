var le=Object.defineProperty;var oe=(n,s,e)=>s in n?le(n,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[s]=e;var B=(n,s,e)=>(oe(n,typeof s!="symbol"?s+"":s,e),e);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function e(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(o){if(o.ep)return;o.ep=!0;const l=e(o);fetch(o.href,l)}})();let R;const ie=new Uint8Array(16);function ne(){if(!R&&(R=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!R))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return R(ie)}const C=[];for(let n=0;n<256;++n)C.push((n+256).toString(16).slice(1));function ae(n,s=0){return(C[n[s+0]]+C[n[s+1]]+C[n[s+2]]+C[n[s+3]]+"-"+C[n[s+4]]+C[n[s+5]]+"-"+C[n[s+6]]+C[n[s+7]]+"-"+C[n[s+8]]+C[n[s+9]]+"-"+C[n[s+10]]+C[n[s+11]]+C[n[s+12]]+C[n[s+13]]+C[n[s+14]]+C[n[s+15]]).toLowerCase()}const re=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),W={randomUUID:re};function de(n,s,e){if(W.randomUUID&&!s&&!n)return W.randomUUID();n=n||{};const t=n.random||(n.rng||ne)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,s){e=e||0;for(let o=0;o<16;++o)s[e+o]=t[o];return s}return ae(t)}const ce=document.title;function H(n){let s=parseInt(n[0]+n[1],16)/255,e=parseInt(n[2]+n[3],16)/255,t=parseInt(n[4]+n[5],16)/255,o=Math.max(s,e,t),l=Math.min(s,e,t),i,r,a=s*.299+e*.587+t*.114,c=(o+l)/2;if(o==l)i=r=0;else{let d=o-l;switch(r=c>.5?d/(2-o-l):d/(o+l),o){case s:i=(e-t)/d+(e<t?6:0);break;case e:i=(t-s)/d+2;break;default:i=(s-e)/d+4;break}i=i*60}return{r:s,g:e,b:t,h:i,s:r,l:c,lum:a}}function T(n,s,e){n>360?n-=360:n<0&&(n+=360),s>1?s=1:s<0&&(s=0),e>1?e=1:e<0&&(e=0),s*=100;const t=s*Math.min(e,1-e)/100,o=l=>{const i=(l+n/30)%12,r=e-t*Math.max(Math.min(i-3,9-i,1),-1);return Math.round(255*r).toString(16).padStart(2,"0")};return`${o(0)}${o(8)}${o(4)}`}const E={get info(){let n=localStorage.getItem("info");return n?JSON.parse(n):(localStorage.setItem("info",JSON.stringify({firstVisit:!0})),this.info)},set info(n){let s=this.info;if(n)for(let[e,t]of Object.entries(n))s[e]=t;localStorage.setItem("info",JSON.stringify(s))},get settings(){let n=localStorage.getItem("settings");return n?JSON.parse(n):(localStorage.setItem("settings",JSON.stringify({lastColorAlgorithmIndex:2,cookiesOk:!1})),this.settings)},set settings(n){let s=this.settings;if(n)for(let[e,t]of Object.entries(n))s[e]=t;localStorage.setItem("settings",JSON.stringify(s))},savedPalettes:{get items(){let n=localStorage.getItem("saved-palettes"),s;if(n){let e=[];s=JSON.parse(n);for(let t of s)e.push(t);return e}else return[]},set items(n){localStorage.setItem("saved-palettes",JSON.stringify(n))},addItem(n){let s=this.items;s.push(n),this.items=s},removeItem(n){this.items.splice(n,1)}}},I={create:{cmds:[],cmdIndex:-1,push(n){this.cmds.splice(this.cmdIndex+1,1/0,n),this.cmdIndex=this.cmds.length-1},undo(){this.cmdIndex>-1&&(this.cmds[this.cmdIndex].undo(),this.cmdIndex--)},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}},palettes:{cmds:[],cmdIndex:-1,push(n){this.cmds.splice(this.cmdIndex+1,1/0,n),this.cmdIndex=this.cmds.length-1},undo(){if(this.cmdIndex>-1){let n=this.cmds[this.cmdIndex];this.cmdIndex--,n.undo()}},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}}},O=document.querySelector(".toolbar");function U(n,s,e){return t=>{document.title=ce+" | "+n;const o=document.querySelector("main.visible");o&&o.classList.remove("visible");const l=s;if(l==null||l.classList.add("visible"),n=="Palettes")document.body.parentElement.style.overflow="",document.body.style.overflow="",O.classList.add("palettes"),O.classList.remove("create"),e.draw(E.savedPalettes.items);else if(n=="Create")if(document.body.parentElement.style.overflow="hidden",document.body.style.overflow="hidden",O.classList.add("create"),O.classList.remove("palettes"),t)e.generate(t);else{let i=e.generate(),r=[];for(let a of i)r.push(a.hex);history.replaceState("","",r.join("-"))}else O.classList.remove("palettes","create"),document.documentElement.style.overflow="",document.body.style.overflow=""}}const y=(n,s)=>Math.random()*(s-n)+n,ue=()=>btoa(parseInt(de(),16).toString(36)).replaceAll("=","");function S(n,s){const e=document.createElement("div");e.classList.add("tooltip","appearing");const t=document.createElement("h2");return t.innerHTML=n,e.append(t),s!=null&&s.pos?(e.style.left=s.pos[0]+"px",e.style.top=s.pos[1]+"px"):e.classList.add("centered"),setTimeout(()=>{s&&s.pos&&(e.clientWidth+s.pos[0]>document.body.clientWidth?(e.style.translate="-100%",e.clientHeight+s.pos[1]>document.body.clientHeight&&(e.style.translate="-100 -100%")):e.clientHeight+s.pos[1]>document.body.clientHeight&&(e.style.translate="0 -100%"))},0),e.addEventListener("animationend",()=>{e.classList.remove("appearing"),setTimeout(()=>{e.classList.add("disappearing"),e.addEventListener("animationend",()=>{e.remove()},{once:!0})},(s==null?void 0:s.duration)||1e3)},{once:!0}),e}function P(n,s){let e=document.createElement("div");e.classList.add("popover");let t=document.createElement("div");if(t.classList.add("clear-overlay"),(s==null?void 0:s.type)=="menu"){let o=document.createElement("ul");o.classList.add("list");for(let l of n){let i=document.createElement("div");i.id=l.id,i.classList.add("choice"),l.content&&(i.innerHTML=l.content),o.append(i)}e.append(o,t)}else if((s==null?void 0:s.type)=="color-picker"){let o=document.createElement("canvas");o.id="color-picker",o.classList.add("color-picker");let l=o.getContext("2d"),{h:i}=H(s.hex),r=`hsl(${i}, 100%, 50%)`,a=l.createLinearGradient(0,0,l.canvas.width,0);a.addColorStop(0,"#fff"),a.addColorStop(1,r),l.fillStyle=a,l.fillRect(0,0,l.canvas.width,l.canvas.height);let c=l.createLinearGradient(0,0,0,l.canvas.height);c.addColorStop(0,"rgba(0,0,0,0)"),c.addColorStop(1,"black"),l.fillStyle=c,l.fillRect(0,0,l.canvas.width,l.canvas.height);let d=document.createElement("div");d.classList.add("color-picker-cursor");let p=document.createElement("input");p.setAttribute("min","0"),p.setAttribute("max","360"),p.setAttribute("type","range");let g=document.createElement("div");g.classList.add("huebar");let v=document.createElement("div");v.classList.add("huebar-cursor");let f=document.createElement("input");f.setAttribute("min","0"),f.setAttribute("max","360"),f.setAttribute("type","range"),o.append(d,p),g.append(v,f),e.append(o,g)}return e}function J(n,s){let e=document.createElement("div");e.classList.add("confirmation-screen",n.value+"-confirmation");let t=document.createElement("div");t.classList.add("box");let o=document.createElement("h2");o.innerHTML=n.message;let l=document.createElement("ul"),i=document.createElement("div");i.classList.add("overlay"),t.append(o,l),e.append(t,i);for(let{message:r,value:a,call:c}of s){let d=document.createElement("li");d.innerHTML=r,d.classList.add(a),l.append(d),d.addEventListener("click",()=>{c&&c(),e.remove()},{once:!0})}document.body.append(e)}function D(n,s){let e=document.createElement("div");e.classList.add("confirmation-screen",s);let t=document.createElement("h2");t.innerHTML=n;let o=document.createElement("textarea"),l=document.createElement("div");l.classList.add("overlay");let i=document.createElement("div");i.classList.add("box");let r=document.createElement("ul"),a=document.createElement("li");a.classList.add("yes"),a.innerHTML="Confirm";let c=document.createElement("li");return c.innerHTML="Cancel",c.classList.add("no"),r.append(c,a),i.append(t,o,r),e.append(i,l),e}function F(){let n=document.createElement("div");n.classList.add("confirmation-screen","settings-popover");let s=document.createElement("div");s.classList.add("box");let e=document.createElement("div");e.classList.add("overlay");let t=document.createElement("h2");t.innerText="Settings";let o=document.createElement("ul");o.classList.add("options");let l=document.createElement("li"),i=document.createElement("label");i.innerText="Algorithm";let r=document.createElement("select");r.id="algorithm";let a=document.createElement("option");a.value="random",a.innerText="Random Algorithm";let c=document.createElement("option");c.value="monochromatic",c.innerText="Monochromatic";let d=document.createElement("option");d.value="analogous",d.innerText="Analogous";let p=document.createElement("option");p.value="complementary",p.innerText="Complementary";let g=document.createElement("option");g.value="split-complementary",g.innerText="Split Complementary";let v=document.createElement("option");v.value="triadic",v.innerText="Triadic";let f=document.createElement("option");f.value="tetradic",f.innerText="Tetradic";let m=document.createElement("option");m.value="square",m.innerText="Square";let b=document.createElement("option");b.value="randomize",b.innerText="Randomize Colors";let u=document.createElement("ul");u.classList.add("confirmation");let x=document.createElement("li");x.classList.add("yes"),x.innerText="Confirm";let L=document.createElement("li");L.classList.add("no"),L.innerText="Cancel",u.append(L,x),r.append(b,c,d,p,g,v,f,m,a),r.selectedIndex=E.settings.lastColorAlgorithmIndex;let w=document.createElement("li");w.classList.add("horizontal");let q=document.createElement("div"),M=document.createElement("label");M.innerText="Cookies";let V=document.createElement("label");V.innerText="That's fine!",V.setAttribute("for","cookies-ok");let $=document.createElement("label");$.innerText="No thanks.",$.setAttribute("for","cookies-not-ok");let z=document.createElement("div"),X=document.createElement("div");z.classList.add("op"),X.classList.add("op");let j=document.createElement("input");j.id="cookies-ok",j.value="cookies-ok",j.setAttribute("type","radio"),j.classList.add("true");let N=document.createElement("input");return N.id="cookies-not-ok",N.value="cookies-not-ok",N.setAttribute("type","radio"),N.classList.add("false"),E.settings.cookiesOk?j.checked=!0:N.checked=!0,j.addEventListener("change",()=>{j.checked?N.checked=!1:N.checked=!0}),N.addEventListener("change",()=>{N.checked?j.checked=!1:j.checked=!0}),z.append(j,V),X.append(N,$),w.append(M,q),q.append(z,X),l.append(i,r),o.append(l,w),s.append(t,o,u),n.append(e,s),n}let Y=document.querySelector(".saved-palettes-wrapper");class me{constructor(){B(this,"items",[]);this.items=E.savedPalettes.items}draw(s){for(;Y.childElementCount>0;)Y.lastChild.remove();if(s)for(let t=0;t<s.length;t++){let o=s[t],l=document.createElement("div");l.setAttribute("data-palette-index",t.toString()),l.classList.add("palette-container");let i=document.createElement("div");i.classList.add("palette");let r=document.createElement("div");r.classList.add("options");let a=document.createElement("div");a.classList.add("more");let c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("viewBox","0 0 100 100");let d=document.createElementNS("http://www.w3.org/2000/svg","use");d.setAttribute("href","#icon-more-horizontal");for(let p=0;p<o.length;p++){let g=o[p],{lum:v}=H(g),f=document.createElement("div");f.setAttribute("data-color-index",p.toString()),f.classList.add("swatch"),f.style.backgroundColor="#"+g,v<.5&&f.classList.add("isLight");let m=document.createElement("h2");m.innerHTML="#"+g,m.classList.add("text"),f.append(m),i.append(f)}c.append(d),a.append(c),r.append(a),l.append(i,r),Y.append(l)}let e=document.querySelector(".palettes-page .when-empty");Y.childElementCount==0?e.classList.remove("hidden"):e.classList.add("hidden")}addItem(s,e){typeof e=="number"?this.items.splice(e,0,s):this.items.push(s),E.savedPalettes.items=this.items,this.draw(this.items)}removeItem(s){this.items.splice(s,1),E.savedPalettes.items=this.items,this.draw(this.items)}}function K(n){if(n.algorithm.details=="slot"){let s=[];for(let e=0;e<6;e++)s.push(Math.round(y(0,15)).toString(16));return s.join("")}else for(let s of n.slots)if(!s.isLocked){let e=[];for(let t=0;t<6;t++)e.push(Math.round(y(0,15)).toString(16));s.hex=e.join(""),s.sync()}}function G(n,s){if(n.algorithm.details=="slot")if(Math.random()>.5){let e=0,t=0,o=0,l=n.slots[s-2],i=n.slots[s-1],r=n.slots[s],a=n.slots[s+1];if(r){let{h:c,s:d,l:p}=H(r.hex);if(e=c,i){let{s:g,l:v}=H(i.hex);t=d-(d-g)/2,o=p-(p-v)/2}else if(a){let{s:g,l:v}=H(a.hex);t=d-(g-d)/2,o=p-(v-p)/2}else t=d*y(.7,1.3),o=p*y(.7,1.3)}else if(i){let{h:c,s:d,l:p}=H(i.hex);if(e=c,l){let{s:g,l:v}=H(l.hex);t=d+(d-g)/2,o=p+(p-v)/2}else t=d*y(.7,1.3),o=p*y(.7,1.3)}else t=y(.2,1),o=y(.1,.9);return t*=y(.95,1.05),o*=y(.95,1.05),T(e,t,o)}else{let e,t,o,l,i,r,a;for(let{hex:c}of n.slots){let{h:d,s:p,l:g}=H(c);typeof e!="number"&&(e=d),(typeof o!="number"||p>o)&&(o=p),(typeof t!="number"||p<t)&&(t=p),(typeof i!="number"||g>i)&&(i=g),(typeof l!="number"||g<l)&&(l=g)}return r=y(t,o)*y(.95,1.05),a=y(l,i)*y(.95,1.05),T(e,r,a)}else if(n.algorithm.details=="increment"||Math.random()>.5){let e=[],t=y(0,360),o=0,l=0,i=0,r=0,a=0,c=0,d=0,p=0;for(let g of n.slots)g.isLocked||e.push(g);for(let g=0;g<e.length;g++)if(g==0){let v=n.slots[0];o=y(.1,1),l=y(.1,.9),v.hex=T(t,o,l),v.sync(),i=o,r=l,i<.4?a=y(.7,1):i>.6?a=y(.1,.3):i>.5?a=y(.1,.2):a=y(.8,.9),r<.4?c=y(.7,1):r>.6?c=y(.1,.3):r>.5?c=y(.1,.2):c=y(.8,.9),d=(a-i)/n.slots.length,p=(c-r)/n.slots.length}else{let v=n.slots[g];o=i+d*g,l=r+p*g,v.hex=T(t,o,l),v.sync()}}else{let e=y(0,360),t,o,l;for(let i of n.slots)i.isLocked||(t=y(.2,1),o=y(.2,.8),typeof l!="number"&&(e=l=y(0,360)),i.hex=T(e,t,o),i.sync())}}function Z(n,s){if(n.algorithm.details=="slot")if(Math.random()>.5){let e=0,t=0,o=0,l=n.slots[s-2],i=n.slots[s-1],r=n.slots[s],a=n.slots[s+1];if(r){let{h:c,s:d,l:p}=H(r.hex);if(i){let{h:g,s:v,l:f}=H(i.hex),m=c-g;m>180?m=c-g-360:m<-180&&(m=c-g+360),e=c-m/2,t=d-(d-v)/2,o=p-(p-f)/2}else if(a){let{h:g,s:v,l:f}=H(a.hex),m=g-c;m>180?m=g-c-360:m<-180&&(m=g-c+360),e=c-m/2,t=d-(v-d)/2,o=p-(f-p)/2}else e=c*y(.7,1.3),t=d*y(.7,1.3),o=p*y(.7,1.3)}else if(i){let{h:c,s:d,l:p}=H(i.hex);if(l){let{h:g,s:v,l:f}=H(l.hex),m=c-g;m>180?m=c-g-360:m<-180&&(m=c-g+360),e=c+m/2,t=d+(d-v)/2,o=p+(p-f)/2}else e=c*y(.7,1.3),t=d*y(.7,1.3),o=p*y(.7,1.3)}else e=y(0,360),t=y(.2,1),o=y(.1,.9);return e*=y(.95,1.05),t*=y(.95,1.05),o*=y(.95,1.05),T(e,t,o)}else{let e,t,o,l,i,r,a,c,d,p,g=Math.random();for(let{hex:v}of n.slots){let{h:f,s:m,l:b}=H(v);if(typeof e!="number")e=f;else if(typeof t!="number"){let u=e,x=u-f;x>180?u-=360:x<-180&&(u+=360),x=u-f,(x<-25||x>25)&&(t=f)}else if(typeof o!="number"){let u=e,x=t,L=u-f,w=x-f;L>180?u-=360:L<-180&&(u+=360),w>180?x-=360:w<-180&&(x+=360),L=u-f,w=x-f,(L>25||L<-25)&&(w>25||w<-25)&&(o=f)}(typeof i!="number"||m>i)&&(i=m),(typeof l!="number"||m<l)&&(l=m),(typeof a!="number"||b>a)&&(a=b),(typeof r!="number"||b<r)&&(r=b)}return o&&g<.333?c=o:t&&g>.666?c=t:c=e,d=y(l,i)*y(.95,1.05),p=y(r,a)*y(.95,1.05),T(c,d,p)}else if(n.algorithm.details=="increment"||Math.random()>.5){let e=0,t=0,o=0,l=0,i=0,r=0,a=0,c=0,d=0,p=0,g=0,v=0;for(let f=0;f<n.slots.length;f++){let m=n.slots[f];if(!m.isLocked)if(!l)e=l=y(0,360),t=i=y(.1,1),o=r=y(.1,.9),m.hex=T(e,t,o),m.sync(),l=e,i=t,r=o,Math.random()>.5?a=e+y(90,120):a=e-y(75,90),i<.4?c=y(.7,1):i>.6?c=y(.1,.3):i>.5?c=y(.1,.2):c=y(.8,.9),r<.4?d=y(.7,1):r>.6?d=y(.1,.3):r>.5?d=y(.1,.2):d=y(.8,.9),p=(a-l)/n.slots.length,g=(c-i)/n.slots.length,v=(d-r)/n.slots.length;else{let b=n.slots[f];e=l+p*f,t=i+g*f,o=r+v*f,b.hex=T(e,t,o),b.sync()}}}else{let e,t,o,l,i,r;for(let a of n.slots)if(!a.isLocked){if(t=y(.2,1),o=y(.2,.8),typeof l!="number")e=l=y(0,360);else if(typeof i!="number")e=i=l+30*y(.975,1.025);else if(typeof r!="number")e=r=l-30*y(.975,1.025);else{let c=Math.random();c<.333?e=l:c>.666?e=i:e=r}a.hex=T(e,t,o),a.sync()}}}function Q(n){if(n.algorithm.details=="slot"){let s,e,t,o,l,i,r,a,c,d=Math.random();for(let{hex:p}of n.slots){let{h:g,s:v,l:f}=H(p);if(typeof s!="number")s=g;else if(typeof e!="number"){let m=s,b=m-g;b>180?m-=360:b<-180&&(m+=360),b=m-g,(b<-90||b>90)&&(e=g)}(typeof o!="number"||v>o)&&(o=v),(typeof t!="number"||v<t)&&(t=v),(typeof i!="number"||f>i)&&(i=f),(typeof l!="number"||f<l)&&(l=f)}return d>.5&&e?r=e*y(.925,1.025):r=s*y(.925,1.025),a=y(t,o)*y(.95,1.05),c=y(l,i)*y(.95,1.05),T(r,a,c)}else{let s,e,t,o,l;for(let i of n.slots)i.isLocked||(e=y(.2,1),t=y(.2,.8),typeof o!="number"?s=o=y(0,360):typeof l!="number"?s=l=o+150*y(.975,1.025):Math.random()<.5?s=o*y(.975,1.025):s=l*y(.975,1.025),i.hex=T(s,e,t),i.sync())}}function _(n){if(n.algorithm.details=="slot"){let s,e,t,o,l,i,r,a,c,d,p=Math.random();for(let{hex:g}of n.slots){let{h:v,s:f,l:m}=H(g);if(typeof s!="number")s=v;else if(typeof e!="number"){let b=s,u=b-v;u>180?b-=360:u<-180&&(b+=360),u=b-v,(u<-30||u>30)&&(e=v)}else if(typeof t!="number"){let b=s,u=e,x=b-v,L=u-v;x>180?b-=360:x<-180&&(b+=360),L>180?u-=360:L<-180&&(u+=360),x=b-v,L=u-v,(x>30||x<-30)&&(L>30||L<-30)&&(t=v)}(typeof l!="number"||f>l)&&(l=f),(typeof o!="number"||f<o)&&(o=f),(typeof r!="number"||m>r)&&(r=m),(typeof i!="number"||m<i)&&(i=m)}return p<.333&&t?a=t:p>.666&&e?a=e:a=s,c=y(o,l)*y(.95,1.05),d=y(i,r)*y(.95,1.05),T(a,c,d)}else{let s,e,t,o,l,i;for(let r of n.slots)if(!r.isLocked){if(e=y(.2,1),t=y(.2,.8),typeof o!="number")s=o=y(0,360);else if(typeof l!="number")s=l=o+150*y(.975,1.025);else if(typeof i!="number")s=i=o-150*y(.975,1.025);else{let a=Math.random();a<.333?s=o*y(.975,1.025):a>.666?s=l*y(.975,1.025):s=i*y(.975,1.025)}r.hex=T(s,e,t),r.sync()}}}function ee(n){if(n.algorithm.details=="slot"){let s,e,t,o,l,i,r,a,c,d,p=Math.random();for(let{hex:g}of n.slots){let{h:v,s:f,l:m}=H(g);if(typeof s!="number")s=v;else if(typeof e!="number"){let b=s,u=b-v;u>180?b-=360:u<-180&&(b+=360),u=b-v,(u<-90||u>90)&&(e=v)}else if(typeof t!="number"){let b=s,u=e,x=b-v,L=u-v;x>180?b-=360:x<-180&&(b+=360),L>180?u-=360:L<-180&&(u+=360),x=b-v,L=u-v,(x>90||x<-90)&&(L>90||L<-90)&&(t=v)}(typeof l!="number"||f>l)&&(l=f),(typeof o!="number"||f<o)&&(o=f),(typeof r!="number"||m>r)&&(r=m),(typeof i!="number"||m<i)&&(i=m)}return p<.333?a=s:p>.666?a=e:a=t,c=y(o,l)*y(.95,1.05),d=y(i,r)*y(.95,1.05),T(a,c,d)}else{let s,e,t,o,l,i;for(let r of n.slots)if(!r.isLocked){if(e=y(.2,1),t=y(.2,.8),typeof o!="number")s=o=y(0,360);else if(typeof l!="number")s=l=o+120;else if(typeof i!="number")s=i=o-120;else{let a=Math.random();a<.333?s=o:a<.666?s=l:s=i}r.hex=T(s,e,t),r.sync()}}}function te(n){if(n.algorithm.details=="slot"){let s,e,t,o,l,i,r,a,c,d,p,g=Math.random();for(let{hex:v}of n.slots){let{h:f,s:m,l:b}=H(v);if(typeof s!="number")s=f;else if(typeof e!="number"){let u=s,x=u-f;x>180?u-=360:x<-180&&(u+=360),x=u-f,(x<-45||x>45)&&(e=f)}else if(typeof t!="number"){let u=s,x=e,L=u-f,w=x-f;L>180?u-=360:L<-180&&(u+=360),w>180?x-=360:w<-180&&(x+=360),L=u-f,w=x-f,(L>45||L<-45)&&(w>45||w<-45)&&(t=f)}else if(typeof o!="number"){let u=s,x=e,L=t,w=u-f,q=x-f,M=L-f;w>180?u-=360:w<-180&&(u+=360),q>180?x-=360:q<-180&&(x+=360),M>180?L-=360:M<-180&&(L+=360),w=u-f,q=x-f,M=L-f,(w>45||w<-45)&&(q>45||q<-45)&&(M>45||M<-45)&&(o=f)}(typeof i!="number"||m>i)&&(i=m),(typeof l!="number"||m<l)&&(l=m),(typeof a!="number"||b>a)&&(a=b),(typeof r!="number"||b<r)&&(r=b)}return typeof o=="number"&&g<.25?c=o:typeof t=="number"&&g<.5?c=t:typeof e=="number"&&g<.75?c=e:c=s,d=y(l,i)*y(.95,1.05),p=y(r,a)*y(.95,1.05),T(c,d,p)}else{let s,e,t,o,l,i,r;for(let a of n.slots)if(!a.isLocked){if(e=y(.2,1),t=y(.2,.8),typeof o!="number")s=o=y(0,360);else if(typeof l!="number")s=l=o+60;else if(typeof i!="number")s=i=o-120;else if(typeof r!="number")s=r=o+180;else{let c=Math.random();c<.25?s=o:c>.5?s=l:c>.75?s=i:s=r}a.hex=T(s,e,t),a.sync()}}}function se(n){if(n.algorithm.details=="slot"){let s,e,t,o,l,i,r,a,c,d,p,g=Math.random();for(let{hex:v}of n.slots){let{h:f,s:m,l:b}=H(v);if(typeof s!="number")s=f;else if(typeof e!="number"){let u=s,x=u-f;x>180?u-=360:x<-180&&(u+=360),x=u-f,(x<-85||x>85)&&(e=f)}else if(typeof t!="number"){let u=s,x=e,L=u-f,w=x-f;L>180?u-=360:L<-180&&(u+=360),w>180?x-=360:w<-180&&(x+=360),L=u-f,w=x-f,(L<-85||L>85)&&(w<-85||w>85)&&(t=f)}else if(typeof o!="number"){let u=s,x=e,L=t,w=u-f,q=x-f,M=L-f;w>180?u-=360:w<-180&&(u+=360),q>180?x-=360:q<-180&&(x+=360),M>180?L-=360:M<-180&&(L+=360),w=u-f,q=x-f,M=L-f,(w<-85||w>85&&q<-85||q>85&&(M<-85||M>85))&&(o=f)}(typeof i!="number"||m>i)&&(i=m),(typeof l!="number"||m<l)&&(l=m),(typeof a!="number"||b>a)&&(a=b),(typeof r!="number"||b<r)&&(r=b)}return typeof o=="number"&&g<.25?c=o:typeof t=="number"&&g<.5?c=t:typeof e=="number"&&g<.75?c=e:c=s,d=y(l,i)*y(.95,1.05),p=y(r,a)*y(.95,1.05),T(c,d,p)}else{let s,e,t,o,l,i,r;for(let a of n.slots)if(!a.isLocked){if(e=y(.2,1),t=y(.2,.8),typeof o!="number")s=o=y(0,360);else if(typeof l!="number")s=l=o+60;else if(typeof i!="number")s=i=o-120;else if(typeof r!="number")s=r=o+180;else{let c=Math.random();c<.25?s=o:c>.5?s=l:c>.75?s=i:s=r}a.hex=T(s,e,t),a.sync()}}}function pe(n,s){switch(Math.round(y(0,7))){case 0:return K(n);case 1:return G(n,s);case 2:default:return Z(n,s);case 3:return Q(n);case 4:return _(n);case 5:return ee(n);case 6:return te(n);case 7:return se(n)}}const fe=[K,G,Z,Q,_,ee,te,se,pe];let he=document.getElementById("palette");class ye{constructor(){B(this,"slots",[]);B(this,"plus",{palette:this,disabled:!1,active:!1,show(s){if(!this.active){let e=this.render(s.toString()),t=this.palette.slots[s];t?document.getElementById(t.id).after(e):(t=this.palette.slots[s+1],document.getElementById(t.id).before(e)),this.active=!0}},hide(){var s;this.active&&((s=document.getElementById("plus-button"))==null||s.parentElement.parentElement.remove(),this.active=!1)},render(s){let e=document.createElement("div");e.classList.add("plus-container");let t=document.createElement("div");t.classList.add("circle");let o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("data-color-index",s),o.setAttribute("viewBox","0 0 100 100"),o.id="plus-button";let l=document.createElementNS("http://www.w3.org/2000/svg","use");return l.setAttribute("href","#icon-plus-button"),l.setAttribute("viewBox","0 0 100 100"),o.append(l),t.append(o),e.append(t),e}});B(this,"algorithm",{list:fe,get(s){s=="slot"?this.details="slot":this.details="";let e=E.settings.lastColorAlgorithmIndex;return typeof e!="number"&&(E.settings={lastColorAlgorithmIndex:1}),this.list[e]},details:"",direction:{h:0,s:0,l:0},preference:{h:void 0,s:void 0,l:void 0}})}removeSlot(s,e){e||(e={animations:!0});let t=s.data+1;for(let l=t;l<this.slots.length;l++)this.slots[l].data--;let o=document.getElementById(s.id);if(this.slots.splice(s.data,1),e.animations==!0){let l=function(){o.remove(),o.removeEventListener("animationend",l),o.removeEventListener("animationcancel",l)};o.classList.add("deinit"),o.addEventListener("animationend",l),o.addEventListener("animationcancel",l)}else o.remove();return s}addSlot(s,e){var i;let t={palette:this,hex:s.hex,isLocked:typeof s.isLocked=="boolean"?s.isLocked:!1,id:s.id||ue(),index:typeof s.index!="number"?this.slots.length:s.index,get data(){var a;let r=parseInt((a=document.getElementById(this.id))==null?void 0:a.getAttribute("data-color-index"));return typeof r=="number"?r:this.data=this.index},set data(r){var a;(a=document.getElementById(this.id))==null||a.setAttribute("data-color-index",r.toString()),this.index=r},generate(){this.hex=this.palette.algorithm.get("slot")(this.palette,this.index),this.sync()},sync(){let r=document.getElementById(this.id);if(this.hex){let{lum:a}=H(this.hex);a<.5?r.classList.add("isLight"):r.classList.remove("isLight"),r.style.backgroundColor="#"+this.hex,r.getElementsByClassName("hex")[0].innerHTML="#"+this.hex}}};t.hex||(t.hex=this.algorithm.get("slot")(this,t.index));let o=this.createSwatch(t,e),l=document.getElementById((i=this.slots[t.index-1])==null?void 0:i.id);l?l.after(o):he.prepend(o),t.data=t.index,this.slots.splice(t.index,0,t);for(let r=t.index+1;r<this.slots.length;r++)this.slots[r].data++;return t}createSwatch(s,e){e||(e={animations:!0});let t=document.createElement("div");if(t.classList.add("swatch"),t.setAttribute("data-color-index",s.data),t.id=s.id,s.hex){t.style.backgroundColor="#"+s.hex;let{lum:b}=H(s.hex);b<.5?t.classList.add("isLight"):t.classList.remove("isLight")}if(e.animations==!0){let b=function(){t.classList.remove("init"),t.removeEventListener("animationend",b),t.removeEventListener("animationcancel",b)};t.classList.add("init"),t.addEventListener("animationend",b),t.addEventListener("animationcancel",b)}let o=document.createElement("div");o.classList.add("options");let l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.classList.add("icon","x"),l.setAttribute("viewBox","0 0 100 100");let i=document.createElementNS("http://www.w3.org/2000/svg","use");i.setAttribute("href","#icon-x");let r=document.createElementNS("http://www.w3.org/2000/svg","use");r.setAttribute("viewBox","0 0 100 100"),r.setAttribute("href","#icon-lock-body");let a=document.createElementNS("http://www.w3.org/2000/svg","use");a.setAttribute("viewBox","0 0 100 100"),a.setAttribute("href","#icon-lock-arm");let c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttribute("viewBox","0 0 100 100"),c.classList.add("icon","lock"),s.isLocked&&c.classList.add("locked");let d=document.createElement("div");d.classList.add("info");let p=document.createElement("h2");p.classList.add("hex"),p.innerHTML="#"+s.hex;let g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.classList.add("icon"),g.setAttribute("viewBox","0 0 100 100");let v=document.createElementNS("http://www.w3.org/2000/svg","use");v.setAttribute("href","#icon-copy");let f=document.createElement("div");f.classList.add("detector","left");let m=document.createElement("div");return m.classList.add("detector"),l.append(i),c.append(a,r),g.append(v),d.append(p,g),o.append(l,c,d),t.append(o,f,m),t}generate(s){let e={animations:!1};if(s)if(s.length==this.slots.length)for(let t=0;t<s.length;t++)this.slots[t].hex=s[t],this.slots[t].sync();else{for(let t of this.slots)document.getElementById(t.id).remove();this.slots=[];for(let t=0;t<s.length;t++)this.addSlot({index:t,hex:s[t]},e)}else if(this.slots.length>0)this.algorithm.get()(this);else{for(let t=0;t<5;t++)this.addSlot({},e);this.algorithm.get()(this)}return this.slots}}class ge{constructor(s){B(this,"routes");B(this,"loadContent",s=>{if(s){let{base:e,ids:t}=s;typeof e!="string"&&(e=s);let o=this.routes.get(e);t?o(t):o()}else this.routes.get("404")()});B(this,"routeToURL",(s,e)=>{let t=this.deconstructURL(s,e);console.log(t);let{base:o,ids:l}=t;this.routes.has(o)?o==="create"?l?this.idsAreValid(l)?this.loadContent(t):this.loadContent():this.loadContent(t):this.loadContent(t):this.loadContent()});B(this,"navigateTo",(s,e,t)=>{e=e||!1,e?history.replaceState("","",s):history.pushState("","","/polychrome"+s),this.routeToURL(s,t)});this.routes=new Map(s)}deconstructURL(s,e){let t=s.replace(/^\//,"").replace(/\/$/,"").split("/");return e?{site:t[0],base:t[1]||"",ids:t[2]?t[2].split("-"):null}:{base:t[0],ids:t[1]?t[1].split("-"):null}}idsAreValid(s){for(let e of s)if(!/^[a-f0-9]{6}$/.test(e)||s.length>8)return!1;return!0}}function ve(){document.querySelector("#palette").onclick=async e=>{let t=e.target,o=e.pointerType,l=t.closest(".plus-container svg");if(l){const{ids:r}=A.deconstructURL(location.pathname),a=parseInt(l.getAttribute("data-color-index"));let c=h.addSlot({index:a+1});r.splice(a+1,0,c.hex),history.replaceState("","",r.join("-")),h.plus.hide(),I.create.push({undo(){h.removeSlot(c,{animations:!1}),r.splice(a+1,1),history.replaceState("","",r.join("-"))},redo(){h.addSlot(c,{animations:!1}),r.splice(a+1,0,c.hex),history.replaceState("","",r.join("-"))}}),h.slots.length==8&&h.plus.hide();return}let i=t.closest(".lock");if(i){o=="touch"&&i.blur();let r=t.closest(".swatch"),a=parseInt(r.getAttribute("data-color-index")),c=h.slots[a];c.isLocked=!c.isLocked,i.classList.toggle("locked"),I.create.push({undo(){let d=h.slots[a],p=document.getElementById(d.id);d.isLocked=!d.isLocked,p.querySelector(".lock").classList.toggle("locked")},redo(){let d=h.slots[a],p=document.getElementById(d.id);d.isLocked=!d.isLocked,p.querySelector(".lock").classList.toggle("locked")}});return}if(t.closest(".x")){let r=t.closest(".swatch"),a=h.slots[parseInt(r.getAttribute("data-color-index"))],{ids:c}=A.deconstructURL(location.pathname);h.removeSlot(a),c.splice(a.data,1),history.replaceState("","",c.join("-")),I.create.push({undo(){h.addSlot(a,{animations:!1}),c.splice(a.data,0,a.hex),history.replaceState("","",c.join("-"))},redo(){h.removeSlot(a,{animations:!1}),c.splice(a.data,1),history.replaceState("","",c.join("-"))}});return}if(t.closest(".info")){let r=t.closest(".swatch"),a=h.slots[parseInt(r.getAttribute("data-color-index"))];if(t.closest(".hex")){let c=P([{id:""}],{type:"color-picker",hex:a.hex});r.append(c);return}if(t.closest(".icon")){await navigator.clipboard.writeText(a.hex).then(()=>{let c=S("Copied hex to clipboard!",{pos:[e.x,e.y]});c.classList.add("at-mouse-pos"),document.body.append(c)},()=>{let c=S("Copy to clipboard failed.",{pos:[e.x,e.y]});c.classList.add("at-mouse-pos"),document.body.append(c)});return}}},document.querySelector(".palettes-page .saved-palettes-wrapper").onclick=async e=>{let t=e.target,o=t.closest(".swatch");if(o){let i=o.parentElement.parentElement;await navigator.clipboard.writeText(k.items[parseInt(i.getAttribute("data-palette-index"))][parseInt(o.getAttribute("data-color-index"))]).then(()=>{let r=S("Copied hex to clipboard!",{pos:[e.x,e.y]});r.classList.add("at-mouse-pos"),document.body.append(r)},()=>{let r=S("Copy to clipboard failed.",{pos:[e.x,e.y]});r.classList.add("at-mouse-pos"),document.body.append(r)});return}if(t.closest(".clear-overlay")){t.closest(".popover").remove();return}if(t.closest("#palettes-open")){A.navigateTo("/create/"+E.savedPalettes.items[parseInt(t.closest(".palette-container").getAttribute("data-palette-index"))].join("-"));return}if(t.closest("#palettes-copy")){await navigator.clipboard.writeText(k.items[parseInt(t.closest(".palette-container").getAttribute("data-palette-index"))].join(`
`)).then(()=>{let i=S("Copied hex to clipboard!",{pos:[e.x,e.y]});i.classList.add("at-mouse-pos"),document.body.append(i)},()=>{let i=S("Copy to clipboard failed.",{pos:[e.x,e.y]});i.classList.add("at-mouse-pos"),document.body.append(i)});return}if(t.closest("#palettes-remove")){let i=parseInt(t.closest(".palette-container").getAttribute("data-palette-index")),r=k.items[i],a={undo(){k.addItem(r,i)},redo(){k.removeItem(i)}};I.palettes.push(a),k.removeItem(i);let c=S("Removed palette.");document.body.append(c);return}let l=t.closest(".more");if(l){let i=P([{content:"Open",id:"palettes-open"},{content:"Remove",id:"palettes-remove"},{content:"Copy",id:"palettes-copy"}],{type:"menu"});l.parentElement.append(i);return}},document.querySelector(".toolbar").onclick=async e=>{let t=e.target;if(t.closest(".undo")){A.deconstructURL(location.pathname,!0).base=="create"?I.create.undo():I.palettes.undo();return}if(t.closest(".redo")){A.deconstructURL(location.pathname,!0).base=="create"?I.create.redo():I.palettes.redo();return}if(t.closest(".copy")){if(A.deconstructURL(location.pathname,!0).base=="create"){let o=[];for(let{hex:l}of h.slots)o.push(l);await navigator.clipboard.writeText(o.join(`
`)).then(()=>{let l=S("Copied palette!");document.body.append(l)},()=>{let l=S("Failed to copy.");document.body.append(l)})}else{let o=[];for(let l of k.items)o.push(l.join("-"));await navigator.clipboard.writeText(o.join(`,
`)).then(()=>{let l=S("Copied palettes to clipboard!");document.body.append(l)},()=>{let l=S("Copy to clipboard failed.");document.body.append(l)})}return}if(t.closest(".generate")){let o=[];for(let{hex:i}of h.slots)o.push(i);h.generate();let l=[];for(let{hex:i}of h.slots)l.push(i);history.replaceState("","","/create/"+l.join("-")),o&&I.create.push({undo:()=>{h.generate(o),history.replaceState("","","/create/"+o.join("-"))},redo:()=>{h.generate(l),history.replaceState("","","/create/"+l.join("-"))}});return}if(t.closest(".save")){if(!E.settings.cookiesOk){document.body.append(S("You'll need to enable cookies in settings for that feature."));return}let o=[];for(let{hex:i}of h.slots)o.push(i);k.addItem(o);let l=S("Saved palette!");document.body.append(l);return}if(t.closest(".remove-all")){J({message:"Are you sure you want to delete all of your palettes? You won't be able to undo this.",value:"remove-all"},[{message:"Yes, delete away.",value:"yes",call(){for(let l=0;k.items.length;l++)k.removeItem(0);let o=S("All palettes removed.");document.body.append(o)}},{message:"No, please don't delete my stuff!",value:"no"}]);return}if(t.closest(".import")){if(A.deconstructURL(location.pathname,!0).base=="create"){let o=D("Paste hex code palette below!","import-create");document.body.append(o)}else{if(!E.settings.cookiesOk){document.body.append(S("You'll need to enable cookies in settings for that feature."));return}let o=D("Paste hex code palette below! Separate palettes by commas.","import-palettes");document.body.append(o)}return}};let n=document.querySelector(".main-nav"),s=document.querySelector(".main-header");onclick=async e=>{var i,r;let t=e.target,o=t.closest("a");if(o){e.preventDefault();let a=o.getAttribute("href");n.classList.remove("visible"),(i=document.querySelector(".overlay"))==null||i.remove(),document.body.style.overflowY="",a!=location.pathname&&A.navigateTo(a);return}if(t.closest("#nav-button"))if(n.classList.toggle("visible"),n.classList.contains("visible")){let a=document.createElement("div");a.classList.add("overlay"),s.append(a),document.body.style.overflowY="hidden",h.plus.hide(),a.addEventListener("click",()=>{a.remove(),n.classList.remove("visible"),document.body.style.overflowY=""},{once:!0}),document.body.style.overflowY="hidden"}else(r=s.querySelector(".overlay"))==null||r.remove(),document.body.style.overflowY="";if(t.closest("#settings")){let a=F();document.body.append(a);return}let l=t.closest(".confirmation-screen");if(l){if(t.closest(".overlay")&&(l==document.querySelector(".cookies")&&(E.settings={cookiesOk:!0},E.info={firstVisit:!0}),l.remove()),l==document.querySelector(".remove-all-confirmation")){if(t.closest(".yes")){for(let c=0;k.items.length;c++)k.removeItem(0);l.remove();let a=S("All palettes removed.");document.body.append(a)}else t.closest(".no")&&l.remove();return}if(l==document.querySelector(".import-create")){let a=A.deconstructURL(location.pathname,!0).ids,c=t.closest(".yes"),d=t.closest(".no");if(c){let p=l.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-",""),g=!(/[g-z~`!#$%\^&*+=\[\]\\';,/{}|\\":<>\?]/g.test(p)||p.length==0||p.length%6!=0),v="Invalid values entered. Try again.";if(g){v="Successfully imported values.";let m=p.match(/.{1,6}/g);h.generate(m),I.create.push({undo(){h.generate(a)},redo(){h.generate(m)}})}let f=S(v);document.body.append(f),l.remove()}else d&&l.remove();return}if(l==document.querySelector(".import-palettes")){let a=t.closest(".yes"),c=t.closest(".no");if(a){let d=l.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-","").replaceAll("#","").toLowerCase(),p="Invalid values entered. Try again.",g=!(/[g-z~`!#$%\^&*+=\[\]\\';/{}|\\":<>\?]/g.test(d)||d.replaceAll(",","").length%6!=0||d.length==0);console.log(d.replaceAll(",","").length%6!=0);let v=d.split(",");for(let m of v)(m.length/6>8||!(m.length>=6))&&(g=!1);if(g){let m=0;for(let b of v)m++,k.addItem(b.match(/.{1,6}/g));p="Successfully imported values.",I.palettes.push({undo(){for(let b=m;b>0;b--)k.removeItem(k.items.length-1)},redo(){for(let b of v)k.addItem(b.match(/.{1,6}/g))}})}let f=S(p);document.body.append(f),l.remove()}else c&&l.remove();return}if(l==document.querySelector(".settings-popover")){let a=t.closest(".yes"),c=t.closest(".no");if(a){let d=E.settings;d.lastColorAlgorithmIndex=l.querySelector("#algorithm").selectedIndex,d.cookiesOk=l.querySelector("#cookies-ok").checked,E.settings=d;let p="Changes saved.";l.remove();let g=S(p);document.body.append(g)}else if(c){let d="Changes discarded.";l.remove();let p=S(d);document.body.append(p)}return}if(l==document.querySelector(".cookies-confirmation")){let a=t.closest(".yes"),c=t.closest(".no");if(a){E.settings={cookiesOk:!0},l.remove();let d=S("Thanks, enjoy the site! :)");document.body.append(d)}else if(c){E.settings={cookiesOk:!1},l.remove();let d=S("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(d)}return}}}}function be(){window.addEventListener("scroll",n,!1),window.addEventListener("touchmove",n,{passive:!1});function n(s){A.deconstructURL(location.pathname).base=="create"&&(s.preventDefault(),s.stopPropagation())}window.ontouchstart=s=>{let e=s.targetTouches[0].target.closest(".create-page .swatch");if(e&&!s.targetTouches[0].target.closest(".options div")&&!s.targetTouches[0].target.closest(".options svg")){let t=function(v){if(v.preventDefault(),o){let f=v.touches[0].clientY-a;e.style.translate="0 "+f+"px";let m=e,b=h.slots.length-c-1;if(g=0,p=0,f>0)for(let u=0;u<b;u++)g=(u*2+1)*i,m=m.nextElementSibling,f>g?(p++,m.style.translate!="0 -100%"&&(m.style.translate="0 -100%")):m.style.translate=="0 -100%"&&(m.style.translate="0 0");else for(let u=0;u<c;u++)g=(u*2+1)*i,m=m.previousElementSibling,-f>g?(p--,m.style.translate!="0 100%"&&(m.style.translate="0 100%")):m.style.translate=="0 100%"&&(m.style.translate="0 0")}else{let f=v.touches[0].clientX-r;e.style.translate=f+"px";let m=e,b=h.slots.length-c-1;if(g=0,p=0,f>0)for(let u=0;u<b;u++)g=(u*2+1)*l,m=m.nextElementSibling,f>g?(p++,m.style.translate!="-100%"&&(m.style.translate="-100%")):m.style.translate=="-100%"&&(m.style.translate="");else for(let u=0;u<c;u++)g=(u*2+1)*l,m=m.previousElementSibling,-f>g?(p--,m.style.translate!="100%"&&(m.style.translate="100%")):m.style.translate=="100%"&&(m.style.translate="")}},o=!1;document.body.classList.contains("vertical")&&(o=!0),h.plus.disabled=!0,h.plus.hide(),e.classList.add("is-dragging");let l=e.clientWidth/2,i=e.clientHeight/2,r=s.touches[0].clientX,a=s.touches[0].clientY,c=parseInt(e.getAttribute("data-color-index")),d=h.slots[c],p=0,g;window.addEventListener("touchmove",t,{passive:!1}),window.addEventListener("touchend",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("touchmove",t),e.style.translate=`${o?"0 ":""}${p*100}%`;function v(){e.removeEventListener("transitionend",v),e.removeEventListener("transitioncancel",v),e.classList.remove("is-released");let f=e;for(let u=0;u<p;u++)h.slots.splice(d.data,1),h.slots.splice(d.data+1,0,d),d.data++,f=f.nextElementSibling,h.slots[d.data-1].data--;for(let u=0;u>p;u--)h.slots.splice(d.data,1),h.slots.splice(d.data-1,0,d),d.data--,f=f.previousElementSibling,h.slots[d.data+1].data++;let m=e.cloneNode(!0);p>0?(f.after(m),e.remove()):p<0&&(f.before(m),e.remove()),e.style.translate="";let b=[];for(let u of h.slots){let x=document.getElementById(u.id);x.style.transition="transform 0s",x.style.translate="",setTimeout(()=>{x.style.transition=""},1),b.push(u.hex)}e=m,history.replaceState("","",b.join("-")),h.plus.disabled=!1,p&&I.create.push({undo(){h.plus.hide();let u=e=document.getElementById(d.id);for(let L=0;L<-p;L++){h.slots.splice(d.data,1),h.slots.splice(d.data+1,0,d),d.data++,u=u.nextElementSibling;let w=parseInt(u.getAttribute("data-color-index"));u.setAttribute("data-color-index",(w-1).toString())}for(let L=0;L>-p;L--){h.slots.splice(d.data,1),h.slots.splice(d.data-1,0,d),d.data--,u=u.previousElementSibling;let w=parseInt(u.getAttribute("data-color-index"));u.setAttribute("data-color-index",(w+1).toString())}m=e.cloneNode(!0),-p>0?(u.after(m),e.remove()):-p<0&&(u.before(m),e.remove());let x=[];for(let L of h.slots)x.push(L.hex);history.replaceState("","",x.join("-"))},redo(){h.plus.hide();let u=e=document.getElementById(d.id);for(let L=0;L<p;L++)h.slots.splice(d.data,1),h.slots.splice(d.data+1,0,d),d.data++,u=u.nextElementSibling,c=parseInt(u.getAttribute("data-color-index")),u.setAttribute("data-color-index",(c-1).toString());for(let L=0;L>p;L--)h.slots.splice(d.data,1),h.slots.splice(d.data-1,0,d),d.data--,u=u.previousElementSibling,c=parseInt(u.getAttribute("data-color-index")),u.setAttribute("data-color-index",(c+1).toString());m=e.cloneNode(!0),p>0?(u.after(m),e.remove()):p<0&&(u.before(m),e.remove());let x=[];for(let L of h.slots)x.push(L.hex);history.replaceState("","",x.join("-"))}})}e.addEventListener("transitionend",v),e.addEventListener("transitioncancel",v)},{once:!0})}},onmousedown=s=>{let e=s.target.closest(".create-page .swatch");if(e&&!s.target.closest(".options div")&&!s.target.closest(".options svg")){let t=function(v){if(o){let f=v.y-a;e.style.translate="0 "+f+"px";let m=e,b=h.slots.length-c-1;if(g=0,p=0,f>0)for(let u=0;u<b;u++)g=(u*2+1)*i,m=m.nextElementSibling,f>g?(p++,m.style.translate!="0px -100%"&&(m.style.translate="0px -100%")):m.style.translate=="0px -100%"&&(m.style.translate="");else for(let u=0;u<c;u++)g=(u*2+1)*i,m=m.previousElementSibling,-f>g?(p--,m.style.translate!="0px 100%"&&(m.style.translate="0px 100%")):m.style.translate=="0px 100%"&&(m.style.translate="")}else{let f=v.x-r;e.style.translate=f+"px";let m=e,b=h.slots.length-c-1;if(g=0,p=0,f>0)for(let u=0;u<b;u++)g=(u*2+1)*l,m=m.nextElementSibling,f>g?(p++,m.style.translate!="-100%"&&(m.style.translate="-100%")):m.style.translate=="-100%"&&(m.style.translate="");else for(let u=0;u<c;u++)g=(u*2+1)*l,m=m.previousElementSibling,-f>g?(p--,m.style.translate!="100%"&&(m.style.translate="100%")):m.style.translate=="100%"&&(m.style.translate="")}},o=!1;document.body.classList.contains("vertical")&&(o=!0),h.plus.disabled=!0,h.plus.hide(),e.classList.add("is-dragging");let l=e.clientWidth/2,i=e.clientHeight/2,r=s.x,a=s.y,c=parseInt(e.getAttribute("data-color-index")),d=h.slots[c],p=0,g;addEventListener("mousemove",t),addEventListener("mouseup",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("mousemove",t),e.style.translate=`${o?"0 ":""}${p*100}%`;function v(){e.removeEventListener("transitionend",v),e.removeEventListener("transitioncancel",v),e.classList.remove("is-released");let f=e;for(let u=0;u<p;u++)h.slots.splice(d.data,1),h.slots.splice(d.data+1,0,d),d.data++,f=f.nextElementSibling,h.slots[d.data-1].data--;for(let u=0;u>p;u--)h.slots.splice(d.data,1),h.slots.splice(d.data-1,0,d),d.data--,f=f.previousElementSibling,h.slots[d.data+1].data++;let m=e.cloneNode(!0);p>0?(f.after(m),e.remove()):p<0&&(f.before(m),e.remove()),e.style.translate="";let b=[];for(let u of h.slots){let x=document.getElementById(u.id);x.style.transition="transform 0s",x.style.translate="",setTimeout(()=>{x.style.transition=""},1),b.push(u.hex)}e=m,history.replaceState("","",b.join("-")),h.plus.disabled=!1,p&&I.create.push({undo(){h.plus.hide();let u=e=document.getElementById(d.id);for(let L=0;L<-p;L++){h.slots.splice(d.data,1),h.slots.splice(d.data+1,0,d),d.data++,u=u.nextElementSibling;let w=parseInt(u.getAttribute("data-color-index"));u.setAttribute("data-color-index",(w-1).toString())}for(let L=0;L>-p;L--){h.slots.splice(d.data,1),h.slots.splice(d.data-1,0,d),d.data--,u=u.previousElementSibling;let w=parseInt(u.getAttribute("data-color-index"));u.setAttribute("data-color-index",(w+1).toString())}m=e.cloneNode(!0),-p>0?(u.after(m),e.remove()):-p<0&&(u.before(m),e.remove());let x=[];for(let L of h.slots)x.push(L.hex);history.replaceState("","",x.join("-"))},redo(){h.plus.hide();let u=e=document.getElementById(d.id);for(let L=0;L<p;L++)h.slots.splice(d.data,1),h.slots.splice(d.data+1,0,d),d.data++,u=u.nextElementSibling,c=parseInt(u.getAttribute("data-color-index")),u.setAttribute("data-color-index",(c-1).toString());for(let L=0;L>p;L--)h.slots.splice(d.data,1),h.slots.splice(d.data-1,0,d),d.data--,u=u.previousElementSibling,c=parseInt(u.getAttribute("data-color-index")),u.setAttribute("data-color-index",(c+1).toString());m=e.cloneNode(!0),p>0?(u.after(m),e.remove()):p<0&&(u.before(m),e.remove());let x=[];for(let L of h.slots)x.push(L.hex);history.replaceState("","",x.join("-"))}})}e.addEventListener("transitionend",v),e.addEventListener("transitioncancel",v)},{once:!0}),ondragstart=()=>!1}}}let xe=document.querySelector(".main-nav");function Le(){onkeydown=n=>{var s,e,t,o;if(n.metaKey||n.ctrlKey){let{base:l}=A.deconstructURL(location.pathname,!0);if(n.key==="z"||n.key==="Z")if(l==="palettes"){n.shiftKey?I.palettes.redo():I.palettes.undo();return}else{n.shiftKey?I.create.redo():I.create.undo();return}if(l==="create"){let i=parseInt(n.key);if(i>=0&&i<=9){n.preventDefault();let r=h.slots[i-1]||h.slots[h.slots.length-1],a=document.getElementById(r.id);I.create.push({undo(){let c=h.slots[i-1]||h.slots[h.slots.length-1],d=document.getElementById(c.id);c.isLocked=!c.isLocked,d.querySelector(".lock").classList.toggle("locked")},redo(){let c=h.slots[i-1]||h.slots[h.slots.length-1],d=document.getElementById(c.id);c.isLocked=!c.isLocked,d.querySelector(".lock").classList.toggle("locked")}}),r.isLocked=!r.isLocked,a.querySelector(".lock").classList.toggle("locked");return}}}if(n.key===" "){let{base:l}=A.deconstructURL(location.pathname,!0);if(l==="create"){n.preventDefault();let i=[];for(let{hex:a}of h.slots)i.push(a);h.generate();let r=[];for(let{hex:a}of h.slots)r.push(a);history.replaceState("","","/polychrome/create/"+r.join("-")),I.create.push({undo:()=>{h.generate(i),history.replaceState("","","/polychrome/create/"+i.join("-")),h.plus.hide()},redo:()=>{h.generate(r),history.replaceState("","","/polychrome/create/"+r.join("-"))}})}return}if(n.key==="Escape"){(s=document.querySelector(".confirmation-screen"))==null||s.remove(),xe.classList.remove("visible"),(e=document.querySelector(".overlay"))==null||e.remove();return}if(n.key==="y"||n.key==="Y"){((t=document.querySelector(".confirmation-screen"))==null?void 0:t.querySelector(".yes")).click();return}if(n.key==="n"||n.key==="N"){((o=document.querySelector(".confirmation-screen"))==null?void 0:o.querySelector(".no")).click();return}//! NOT DONE
if(n.key==="Enter"){let l=document.activeElement;console.log(l);return}n.key}}function Se(){document.querySelector("#palette").ontouchend=async e=>{let t=e.targetTouches[0].target,o=t.closest(".plus-container svg");if(o){const{ids:i}=A.deconstructURL(location.pathname),r=parseInt(o.getAttribute("data-color-index"));let a=h.addSlot({index:r+1});i.splice(r+1,0,a.hex),history.replaceState("","",i.join("-")),h.plus.hide(),I.create.push({undo(){h.removeSlot(a,{animations:!1}),i.splice(r+1,1),history.replaceState("","",i.join("-"))},redo(){h.addSlot(a,{animations:!1}),i.splice(r+1,0,a.hex),history.replaceState("","",i.join("-"))}}),h.slots.length==8&&h.plus.hide();return}let l=t.closest(".lock");if(l){let i=t.closest(".swatch"),r=parseInt(i.getAttribute("data-color-index")),a=h.slots[r];a.isLocked=!a.isLocked,l.classList.toggle("locked"),I.create.push({undo(){let c=h.slots[r],d=document.getElementById(c.id);c.isLocked=!c.isLocked,d.querySelector(".lock").classList.toggle("locked")},redo(){let c=h.slots[r],d=document.getElementById(c.id);c.isLocked=!c.isLocked,d.querySelector(".lock").classList.toggle("locked")}});return}if(t.closest(".x")){let i=t.closest(".swatch"),r=h.slots[parseInt(i.getAttribute("data-color-index"))],{ids:a}=A.deconstructURL(location.pathname);h.removeSlot(r),a.splice(r.data,1),history.replaceState("","",a.join("-")),I.create.push({undo(){h.addSlot(r,{animations:!1}),a.splice(r.data,0,r.hex),history.replaceState("","",a.join("-"))},redo(){h.removeSlot(r,{animations:!1}),a.splice(r.data,1),history.replaceState("","",a.join("-"))}});return}if(t.closest(".info")){let i=t.closest(".swatch"),r=h.slots[parseInt(i.getAttribute("data-color-index"))];if(t.closest(".hex")){let a=P([{id:""}],{type:"color-picker",hex:r.hex});i.append(a);return}if(t.closest(".icon")){await navigator.clipboard.writeText(r.hex).then(()=>{let a=S("Copied hex to clipboard!",{pos:[e.touches[0].clientX,e.touches[0].clientY]});a.classList.add("at-mouse-pos"),document.body.append(a)},()=>{let a=S("Copy to clipboard failed.",{pos:[e.touches[0].clientX,e.touches[0].clientY]});a.classList.add("at-mouse-pos"),document.body.append(a)});return}}},document.querySelector(".palettes-page .saved-palettes-wrapper").ontouchend=async e=>{let t=e.targetTouches[0].target,o=t.closest(".swatch");if(o){let i=o.parentElement.parentElement;await navigator.clipboard.writeText(k.items[parseInt(i.getAttribute("data-palette-index"))][parseInt(o.getAttribute("data-color-index"))]).then(()=>{let r=S("Copied hex to clipboard!",{pos:[e.touches[0].clientX,e.touches[0].clientY]});r.classList.add("at-mouse-pos"),document.body.append(r)},()=>{let r=S("Copy to clipboard failed.",{pos:[e.touches[0].clientX,e.touches[0].clientY]});r.classList.add("at-mouse-pos"),document.body.append(r)});return}if(t.closest(".clear-overlay")){t.closest(".popover").remove();return}if(t.closest("#palettes-open")){A.navigateTo("/create/"+E.savedPalettes.items[parseInt(t.closest(".palette-container").getAttribute("data-palette-index"))].join("-"));return}if(t.closest("#palettes-copy")){await navigator.clipboard.writeText(k.items[parseInt(t.closest(".palette-container").getAttribute("data-palette-index"))].join(`
`)).then(()=>{let i=S("Copied hex to clipboard!",{pos:[e.touches[0].clientX,e.touches[0].clientY]});i.classList.add("at-mouse-pos"),document.body.append(i)},()=>{let i=S("Copy to clipboard failed.",{pos:[e.touches[0].clientX,e.touches[0].clientY]});i.classList.add("at-mouse-pos"),document.body.append(i)});return}if(t.closest("#palettes-remove")){let i=parseInt(t.closest(".palette-container").getAttribute("data-palette-index")),r=k.items[i],a={undo(){k.addItem(r,i)},redo(){k.removeItem(i)}};I.palettes.push(a),k.removeItem(i);let c=S("Removed palette.");document.body.append(c);return}let l=t.closest(".more");if(l){let i=P([{content:"Open",id:"palettes-open"},{content:"Remove",id:"palettes-remove"},{content:"Copy",id:"palettes-copy"}],{type:"menu"});l.parentElement.append(i);return}},document.querySelector(".toolbar").ontouchend=async e=>{let t=e.targetTouches[0].target;if(t.closest(".undo")){A.deconstructURL(location.pathname,!0).base=="create"?I.create.undo():I.palettes.undo();return}if(t.closest(".redo")){A.deconstructURL(location.pathname,!0).base=="create"?I.create.redo():I.palettes.redo();return}if(t.closest(".copy")){if(A.deconstructURL(location.pathname,!0).base=="create"){let o=[];for(let{hex:l}of h.slots)o.push(l);await navigator.clipboard.writeText(o.join(`
`)).then(()=>{let l=S("Copied palette!");document.body.append(l)},()=>{let l=S("Failed to copy.");document.body.append(l)})}else{let o=[];for(let l of k.items)o.push(l.join("-"));await navigator.clipboard.writeText(o.join(`,
`)).then(()=>{let l=S("Copied palettes to clipboard!");document.body.append(l)},()=>{let l=S("Copy to clipboard failed.");document.body.append(l)})}return}if(t.closest(".generate")){let o=[];for(let{hex:i}of h.slots)o.push(i);h.generate();let l=[];for(let{hex:i}of h.slots)l.push(i);history.replaceState("","","/create/"+l.join("-")),o&&I.create.push({undo:()=>{h.generate(o),history.replaceState("","","/create/"+o.join("-"))},redo:()=>{h.generate(l),history.replaceState("","","/create/"+l.join("-"))}});return}if(t.closest(".save")){if(!E.settings.cookiesOk){document.body.append(S("You'll need to enable cookies in settings for that feature."));return}let o=[];for(let{hex:i}of h.slots)o.push(i);k.addItem(o);let l=S("Saved palette!");document.body.append(l);return}if(t.closest(".remove-all")){J({message:"Are you sure you want to delete all of your palettes? You won't be able to undo this.",value:"remove-all"},[{message:"Yes, delete away.",value:"yes",call(){for(let l=0;k.items.length;l++)k.removeItem(0);let o=S("All palettes removed.");document.body.append(o)}},{message:"No, please don't delete my stuff!",value:"no"}]);return}if(t.closest(".import")){if(A.deconstructURL(location.pathname,!0).base=="create"){let o=D("Paste hex code palette below!","import-create");document.body.append(o)}else{if(!E.settings.cookiesOk){document.body.append(S("You'll need to enable cookies in settings for that feature."));return}let o=D("Paste hex code palette below! Separate palettes by commas.","import-palettes");document.body.append(o)}return}};let n=document.querySelector(".main-nav"),s=document.querySelector(".main-header");ontouchend=async e=>{var i,r;let t=e.targetTouches[0].target,o=t.closest("a");if(o){e.preventDefault();let a=o.getAttribute("href");n.classList.remove("visible"),(i=document.querySelector(".overlay"))==null||i.remove(),document.body.style.overflowY="",a!=location.pathname&&A.navigateTo(a);return}if(t.closest("#nav-button"))if(n.classList.toggle("visible"),n.classList.contains("visible")){let a=document.createElement("div");a.classList.add("overlay"),s.append(a),document.body.style.overflowY="hidden",h.plus.hide(),a.addEventListener("click",()=>{a.remove(),n.classList.remove("visible"),document.body.style.overflowY=""},{once:!0}),document.body.style.overflowY="hidden"}else(r=s.querySelector(".overlay"))==null||r.remove(),document.body.style.overflowY="";if(t.closest("#settings")){let a=F();document.body.append(a);return}let l=t.closest(".confirmation-screen");if(l){if(t.closest(".overlay")&&(l==document.querySelector(".cookies")&&(E.settings={cookiesOk:!0},E.info={firstVisit:!0}),l.remove()),l==document.querySelector(".remove-all-confirmation")){if(t.closest(".yes")){for(let c=0;k.items.length;c++)k.removeItem(0);l.remove();let a=S("All palettes removed.");document.body.append(a)}else t.closest(".no")&&l.remove();return}if(l==document.querySelector(".import-create")){let a=A.deconstructURL(location.pathname,!0).ids,c=t.closest(".yes"),d=t.closest(".no");if(c){let p=l.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-",""),g=!(/[g-z~`!#$%\^&*+=\[\]\\';,/{}|\\":<>\?]/g.test(p)||p.length==0||p.length%6!=0),v="Invalid values entered. Try again.";if(g){v="Successfully imported values.";let m=p.match(/.{1,6}/g);h.generate(m),I.create.push({undo(){h.generate(a)},redo(){h.generate(m)}})}let f=S(v);document.body.append(f),l.remove()}else d&&l.remove();return}if(l==document.querySelector(".import-palettes")){let a=t.closest(".yes"),c=t.closest(".no");if(a){let d=l.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-","").replaceAll("#","").toLowerCase(),p="Invalid values entered. Try again.",g=!(/[g-z~`!#$%\^&*+=\[\]\\';/{}|\\":<>\?]/g.test(d)||d.replaceAll(",","").length%6!=0||d.length==0);console.log(d.replaceAll(",","").length%6!=0);let v=d.split(",");for(let m of v)(m.length/6>8||!(m.length>=6))&&(g=!1);if(g){let m=0;for(let b of v)m++,k.addItem(b.match(/.{1,6}/g));p="Successfully imported values.",I.palettes.push({undo(){for(let b=m;b>0;b--)k.removeItem(k.items.length-1)},redo(){for(let b of v)k.addItem(b.match(/.{1,6}/g))}})}let f=S(p);document.body.append(f),l.remove()}else c&&l.remove();return}if(l==document.querySelector(".settings-popover")){let a=t.closest(".yes"),c=t.closest(".no");if(a){let d=E.settings;d.lastColorAlgorithmIndex=l.querySelector("#algorithm").selectedIndex,d.cookiesOk=l.querySelector("#cookies-ok").checked,E.settings=d;let p="Changes saved.";l.remove();let g=S(p);document.body.append(g)}else if(c){let d="Changes discarded.";l.remove();let p=S(d);document.body.append(p)}return}if(l==document.querySelector(".cookies-confirmation")){let a=t.closest(".yes"),c=t.closest(".no");if(a){E.settings={cookiesOk:!0},l.remove();let d=S("Thanks, enjoy the site! :)");document.body.append(d)}else if(c){E.settings={cookiesOk:!1},l.remove();let d=S("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(d)}return}}}}let h=new ye,k=new me,A=new ge([["",U("Home",document.getElementById("landing-page"))],["palettes",U("Palettes",document.getElementById("palettes-page"),k)],["create",U("Create",document.getElementById("create-page"),h)],["404",U("404 Not Found",document.getElementById("not-found-page"))]]);A.routeToURL(location.pathname,!0);setTimeout(()=>{document.querySelector(":root").style.display="initial",window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")},200);onpopstate=()=>A.navigateTo(location.pathname,!0,!0);ve();Se();be();Le();onmouseover=n=>{if(!h.plus.disabled){const s=n.target,e=s.closest(".swatch");if(e)if(s.closest(".detector")&&h.slots.length<8){const o=s.closest(".left");let l=parseInt(e.getAttribute("data-color-index"));o&&l--,h.plus.show(l)}else h.plus.hide()}};E.info.firstVisit&&J({message:"This site relies on local storage and cookies to save palettes.",value:"cookies"},[{message:"Sure, sounds good to me.",value:"yes",call(){E.info={firstVisit:!1},E.settings={cookiesOk:!0};let n=S("Thanks, enjoy the site! :)");document.body.append(n)}},{message:"No thanks, I don't want to save palettes.",value:"no",call(){E.info={firstVisit:!1},E.settings={cookiesOk:!1};for(let s=0;s<k.items.length;s++)k.removeItem(0);let n=S("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(n)}}]);onresize=()=>{window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")};(navigator.userAgent.includes("Android")||navigator.userAgent.includes("like Mac"))&&document.body.classList.add("mobile");
