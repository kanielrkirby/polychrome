var se=Object.defineProperty;var le=(o,t,e)=>t in o?se(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var R=(o,t,e)=>(le(o,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const m of i.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function e(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=e(l);fetch(l.href,i)}})();let Y;const oe=new Uint8Array(16);function ie(){if(!Y&&(Y=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Y))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Y(oe)}const M=[];for(let o=0;o<256;++o)M.push((o+256).toString(16).slice(1));function ne(o,t=0){return(M[o[t+0]]+M[o[t+1]]+M[o[t+2]]+M[o[t+3]]+"-"+M[o[t+4]]+M[o[t+5]]+"-"+M[o[t+6]]+M[o[t+7]]+"-"+M[o[t+8]]+M[o[t+9]]+"-"+M[o[t+10]]+M[o[t+11]]+M[o[t+12]]+M[o[t+13]]+M[o[t+14]]+M[o[t+15]]).toLowerCase()}const ae=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),J={randomUUID:ae};function re(o,t,e){if(J.randomUUID&&!t&&!o)return J.randomUUID();o=o||{};const s=o.random||(o.rng||ie)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let l=0;l<16;++l)t[e+l]=s[l];return t}return ne(s)}const de=document.title;function A(o){let t=parseInt(o[0]+o[1],16)/255,e=parseInt(o[2]+o[3],16)/255,s=parseInt(o[4]+o[5],16)/255,l=Math.max(t,e,s),i=Math.min(t,e,s),m,h,u=t*.299+e*.587+s*.114,n=(l+i)/2;if(l==i)m=h=0;else{let p=l-i;switch(h=n>.5?p/(2-l-i):p/(l+i),l){case t:m=(e-s)/p+(e<s?6:0);break;case e:m=(s-t)/p+2;break;default:m=(t-e)/p+4;break}m=m*60}return{r:t,g:e,b:s,h:m,s:h,l:n,lum:u}}function H(o,t,e){o>360?o-=360:o<0&&(o+=360),t>1?t=1:t<0&&(t=0),e>1?e=1:e<0&&(e=0),t*=100;const s=t*Math.min(e,1-e)/100,l=i=>{const m=(i+o/30)%12,h=e-s*Math.max(Math.min(m-3,9-m,1),-1);return Math.round(255*h).toString(16).padStart(2,"0")};return`${l(0)}${l(8)}${l(4)}`}const k={get info(){let o=localStorage.getItem("info");return o?JSON.parse(o):(localStorage.setItem("info",JSON.stringify({firstVisit:!0})),this.info)},set info(o){let t=this.info;if(o)for(let[e,s]of Object.entries(o))t[e]=s;localStorage.setItem("info",JSON.stringify(t))},get settings(){let o=localStorage.getItem("settings");return o?JSON.parse(o):(localStorage.setItem("settings",JSON.stringify({lastColorAlgorithmIndex:2,cookiesOk:!1})),this.settings)},set settings(o){let t=this.settings;if(o)for(let[e,s]of Object.entries(o))t[e]=s;localStorage.setItem("settings",JSON.stringify(t))},savedPalettes:{get items(){let o=localStorage.getItem("saved-palettes"),t;if(o){let e=[];t=JSON.parse(o);for(let s of t)e.push(s);return e}else return[]},set items(o){localStorage.setItem("saved-palettes",JSON.stringify(o))},addItem(o){let t=this.items;t.push(o),this.items=t},removeItem(o){this.items.splice(o,1)}}},C={create:{cmds:[],cmdIndex:-1,push(o){this.cmds.splice(this.cmdIndex+1,1/0,o),this.cmdIndex=this.cmds.length-1},undo(){this.cmdIndex>-1&&(this.cmds[this.cmdIndex].undo(),this.cmdIndex--)},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}},palettes:{cmds:[],cmdIndex:-1,push(o){this.cmds.splice(this.cmdIndex+1,1/0,o),this.cmdIndex=this.cmds.length-1},undo(){if(this.cmdIndex>-1){let o=this.cmds[this.cmdIndex];this.cmdIndex--,o.undo()}},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}}},D=document.querySelector(".toolbar");function V(o,t,e){return s=>{document.title=de+" | "+o;const l=document.querySelector("main.visible");l&&l.classList.remove("visible");const i=t;if(i==null||i.classList.add("visible"),o=="Palettes")document.body.parentElement.style.overflow="",document.body.style.overflow="",D.classList.add("palettes"),D.classList.remove("create"),e.draw(k.savedPalettes.items);else if(o=="Create")if(document.body.parentElement.style.overflow="hidden",document.body.style.overflow="hidden",D.classList.add("create"),D.classList.remove("palettes"),s)e.generate(s);else{let m=e.generate(),h=[];for(let u of m)h.push(u.hex);history.replaceState("","",h.join("-"))}else D.classList.remove("palettes","create"),document.documentElement.style.overflow="",document.body.style.overflow=""}}const g=(o,t)=>Math.random()*(t-o)+o,ce=()=>btoa(parseInt(re(),16).toString(36)).replaceAll("=","");function w(o,t){const e=document.createElement("div");e.classList.add("tooltip","appearing");const s=document.createElement("h2");return s.innerHTML=o,e.append(s),t!=null&&t.pos?(e.style.left=t.pos[0]+"px",e.style.top=t.pos[1]+"px"):e.classList.add("centered"),setTimeout(()=>{t&&t.pos&&(e.clientWidth+t.pos[0]>document.body.clientWidth?(e.style.translate="-100%",e.clientHeight+t.pos[1]>document.body.clientHeight&&(e.style.translate="-100 -100%")):e.clientHeight+t.pos[1]>document.body.clientHeight&&(e.style.translate="0 -100%"))},0),e.addEventListener("animationend",()=>{e.classList.remove("appearing"),setTimeout(()=>{e.classList.add("disappearing"),e.addEventListener("animationend",()=>{e.remove()},{once:!0})},(t==null?void 0:t.duration)||1e3)},{once:!0}),e}function $(o,t){let e=document.createElement("div");e.classList.add("popover");let s=document.createElement("div");if(s.classList.add("clear-overlay"),(t==null?void 0:t.type)=="menu"||(t==null?void 0:t.type)=="tool-menu"||(t==null?void 0:t.type)=="tool-menu-side"){let l=document.createElement("ul");l.classList.add("list");for(let i of o){let m=document.createElement("div");i.id&&(m.id=i.id),m.classList.add("choice"),i.content&&(m.innerHTML=i.content),i.class&&m.classList.add(i.class),l.append(m)}e.append(l),document.body.append(s)}else if((t==null?void 0:t.type)=="color-picker"){let l=document.createElement("canvas");l.id="color-picker",l.classList.add("color-picker");let i=l.getContext("2d"),{h:m}=A(t.hex),h=`hsl(${m}, 100%, 50%)`,u=i.createLinearGradient(0,0,i.canvas.width,0);u.addColorStop(0,"#fff"),u.addColorStop(1,h),i.fillStyle=u,i.fillRect(0,0,i.canvas.width,i.canvas.height);let n=i.createLinearGradient(0,0,0,i.canvas.height);n.addColorStop(0,"rgba(0,0,0,0)"),n.addColorStop(1,"black"),i.fillStyle=n,i.fillRect(0,0,i.canvas.width,i.canvas.height);let p=document.createElement("div");p.classList.add("color-picker-cursor");let a=document.createElement("input");a.setAttribute("min","0"),a.setAttribute("max","360"),a.setAttribute("type","range");let f=document.createElement("div");f.classList.add("huebar");let y=document.createElement("div");y.classList.add("huebar-cursor");let c=document.createElement("input");c.setAttribute("min","0"),c.setAttribute("max","360"),c.setAttribute("type","range"),l.append(p,a),f.append(y,c),e.append(l,f)}return(t==null?void 0:t.type)=="tool-menu"&&(e.style.translate="0 -100%"),(t==null?void 0:t.type)=="tool-menu-side"&&(e.style.translate="100% -100%"),e}function K(o,t){let e=document.createElement("div");e.classList.add("confirmation-screen",o.value+"-confirmation");let s=document.createElement("div");s.classList.add("box");let l=document.createElement("h2");l.innerHTML=o.message;let i=document.createElement("ul"),m=document.createElement("div");m.classList.add("overlay"),s.append(l,i),e.append(s,m);for(let{message:h,value:u,call:n}of t){let p=document.createElement("li");p.innerHTML=h,p.classList.add(u),i.append(p),p.addEventListener("click",()=>{n&&n(),e.remove()},{once:!0})}document.body.append(e)}function W(o,t){let e=document.createElement("div");e.classList.add("confirmation-screen",t);let s=document.createElement("h2");s.innerHTML=o;let l=document.createElement("textarea"),i=document.createElement("div");i.classList.add("overlay");let m=document.createElement("div");m.classList.add("box");let h=document.createElement("ul"),u=document.createElement("li");u.classList.add("yes"),u.innerHTML="Confirm";let n=document.createElement("li");return n.innerHTML="Cancel",n.classList.add("no"),h.append(n,u),m.append(s,l,h),e.append(m,i),e}function me(){let o=document.createElement("div");o.classList.add("confirmation-screen","settings-popover");let t=document.createElement("div");t.classList.add("box");let e=document.createElement("div");e.classList.add("overlay");let s=document.createElement("h2");s.innerText="Settings";let l=document.createElement("ul");l.classList.add("options");let i=document.createElement("li"),m=document.createElement("label");m.innerText="Algorithm";let h=document.createElement("select");h.id="algorithm";let u=document.createElement("option");u.value="random",u.innerText="Random Algorithm";let n=document.createElement("option");n.value="monochromatic",n.innerText="Monochromatic";let p=document.createElement("option");p.value="analogous",p.innerText="Analogous";let a=document.createElement("option");a.value="complementary",a.innerText="Complementary";let f=document.createElement("option");f.value="split-complementary",f.innerText="Split Complementary";let y=document.createElement("option");y.value="triadic",y.innerText="Triadic";let c=document.createElement("option");c.value="tetradic",c.innerText="Tetradic";let d=document.createElement("option");d.value="square",d.innerText="Square";let L=document.createElement("option");L.value="randomize",L.innerText="Randomize Colors";let r=document.createElement("ul");r.classList.add("confirmation");let b=document.createElement("li");b.classList.add("yes"),b.innerText="Confirm";let x=document.createElement("li");x.classList.add("no"),x.innerText="Cancel",r.append(x,b),h.append(L,n,p,a,f,y,c,d,u),h.selectedIndex=k.settings.lastColorAlgorithmIndex;let S=document.createElement("li");S.classList.add("horizontal");let E=document.createElement("div"),I=document.createElement("label");I.innerText="Cookies";let B=document.createElement("label");B.innerText="That's fine!",B.setAttribute("for","cookies-ok");let P=document.createElement("label");P.innerText="No thanks.",P.setAttribute("for","cookies-not-ok");let N=document.createElement("div"),j=document.createElement("div");N.classList.add("op"),j.classList.add("op");let U=document.createElement("input");U.id="cookies-ok",U.value="cookies-ok",U.setAttribute("type","radio"),U.classList.add("true");let O=document.createElement("input");return O.id="cookies-not-ok",O.value="cookies-not-ok",O.setAttribute("type","radio"),O.classList.add("false"),k.settings.cookiesOk?U.checked=!0:O.checked=!0,U.addEventListener("change",()=>{U.checked?O.checked=!1:O.checked=!0}),O.addEventListener("change",()=>{O.checked?U.checked=!1:U.checked=!0}),N.append(U,B),j.append(O,P),S.append(I,E),E.append(N,j),i.append(m,h),l.append(i,S),t.append(s,l,r),o.append(e,t),o}let z=document.querySelector(".saved-palettes-wrapper");class ue{constructor(){R(this,"items",[]);this.items=k.savedPalettes.items}draw(t){for(;z.childElementCount>0;)z.lastChild.remove();if(t)for(let s=0;s<t.length;s++){let l=t[s],i=document.createElement("div");i.setAttribute("data-palette-index",s.toString()),i.classList.add("palette-container");let m=document.createElement("div");m.classList.add("palette");let h=document.createElement("div");h.classList.add("options");let u=document.createElement("div");u.classList.add("more");let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 100 100");let p=document.createElementNS("http://www.w3.org/2000/svg","use");p.setAttribute("href","#icon-more-horizontal");for(let a=0;a<l.length;a++){let f=l[a],{lum:y}=A(f),c=document.createElement("div");c.setAttribute("data-color-index",a.toString()),c.classList.add("swatch"),c.style.backgroundColor="#"+f,y<.5&&c.classList.add("isLight");let d=document.createElement("h2");d.innerHTML="#"+f,d.classList.add("text"),c.append(d),m.append(c)}n.append(p),u.append(n),h.append(u),i.append(m,h),z.append(i)}let e=document.querySelector(".palettes-page .when-empty");z.childElementCount==0?e.classList.remove("hidden"):e.classList.add("hidden")}addItem(t,e){typeof e=="number"?this.items.splice(e,0,t):this.items.push(t),k.savedPalettes.items=this.items,this.draw(this.items)}removeItem(t){this.items.splice(t,1),k.savedPalettes.items=this.items,this.draw(this.items)}}function F(o){if(o.algorithm.details=="slot"){let t=[];for(let e=0;e<6;e++)t.push(Math.round(g(0,15)).toString(16));return t.join("")}else for(let t of o.slots)if(!t.isLocked){let e=[];for(let s=0;s<6;s++)e.push(Math.round(g(0,15)).toString(16));t.hex=e.join(""),t.sync()}}function X(o,t){if(o.algorithm.details=="slot")if(Math.random()>.5){let e=0,s=0,l=0,i=o.slots[t-2],m=o.slots[t-1],h=o.slots[t],u=o.slots[t+1];if(h){let{h:n,s:p,l:a}=A(h.hex);if(e=n,m){let{s:f,l:y}=A(m.hex);s=p-(p-f)/2,l=a-(a-y)/2}else if(u){let{s:f,l:y}=A(u.hex);s=p-(f-p)/2,l=a-(y-a)/2}else s=p*g(.7,1.3),l=a*g(.7,1.3)}else if(m){let{h:n,s:p,l:a}=A(m.hex);if(e=n,i){let{s:f,l:y}=A(i.hex);s=p+(p-f)/2,l=a+(a-y)/2}else s=p*g(.7,1.3),l=a*g(.7,1.3)}else s=g(.2,1),l=g(.1,.9);return s*=g(.95,1.05),l*=g(.95,1.05),H(e,s,l)}else{let e,s,l,i,m,h,u;for(let{hex:n}of o.slots){let{h:p,s:a,l:f}=A(n);typeof e!="number"&&(e=p),(typeof l!="number"||a>l)&&(l=a),(typeof s!="number"||a<s)&&(s=a),(typeof m!="number"||f>m)&&(m=f),(typeof i!="number"||f<i)&&(i=f)}return h=g(s,l)*g(.95,1.05),u=g(i,m)*g(.95,1.05),H(e,h,u)}else if(o.algorithm.details=="increment"||Math.random()>.5){let e=[],s=g(0,360),l=0,i=0,m=0,h=0,u=0,n=0,p=0,a=0;for(let f of o.slots)f.isLocked||e.push(f);for(let f=0;f<e.length;f++)if(f==0){let y=o.slots[0];l=g(.1,1),i=g(.1,.9),y.hex=H(s,l,i),y.sync(),m=l,h=i,m<.4?u=g(.7,1):m>.6?u=g(.1,.3):m>.5?u=g(.1,.2):u=g(.8,.9),h<.4?n=g(.7,1):h>.6?n=g(.1,.3):h>.5?n=g(.1,.2):n=g(.8,.9),p=(u-m)/o.slots.length,a=(n-h)/o.slots.length}else{let y=o.slots[f];l=m+p*f,i=h+a*f,y.hex=H(s,l,i),y.sync()}}else{let e=g(0,360),s,l,i;for(let m of o.slots)m.isLocked||(s=g(.2,1),l=g(.2,.8),typeof i!="number"&&(e=i=g(0,360)),m.hex=H(e,s,l),m.sync())}}function G(o,t){if(o.algorithm.details=="slot")if(Math.random()>.5){let e=0,s=0,l=0,i=o.slots[t-2],m=o.slots[t-1],h=o.slots[t],u=o.slots[t+1];if(h){let{h:n,s:p,l:a}=A(h.hex);if(m){let{h:f,s:y,l:c}=A(m.hex),d=n-f;d>180?d=n-f-360:d<-180&&(d=n-f+360),e=n-d/2,s=p-(p-y)/2,l=a-(a-c)/2}else if(u){let{h:f,s:y,l:c}=A(u.hex),d=f-n;d>180?d=f-n-360:d<-180&&(d=f-n+360),e=n-d/2,s=p-(y-p)/2,l=a-(c-a)/2}else e=n*g(.7,1.3),s=p*g(.7,1.3),l=a*g(.7,1.3)}else if(m){let{h:n,s:p,l:a}=A(m.hex);if(i){let{h:f,s:y,l:c}=A(i.hex),d=n-f;d>180?d=n-f-360:d<-180&&(d=n-f+360),e=n+d/2,s=p+(p-y)/2,l=a+(a-c)/2}else e=n*g(.7,1.3),s=p*g(.7,1.3),l=a*g(.7,1.3)}else e=g(0,360),s=g(.2,1),l=g(.1,.9);return e*=g(.95,1.05),s*=g(.95,1.05),l*=g(.95,1.05),H(e,s,l)}else{let e,s,l,i,m,h,u,n,p,a,f=Math.random();for(let{hex:y}of o.slots){let{h:c,s:d,l:L}=A(y);if(typeof e!="number")e=c;else if(typeof s!="number"){let r=e,b=r-c;b>180?r-=360:b<-180&&(r+=360),b=r-c,(b<-25||b>25)&&(s=c)}else if(typeof l!="number"){let r=e,b=s,x=r-c,S=b-c;x>180?r-=360:x<-180&&(r+=360),S>180?b-=360:S<-180&&(b+=360),x=r-c,S=b-c,(x>25||x<-25)&&(S>25||S<-25)&&(l=c)}(typeof m!="number"||d>m)&&(m=d),(typeof i!="number"||d<i)&&(i=d),(typeof u!="number"||L>u)&&(u=L),(typeof h!="number"||L<h)&&(h=L)}return l&&f<.333?n=l:s&&f>.666?n=s:n=e,p=g(i,m)*g(.95,1.05),a=g(h,u)*g(.95,1.05),H(n,p,a)}else if(o.algorithm.details=="increment"||Math.random()>.5){let e=0,s=0,l=0,i=0,m=0,h=0,u=0,n=0,p=0,a=0,f=0,y=0;for(let c=0;c<o.slots.length;c++){let d=o.slots[c];if(!d.isLocked)if(!i)e=i=g(0,360),s=m=g(.1,1),l=h=g(.1,.9),d.hex=H(e,s,l),d.sync(),i=e,m=s,h=l,Math.random()>.5?u=e+g(90,120):u=e-g(75,90),m<.4?n=g(.7,1):m>.6?n=g(.1,.3):m>.5?n=g(.1,.2):n=g(.8,.9),h<.4?p=g(.7,1):h>.6?p=g(.1,.3):h>.5?p=g(.1,.2):p=g(.8,.9),a=(u-i)/o.slots.length,f=(n-m)/o.slots.length,y=(p-h)/o.slots.length;else{let L=o.slots[c];e=i+a*c,s=m+f*c,l=h+y*c,L.hex=H(e,s,l),L.sync()}}}else{let e,s,l,i,m,h;for(let u of o.slots)if(!u.isLocked){if(s=g(.2,1),l=g(.2,.8),typeof i!="number")e=i=g(0,360);else if(typeof m!="number")e=m=i+30*g(.975,1.025);else if(typeof h!="number")e=h=i-30*g(.975,1.025);else{let n=Math.random();n<.333?e=i:n>.666?e=m:e=h}u.hex=H(e,s,l),u.sync()}}}function Z(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,m,h,u,n,p=Math.random();for(let{hex:a}of o.slots){let{h:f,s:y,l:c}=A(a);if(typeof t!="number")t=f;else if(typeof e!="number"){let d=t,L=d-f;L>180?d-=360:L<-180&&(d+=360),L=d-f,(L<-90||L>90)&&(e=f)}(typeof l!="number"||y>l)&&(l=y),(typeof s!="number"||y<s)&&(s=y),(typeof m!="number"||c>m)&&(m=c),(typeof i!="number"||c<i)&&(i=c)}return p>.5&&e?h=e*g(.925,1.025):h=t*g(.925,1.025),u=g(s,l)*g(.95,1.05),n=g(i,m)*g(.95,1.05),H(h,u,n)}else{let t,e,s,l,i;for(let m of o.slots)m.isLocked||(e=g(.2,1),s=g(.2,.8),typeof l!="number"?t=l=g(0,360):typeof i!="number"?t=i=l+150*g(.975,1.025):Math.random()<.5?t=l*g(.975,1.025):t=i*g(.975,1.025),m.hex=H(t,e,s),m.sync())}}function Q(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,m,h,u,n,p,a=Math.random();for(let{hex:f}of o.slots){let{h:y,s:c,l:d}=A(f);if(typeof t!="number")t=y;else if(typeof e!="number"){let L=t,r=L-y;r>180?L-=360:r<-180&&(L+=360),r=L-y,(r<-30||r>30)&&(e=y)}else if(typeof s!="number"){let L=t,r=e,b=L-y,x=r-y;b>180?L-=360:b<-180&&(L+=360),x>180?r-=360:x<-180&&(r+=360),b=L-y,x=r-y,(b>30||b<-30)&&(x>30||x<-30)&&(s=y)}(typeof i!="number"||c>i)&&(i=c),(typeof l!="number"||c<l)&&(l=c),(typeof h!="number"||d>h)&&(h=d),(typeof m!="number"||d<m)&&(m=d)}return a<.333&&s?u=s:a>.666&&e?u=e:u=t,n=g(l,i)*g(.95,1.05),p=g(m,h)*g(.95,1.05),H(u,n,p)}else{let t,e,s,l,i,m;for(let h of o.slots)if(!h.isLocked){if(e=g(.2,1),s=g(.2,.8),typeof l!="number")t=l=g(0,360);else if(typeof i!="number")t=i=l+150*g(.975,1.025);else if(typeof m!="number")t=m=l-150*g(.975,1.025);else{let u=Math.random();u<.333?t=l*g(.975,1.025):u>.666?t=i*g(.975,1.025):t=m*g(.975,1.025)}h.hex=H(t,e,s),h.sync()}}}function _(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,m,h,u,n,p,a=Math.random();for(let{hex:f}of o.slots){let{h:y,s:c,l:d}=A(f);if(typeof t!="number")t=y;else if(typeof e!="number"){let L=t,r=L-y;r>180?L-=360:r<-180&&(L+=360),r=L-y,(r<-90||r>90)&&(e=y)}else if(typeof s!="number"){let L=t,r=e,b=L-y,x=r-y;b>180?L-=360:b<-180&&(L+=360),x>180?r-=360:x<-180&&(r+=360),b=L-y,x=r-y,(b>90||b<-90)&&(x>90||x<-90)&&(s=y)}(typeof i!="number"||c>i)&&(i=c),(typeof l!="number"||c<l)&&(l=c),(typeof h!="number"||d>h)&&(h=d),(typeof m!="number"||d<m)&&(m=d)}return a<.333?u=t:a>.666?u=e:u=s,n=g(l,i)*g(.95,1.05),p=g(m,h)*g(.95,1.05),H(u,n,p)}else{let t,e,s,l,i,m;for(let h of o.slots)if(!h.isLocked){if(e=g(.2,1),s=g(.2,.8),typeof l!="number")t=l=g(0,360);else if(typeof i!="number")t=i=l+120;else if(typeof m!="number")t=m=l-120;else{let u=Math.random();u<.333?t=l:u<.666?t=i:t=m}h.hex=H(t,e,s),h.sync()}}}function ee(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,m,h,u,n,p,a,f=Math.random();for(let{hex:y}of o.slots){let{h:c,s:d,l:L}=A(y);if(typeof t!="number")t=c;else if(typeof e!="number"){let r=t,b=r-c;b>180?r-=360:b<-180&&(r+=360),b=r-c,(b<-45||b>45)&&(e=c)}else if(typeof s!="number"){let r=t,b=e,x=r-c,S=b-c;x>180?r-=360:x<-180&&(r+=360),S>180?b-=360:S<-180&&(b+=360),x=r-c,S=b-c,(x>45||x<-45)&&(S>45||S<-45)&&(s=c)}else if(typeof l!="number"){let r=t,b=e,x=s,S=r-c,E=b-c,I=x-c;S>180?r-=360:S<-180&&(r+=360),E>180?b-=360:E<-180&&(b+=360),I>180?x-=360:I<-180&&(x+=360),S=r-c,E=b-c,I=x-c,(S>45||S<-45)&&(E>45||E<-45)&&(I>45||I<-45)&&(l=c)}(typeof m!="number"||d>m)&&(m=d),(typeof i!="number"||d<i)&&(i=d),(typeof u!="number"||L>u)&&(u=L),(typeof h!="number"||L<h)&&(h=L)}return typeof l=="number"&&f<.25?n=l:typeof s=="number"&&f<.5?n=s:typeof e=="number"&&f<.75?n=e:n=t,p=g(i,m)*g(.95,1.05),a=g(h,u)*g(.95,1.05),H(n,p,a)}else{let t,e,s,l,i,m,h;for(let u of o.slots)if(!u.isLocked){if(e=g(.2,1),s=g(.2,.8),typeof l!="number")t=l=g(0,360);else if(typeof i!="number")t=i=l+60;else if(typeof m!="number")t=m=l-120;else if(typeof h!="number")t=h=l+180;else{let n=Math.random();n<.25?t=l:n>.5?t=i:n>.75?t=m:t=h}u.hex=H(t,e,s),u.sync()}}}function te(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,m,h,u,n,p,a,f=Math.random();for(let{hex:y}of o.slots){let{h:c,s:d,l:L}=A(y);if(typeof t!="number")t=c;else if(typeof e!="number"){let r=t,b=r-c;b>180?r-=360:b<-180&&(r+=360),b=r-c,(b<-85||b>85)&&(e=c)}else if(typeof s!="number"){let r=t,b=e,x=r-c,S=b-c;x>180?r-=360:x<-180&&(r+=360),S>180?b-=360:S<-180&&(b+=360),x=r-c,S=b-c,(x<-85||x>85)&&(S<-85||S>85)&&(s=c)}else if(typeof l!="number"){let r=t,b=e,x=s,S=r-c,E=b-c,I=x-c;S>180?r-=360:S<-180&&(r+=360),E>180?b-=360:E<-180&&(b+=360),I>180?x-=360:I<-180&&(x+=360),S=r-c,E=b-c,I=x-c,(S<-85||S>85&&E<-85||E>85&&(I<-85||I>85))&&(l=c)}(typeof m!="number"||d>m)&&(m=d),(typeof i!="number"||d<i)&&(i=d),(typeof u!="number"||L>u)&&(u=L),(typeof h!="number"||L<h)&&(h=L)}return typeof l=="number"&&f<.25?n=l:typeof s=="number"&&f<.5?n=s:typeof e=="number"&&f<.75?n=e:n=t,p=g(i,m)*g(.95,1.05),a=g(h,u)*g(.95,1.05),H(n,p,a)}else{let t,e,s,l,i,m,h;for(let u of o.slots)if(!u.isLocked){if(e=g(.2,1),s=g(.2,.8),typeof l!="number")t=l=g(0,360);else if(typeof i!="number")t=i=l+60;else if(typeof m!="number")t=m=l-120;else if(typeof h!="number")t=h=l+180;else{let n=Math.random();n<.25?t=l:n>.5?t=i:n>.75?t=m:t=h}u.hex=H(t,e,s),u.sync()}}}function fe(o,t){switch(Math.round(g(0,7))){case 0:return F(o);case 1:return X(o,t);case 2:default:return G(o,t);case 3:return Z(o);case 4:return Q(o);case 5:return _(o);case 6:return ee(o);case 7:return te(o)}}const pe=[F,X,G,Z,Q,_,ee,te,fe];let he=document.getElementById("palette");class ye{constructor(){R(this,"slots",[]);R(this,"plus",{palette:this,disabled:!1,active:!1,show(t){if(!this.active){let e=this.render(t.toString()),s=this.palette.slots[t];s?document.getElementById(s.id).after(e):(s=this.palette.slots[t+1],document.getElementById(s.id).before(e)),this.active=!0}},hide(){var t;this.active&&((t=document.getElementById("plus-button"))==null||t.parentElement.parentElement.remove(),this.active=!1)},render(t){let e=document.createElement("div");e.classList.add("plus-container");let s=document.createElement("div");s.classList.add("circle");let l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("data-color-index",t),l.setAttribute("viewBox","0 0 100 100"),l.id="plus-button";let i=document.createElementNS("http://www.w3.org/2000/svg","use");return i.setAttribute("href","#icon-plus-button"),i.setAttribute("viewBox","0 0 100 100"),l.append(i),s.append(l),e.append(s),e}});R(this,"algorithm",{list:pe,get(t){t=="slot"?this.details="slot":this.details="";let e=k.settings.lastColorAlgorithmIndex;return typeof e!="number"&&(k.settings={lastColorAlgorithmIndex:1}),this.list[e]},details:"",direction:{h:0,s:0,l:0},preference:{h:void 0,s:void 0,l:void 0}})}removeSlot(t,e){e||(e={animations:!0});let s=t.data+1;for(let i=s;i<this.slots.length;i++)this.slots[i].data--;let l=document.getElementById(t.id);if(this.slots.splice(t.data,1),e.animations==!0){let i=function(){l.remove(),l.removeEventListener("animationend",i),l.removeEventListener("animationcancel",i)};l.classList.add("deinit"),l.addEventListener("animationend",i),l.addEventListener("animationcancel",i)}else l.remove();return t}addSlot(t,e){var m;let s={palette:this,hex:t.hex,isLocked:typeof t.isLocked=="boolean"?t.isLocked:!1,id:t.id||ce(),index:typeof t.index!="number"?this.slots.length:t.index,get data(){var u;let h=parseInt((u=document.getElementById(this.id))==null?void 0:u.getAttribute("data-color-index"));return typeof h=="number"?h:this.data=this.index},set data(h){var u;(u=document.getElementById(this.id))==null||u.setAttribute("data-color-index",h.toString()),this.index=h},generate(){this.hex=this.palette.algorithm.get("slot")(this.palette,this.index),this.sync()},sync(){let h=document.getElementById(this.id);if(this.hex){let{lum:u}=A(this.hex);u<.5?h.classList.add("isLight"):h.classList.remove("isLight"),h.style.backgroundColor="#"+this.hex,h.getElementsByClassName("hex")[0].innerHTML="#"+this.hex}}};s.hex||(s.hex=this.algorithm.get("slot")(this,s.index));let l=this.createSwatch(s,e),i=document.getElementById((m=this.slots[s.index-1])==null?void 0:m.id);i?i.after(l):he.prepend(l),s.data=s.index,this.slots.splice(s.index,0,s);for(let h=s.index+1;h<this.slots.length;h++)this.slots[h].data++;return s}createSwatch(t,e){e||(e={animations:!0});let s=document.createElement("div");if(s.classList.add("swatch"),s.setAttribute("data-color-index",t.data),s.id=t.id,t.hex){s.style.backgroundColor="#"+t.hex;let{lum:L}=A(t.hex);L<.5?s.classList.add("isLight"):s.classList.remove("isLight")}if(e.animations==!0){let L=function(){s.classList.remove("init"),s.removeEventListener("animationend",L),s.removeEventListener("animationcancel",L)};s.classList.add("init"),s.addEventListener("animationend",L),s.addEventListener("animationcancel",L)}let l=document.createElement("div");l.classList.add("options");let i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("icon","x"),i.setAttribute("viewBox","0 0 100 100");let m=document.createElementNS("http://www.w3.org/2000/svg","use");m.setAttribute("href","#icon-x");let h=document.createElementNS("http://www.w3.org/2000/svg","use");h.setAttribute("viewBox","0 0 100 100"),h.setAttribute("href","#icon-lock-body");let u=document.createElementNS("http://www.w3.org/2000/svg","use");u.setAttribute("viewBox","0 0 100 100"),u.setAttribute("href","#icon-lock-arm");let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 100 100"),n.classList.add("icon","lock"),t.isLocked&&n.classList.add("locked");let p=document.createElement("div");p.classList.add("info");let a=document.createElement("h2");a.classList.add("hex"),a.innerHTML="#"+t.hex;let f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.classList.add("icon"),f.setAttribute("viewBox","0 0 100 100");let y=document.createElementNS("http://www.w3.org/2000/svg","use");y.setAttribute("href","#icon-copy");let c=document.createElement("div");c.classList.add("detector","left");let d=document.createElement("div");return d.classList.add("detector"),i.append(m),n.append(u,h),f.append(y),p.append(a,f),l.append(i,n,p),s.append(l,c,d),s}generate(t){let e={animations:!1};if(t)if(t.length==this.slots.length)for(let s=0;s<t.length;s++)this.slots[s].hex=t[s],this.slots[s].sync();else{for(let s of this.slots)document.getElementById(s.id).remove();this.slots=[];for(let s=0;s<t.length;s++)this.addSlot({index:s,hex:t[s]},e)}else if(this.slots.length>0)this.algorithm.get()(this);else{for(let s=0;s<5;s++)this.addSlot({},e);this.algorithm.get()(this)}return this.slots}}class ge{constructor(t){R(this,"routes");R(this,"loadContent",t=>{if(t){let{base:e,ids:s}=t;typeof e!="string"&&(e=t);let l=this.routes.get(e);s?l(s):l()}else this.routes.get("404")()});R(this,"routeToURL",t=>{let e=this.deconstructURL(t),{base:s,ids:l}=e;this.routes.has(s)?s==="create"?l?this.idsAreValid(l)?this.loadContent(e):this.loadContent():this.loadContent(e):this.loadContent(e):this.loadContent()});R(this,"navigateTo",(t,e)=>{e=e||!1,e?history.replaceState("","",t):history.pushState("","","/polychrome"+t),this.routeToURL(t)});this.routes=new Map(t)}deconstructURL(t){let e=t.replace(/^\//,"").replace(/\/$/,"").split("/");return e[0]=="polychrome"?{site:"polychrome",base:e[1]||"",ids:e[2]?e[2].split("-"):null}:{site:"polychrome",base:e[0],ids:e[1]?e[1].split("-"):null}}idsAreValid(t){for(let e of t)if(!/^[a-f0-9]{6}$/.test(e)||t.length>8)return!1;return!0}}function ve(){document.querySelector("#palette").onclick=u=>t(u),document.querySelector("#palette").ontouchend=u=>t(u);let o=!1;async function t(u){let n=u.target;if(o)return;u.pointerType!="mouse"&&(o=!0,setTimeout(()=>{o=!1},75));let p=n.closest(".plus-container svg");if(p){const{ids:f}=q.deconstructURL(location.pathname),y=parseInt(p.getAttribute("data-color-index"));let c=v.addSlot({index:y+1});f.splice(y+1,0,c.hex),history.replaceState("","",f.join("-")),v.plus.hide(),C.create.push({undo(){v.removeSlot(c,{animations:!1}),f.splice(y+1,1),history.replaceState("","",f.join("-"))},redo(){v.addSlot(c,{animations:!1}),f.splice(y+1,0,c.hex),history.replaceState("","",f.join("-"))}}),v.slots.length==8&&v.plus.hide();return}let a=n.closest(".lock");if(a){let f=n.closest(".swatch"),y=parseInt(f.getAttribute("data-color-index")),c=v.slots[y];c.isLocked=!c.isLocked,a.classList.toggle("locked"),C.create.push({undo(){let d=v.slots[y],L=document.getElementById(d.id);d.isLocked=!d.isLocked,L.querySelector(".lock").classList.toggle("locked")},redo(){let d=v.slots[y],L=document.getElementById(d.id);d.isLocked=!d.isLocked,L.querySelector(".lock").classList.toggle("locked")}});return}if(n.closest(".x")){let f=n.closest(".swatch"),y=v.slots[parseInt(f.getAttribute("data-color-index"))],{ids:c}=q.deconstructURL(location.pathname);v.removeSlot(y),c.splice(y.data,1),history.replaceState("","",c.join("-")),C.create.push({undo(){v.addSlot(y,{animations:!1}),c.splice(y.data,0,y.hex),history.replaceState("","",c.join("-"))},redo(){v.removeSlot(y,{animations:!1}),c.splice(y.data,1),history.replaceState("","",c.join("-"))}});return}if(n.closest(".info")){o=!0,setTimeout(()=>{o=!1},75);let f=n.closest(".swatch"),y=v.slots[parseInt(f.getAttribute("data-color-index"))],c=u.pageX,d=u.pageY;if(n.closest(".icon")){await navigator.clipboard.writeText(y.hex).then(()=>{let L=w("Copied hex to clipboard!",{pos:[c,d]});L.classList.add("at-mouse-pos"),document.body.append(L)},()=>{let L=w("Copy to clipboard failed.",{pos:[c,d]});L.classList.add("at-mouse-pos"),document.body.append(L)});return}}}document.querySelector(".saved-palettes-wrapper").ontouchend=u=>e(u),document.querySelector(".saved-palettes-wrapper").onclick=u=>e(u);async function e(u){let n=u.target;if(o)return;u.pointerType!="mouse"&&(o=!0,setTimeout(()=>{o=!1},75));let p=n.closest(".swatch");if(p){let f=p.parentElement.parentElement;await navigator.clipboard.writeText(T.items[parseInt(f.getAttribute("data-palette-index"))][parseInt(p.getAttribute("data-color-index"))]).then(()=>{let y=w("Copied hex to clipboard!",{pos:[u.x,u.y]});y.classList.add("at-mouse-pos"),document.body.append(y)},()=>{let y=w("Copy to clipboard failed.",{pos:[u.x,u.y]});y.classList.add("at-mouse-pos"),document.body.append(y)});return}if(n.closest("#palettes-open")){q.navigateTo("/create/"+k.savedPalettes.items[parseInt(n.closest(".palette-container").getAttribute("data-palette-index"))].join("-"));return}if(n.closest("#palettes-copy")){await navigator.clipboard.writeText(T.items[parseInt(n.closest(".palette-container").getAttribute("data-palette-index"))].join(`
`)).then(()=>{let f=w("Copied hex to clipboard!",{pos:[u.x,u.y]});f.classList.add("at-mouse-pos"),document.body.append(f)},()=>{let f=w("Copy to clipboard failed.",{pos:[u.x,u.y]});f.classList.add("at-mouse-pos"),document.body.append(f)});return}if(n.closest("#palettes-remove")){let f=parseInt(n.closest(".palette-container").getAttribute("data-palette-index")),y=T.items[f],c={undo(){T.addItem(y,f)},redo(){T.removeItem(f)}};C.palettes.push(c),T.removeItem(f);let d=w("Removed palette.");document.body.append(d);return}let a=n.closest(".more");if(a){o=!0,setTimeout(()=>{o=!1},75),a.parentElement.append($([{content:"Open",id:"palettes-open"},{content:"Remove",id:"palettes-remove"},{content:"Copy",id:"palettes-copy"}],{type:"menu"}));return}}let s=document.querySelector(".toolbar");s.ontouchend=u=>l(u),s.onclick=u=>l(u);async function l(u){var p;if(o)return;u.pointerType!="mouse"&&(o=!0,setTimeout(()=>{o=!1},75));let n=u.target;if(n.closest(".undo")){q.deconstructURL(location.pathname).base=="create"?C.create.undo():C.palettes.undo();return}if(n.closest(".redo")){q.deconstructURL(location.pathname).base=="create"?C.create.redo():C.palettes.redo();return}if(n.closest(".copy")){if(q.deconstructURL(location.pathname).base=="create"){let a=[];for(let{hex:f}of v.slots)a.push(f);await navigator.clipboard.writeText(a.join(`
`)).then(()=>{let f=w("Copied palette!");document.body.append(f)},()=>{let f=w("Failed to copy.");document.body.append(f)})}else{let a=[];for(let f of T.items)a.push(f.join("-"));await navigator.clipboard.writeText(a.join(`,
`)).then(()=>{let f=w("Copied palettes to clipboard!");document.body.append(f)},()=>{let f=w("Copy to clipboard failed.");document.body.append(f)})}return}if(n.closest(".generate")){let a=[];for(let{hex:y}of v.slots)a.push(y);v.generate();let f=[];for(let{hex:y}of v.slots)f.push(y);history.replaceState("","","/create/"+f.join("-")),a&&C.create.push({undo:()=>{v.generate(a),history.replaceState("","","/create/"+a.join("-"))},redo:()=>{v.generate(f),history.replaceState("","","/create/"+f.join("-"))}});return}if(n.closest(".save")){if(!k.settings.cookiesOk){document.body.append(w("You'll need to enable cookies in settings for that feature."));return}let a=[];for(let{hex:y}of v.slots)a.push(y);T.addItem(a);let f=w("Saved palette!");document.body.append(f);return}for(;document.querySelectorAll(".popover").length>0;)(p=document.querySelector(".popover"))==null||p.remove();if(n.closest(".add-1-color")){v.slots.length<8&&v.addSlot({});return}else if(n.closest(".add-2-color")){for(let a=0;a<2;a++)v.slots.length<8&&v.addSlot({});return}else if(n.closest(".add-3-color")){for(let a=0;a<3;a++)v.slots.length<8&&v.addSlot({});return}else if(n.closest(".add-4-color")){for(let a=0;a<4;a++)v.slots.length<8&&v.addSlot({});return}if(n.closest(".add-colors")){s.append($([{content:"1",class:"add-1-color"},{content:"2",class:"add-2-color"},{content:"3",class:"add-3-color"},{content:"4",class:"add-4-color"}],{type:"tool-menu-side"}));return}if(n.closest(".remove-all")){K({message:"Are you sure you want to delete all of your palettes? You won't be able to undo this.",value:"remove-all"},[{message:"Yes, delete away.",value:"yes",call(){for(let f=0;T.items.length;f++)T.removeItem(0);let a=w("All palettes removed.");document.body.append(a)}},{message:"No, please don't delete my stuff!",value:"no"}]);return}if(n.closest(".import")){if(q.deconstructURL(location.pathname).base=="create"){let a=W("Paste hex code palette below!","import-create");document.body.append(a)}else{if(!k.settings.cookiesOk){document.body.append(w("You'll need to enable cookies in settings for that feature."));return}let a=W("Paste hex code palette below! Separate palettes by commas.","import-palettes");document.body.append(a)}return}n.closest(".more")&&(q.deconstructURL(location.pathname).base=="create"?s.append($([{content:"Save",class:"save"},{content:"Import",class:"import"},{content:"Copy",class:"copy"},{content:"Add Colors",class:"add-colors"}],{type:"tool-menu"})):s.append($([{content:"Remove All",class:"remove-all"},{content:"Import",class:"import"},{content:"Copy All",class:"copy"}],{type:"tool-menu"})))}let i=document.querySelector(".main-nav"),m=document.querySelector(".main-header");window.ontouchend=u=>h(u),window.onclick=u=>h(u);async function h(u){var f,y,c,d,L,r;if(o)return;u.pointerType!="mouse"&&(o=!0,setTimeout(()=>{o=!1},75));let n=u.target;(f=document.querySelector(".popover"))==null||f.remove(),(y=document.querySelector(".clear-overlay"))==null||y.remove();let p=n.closest("a");if(p){u.preventDefault();let b=p.getAttribute("href");i.classList.remove("visible"),(c=document.querySelector(".overlay"))==null||c.remove(),document.body.style.overflowY="",b!=location.pathname&&q.navigateTo(b);return}if(n.closest("#nav-button"))if(i.classList.toggle("visible"),i.classList.contains("visible")){let b=document.createElement("div");b.classList.add("overlay"),m.append(b),document.body.style.overflowY="hidden",v.plus.hide(),setTimeout(()=>{b.addEventListener("click",()=>{b.remove(),i.classList.remove("visible"),document.body.style.overflowY=""},{once:!0})},50),document.body.style.overflowY="hidden"}else(d=m.querySelector(".overlay"))==null||d.remove(),document.body.style.overflowY="";if(n.closest("#settings")){let b=me();document.body.append(b);return}let a=n.closest(".confirmation-screen");if(a){if(n.closest(".overlay")&&(a==document.querySelector(".cookies")&&(k.settings={cookiesOk:!0},k.info={firstVisit:!0}),a.remove()),a==document.querySelector(".remove-all-confirmation")){if(n.closest(".yes")){for(let x=0;T.items.length;x++)T.removeItem(0);a.remove();let b=w("All palettes removed.");document.body.append(b)}else n.closest(".no")&&a.remove();return}if(a==document.querySelector(".import-create")){let b=q.deconstructURL(location.pathname).ids,x=n.closest(".yes"),S=n.closest(".no");if(x){let E=a.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-",""),I=!(/[g-z~`!#$%\^&*+=\[\]\\';,/{}|\\":<>\?]/g.test(E)||E.length==0||E.length%6!=0),B="Invalid values entered. Try again.";if(I){B="Successfully imported values.";let N=E.match(/.{1,6}/g);v.generate(N),C.create.push({undo(){v.generate(b)},redo(){v.generate(N)}})}let P=w(B);document.body.append(P),a.remove()}else S&&a.remove();return}if(a==document.querySelector(".import-palettes")){let b=n.closest(".yes"),x=n.closest(".no");if(b){let S=a.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-","").replaceAll("#","").toLowerCase(),E="Invalid values entered. Try again.",I=!(/[g-z~`!#$%\^&*+=\[\]\\';/{}|\\":<>\?]/g.test(S)||S.replaceAll(",","").length%6!=0||S.length==0);console.log(S.replaceAll(",","").length%6!=0);let B=S.split(",");for(let N of B)(N.length/6>8||!(N.length>=6))&&(I=!1);if(I){let N=0;for(let j of B)N++,T.addItem(j.match(/.{1,6}/g));E="Successfully imported values.",C.palettes.push({undo(){for(let j=N;j>0;j--)T.removeItem(T.items.length-1)},redo(){for(let j of B)T.addItem(j.match(/.{1,6}/g))}})}let P=w(E);document.body.append(P),a.remove()}else x&&a.remove();return}if(a==document.querySelector(".settings-popover")){let b=n.closest(".yes"),x=n.closest(".no");if(b){let S=k.settings;S.lastColorAlgorithmIndex=a.querySelector("#algorithm").selectedIndex,S.cookiesOk=a.querySelector("#cookies-ok").checked,k.settings=S;let E="Changes saved.";a.remove();let I=w(E);document.body.append(I),document.querySelector(".main-nav").classList.remove("visible"),(L=document.querySelector(".overlay."))==null||L.remove()}else if(x){let S="Changes discarded.";a.remove();let E=w(S);document.body.append(E),document.querySelector(".main-nav").classList.remove("visible"),(r=document.querySelector(".overlay."))==null||r.remove()}return}if(a==document.querySelector(".cookies-confirmation")){let b=n.closest(".yes"),x=n.closest(".no");if(b){k.settings={cookiesOk:!0},a.remove();let S=w("Thanks, enjoy the site! :)");document.body.append(S)}else if(x){k.settings={cookiesOk:!1},a.remove();let S=w("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(S)}return}}}}function be(){window.addEventListener("scroll",o,!1),window.addEventListener("touchmove",o,{passive:!1});function o(t){q.deconstructURL(location.pathname).base=="create"&&(t.preventDefault(),t.stopPropagation())}window.ontouchstart=t=>{let e=t.targetTouches[0].target.closest(".create-page .swatch");if(e&&!t.targetTouches[0].target.closest(".options div")&&!t.targetTouches[0].target.closest(".options svg")){let s=function(y){if(y.preventDefault(),l){let c=y.touches[0].clientY-u;e.style.translate="0 "+c+"px";let d=e,L=v.slots.length-n-1;if(f=0,a=0,c>0)for(let r=0;r<L;r++)f=(r*2+1)*m,d=d.nextElementSibling,c>f?(a++,d.style.translate!="0px -100%"&&(d.style.translate="0 -100%")):d.style.translate=="0px -100%"&&(d.style.translate="0 0");else for(let r=0;r<n;r++)f=(r*2+1)*m,d=d.previousElementSibling,-c>f?(a--,d.style.translate!="0px 100%"&&(d.style.translate="0 100%")):d.style.translate=="0px 100%"&&(d.style.translate="0 0")}else{let c=y.touches[0].clientX-h;e.style.translate=c+"px";let d=e,L=v.slots.length-n-1;if(f=0,a=0,c>0)for(let r=0;r<L;r++)f=(r*2+1)*i,d=d.nextElementSibling,c>f?(a++,d.style.translate!="-100%"&&(d.style.translate="-100%")):d.style.translate=="-100%"&&(d.style.translate="");else for(let r=0;r<n;r++)f=(r*2+1)*i,d=d.previousElementSibling,-c>f?(a--,d.style.translate!="100%"&&(d.style.translate="100%")):d.style.translate=="100%"&&(d.style.translate="")}},l=!1;document.body.classList.contains("vertical")&&(l=!0),v.plus.disabled=!0,v.plus.hide(),e.classList.add("is-dragging");let i=e.clientWidth/2,m=e.clientHeight/2,h=t.touches[0].clientX,u=t.touches[0].clientY,n=parseInt(e.getAttribute("data-color-index")),p=v.slots[n],a=0,f;window.addEventListener("touchmove",s,{passive:!1}),window.addEventListener("touchend",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("touchmove",s),e.style.translate=`${l?"0 ":""}${a*100}%`;function y(){e.removeEventListener("transitionend",y),e.removeEventListener("transitioncancel",y),e.classList.remove("is-released");let c=e;for(let r=0;r<a;r++)v.slots.splice(p.data,1),v.slots.splice(p.data+1,0,p),p.data++,c=c.nextElementSibling,v.slots[p.data-1].data--;for(let r=0;r>a;r--)v.slots.splice(p.data,1),v.slots.splice(p.data-1,0,p),p.data--,c=c.previousElementSibling,v.slots[p.data+1].data++;let d=e.cloneNode(!0);a>0?(c.after(d),e.remove()):a<0&&(c.before(d),e.remove()),e.style.translate="";let L=[];for(let r of v.slots){let b=document.getElementById(r.id);b.style.transition="transform 0s",b.style.translate="",setTimeout(()=>{b.style.transition=""},1),L.push(r.hex)}e=d,history.replaceState("","",L.join("-")),v.plus.disabled=!1,a&&C.create.push({undo(){v.plus.hide();let r=e=document.getElementById(p.id);for(let x=0;x<-a;x++){v.slots.splice(p.data,1),v.slots.splice(p.data+1,0,p),p.data++,r=r.nextElementSibling;let S=parseInt(r.getAttribute("data-color-index"));r.setAttribute("data-color-index",(S-1).toString())}for(let x=0;x>-a;x--){v.slots.splice(p.data,1),v.slots.splice(p.data-1,0,p),p.data--,r=r.previousElementSibling;let S=parseInt(r.getAttribute("data-color-index"));r.setAttribute("data-color-index",(S+1).toString())}d=e.cloneNode(!0),-a>0?(r.after(d),e.remove()):-a<0&&(r.before(d),e.remove());let b=[];for(let x of v.slots)b.push(x.hex);history.replaceState("","",b.join("-"))},redo(){v.plus.hide();let r=e=document.getElementById(p.id);for(let x=0;x<a;x++)v.slots.splice(p.data,1),v.slots.splice(p.data+1,0,p),p.data++,r=r.nextElementSibling,n=parseInt(r.getAttribute("data-color-index")),r.setAttribute("data-color-index",(n-1).toString());for(let x=0;x>a;x--)v.slots.splice(p.data,1),v.slots.splice(p.data-1,0,p),p.data--,r=r.previousElementSibling,n=parseInt(r.getAttribute("data-color-index")),r.setAttribute("data-color-index",(n+1).toString());d=e.cloneNode(!0),a>0?(r.after(d),e.remove()):a<0&&(r.before(d),e.remove());let b=[];for(let x of v.slots)b.push(x.hex);history.replaceState("","",b.join("-"))}})}e.addEventListener("transitionend",y),e.addEventListener("transitioncancel",y)},{once:!0})}},onmousedown=t=>{let e=t.target.closest(".create-page .swatch");if(e&&!t.target.closest(".options div")&&!t.target.closest(".options svg")){let s=function(y){if(l){let c=y.y-u;e.style.translate="0 "+c+"px";let d=e,L=v.slots.length-n-1;if(f=0,a=0,c>0)for(let r=0;r<L;r++)f=(r*2+1)*m,d=d.nextElementSibling,c>f?(a++,d.style.translate!="0px -100%"&&(d.style.translate="0px -100%")):d.style.translate=="0px -100%"&&(d.style.translate="");else for(let r=0;r<n;r++)f=(r*2+1)*m,d=d.previousElementSibling,-c>f?(a--,d.style.translate!="0px 100%"&&(d.style.translate="0px 100%")):d.style.translate=="0px 100%"&&(d.style.translate="")}else{let c=y.x-h;e.style.translate=c+"px";let d=e,L=v.slots.length-n-1;if(f=0,a=0,c>0)for(let r=0;r<L;r++)f=(r*2+1)*i,d=d.nextElementSibling,c>f?(a++,d.style.translate!="-100%"&&(d.style.translate="-100%")):d.style.translate=="-100%"&&(d.style.translate="");else for(let r=0;r<n;r++)f=(r*2+1)*i,d=d.previousElementSibling,-c>f?(a--,d.style.translate!="100%"&&(d.style.translate="100%")):d.style.translate=="100%"&&(d.style.translate="")}},l=!1;document.body.classList.contains("vertical")&&(l=!0),v.plus.disabled=!0,v.plus.hide(),e.classList.add("is-dragging");let i=e.clientWidth/2,m=e.clientHeight/2,h=t.x,u=t.y,n=parseInt(e.getAttribute("data-color-index")),p=v.slots[n],a=0,f;addEventListener("mousemove",s),addEventListener("mouseup",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("mousemove",s),e.style.translate=`${l?"0 ":""}${a*100}%`;function y(){e.removeEventListener("transitionend",y),e.removeEventListener("transitioncancel",y),e.classList.remove("is-released");let c=e;for(let r=0;r<a;r++)v.slots.splice(p.data,1),v.slots.splice(p.data+1,0,p),p.data++,c=c.nextElementSibling,v.slots[p.data-1].data--;for(let r=0;r>a;r--)v.slots.splice(p.data,1),v.slots.splice(p.data-1,0,p),p.data--,c=c.previousElementSibling,v.slots[p.data+1].data++;let d=e.cloneNode(!0);a>0?(c.after(d),e.remove()):a<0&&(c.before(d),e.remove()),e.style.translate="";let L=[];for(let r of v.slots){let b=document.getElementById(r.id);b.style.transition="transform 0s",b.style.translate="",setTimeout(()=>{b.style.transition=""},1),L.push(r.hex)}e=d,history.replaceState("","",L.join("-")),v.plus.disabled=!1,a&&C.create.push({undo(){v.plus.hide();let r=e=document.getElementById(p.id);for(let x=0;x<-a;x++){v.slots.splice(p.data,1),v.slots.splice(p.data+1,0,p),p.data++,r=r.nextElementSibling;let S=parseInt(r.getAttribute("data-color-index"));r.setAttribute("data-color-index",(S-1).toString())}for(let x=0;x>-a;x--){v.slots.splice(p.data,1),v.slots.splice(p.data-1,0,p),p.data--,r=r.previousElementSibling;let S=parseInt(r.getAttribute("data-color-index"));r.setAttribute("data-color-index",(S+1).toString())}d=e.cloneNode(!0),-a>0?(r.after(d),e.remove()):-a<0&&(r.before(d),e.remove());let b=[];for(let x of v.slots)b.push(x.hex);history.replaceState("","",b.join("-"))},redo(){v.plus.hide();let r=e=document.getElementById(p.id);for(let x=0;x<a;x++)v.slots.splice(p.data,1),v.slots.splice(p.data+1,0,p),p.data++,r=r.nextElementSibling,n=parseInt(r.getAttribute("data-color-index")),r.setAttribute("data-color-index",(n-1).toString());for(let x=0;x>a;x--)v.slots.splice(p.data,1),v.slots.splice(p.data-1,0,p),p.data--,r=r.previousElementSibling,n=parseInt(r.getAttribute("data-color-index")),r.setAttribute("data-color-index",(n+1).toString());d=e.cloneNode(!0),a>0?(r.after(d),e.remove()):a<0&&(r.before(d),e.remove());let b=[];for(let x of v.slots)b.push(x.hex);history.replaceState("","",b.join("-"))}})}e.addEventListener("transitionend",y),e.addEventListener("transitioncancel",y)},{once:!0}),ondragstart=()=>!1}}}let xe=document.querySelector(".main-nav");function Le(){onkeydown=o=>{var t,e;if(document.querySelector(".confirmation-screen")){if(o.key==="Escape"){(t=document.querySelector(".confirmation-screen"))==null||t.remove();return}return}if(o.metaKey||o.ctrlKey){let{base:s}=q.deconstructURL(location.pathname);if(o.key==="z"||o.key==="Z")if(s==="palettes"){o.shiftKey?C.palettes.redo():C.palettes.undo();return}else{o.shiftKey?C.create.redo():C.create.undo();return}if(s==="create"){let l=parseInt(o.key);if(l>=0&&l<=9){o.preventDefault();let i=v.slots[l-1]||v.slots[v.slots.length-1],m=document.getElementById(i.id);C.create.push({undo(){let h=v.slots[l-1]||v.slots[v.slots.length-1],u=document.getElementById(h.id);h.isLocked=!h.isLocked,u.querySelector(".lock").classList.toggle("locked")},redo(){let h=v.slots[l-1]||v.slots[v.slots.length-1],u=document.getElementById(h.id);h.isLocked=!h.isLocked,u.querySelector(".lock").classList.toggle("locked")}}),i.isLocked=!i.isLocked,m.querySelector(".lock").classList.toggle("locked");return}}}if(o.key===" "){let{base:s}=q.deconstructURL(location.pathname);if(s==="create"){o.preventDefault();let l=[];for(let{hex:m}of v.slots)l.push(m);v.generate();let i=[];for(let{hex:m}of v.slots)i.push(m);history.replaceState("","","/polychrome/create/"+i.join("-")),C.create.push({undo:()=>{v.generate(l),history.replaceState("","","/polychrome/create/"+l.join("-")),v.plus.hide()},redo:()=>{v.generate(i),history.replaceState("","","/polychrome/create/"+i.join("-"))}})}return}if(o.key==="Escape"){xe.classList.remove("visible"),(e=document.querySelector(".overlay"))==null||e.remove();return}//! NOT DONE
if(o.key==="Enter"){let s=document.activeElement;console.log(s);return}o.key}}let v=new ye,T=new ue,q=new ge([["",V("Home",document.getElementById("landing-page"))],["palettes",V("Palettes",document.getElementById("palettes-page"),T)],["create",V("Create",document.getElementById("create-page"),v)],["404",V("404 Not Found",document.getElementById("not-found-page"))]]);q.routeToURL(location.pathname);setTimeout(()=>{document.querySelector(":root").style.display="initial",window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")},200);onpopstate=()=>q.navigateTo(location.pathname,!0);ve();be();Le();onmouseover=o=>{if(!v.plus.disabled){const t=o.target,e=t.closest(".swatch");if(e)if(t.closest(".detector")&&v.slots.length<8){const l=t.closest(".left");let i=parseInt(e.getAttribute("data-color-index"));l&&i--,v.plus.show(i)}else v.plus.hide()}};k.info.firstVisit&&K({message:"This site relies on local storage and cookies to save palettes.",value:"cookies"},[{message:"Sure, sounds good to me.",value:"yes",call(){k.info={firstVisit:!1},k.settings={cookiesOk:!0};let o=w("Thanks, enjoy the site! :)");document.body.append(o)}},{message:"No thanks, I don't want to save palettes.",value:"no",call(){k.info={firstVisit:!1},k.settings={cookiesOk:!1};for(let t=0;t<T.items.length;t++)T.removeItem(0);let o=w("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(o)}}]);onresize=()=>{window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")};(navigator.userAgent.includes("Android")||navigator.userAgent.includes("like Mac"))&&document.body.classList.add("mobile");
