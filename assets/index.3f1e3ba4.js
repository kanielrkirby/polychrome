var se=Object.defineProperty;var le=(o,t,e)=>t in o?se(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var U=(o,t,e)=>(le(o,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function e(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=e(l);fetch(l.href,i)}})();let P;const oe=new Uint8Array(16);function ie(){if(!P&&(P=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!P))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return P(oe)}const M=[];for(let o=0;o<256;++o)M.push((o+256).toString(16).slice(1));function ne(o,t=0){return(M[o[t+0]]+M[o[t+1]]+M[o[t+2]]+M[o[t+3]]+"-"+M[o[t+4]]+M[o[t+5]]+"-"+M[o[t+6]]+M[o[t+7]]+"-"+M[o[t+8]]+M[o[t+9]]+"-"+M[o[t+10]]+M[o[t+11]]+M[o[t+12]]+M[o[t+13]]+M[o[t+14]]+M[o[t+15]]).toLowerCase()}const ae=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),z={randomUUID:ae};function re(o,t,e){if(z.randomUUID&&!t&&!o)return z.randomUUID();o=o||{};const s=o.random||(o.rng||ie)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let l=0;l<16;++l)t[e+l]=s[l];return t}return ne(s)}const de=document.title;function I(o){let t=parseInt(o[0]+o[1],16)/255,e=parseInt(o[2]+o[3],16)/255,s=parseInt(o[4]+o[5],16)/255,l=Math.max(t,e,s),i=Math.min(t,e,s),c,u,g=t*.299+e*.587+s*.114,p=(l+i)/2;if(l==i)c=u=0;else{let d=l-i;switch(u=p>.5?d/(2-l-i):d/(l+i),l){case t:c=(e-s)/d+(e<s?6:0);break;case e:c=(s-t)/d+2;break;default:c=(t-e)/d+4;break}c=c*60}return{r:t,g:e,b:s,h:c,s:u,l:p,lum:g}}function A(o,t,e){o>360?o-=360:o<0&&(o+=360),t>1?t=1:t<0&&(t=0),e>1?e=1:e<0&&(e=0),t*=100;const s=t*Math.min(e,1-e)/100,l=i=>{const c=(i+o/30)%12,u=e-s*Math.max(Math.min(c-3,9-c,1),-1);return Math.round(255*u).toString(16).padStart(2,"0")};return`${l(0)}${l(8)}${l(4)}`}const w={get info(){let o=localStorage.getItem("info");return o?JSON.parse(o):(localStorage.setItem("info",JSON.stringify({firstVisit:!0})),this.info)},set info(o){let t=this.info;if(o)for(let[e,s]of Object.entries(o))t[e]=s;localStorage.setItem("info",JSON.stringify(t))},get settings(){let o=localStorage.getItem("settings");return o?JSON.parse(o):(localStorage.setItem("settings",JSON.stringify({lastColorAlgorithmIndex:2,cookiesOk:!1})),this.settings)},set settings(o){let t=this.settings;if(o)for(let[e,s]of Object.entries(o))t[e]=s;localStorage.setItem("settings",JSON.stringify(t))},savedPalettes:{get items(){let o=localStorage.getItem("saved-palettes"),t;if(o){let e=[];t=JSON.parse(o);for(let s of t)e.push(s);return e}else return[]},set items(o){localStorage.setItem("saved-palettes",JSON.stringify(o))},addItem(o){let t=this.items;t.push(o),this.items=t},removeItem(o){this.items.splice(o,1)}}},T={create:{cmds:[],cmdIndex:-1,push(o){this.cmds.splice(this.cmdIndex+1,1/0,o),this.cmdIndex=this.cmds.length-1},undo(){this.cmdIndex>-1&&(this.cmds[this.cmdIndex].undo(),this.cmdIndex--)},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}},palettes:{cmds:[],cmdIndex:-1,push(o){this.cmds.splice(this.cmdIndex+1,1/0,o),this.cmdIndex=this.cmds.length-1},undo(){if(this.cmdIndex>-1){let o=this.cmds[this.cmdIndex];this.cmdIndex--,o.undo()}},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}}},R=document.querySelector(".toolbar");function D(o,t,e){return s=>{document.title=de+" | "+o;const l=document.querySelector("main.visible");l&&l.classList.remove("visible");const i=t;if(i==null||i.classList.add("visible"),o=="Palettes")document.body.parentElement.style.overflow="",document.body.style.overflow="",R.classList.add("palettes"),R.classList.remove("create"),e.draw(w.savedPalettes.items);else if(o=="Create")if(document.body.parentElement.style.overflow="hidden",document.body.style.overflow="hidden",R.classList.add("create"),R.classList.remove("palettes"),s)e.generate(s);else{let c=e.generate(),u=[];for(let g of c)u.push(g.hex);history.replaceState("","",u.join("-"))}else R.classList.remove("palettes","create"),document.documentElement.style.overflow="",document.body.style.overflow=""}}const v=(o,t)=>Math.random()*(t-o)+o,ce=()=>btoa(parseInt(re(),16).toString(36)).replaceAll("=","");function E(o,t){const e=document.createElement("div");e.classList.add("tooltip","appearing");const s=document.createElement("h2");return s.innerHTML=o,e.append(s),t!=null&&t.pos?(e.style.left=t.pos[0]+"px",e.style.top=t.pos[1]+"px"):e.classList.add("centered"),setTimeout(()=>{t&&t.pos&&(e.clientWidth+t.pos[0]>document.body.clientWidth?(e.style.translate="-100%",e.clientHeight+t.pos[1]>document.body.clientHeight&&(e.style.translate="-100 -100%")):e.clientHeight+t.pos[1]>document.body.clientHeight&&(e.style.translate="0 -100%"))},0),e.addEventListener("animationend",()=>{e.classList.remove("appearing"),setTimeout(()=>{e.classList.add("disappearing"),e.addEventListener("animationend",()=>{e.remove()},{once:!0})},(t==null?void 0:t.duration)||1e3)},{once:!0}),e}function J(o,t){let e=document.createElement("div");e.classList.add("popover");let s=document.createElement("div");if(s.classList.add("clear-overlay"),(t==null?void 0:t.type)=="menu"){let l=document.createElement("ul");l.classList.add("list");for(let i of o){let c=document.createElement("div");c.id=i.id,c.classList.add("choice"),i.content&&(c.innerHTML=i.content),l.append(c)}e.append(l,s)}else if((t==null?void 0:t.type)=="color-picker"){let l=document.createElement("canvas");l.id="color-picker",l.classList.add("color-picker");let i=l.getContext("2d"),{h:c}=I(t.hex),u=`hsl(${c}, 100%, 50%)`,g=i.createLinearGradient(0,0,i.canvas.width,0);g.addColorStop(0,"#fff"),g.addColorStop(1,u),i.fillStyle=g,i.fillRect(0,0,i.canvas.width,i.canvas.height);let p=i.createLinearGradient(0,0,0,i.canvas.height);p.addColorStop(0,"rgba(0,0,0,0)"),p.addColorStop(1,"black"),i.fillStyle=p,i.fillRect(0,0,i.canvas.width,i.canvas.height);let d=document.createElement("div");d.classList.add("color-picker-cursor");let m=document.createElement("input");m.setAttribute("min","0"),m.setAttribute("max","360"),m.setAttribute("type","range");let h=document.createElement("div");h.classList.add("huebar");let f=document.createElement("div");f.classList.add("huebar-cursor");let r=document.createElement("input");r.setAttribute("min","0"),r.setAttribute("max","360"),r.setAttribute("type","range"),l.append(d,m),h.append(f,r),e.append(l,h)}return e}function K(o,t){let e=document.createElement("div");e.classList.add("confirmation-screen",o.value+"-confirmation");let s=document.createElement("div");s.classList.add("box");let l=document.createElement("h2");l.innerHTML=o.message;let i=document.createElement("ul"),c=document.createElement("div");c.classList.add("overlay"),s.append(l,i),e.append(s,c);for(let{message:u,value:g,call:p}of t){let d=document.createElement("li");d.innerHTML=u,d.classList.add(g),i.append(d),d.addEventListener("click",()=>{p&&p(),e.remove()},{once:!0})}document.body.append(e)}function W(o,t){let e=document.createElement("div");e.classList.add("confirmation-screen",t);let s=document.createElement("h2");s.innerHTML=o;let l=document.createElement("textarea"),i=document.createElement("div");i.classList.add("overlay");let c=document.createElement("div");c.classList.add("box");let u=document.createElement("ul"),g=document.createElement("li");g.classList.add("yes"),g.innerHTML="Confirm";let p=document.createElement("li");return p.innerHTML="Cancel",p.classList.add("no"),u.append(p,g),c.append(s,l,u),e.append(c,i),e}function me(){let o=document.createElement("div");o.classList.add("confirmation-screen","settings-popover");let t=document.createElement("div");t.classList.add("box");let e=document.createElement("div");e.classList.add("overlay");let s=document.createElement("h2");s.innerText="Settings";let l=document.createElement("ul");l.classList.add("options");let i=document.createElement("li"),c=document.createElement("label");c.innerText="Algorithm";let u=document.createElement("select");u.id="algorithm";let g=document.createElement("option");g.value="random",g.innerText="Random Algorithm";let p=document.createElement("option");p.value="monochromatic",p.innerText="Monochromatic";let d=document.createElement("option");d.value="analogous",d.innerText="Analogous";let m=document.createElement("option");m.value="complementary",m.innerText="Complementary";let h=document.createElement("option");h.value="split-complementary",h.innerText="Split Complementary";let f=document.createElement("option");f.value="triadic",f.innerText="Triadic";let r=document.createElement("option");r.value="tetradic",r.innerText="Tetradic";let a=document.createElement("option");a.value="square",a.innerText="Square";let y=document.createElement("option");y.value="randomize",y.innerText="Randomize Colors";let n=document.createElement("ul");n.classList.add("confirmation");let b=document.createElement("li");b.classList.add("yes"),b.innerText="Confirm";let L=document.createElement("li");L.classList.add("no"),L.innerText="Cancel",n.append(L,b),u.append(y,p,d,m,h,f,r,a,g),u.selectedIndex=w.settings.lastColorAlgorithmIndex;let S=document.createElement("li");S.classList.add("horizontal");let k=document.createElement("div"),C=document.createElement("label");C.innerText="Cookies";let N=document.createElement("label");N.innerText="That's fine!",N.setAttribute("for","cookies-ok");let B=document.createElement("label");B.innerText="No thanks.",B.setAttribute("for","cookies-not-ok");let V=document.createElement("div"),$=document.createElement("div");V.classList.add("op"),$.classList.add("op");let j=document.createElement("input");j.id="cookies-ok",j.value="cookies-ok",j.setAttribute("type","radio"),j.classList.add("true");let O=document.createElement("input");return O.id="cookies-not-ok",O.value="cookies-not-ok",O.setAttribute("type","radio"),O.classList.add("false"),w.settings.cookiesOk?j.checked=!0:O.checked=!0,j.addEventListener("change",()=>{j.checked?O.checked=!1:O.checked=!0}),O.addEventListener("change",()=>{O.checked?j.checked=!1:j.checked=!0}),V.append(j,N),$.append(O,B),S.append(C,k),k.append(V,$),i.append(c,u),l.append(i,S),t.append(s,l,n),o.append(e,t),o}let Y=document.querySelector(".saved-palettes-wrapper");class ue{constructor(){U(this,"items",[]);this.items=w.savedPalettes.items}draw(t){for(;Y.childElementCount>0;)Y.lastChild.remove();if(t)for(let s=0;s<t.length;s++){let l=t[s],i=document.createElement("div");i.setAttribute("data-palette-index",s.toString()),i.classList.add("palette-container");let c=document.createElement("div");c.classList.add("palette");let u=document.createElement("div");u.classList.add("options");let g=document.createElement("div");g.classList.add("more");let p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttribute("viewBox","0 0 100 100");let d=document.createElementNS("http://www.w3.org/2000/svg","use");d.setAttribute("href","#icon-more-horizontal");for(let m=0;m<l.length;m++){let h=l[m],{lum:f}=I(h),r=document.createElement("div");r.setAttribute("data-color-index",m.toString()),r.classList.add("swatch"),r.style.backgroundColor="#"+h,f<.5&&r.classList.add("isLight");let a=document.createElement("h2");a.innerHTML="#"+h,a.classList.add("text"),r.append(a),c.append(r)}p.append(d),g.append(p),u.append(g),i.append(c,u),Y.append(i)}let e=document.querySelector(".palettes-page .when-empty");Y.childElementCount==0?e.classList.remove("hidden"):e.classList.add("hidden")}addItem(t,e){typeof e=="number"?this.items.splice(e,0,t):this.items.push(t),w.savedPalettes.items=this.items,this.draw(this.items)}removeItem(t){this.items.splice(t,1),w.savedPalettes.items=this.items,this.draw(this.items)}}function F(o){if(o.algorithm.details=="slot"){let t=[];for(let e=0;e<6;e++)t.push(Math.round(v(0,15)).toString(16));return t.join("")}else for(let t of o.slots)if(!t.isLocked){let e=[];for(let s=0;s<6;s++)e.push(Math.round(v(0,15)).toString(16));t.hex=e.join(""),t.sync()}}function X(o,t){if(o.algorithm.details=="slot")if(Math.random()>.5){let e=0,s=0,l=0,i=o.slots[t-2],c=o.slots[t-1],u=o.slots[t],g=o.slots[t+1];if(u){let{h:p,s:d,l:m}=I(u.hex);if(e=p,c){let{s:h,l:f}=I(c.hex);s=d-(d-h)/2,l=m-(m-f)/2}else if(g){let{s:h,l:f}=I(g.hex);s=d-(h-d)/2,l=m-(f-m)/2}else s=d*v(.7,1.3),l=m*v(.7,1.3)}else if(c){let{h:p,s:d,l:m}=I(c.hex);if(e=p,i){let{s:h,l:f}=I(i.hex);s=d+(d-h)/2,l=m+(m-f)/2}else s=d*v(.7,1.3),l=m*v(.7,1.3)}else s=v(.2,1),l=v(.1,.9);return s*=v(.95,1.05),l*=v(.95,1.05),A(e,s,l)}else{let e,s,l,i,c,u,g;for(let{hex:p}of o.slots){let{h:d,s:m,l:h}=I(p);typeof e!="number"&&(e=d),(typeof l!="number"||m>l)&&(l=m),(typeof s!="number"||m<s)&&(s=m),(typeof c!="number"||h>c)&&(c=h),(typeof i!="number"||h<i)&&(i=h)}return u=v(s,l)*v(.95,1.05),g=v(i,c)*v(.95,1.05),A(e,u,g)}else if(o.algorithm.details=="increment"||Math.random()>.5){let e=[],s=v(0,360),l=0,i=0,c=0,u=0,g=0,p=0,d=0,m=0;for(let h of o.slots)h.isLocked||e.push(h);for(let h=0;h<e.length;h++)if(h==0){let f=o.slots[0];l=v(.1,1),i=v(.1,.9),f.hex=A(s,l,i),f.sync(),c=l,u=i,c<.4?g=v(.7,1):c>.6?g=v(.1,.3):c>.5?g=v(.1,.2):g=v(.8,.9),u<.4?p=v(.7,1):u>.6?p=v(.1,.3):u>.5?p=v(.1,.2):p=v(.8,.9),d=(g-c)/o.slots.length,m=(p-u)/o.slots.length}else{let f=o.slots[h];l=c+d*h,i=u+m*h,f.hex=A(s,l,i),f.sync()}}else{let e=v(0,360),s,l,i;for(let c of o.slots)c.isLocked||(s=v(.2,1),l=v(.2,.8),typeof i!="number"&&(e=i=v(0,360)),c.hex=A(e,s,l),c.sync())}}function G(o,t){if(o.algorithm.details=="slot")if(Math.random()>.5){let e=0,s=0,l=0,i=o.slots[t-2],c=o.slots[t-1],u=o.slots[t],g=o.slots[t+1];if(u){let{h:p,s:d,l:m}=I(u.hex);if(c){let{h,s:f,l:r}=I(c.hex),a=p-h;a>180?a=p-h-360:a<-180&&(a=p-h+360),e=p-a/2,s=d-(d-f)/2,l=m-(m-r)/2}else if(g){let{h,s:f,l:r}=I(g.hex),a=h-p;a>180?a=h-p-360:a<-180&&(a=h-p+360),e=p-a/2,s=d-(f-d)/2,l=m-(r-m)/2}else e=p*v(.7,1.3),s=d*v(.7,1.3),l=m*v(.7,1.3)}else if(c){let{h:p,s:d,l:m}=I(c.hex);if(i){let{h,s:f,l:r}=I(i.hex),a=p-h;a>180?a=p-h-360:a<-180&&(a=p-h+360),e=p+a/2,s=d+(d-f)/2,l=m+(m-r)/2}else e=p*v(.7,1.3),s=d*v(.7,1.3),l=m*v(.7,1.3)}else e=v(0,360),s=v(.2,1),l=v(.1,.9);return e*=v(.95,1.05),s*=v(.95,1.05),l*=v(.95,1.05),A(e,s,l)}else{let e,s,l,i,c,u,g,p,d,m,h=Math.random();for(let{hex:f}of o.slots){let{h:r,s:a,l:y}=I(f);if(typeof e!="number")e=r;else if(typeof s!="number"){let n=e,b=n-r;b>180?n-=360:b<-180&&(n+=360),b=n-r,(b<-25||b>25)&&(s=r)}else if(typeof l!="number"){let n=e,b=s,L=n-r,S=b-r;L>180?n-=360:L<-180&&(n+=360),S>180?b-=360:S<-180&&(b+=360),L=n-r,S=b-r,(L>25||L<-25)&&(S>25||S<-25)&&(l=r)}(typeof c!="number"||a>c)&&(c=a),(typeof i!="number"||a<i)&&(i=a),(typeof g!="number"||y>g)&&(g=y),(typeof u!="number"||y<u)&&(u=y)}return l&&h<.333?p=l:s&&h>.666?p=s:p=e,d=v(i,c)*v(.95,1.05),m=v(u,g)*v(.95,1.05),A(p,d,m)}else if(o.algorithm.details=="increment"||Math.random()>.5){let e=0,s=0,l=0,i=0,c=0,u=0,g=0,p=0,d=0,m=0,h=0,f=0;for(let r=0;r<o.slots.length;r++){let a=o.slots[r];if(!a.isLocked)if(!i)e=i=v(0,360),s=c=v(.1,1),l=u=v(.1,.9),a.hex=A(e,s,l),a.sync(),i=e,c=s,u=l,Math.random()>.5?g=e+v(90,120):g=e-v(75,90),c<.4?p=v(.7,1):c>.6?p=v(.1,.3):c>.5?p=v(.1,.2):p=v(.8,.9),u<.4?d=v(.7,1):u>.6?d=v(.1,.3):u>.5?d=v(.1,.2):d=v(.8,.9),m=(g-i)/o.slots.length,h=(p-c)/o.slots.length,f=(d-u)/o.slots.length;else{let y=o.slots[r];e=i+m*r,s=c+h*r,l=u+f*r,y.hex=A(e,s,l),y.sync()}}}else{let e,s,l,i,c,u;for(let g of o.slots)if(!g.isLocked){if(s=v(.2,1),l=v(.2,.8),typeof i!="number")e=i=v(0,360);else if(typeof c!="number")e=c=i+30*v(.975,1.025);else if(typeof u!="number")e=u=i-30*v(.975,1.025);else{let p=Math.random();p<.333?e=i:p>.666?e=c:e=u}g.hex=A(e,s,l),g.sync()}}}function Z(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,c,u,g,p,d=Math.random();for(let{hex:m}of o.slots){let{h,s:f,l:r}=I(m);if(typeof t!="number")t=h;else if(typeof e!="number"){let a=t,y=a-h;y>180?a-=360:y<-180&&(a+=360),y=a-h,(y<-90||y>90)&&(e=h)}(typeof l!="number"||f>l)&&(l=f),(typeof s!="number"||f<s)&&(s=f),(typeof c!="number"||r>c)&&(c=r),(typeof i!="number"||r<i)&&(i=r)}return d>.5&&e?u=e*v(.925,1.025):u=t*v(.925,1.025),g=v(s,l)*v(.95,1.05),p=v(i,c)*v(.95,1.05),A(u,g,p)}else{let t,e,s,l,i;for(let c of o.slots)c.isLocked||(e=v(.2,1),s=v(.2,.8),typeof l!="number"?t=l=v(0,360):typeof i!="number"?t=i=l+150*v(.975,1.025):Math.random()<.5?t=l*v(.975,1.025):t=i*v(.975,1.025),c.hex=A(t,e,s),c.sync())}}function Q(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,c,u,g,p,d,m=Math.random();for(let{hex:h}of o.slots){let{h:f,s:r,l:a}=I(h);if(typeof t!="number")t=f;else if(typeof e!="number"){let y=t,n=y-f;n>180?y-=360:n<-180&&(y+=360),n=y-f,(n<-30||n>30)&&(e=f)}else if(typeof s!="number"){let y=t,n=e,b=y-f,L=n-f;b>180?y-=360:b<-180&&(y+=360),L>180?n-=360:L<-180&&(n+=360),b=y-f,L=n-f,(b>30||b<-30)&&(L>30||L<-30)&&(s=f)}(typeof i!="number"||r>i)&&(i=r),(typeof l!="number"||r<l)&&(l=r),(typeof u!="number"||a>u)&&(u=a),(typeof c!="number"||a<c)&&(c=a)}return m<.333&&s?g=s:m>.666&&e?g=e:g=t,p=v(l,i)*v(.95,1.05),d=v(c,u)*v(.95,1.05),A(g,p,d)}else{let t,e,s,l,i,c;for(let u of o.slots)if(!u.isLocked){if(e=v(.2,1),s=v(.2,.8),typeof l!="number")t=l=v(0,360);else if(typeof i!="number")t=i=l+150*v(.975,1.025);else if(typeof c!="number")t=c=l-150*v(.975,1.025);else{let g=Math.random();g<.333?t=l*v(.975,1.025):g>.666?t=i*v(.975,1.025):t=c*v(.975,1.025)}u.hex=A(t,e,s),u.sync()}}}function _(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,c,u,g,p,d,m=Math.random();for(let{hex:h}of o.slots){let{h:f,s:r,l:a}=I(h);if(typeof t!="number")t=f;else if(typeof e!="number"){let y=t,n=y-f;n>180?y-=360:n<-180&&(y+=360),n=y-f,(n<-90||n>90)&&(e=f)}else if(typeof s!="number"){let y=t,n=e,b=y-f,L=n-f;b>180?y-=360:b<-180&&(y+=360),L>180?n-=360:L<-180&&(n+=360),b=y-f,L=n-f,(b>90||b<-90)&&(L>90||L<-90)&&(s=f)}(typeof i!="number"||r>i)&&(i=r),(typeof l!="number"||r<l)&&(l=r),(typeof u!="number"||a>u)&&(u=a),(typeof c!="number"||a<c)&&(c=a)}return m<.333?g=t:m>.666?g=e:g=s,p=v(l,i)*v(.95,1.05),d=v(c,u)*v(.95,1.05),A(g,p,d)}else{let t,e,s,l,i,c;for(let u of o.slots)if(!u.isLocked){if(e=v(.2,1),s=v(.2,.8),typeof l!="number")t=l=v(0,360);else if(typeof i!="number")t=i=l+120;else if(typeof c!="number")t=c=l-120;else{let g=Math.random();g<.333?t=l:g<.666?t=i:t=c}u.hex=A(t,e,s),u.sync()}}}function ee(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,c,u,g,p,d,m,h=Math.random();for(let{hex:f}of o.slots){let{h:r,s:a,l:y}=I(f);if(typeof t!="number")t=r;else if(typeof e!="number"){let n=t,b=n-r;b>180?n-=360:b<-180&&(n+=360),b=n-r,(b<-45||b>45)&&(e=r)}else if(typeof s!="number"){let n=t,b=e,L=n-r,S=b-r;L>180?n-=360:L<-180&&(n+=360),S>180?b-=360:S<-180&&(b+=360),L=n-r,S=b-r,(L>45||L<-45)&&(S>45||S<-45)&&(s=r)}else if(typeof l!="number"){let n=t,b=e,L=s,S=n-r,k=b-r,C=L-r;S>180?n-=360:S<-180&&(n+=360),k>180?b-=360:k<-180&&(b+=360),C>180?L-=360:C<-180&&(L+=360),S=n-r,k=b-r,C=L-r,(S>45||S<-45)&&(k>45||k<-45)&&(C>45||C<-45)&&(l=r)}(typeof c!="number"||a>c)&&(c=a),(typeof i!="number"||a<i)&&(i=a),(typeof g!="number"||y>g)&&(g=y),(typeof u!="number"||y<u)&&(u=y)}return typeof l=="number"&&h<.25?p=l:typeof s=="number"&&h<.5?p=s:typeof e=="number"&&h<.75?p=e:p=t,d=v(i,c)*v(.95,1.05),m=v(u,g)*v(.95,1.05),A(p,d,m)}else{let t,e,s,l,i,c,u;for(let g of o.slots)if(!g.isLocked){if(e=v(.2,1),s=v(.2,.8),typeof l!="number")t=l=v(0,360);else if(typeof i!="number")t=i=l+60;else if(typeof c!="number")t=c=l-120;else if(typeof u!="number")t=u=l+180;else{let p=Math.random();p<.25?t=l:p>.5?t=i:p>.75?t=c:t=u}g.hex=A(t,e,s),g.sync()}}}function te(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,c,u,g,p,d,m,h=Math.random();for(let{hex:f}of o.slots){let{h:r,s:a,l:y}=I(f);if(typeof t!="number")t=r;else if(typeof e!="number"){let n=t,b=n-r;b>180?n-=360:b<-180&&(n+=360),b=n-r,(b<-85||b>85)&&(e=r)}else if(typeof s!="number"){let n=t,b=e,L=n-r,S=b-r;L>180?n-=360:L<-180&&(n+=360),S>180?b-=360:S<-180&&(b+=360),L=n-r,S=b-r,(L<-85||L>85)&&(S<-85||S>85)&&(s=r)}else if(typeof l!="number"){let n=t,b=e,L=s,S=n-r,k=b-r,C=L-r;S>180?n-=360:S<-180&&(n+=360),k>180?b-=360:k<-180&&(b+=360),C>180?L-=360:C<-180&&(L+=360),S=n-r,k=b-r,C=L-r,(S<-85||S>85&&k<-85||k>85&&(C<-85||C>85))&&(l=r)}(typeof c!="number"||a>c)&&(c=a),(typeof i!="number"||a<i)&&(i=a),(typeof g!="number"||y>g)&&(g=y),(typeof u!="number"||y<u)&&(u=y)}return typeof l=="number"&&h<.25?p=l:typeof s=="number"&&h<.5?p=s:typeof e=="number"&&h<.75?p=e:p=t,d=v(i,c)*v(.95,1.05),m=v(u,g)*v(.95,1.05),A(p,d,m)}else{let t,e,s,l,i,c,u;for(let g of o.slots)if(!g.isLocked){if(e=v(.2,1),s=v(.2,.8),typeof l!="number")t=l=v(0,360);else if(typeof i!="number")t=i=l+60;else if(typeof c!="number")t=c=l-120;else if(typeof u!="number")t=u=l+180;else{let p=Math.random();p<.25?t=l:p>.5?t=i:p>.75?t=c:t=u}g.hex=A(t,e,s),g.sync()}}}function fe(o,t){switch(Math.round(v(0,7))){case 0:return F(o);case 1:return X(o,t);case 2:default:return G(o,t);case 3:return Z(o);case 4:return Q(o);case 5:return _(o);case 6:return ee(o);case 7:return te(o)}}const pe=[F,X,G,Z,Q,_,ee,te,fe];let he=document.getElementById("palette");class ye{constructor(){U(this,"slots",[]);U(this,"plus",{palette:this,disabled:!1,active:!1,show(t){if(!this.active){let e=this.render(t.toString()),s=this.palette.slots[t];s?document.getElementById(s.id).after(e):(s=this.palette.slots[t+1],document.getElementById(s.id).before(e)),this.active=!0}},hide(){var t;this.active&&((t=document.getElementById("plus-button"))==null||t.parentElement.parentElement.remove(),this.active=!1)},render(t){let e=document.createElement("div");e.classList.add("plus-container");let s=document.createElement("div");s.classList.add("circle");let l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("data-color-index",t),l.setAttribute("viewBox","0 0 100 100"),l.id="plus-button";let i=document.createElementNS("http://www.w3.org/2000/svg","use");return i.setAttribute("href","#icon-plus-button"),i.setAttribute("viewBox","0 0 100 100"),l.append(i),s.append(l),e.append(s),e}});U(this,"algorithm",{list:pe,get(t){t=="slot"?this.details="slot":this.details="";let e=w.settings.lastColorAlgorithmIndex;return typeof e!="number"&&(w.settings={lastColorAlgorithmIndex:1}),this.list[e]},details:"",direction:{h:0,s:0,l:0},preference:{h:void 0,s:void 0,l:void 0}})}removeSlot(t,e){e||(e={animations:!0});let s=t.data+1;for(let i=s;i<this.slots.length;i++)this.slots[i].data--;let l=document.getElementById(t.id);if(this.slots.splice(t.data,1),e.animations==!0){let i=function(){l.remove(),l.removeEventListener("animationend",i),l.removeEventListener("animationcancel",i)};l.classList.add("deinit"),l.addEventListener("animationend",i),l.addEventListener("animationcancel",i)}else l.remove();return t}addSlot(t,e){var c;let s={palette:this,hex:t.hex,isLocked:typeof t.isLocked=="boolean"?t.isLocked:!1,id:t.id||ce(),index:typeof t.index!="number"?this.slots.length:t.index,get data(){var g;let u=parseInt((g=document.getElementById(this.id))==null?void 0:g.getAttribute("data-color-index"));return typeof u=="number"?u:this.data=this.index},set data(u){var g;(g=document.getElementById(this.id))==null||g.setAttribute("data-color-index",u.toString()),this.index=u},generate(){this.hex=this.palette.algorithm.get("slot")(this.palette,this.index),this.sync()},sync(){let u=document.getElementById(this.id);if(this.hex){let{lum:g}=I(this.hex);g<.5?u.classList.add("isLight"):u.classList.remove("isLight"),u.style.backgroundColor="#"+this.hex,u.getElementsByClassName("hex")[0].innerHTML="#"+this.hex}}};s.hex||(s.hex=this.algorithm.get("slot")(this,s.index));let l=this.createSwatch(s,e),i=document.getElementById((c=this.slots[s.index-1])==null?void 0:c.id);i?i.after(l):he.prepend(l),s.data=s.index,this.slots.splice(s.index,0,s);for(let u=s.index+1;u<this.slots.length;u++)this.slots[u].data++;return s}createSwatch(t,e){e||(e={animations:!0});let s=document.createElement("div");if(s.classList.add("swatch"),s.setAttribute("data-color-index",t.data),s.id=t.id,t.hex){s.style.backgroundColor="#"+t.hex;let{lum:y}=I(t.hex);y<.5?s.classList.add("isLight"):s.classList.remove("isLight")}if(e.animations==!0){let y=function(){s.classList.remove("init"),s.removeEventListener("animationend",y),s.removeEventListener("animationcancel",y)};s.classList.add("init"),s.addEventListener("animationend",y),s.addEventListener("animationcancel",y)}let l=document.createElement("div");l.classList.add("options");let i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("icon","x"),i.setAttribute("viewBox","0 0 100 100");let c=document.createElementNS("http://www.w3.org/2000/svg","use");c.setAttribute("href","#icon-x");let u=document.createElementNS("http://www.w3.org/2000/svg","use");u.setAttribute("viewBox","0 0 100 100"),u.setAttribute("href","#icon-lock-body");let g=document.createElementNS("http://www.w3.org/2000/svg","use");g.setAttribute("viewBox","0 0 100 100"),g.setAttribute("href","#icon-lock-arm");let p=document.createElementNS("http://www.w3.org/2000/svg","svg");p.setAttribute("viewBox","0 0 100 100"),p.classList.add("icon","lock"),t.isLocked&&p.classList.add("locked");let d=document.createElement("div");d.classList.add("info");let m=document.createElement("h2");m.classList.add("hex"),m.innerHTML="#"+t.hex;let h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.classList.add("icon"),h.setAttribute("viewBox","0 0 100 100");let f=document.createElementNS("http://www.w3.org/2000/svg","use");f.setAttribute("href","#icon-copy");let r=document.createElement("div");r.classList.add("detector","left");let a=document.createElement("div");return a.classList.add("detector"),i.append(c),p.append(g,u),h.append(f),d.append(m,h),l.append(i,p,d),s.append(l,r,a),s}generate(t){let e={animations:!1};if(t)if(t.length==this.slots.length)for(let s=0;s<t.length;s++)this.slots[s].hex=t[s],this.slots[s].sync();else{for(let s of this.slots)document.getElementById(s.id).remove();this.slots=[];for(let s=0;s<t.length;s++)this.addSlot({index:s,hex:t[s]},e)}else if(this.slots.length>0)this.algorithm.get()(this);else{for(let s=0;s<5;s++)this.addSlot({},e);this.algorithm.get()(this)}return this.slots}}class ge{constructor(t){U(this,"routes");U(this,"loadContent",t=>{if(t){let{base:e,ids:s}=t;typeof e!="string"&&(e=t);let l=this.routes.get(e);s?l(s):l()}else this.routes.get("404")()});U(this,"routeToURL",(t,e)=>{let s=this.deconstructURL(t,e);console.log(s);let{base:l,ids:i}=s;this.routes.has(l)?l==="create"?i?this.idsAreValid(i)?this.loadContent(s):this.loadContent():this.loadContent(s):this.loadContent(s):this.loadContent()});U(this,"navigateTo",(t,e,s)=>{e=e||!1,e?history.replaceState("","",t):history.pushState("","","/polychrome"+t),this.routeToURL(t,s)});this.routes=new Map(t)}deconstructURL(t,e){let s=t.replace(/^\//,"").replace(/\/$/,"").split("/");return e?{site:s[0],base:s[1]||"",ids:s[2]?s[2].split("-"):null}:{base:s[0],ids:s[1]?s[1].split("-"):null}}idsAreValid(t){for(let e of t)if(!/^[a-f0-9]{6}$/.test(e)||t.length>8)return!1;return!0}}function ve(){let o=!1;document.querySelector("#palette").ontouchend=()=>t,document.querySelector("#palette").onclick=()=>t;async function t(d){let m=d.target;if(d.pointerType!="mouse")o=!0,setTimeout(()=>{o=!1},10);else if(o)return;let h=m.closest(".plus-container svg");if(h){const{ids:r}=q.deconstructURL(location.pathname),a=parseInt(h.getAttribute("data-color-index"));let y=x.addSlot({index:a+1});r.splice(a+1,0,y.hex),history.replaceState("","",r.join("-")),x.plus.hide(),T.create.push({undo(){x.removeSlot(y,{animations:!1}),r.splice(a+1,1),history.replaceState("","",r.join("-"))},redo(){x.addSlot(y,{animations:!1}),r.splice(a+1,0,y.hex),history.replaceState("","",r.join("-"))}}),x.slots.length==8&&x.plus.hide();return}let f=m.closest(".lock");if(f){let r=m.closest(".swatch"),a=parseInt(r.getAttribute("data-color-index")),y=x.slots[a];y.isLocked=!y.isLocked,f.classList.toggle("locked"),T.create.push({undo(){let n=x.slots[a],b=document.getElementById(n.id);n.isLocked=!n.isLocked,b.querySelector(".lock").classList.toggle("locked")},redo(){let n=x.slots[a],b=document.getElementById(n.id);n.isLocked=!n.isLocked,b.querySelector(".lock").classList.toggle("locked")}});return}if(m.closest(".x")){let r=m.closest(".swatch"),a=x.slots[parseInt(r.getAttribute("data-color-index"))],{ids:y}=q.deconstructURL(location.pathname);x.removeSlot(a),y.splice(a.data,1),history.replaceState("","",y.join("-")),T.create.push({undo(){x.addSlot(a,{animations:!1}),y.splice(a.data,0,a.hex),history.replaceState("","",y.join("-"))},redo(){x.removeSlot(a,{animations:!1}),y.splice(a.data,1),history.replaceState("","",y.join("-"))}});return}if(m.closest(".info")){let r=m.closest(".swatch"),a=x.slots[parseInt(r.getAttribute("data-color-index"))];if(m.closest(".hex")){let y=J([{id:""}],{type:"color-picker",hex:a.hex});r.append(y);return}if(m.closest(".icon")){await navigator.clipboard.writeText(a.hex).then(()=>{let y=E("Copied hex to clipboard!",{pos:[d.x,d.y]});y.classList.add("at-mouse-pos"),document.body.append(y)},()=>{let y=E("Copy to clipboard failed.",{pos:[d.x,d.y]});y.classList.add("at-mouse-pos"),document.body.append(y)});return}}}let e=!1;document.querySelector(".palettes-page .saved-palettes-wrapper").onclick=()=>s,document.querySelector(".palettes-page .saved-palettes-wrapper").ontouchend=()=>s;async function s(d){let m=d.target;if(d.pointerType!="mouse")e=!0,setTimeout(()=>{e=!1},10);else if(e)return;let h=m.closest(".swatch");if(h){let r=h.parentElement.parentElement;await navigator.clipboard.writeText(H.items[parseInt(r.getAttribute("data-palette-index"))][parseInt(h.getAttribute("data-color-index"))]).then(()=>{let a=E("Copied hex to clipboard!",{pos:[d.x,d.y]});a.classList.add("at-mouse-pos"),document.body.append(a)},()=>{let a=E("Copy to clipboard failed.",{pos:[d.x,d.y]});a.classList.add("at-mouse-pos"),document.body.append(a)});return}if(m.closest(".clear-overlay")){m.closest(".popover").remove();return}if(m.closest("#palettes-open")){q.navigateTo("/create/"+w.savedPalettes.items[parseInt(m.closest(".palette-container").getAttribute("data-palette-index"))].join("-"));return}if(m.closest("#palettes-copy")){await navigator.clipboard.writeText(H.items[parseInt(m.closest(".palette-container").getAttribute("data-palette-index"))].join(`
`)).then(()=>{let r=E("Copied hex to clipboard!",{pos:[d.x,d.y]});r.classList.add("at-mouse-pos"),document.body.append(r)},()=>{let r=E("Copy to clipboard failed.",{pos:[d.x,d.y]});r.classList.add("at-mouse-pos"),document.body.append(r)});return}if(m.closest("#palettes-remove")){let r=parseInt(m.closest(".palette-container").getAttribute("data-palette-index")),a=H.items[r],y={undo(){H.addItem(a,r)},redo(){H.removeItem(r)}};T.palettes.push(y),H.removeItem(r);let n=E("Removed palette.");document.body.append(n);return}let f=m.closest(".more");if(f){let r=J([{content:"Open",id:"palettes-open"},{content:"Remove",id:"palettes-remove"},{content:"Copy",id:"palettes-copy"}],{type:"menu"});f.parentElement.append(r);return}}let l=!1;document.querySelector(".toolbar").onclick=()=>i,document.querySelector(".toolbar").ontouchend=()=>i;async function i(d){let m=d.target;if(d.pointerType!="mouse")l=!0,setTimeout(()=>{l=!1},10);else if(l)return;if(m.closest(".undo")){q.deconstructURL(location.pathname,!0).base=="create"?T.create.undo():T.palettes.undo();return}if(m.closest(".redo")){q.deconstructURL(location.pathname,!0).base=="create"?T.create.redo():T.palettes.redo();return}if(m.closest(".copy")){if(q.deconstructURL(location.pathname,!0).base=="create"){let h=[];for(let{hex:f}of x.slots)h.push(f);await navigator.clipboard.writeText(h.join(`
`)).then(()=>{let f=E("Copied palette!");document.body.append(f)},()=>{let f=E("Failed to copy.");document.body.append(f)})}else{let h=[];for(let f of H.items)h.push(f.join("-"));await navigator.clipboard.writeText(h.join(`,
`)).then(()=>{let f=E("Copied palettes to clipboard!");document.body.append(f)},()=>{let f=E("Copy to clipboard failed.");document.body.append(f)})}return}if(m.closest(".generate")){let h=[];for(let{hex:r}of x.slots)h.push(r);x.generate();let f=[];for(let{hex:r}of x.slots)f.push(r);history.replaceState("","","/create/"+f.join("-")),h&&T.create.push({undo:()=>{x.generate(h),history.replaceState("","","/create/"+h.join("-"))},redo:()=>{x.generate(f),history.replaceState("","","/create/"+f.join("-"))}});return}if(m.closest(".save")){if(!w.settings.cookiesOk){document.body.append(E("You'll need to enable cookies in settings for that feature."));return}let h=[];for(let{hex:r}of x.slots)h.push(r);H.addItem(h);let f=E("Saved palette!");document.body.append(f);return}if(m.closest(".remove-all")){K({message:"Are you sure you want to delete all of your palettes? You won't be able to undo this.",value:"remove-all"},[{message:"Yes, delete away.",value:"yes",call(){for(let f=0;H.items.length;f++)H.removeItem(0);let h=E("All palettes removed.");document.body.append(h)}},{message:"No, please don't delete my stuff!",value:"no"}]);return}if(m.closest(".import")){if(q.deconstructURL(location.pathname,!0).base=="create"){let h=W("Paste hex code palette below!","import-create");document.body.append(h)}else{if(!w.settings.cookiesOk){document.body.append(E("You'll need to enable cookies in settings for that feature."));return}let h=W("Paste hex code palette below! Separate palettes by commas.","import-palettes");document.body.append(h)}return}}let c=document.querySelector(".main-nav"),u=document.querySelector(".main-header"),g=!1;window.onclick=()=>p,window.ontouchend=()=>p;async function p(d){var r,a;let m=d.target;if(d.pointerType!="mouse")g=!0,setTimeout(()=>{g=!1},10);else if(g)return;let h=m.closest("a");if(h){d.preventDefault();let y=h.getAttribute("href");c.classList.remove("visible"),(r=document.querySelector(".overlay"))==null||r.remove(),document.body.style.overflowY="",y!=location.pathname&&q.navigateTo(y);return}if(m.closest("#nav-button"))if(c.classList.toggle("visible"),c.classList.contains("visible")){let y=document.createElement("div");y.classList.add("overlay"),u.append(y),document.body.style.overflowY="hidden",x.plus.hide(),y.addEventListener("click",()=>{y.remove(),c.classList.remove("visible"),document.body.style.overflowY=""},{once:!0}),document.body.style.overflowY="hidden"}else(a=u.querySelector(".overlay"))==null||a.remove(),document.body.style.overflowY="";if(m.closest("#settings")){let y=me();document.body.append(y);return}let f=m.closest(".confirmation-screen");if(f){if(m.closest(".overlay")&&(f==document.querySelector(".cookies")&&(w.settings={cookiesOk:!0},w.info={firstVisit:!0}),f.remove()),f==document.querySelector(".remove-all-confirmation")){if(m.closest(".yes")){for(let n=0;H.items.length;n++)H.removeItem(0);f.remove();let y=E("All palettes removed.");document.body.append(y)}else m.closest(".no")&&f.remove();return}if(f==document.querySelector(".import-create")){let y=q.deconstructURL(location.pathname,!0).ids,n=m.closest(".yes"),b=m.closest(".no");if(n){let L=f.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-",""),S=!(/[g-z~`!#$%\^&*+=\[\]\\';,/{}|\\":<>\?]/g.test(L)||L.length==0||L.length%6!=0),k="Invalid values entered. Try again.";if(S){k="Successfully imported values.";let N=L.match(/.{1,6}/g);x.generate(N),T.create.push({undo(){x.generate(y)},redo(){x.generate(N)}})}let C=E(k);document.body.append(C),f.remove()}else b&&f.remove();return}if(f==document.querySelector(".import-palettes")){let y=m.closest(".yes"),n=m.closest(".no");if(y){let b=f.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-","").replaceAll("#","").toLowerCase(),L="Invalid values entered. Try again.",S=!(/[g-z~`!#$%\^&*+=\[\]\\';/{}|\\":<>\?]/g.test(b)||b.replaceAll(",","").length%6!=0||b.length==0);console.log(b.replaceAll(",","").length%6!=0);let k=b.split(",");for(let N of k)(N.length/6>8||!(N.length>=6))&&(S=!1);if(S){let N=0;for(let B of k)N++,H.addItem(B.match(/.{1,6}/g));L="Successfully imported values.",T.palettes.push({undo(){for(let B=N;B>0;B--)H.removeItem(H.items.length-1)},redo(){for(let B of k)H.addItem(B.match(/.{1,6}/g))}})}let C=E(L);document.body.append(C),f.remove()}else n&&f.remove();return}if(f==document.querySelector(".settings-popover")){let y=m.closest(".yes"),n=m.closest(".no");if(y){let b=w.settings;b.lastColorAlgorithmIndex=f.querySelector("#algorithm").selectedIndex,b.cookiesOk=f.querySelector("#cookies-ok").checked,w.settings=b;let L="Changes saved.";f.remove();let S=E(L);document.body.append(S)}else if(n){let b="Changes discarded.";f.remove();let L=E(b);document.body.append(L)}return}if(f==document.querySelector(".cookies-confirmation")){let y=m.closest(".yes"),n=m.closest(".no");if(y){w.settings={cookiesOk:!0},f.remove();let b=E("Thanks, enjoy the site! :)");document.body.append(b)}else if(n){w.settings={cookiesOk:!1},f.remove();let b=E("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(b)}return}}}}function be(){window.addEventListener("scroll",o,!1),window.addEventListener("touchmove",o,{passive:!1});function o(t){q.deconstructURL(location.pathname).base=="create"&&(t.preventDefault(),t.stopPropagation())}window.ontouchstart=t=>{let e=t.targetTouches[0].target.closest(".create-page .swatch");if(e&&!t.targetTouches[0].target.closest(".options div")&&!t.targetTouches[0].target.closest(".options svg")){let s=function(f){if(f.preventDefault(),l){let r=f.touches[0].clientY-g;e.style.translate="0 "+r+"px";let a=e,y=x.slots.length-p-1;if(h=0,m=0,r>0)for(let n=0;n<y;n++)h=(n*2+1)*c,a=a.nextElementSibling,r>h?(m++,a.style.translate!="0 -100%"&&(a.style.translate="0 -100%")):a.style.translate=="0 -100%"&&(a.style.translate="0 0");else for(let n=0;n<p;n++)h=(n*2+1)*c,a=a.previousElementSibling,-r>h?(m--,a.style.translate!="0 100%"&&(a.style.translate="0 100%")):a.style.translate=="0 100%"&&(a.style.translate="0 0")}else{let r=f.touches[0].clientX-u;e.style.translate=r+"px";let a=e,y=x.slots.length-p-1;if(h=0,m=0,r>0)for(let n=0;n<y;n++)h=(n*2+1)*i,a=a.nextElementSibling,r>h?(m++,a.style.translate!="-100%"&&(a.style.translate="-100%")):a.style.translate=="-100%"&&(a.style.translate="");else for(let n=0;n<p;n++)h=(n*2+1)*i,a=a.previousElementSibling,-r>h?(m--,a.style.translate!="100%"&&(a.style.translate="100%")):a.style.translate=="100%"&&(a.style.translate="")}},l=!1;document.body.classList.contains("vertical")&&(l=!0),x.plus.disabled=!0,x.plus.hide(),e.classList.add("is-dragging");let i=e.clientWidth/2,c=e.clientHeight/2,u=t.touches[0].clientX,g=t.touches[0].clientY,p=parseInt(e.getAttribute("data-color-index")),d=x.slots[p],m=0,h;window.addEventListener("touchmove",s,{passive:!1}),window.addEventListener("touchend",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("touchmove",s),e.style.translate=`${l?"0 ":""}${m*100}%`;function f(){e.removeEventListener("transitionend",f),e.removeEventListener("transitioncancel",f),e.classList.remove("is-released");let r=e;for(let n=0;n<m;n++)x.slots.splice(d.data,1),x.slots.splice(d.data+1,0,d),d.data++,r=r.nextElementSibling,x.slots[d.data-1].data--;for(let n=0;n>m;n--)x.slots.splice(d.data,1),x.slots.splice(d.data-1,0,d),d.data--,r=r.previousElementSibling,x.slots[d.data+1].data++;let a=e.cloneNode(!0);m>0?(r.after(a),e.remove()):m<0&&(r.before(a),e.remove()),e.style.translate="";let y=[];for(let n of x.slots){let b=document.getElementById(n.id);b.style.transition="transform 0s",b.style.translate="",setTimeout(()=>{b.style.transition=""},1),y.push(n.hex)}e=a,history.replaceState("","",y.join("-")),x.plus.disabled=!1,m&&T.create.push({undo(){x.plus.hide();let n=e=document.getElementById(d.id);for(let L=0;L<-m;L++){x.slots.splice(d.data,1),x.slots.splice(d.data+1,0,d),d.data++,n=n.nextElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S-1).toString())}for(let L=0;L>-m;L--){x.slots.splice(d.data,1),x.slots.splice(d.data-1,0,d),d.data--,n=n.previousElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S+1).toString())}a=e.cloneNode(!0),-m>0?(n.after(a),e.remove()):-m<0&&(n.before(a),e.remove());let b=[];for(let L of x.slots)b.push(L.hex);history.replaceState("","",b.join("-"))},redo(){x.plus.hide();let n=e=document.getElementById(d.id);for(let L=0;L<m;L++)x.slots.splice(d.data,1),x.slots.splice(d.data+1,0,d),d.data++,n=n.nextElementSibling,p=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(p-1).toString());for(let L=0;L>m;L--)x.slots.splice(d.data,1),x.slots.splice(d.data-1,0,d),d.data--,n=n.previousElementSibling,p=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(p+1).toString());a=e.cloneNode(!0),m>0?(n.after(a),e.remove()):m<0&&(n.before(a),e.remove());let b=[];for(let L of x.slots)b.push(L.hex);history.replaceState("","",b.join("-"))}})}e.addEventListener("transitionend",f),e.addEventListener("transitioncancel",f)},{once:!0})}},onmousedown=t=>{let e=t.target.closest(".create-page .swatch");if(e&&!t.target.closest(".options div")&&!t.target.closest(".options svg")){let s=function(f){if(l){let r=f.y-g;e.style.translate="0 "+r+"px";let a=e,y=x.slots.length-p-1;if(h=0,m=0,r>0)for(let n=0;n<y;n++)h=(n*2+1)*c,a=a.nextElementSibling,r>h?(m++,a.style.translate!="0px -100%"&&(a.style.translate="0px -100%")):a.style.translate=="0px -100%"&&(a.style.translate="");else for(let n=0;n<p;n++)h=(n*2+1)*c,a=a.previousElementSibling,-r>h?(m--,a.style.translate!="0px 100%"&&(a.style.translate="0px 100%")):a.style.translate=="0px 100%"&&(a.style.translate="")}else{let r=f.x-u;e.style.translate=r+"px";let a=e,y=x.slots.length-p-1;if(h=0,m=0,r>0)for(let n=0;n<y;n++)h=(n*2+1)*i,a=a.nextElementSibling,r>h?(m++,a.style.translate!="-100%"&&(a.style.translate="-100%")):a.style.translate=="-100%"&&(a.style.translate="");else for(let n=0;n<p;n++)h=(n*2+1)*i,a=a.previousElementSibling,-r>h?(m--,a.style.translate!="100%"&&(a.style.translate="100%")):a.style.translate=="100%"&&(a.style.translate="")}},l=!1;document.body.classList.contains("vertical")&&(l=!0),x.plus.disabled=!0,x.plus.hide(),e.classList.add("is-dragging");let i=e.clientWidth/2,c=e.clientHeight/2,u=t.x,g=t.y,p=parseInt(e.getAttribute("data-color-index")),d=x.slots[p],m=0,h;addEventListener("mousemove",s),addEventListener("mouseup",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("mousemove",s),e.style.translate=`${l?"0 ":""}${m*100}%`;function f(){e.removeEventListener("transitionend",f),e.removeEventListener("transitioncancel",f),e.classList.remove("is-released");let r=e;for(let n=0;n<m;n++)x.slots.splice(d.data,1),x.slots.splice(d.data+1,0,d),d.data++,r=r.nextElementSibling,x.slots[d.data-1].data--;for(let n=0;n>m;n--)x.slots.splice(d.data,1),x.slots.splice(d.data-1,0,d),d.data--,r=r.previousElementSibling,x.slots[d.data+1].data++;let a=e.cloneNode(!0);m>0?(r.after(a),e.remove()):m<0&&(r.before(a),e.remove()),e.style.translate="";let y=[];for(let n of x.slots){let b=document.getElementById(n.id);b.style.transition="transform 0s",b.style.translate="",setTimeout(()=>{b.style.transition=""},1),y.push(n.hex)}e=a,history.replaceState("","",y.join("-")),x.plus.disabled=!1,m&&T.create.push({undo(){x.plus.hide();let n=e=document.getElementById(d.id);for(let L=0;L<-m;L++){x.slots.splice(d.data,1),x.slots.splice(d.data+1,0,d),d.data++,n=n.nextElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S-1).toString())}for(let L=0;L>-m;L--){x.slots.splice(d.data,1),x.slots.splice(d.data-1,0,d),d.data--,n=n.previousElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S+1).toString())}a=e.cloneNode(!0),-m>0?(n.after(a),e.remove()):-m<0&&(n.before(a),e.remove());let b=[];for(let L of x.slots)b.push(L.hex);history.replaceState("","",b.join("-"))},redo(){x.plus.hide();let n=e=document.getElementById(d.id);for(let L=0;L<m;L++)x.slots.splice(d.data,1),x.slots.splice(d.data+1,0,d),d.data++,n=n.nextElementSibling,p=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(p-1).toString());for(let L=0;L>m;L--)x.slots.splice(d.data,1),x.slots.splice(d.data-1,0,d),d.data--,n=n.previousElementSibling,p=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(p+1).toString());a=e.cloneNode(!0),m>0?(n.after(a),e.remove()):m<0&&(n.before(a),e.remove());let b=[];for(let L of x.slots)b.push(L.hex);history.replaceState("","",b.join("-"))}})}e.addEventListener("transitionend",f),e.addEventListener("transitioncancel",f)},{once:!0}),ondragstart=()=>!1}}}let xe=document.querySelector(".main-nav");function Le(){onkeydown=o=>{var t,e,s,l;if(o.metaKey||o.ctrlKey){let{base:i}=q.deconstructURL(location.pathname,!0);if(o.key==="z"||o.key==="Z")if(i==="palettes"){o.shiftKey?T.palettes.redo():T.palettes.undo();return}else{o.shiftKey?T.create.redo():T.create.undo();return}if(i==="create"){let c=parseInt(o.key);if(c>=0&&c<=9){o.preventDefault();let u=x.slots[c-1]||x.slots[x.slots.length-1],g=document.getElementById(u.id);T.create.push({undo(){let p=x.slots[c-1]||x.slots[x.slots.length-1],d=document.getElementById(p.id);p.isLocked=!p.isLocked,d.querySelector(".lock").classList.toggle("locked")},redo(){let p=x.slots[c-1]||x.slots[x.slots.length-1],d=document.getElementById(p.id);p.isLocked=!p.isLocked,d.querySelector(".lock").classList.toggle("locked")}}),u.isLocked=!u.isLocked,g.querySelector(".lock").classList.toggle("locked");return}}}if(o.key===" "){let{base:i}=q.deconstructURL(location.pathname,!0);if(i==="create"){o.preventDefault();let c=[];for(let{hex:g}of x.slots)c.push(g);x.generate();let u=[];for(let{hex:g}of x.slots)u.push(g);history.replaceState("","","/polychrome/create/"+u.join("-")),T.create.push({undo:()=>{x.generate(c),history.replaceState("","","/polychrome/create/"+c.join("-")),x.plus.hide()},redo:()=>{x.generate(u),history.replaceState("","","/polychrome/create/"+u.join("-"))}})}return}if(o.key==="Escape"){(t=document.querySelector(".confirmation-screen"))==null||t.remove(),xe.classList.remove("visible"),(e=document.querySelector(".overlay"))==null||e.remove();return}if(o.key==="y"||o.key==="Y"){((s=document.querySelector(".confirmation-screen"))==null?void 0:s.querySelector(".yes")).click();return}if(o.key==="n"||o.key==="N"){((l=document.querySelector(".confirmation-screen"))==null?void 0:l.querySelector(".no")).click();return}//! NOT DONE
if(o.key==="Enter"){let i=document.activeElement;console.log(i);return}o.key}}let x=new ye,H=new ue,q=new ge([["",D("Home",document.getElementById("landing-page"))],["palettes",D("Palettes",document.getElementById("palettes-page"),H)],["create",D("Create",document.getElementById("create-page"),x)],["404",D("404 Not Found",document.getElementById("not-found-page"))]]);q.routeToURL(location.pathname,!0);setTimeout(()=>{document.querySelector(":root").style.display="initial",window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")},200);onpopstate=()=>q.navigateTo(location.pathname,!0,!0);ve();be();Le();onmouseover=o=>{if(!x.plus.disabled){const t=o.target,e=t.closest(".swatch");if(e)if(t.closest(".detector")&&x.slots.length<8){const l=t.closest(".left");let i=parseInt(e.getAttribute("data-color-index"));l&&i--,x.plus.show(i)}else x.plus.hide()}};w.info.firstVisit&&K({message:"This site relies on local storage and cookies to save palettes.",value:"cookies"},[{message:"Sure, sounds good to me.",value:"yes",call(){w.info={firstVisit:!1},w.settings={cookiesOk:!0};let o=E("Thanks, enjoy the site! :)");document.body.append(o)}},{message:"No thanks, I don't want to save palettes.",value:"no",call(){w.info={firstVisit:!1},w.settings={cookiesOk:!1};for(let t=0;t<H.items.length;t++)H.removeItem(0);let o=E("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(o)}}]);onresize=()=>{window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")};(navigator.userAgent.includes("Android")||navigator.userAgent.includes("like Mac"))&&document.body.classList.add("mobile");
