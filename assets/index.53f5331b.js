var se=Object.defineProperty;var le=(i,t,e)=>t in i?se(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var j=(i,t,e)=>(le(i,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function e(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(l){if(l.ep)return;l.ep=!0;const o=e(l);fetch(l.href,o)}})();let U;const oe=new Uint8Array(16);function ie(){if(!U&&(U=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!U))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return U(oe)}const C=[];for(let i=0;i<256;++i)C.push((i+256).toString(16).slice(1));function ne(i,t=0){return(C[i[t+0]]+C[i[t+1]]+C[i[t+2]]+C[i[t+3]]+"-"+C[i[t+4]]+C[i[t+5]]+"-"+C[i[t+6]]+C[i[t+7]]+"-"+C[i[t+8]]+C[i[t+9]]+"-"+C[i[t+10]]+C[i[t+11]]+C[i[t+12]]+C[i[t+13]]+C[i[t+14]]+C[i[t+15]]).toLowerCase()}const ae=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),z={randomUUID:ae};function re(i,t,e){if(z.randomUUID&&!t&&!i)return z.randomUUID();i=i||{};const s=i.random||(i.rng||ie)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let l=0;l<16;++l)t[e+l]=s[l];return t}return ne(s)}const de=document.title;function k(i){let t=parseInt(i[0]+i[1],16)/255,e=parseInt(i[2]+i[3],16)/255,s=parseInt(i[4]+i[5],16)/255,l=Math.max(t,e,s),o=Math.min(t,e,s),n,a,c=t*.299+e*.587+s*.114,m=(l+o)/2;if(l==o)n=a=0;else{let d=l-o;switch(a=m>.5?d/(2-l-o):d/(l+o),l){case t:n=(e-s)/d+(e<s?6:0);break;case e:n=(s-t)/d+2;break;default:n=(t-e)/d+4;break}n=n*60}return{r:t,g:e,b:s,h:n,s:a,l:m,lum:c}}function I(i,t,e){i>360?i-=360:i<0&&(i+=360),t>1?t=1:t<0&&(t=0),e>1?e=1:e<0&&(e=0),t*=100;const s=t*Math.min(e,1-e)/100,l=o=>{const n=(o+i/30)%12,a=e-s*Math.max(Math.min(n-3,9-n,1),-1);return Math.round(255*a).toString(16).padStart(2,"0")};return`${l(0)}${l(8)}${l(4)}`}const w={get info(){let i=localStorage.getItem("info");return i?JSON.parse(i):(localStorage.setItem("info",JSON.stringify({firstVisit:!0})),this.info)},set info(i){let t=this.info;if(i)for(let[e,s]of Object.entries(i))t[e]=s;localStorage.setItem("info",JSON.stringify(t))},get settings(){let i=localStorage.getItem("settings");return i?JSON.parse(i):(localStorage.setItem("settings",JSON.stringify({lastColorAlgorithmIndex:2,cookiesOk:!1})),this.settings)},set settings(i){let t=this.settings;if(i)for(let[e,s]of Object.entries(i))t[e]=s;localStorage.setItem("settings",JSON.stringify(t))},savedPalettes:{get items(){let i=localStorage.getItem("saved-palettes"),t;if(i){let e=[];t=JSON.parse(i);for(let s of t)e.push(s);return e}else return[]},set items(i){localStorage.setItem("saved-palettes",JSON.stringify(i))},addItem(i){let t=this.items;t.push(i),this.items=t},removeItem(i){this.items.splice(i,1)}}},H={create:{cmds:[],cmdIndex:-1,push(i){this.cmds.splice(this.cmdIndex+1,1/0,i),this.cmdIndex=this.cmds.length-1},undo(){this.cmdIndex>-1&&(this.cmds[this.cmdIndex].undo(),this.cmdIndex--)},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}},palettes:{cmds:[],cmdIndex:-1,push(i){this.cmds.splice(this.cmdIndex+1,1/0,i),this.cmdIndex=this.cmds.length-1},undo(){if(this.cmdIndex>-1){let i=this.cmds[this.cmdIndex];this.cmdIndex--,i.undo()}},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}}},O=document.querySelector(".toolbar");function R(i,t,e){return s=>{document.title=de+" | "+i;const l=document.querySelector("main.visible");l&&l.classList.remove("visible");const o=t;if(o==null||o.classList.add("visible"),i=="Palettes")document.body.parentElement.style.overflow="",document.body.style.overflow="",O.classList.add("palettes"),O.classList.remove("create"),e.draw(w.savedPalettes.items);else if(i=="Create")if(document.body.parentElement.style.overflow="hidden",document.body.style.overflow="hidden",O.classList.add("create"),O.classList.remove("palettes"),s)e.generate(s);else{let n=e.generate(),a=[];for(let c of n)a.push(c.hex);history.replaceState("","",a.join("-"))}else O.classList.remove("palettes","create"),document.documentElement.style.overflow="",document.body.style.overflow=""}}const h=(i,t)=>Math.random()*(t-i)+i,ce=()=>btoa(parseInt(re(),16).toString(36)).replaceAll("=","");function E(i,t){const e=document.createElement("div");e.classList.add("tooltip","appearing");const s=document.createElement("h2");return s.innerHTML=i,e.append(s),t!=null&&t.pos?(e.style.left=t.pos[0]+"px",e.style.top=t.pos[1]+"px"):e.classList.add("centered"),setTimeout(()=>{t&&t.pos&&(e.clientWidth+t.pos[0]>document.body.clientWidth?(e.style.translate="-100%",e.clientHeight+t.pos[1]>document.body.clientHeight&&(e.style.translate="-100 -100%")):e.clientHeight+t.pos[1]>document.body.clientHeight&&(e.style.translate="0 -100%"))},0),e.addEventListener("animationend",()=>{e.classList.remove("appearing"),setTimeout(()=>{e.classList.add("disappearing"),e.addEventListener("animationend",()=>{e.remove()},{once:!0})},(t==null?void 0:t.duration)||1e3)},{once:!0}),e}function J(i,t){let e=document.createElement("div");e.classList.add("popover");let s=document.createElement("div");if(s.classList.add("clear-overlay"),(t==null?void 0:t.type)=="menu"){let l=document.createElement("ul");l.classList.add("list");for(let o of i){let n=document.createElement("div");n.id=o.id,n.classList.add("choice"),o.content&&(n.innerHTML=o.content),l.append(n)}e.append(l,s)}else if((t==null?void 0:t.type)=="color-picker"){let l=document.createElement("canvas");l.id="color-picker",l.classList.add("color-picker");let o=l.getContext("2d"),{h:n}=k(t.hex),a=`hsl(${n}, 100%, 50%)`,c=o.createLinearGradient(0,0,o.canvas.width,0);c.addColorStop(0,"#fff"),c.addColorStop(1,a),o.fillStyle=c,o.fillRect(0,0,o.canvas.width,o.canvas.height);let m=o.createLinearGradient(0,0,0,o.canvas.height);m.addColorStop(0,"rgba(0,0,0,0)"),m.addColorStop(1,"black"),o.fillStyle=m,o.fillRect(0,0,o.canvas.width,o.canvas.height);let d=document.createElement("div");d.classList.add("color-picker-cursor");let p=document.createElement("input");p.setAttribute("min","0"),p.setAttribute("max","360"),p.setAttribute("type","range");let y=document.createElement("div");y.classList.add("huebar");let v=document.createElement("div");v.classList.add("huebar-cursor");let f=document.createElement("input");f.setAttribute("min","0"),f.setAttribute("max","360"),f.setAttribute("type","range"),l.append(d,p),y.append(v,f),e.append(l,y)}return e}function K(i,t){let e=document.createElement("div");e.classList.add("confirmation-screen",i.value+"-confirmation");let s=document.createElement("div");s.classList.add("box");let l=document.createElement("h2");l.innerHTML=i.message;let o=document.createElement("ul"),n=document.createElement("div");n.classList.add("overlay"),s.append(l,o),e.append(s,n);for(let{message:a,value:c,call:m}of t){let d=document.createElement("li");d.innerHTML=a,d.classList.add(c),o.append(d),d.addEventListener("click",()=>{m&&m(),e.remove()},{once:!0})}document.body.append(e)}function W(i,t){let e=document.createElement("div");e.classList.add("confirmation-screen",t);let s=document.createElement("h2");s.innerHTML=i;let l=document.createElement("textarea"),o=document.createElement("div");o.classList.add("overlay");let n=document.createElement("div");n.classList.add("box");let a=document.createElement("ul"),c=document.createElement("li");c.classList.add("yes"),c.innerHTML="Confirm";let m=document.createElement("li");return m.innerHTML="Cancel",m.classList.add("no"),a.append(m,c),n.append(s,l,a),e.append(n,o),e}function me(){let i=document.createElement("div");i.classList.add("confirmation-screen","settings-popover");let t=document.createElement("div");t.classList.add("box");let e=document.createElement("div");e.classList.add("overlay");let s=document.createElement("h2");s.innerText="Settings";let l=document.createElement("ul");l.classList.add("options");let o=document.createElement("li"),n=document.createElement("label");n.innerText="Algorithm";let a=document.createElement("select");a.id="algorithm";let c=document.createElement("option");c.value="random",c.innerText="Random Algorithm";let m=document.createElement("option");m.value="monochromatic",m.innerText="Monochromatic";let d=document.createElement("option");d.value="analogous",d.innerText="Analogous";let p=document.createElement("option");p.value="complementary",p.innerText="Complementary";let y=document.createElement("option");y.value="split-complementary",y.innerText="Split Complementary";let v=document.createElement("option");v.value="triadic",v.innerText="Triadic";let f=document.createElement("option");f.value="tetradic",f.innerText="Tetradic";let u=document.createElement("option");u.value="square",u.innerText="Square";let x=document.createElement("option");x.value="randomize",x.innerText="Randomize Colors";let r=document.createElement("ul");r.classList.add("confirmation");let b=document.createElement("li");b.classList.add("yes"),b.innerText="Confirm";let L=document.createElement("li");L.classList.add("no"),L.innerText="Cancel",r.append(L,b),a.append(x,m,d,p,y,v,f,u,c),a.selectedIndex=w.settings.lastColorAlgorithmIndex;let S=document.createElement("li");S.classList.add("horizontal");let T=document.createElement("div"),M=document.createElement("label");M.innerText="Cookies";let Y=document.createElement("label");Y.innerText="That's fine!",Y.setAttribute("for","cookies-ok");let D=document.createElement("label");D.innerText="No thanks.",D.setAttribute("for","cookies-not-ok");let V=document.createElement("div"),$=document.createElement("div");V.classList.add("op"),$.classList.add("op");let N=document.createElement("input");N.id="cookies-ok",N.value="cookies-ok",N.setAttribute("type","radio"),N.classList.add("true");let B=document.createElement("input");return B.id="cookies-not-ok",B.value="cookies-not-ok",B.setAttribute("type","radio"),B.classList.add("false"),w.settings.cookiesOk?N.checked=!0:B.checked=!0,N.addEventListener("change",()=>{N.checked?B.checked=!1:B.checked=!0}),B.addEventListener("change",()=>{B.checked?N.checked=!1:N.checked=!0}),V.append(N,Y),$.append(B,D),S.append(M,T),T.append(V,$),o.append(n,a),l.append(o,S),t.append(s,l,r),i.append(e,t),i}let P=document.querySelector(".saved-palettes-wrapper");class ue{constructor(){j(this,"items",[]);this.items=w.savedPalettes.items}draw(t){for(;P.childElementCount>0;)P.lastChild.remove();if(t)for(let s=0;s<t.length;s++){let l=t[s],o=document.createElement("div");o.setAttribute("data-palette-index",s.toString()),o.classList.add("palette-container");let n=document.createElement("div");n.classList.add("palette");let a=document.createElement("div");a.classList.add("options");let c=document.createElement("div");c.classList.add("more");let m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.setAttribute("viewBox","0 0 100 100");let d=document.createElementNS("http://www.w3.org/2000/svg","use");d.setAttribute("href","#icon-more-horizontal");for(let p=0;p<l.length;p++){let y=l[p],{lum:v}=k(y),f=document.createElement("div");f.setAttribute("data-color-index",p.toString()),f.classList.add("swatch"),f.style.backgroundColor="#"+y,v<.5&&f.classList.add("isLight");let u=document.createElement("h2");u.innerHTML="#"+y,u.classList.add("text"),f.append(u),n.append(f)}m.append(d),c.append(m),a.append(c),o.append(n,a),P.append(o)}let e=document.querySelector(".palettes-page .when-empty");P.childElementCount==0?e.classList.remove("hidden"):e.classList.add("hidden")}addItem(t,e){typeof e=="number"?this.items.splice(e,0,t):this.items.push(t),w.savedPalettes.items=this.items,this.draw(this.items)}removeItem(t){this.items.splice(t,1),w.savedPalettes.items=this.items,this.draw(this.items)}}function F(i){if(i.algorithm.details=="slot"){let t=[];for(let e=0;e<6;e++)t.push(Math.round(h(0,15)).toString(16));return t.join("")}else for(let t of i.slots)if(!t.isLocked){let e=[];for(let s=0;s<6;s++)e.push(Math.round(h(0,15)).toString(16));t.hex=e.join(""),t.sync()}}function X(i,t){if(i.algorithm.details=="slot")if(Math.random()>.5){let e=0,s=0,l=0,o=i.slots[t-2],n=i.slots[t-1],a=i.slots[t],c=i.slots[t+1];if(a){let{h:m,s:d,l:p}=k(a.hex);if(e=m,n){let{s:y,l:v}=k(n.hex);s=d-(d-y)/2,l=p-(p-v)/2}else if(c){let{s:y,l:v}=k(c.hex);s=d-(y-d)/2,l=p-(v-p)/2}else s=d*h(.7,1.3),l=p*h(.7,1.3)}else if(n){let{h:m,s:d,l:p}=k(n.hex);if(e=m,o){let{s:y,l:v}=k(o.hex);s=d+(d-y)/2,l=p+(p-v)/2}else s=d*h(.7,1.3),l=p*h(.7,1.3)}else s=h(.2,1),l=h(.1,.9);return s*=h(.95,1.05),l*=h(.95,1.05),I(e,s,l)}else{let e,s,l,o,n,a,c;for(let{hex:m}of i.slots){let{h:d,s:p,l:y}=k(m);typeof e!="number"&&(e=d),(typeof l!="number"||p>l)&&(l=p),(typeof s!="number"||p<s)&&(s=p),(typeof n!="number"||y>n)&&(n=y),(typeof o!="number"||y<o)&&(o=y)}return a=h(s,l)*h(.95,1.05),c=h(o,n)*h(.95,1.05),I(e,a,c)}else if(i.algorithm.details=="increment"||Math.random()>.5){let e=[],s=h(0,360),l=0,o=0,n=0,a=0,c=0,m=0,d=0,p=0;for(let y of i.slots)y.isLocked||e.push(y);for(let y=0;y<e.length;y++)if(y==0){let v=i.slots[0];l=h(.1,1),o=h(.1,.9),v.hex=I(s,l,o),v.sync(),n=l,a=o,n<.4?c=h(.7,1):n>.6?c=h(.1,.3):n>.5?c=h(.1,.2):c=h(.8,.9),a<.4?m=h(.7,1):a>.6?m=h(.1,.3):a>.5?m=h(.1,.2):m=h(.8,.9),d=(c-n)/i.slots.length,p=(m-a)/i.slots.length}else{let v=i.slots[y];l=n+d*y,o=a+p*y,v.hex=I(s,l,o),v.sync()}}else{let e=h(0,360),s,l,o;for(let n of i.slots)n.isLocked||(s=h(.2,1),l=h(.2,.8),typeof o!="number"&&(e=o=h(0,360)),n.hex=I(e,s,l),n.sync())}}function G(i,t){if(i.algorithm.details=="slot")if(Math.random()>.5){let e=0,s=0,l=0,o=i.slots[t-2],n=i.slots[t-1],a=i.slots[t],c=i.slots[t+1];if(a){let{h:m,s:d,l:p}=k(a.hex);if(n){let{h:y,s:v,l:f}=k(n.hex),u=m-y;u>180?u=m-y-360:u<-180&&(u=m-y+360),e=m-u/2,s=d-(d-v)/2,l=p-(p-f)/2}else if(c){let{h:y,s:v,l:f}=k(c.hex),u=y-m;u>180?u=y-m-360:u<-180&&(u=y-m+360),e=m-u/2,s=d-(v-d)/2,l=p-(f-p)/2}else e=m*h(.7,1.3),s=d*h(.7,1.3),l=p*h(.7,1.3)}else if(n){let{h:m,s:d,l:p}=k(n.hex);if(o){let{h:y,s:v,l:f}=k(o.hex),u=m-y;u>180?u=m-y-360:u<-180&&(u=m-y+360),e=m+u/2,s=d+(d-v)/2,l=p+(p-f)/2}else e=m*h(.7,1.3),s=d*h(.7,1.3),l=p*h(.7,1.3)}else e=h(0,360),s=h(.2,1),l=h(.1,.9);return e*=h(.95,1.05),s*=h(.95,1.05),l*=h(.95,1.05),I(e,s,l)}else{let e,s,l,o,n,a,c,m,d,p,y=Math.random();for(let{hex:v}of i.slots){let{h:f,s:u,l:x}=k(v);if(typeof e!="number")e=f;else if(typeof s!="number"){let r=e,b=r-f;b>180?r-=360:b<-180&&(r+=360),b=r-f,(b<-25||b>25)&&(s=f)}else if(typeof l!="number"){let r=e,b=s,L=r-f,S=b-f;L>180?r-=360:L<-180&&(r+=360),S>180?b-=360:S<-180&&(b+=360),L=r-f,S=b-f,(L>25||L<-25)&&(S>25||S<-25)&&(l=f)}(typeof n!="number"||u>n)&&(n=u),(typeof o!="number"||u<o)&&(o=u),(typeof c!="number"||x>c)&&(c=x),(typeof a!="number"||x<a)&&(a=x)}return l&&y<.333?m=l:s&&y>.666?m=s:m=e,d=h(o,n)*h(.95,1.05),p=h(a,c)*h(.95,1.05),I(m,d,p)}else if(i.algorithm.details=="increment"||Math.random()>.5){let e=0,s=0,l=0,o=0,n=0,a=0,c=0,m=0,d=0,p=0,y=0,v=0;for(let f=0;f<i.slots.length;f++){let u=i.slots[f];if(!u.isLocked)if(!o)e=o=h(0,360),s=n=h(.1,1),l=a=h(.1,.9),u.hex=I(e,s,l),u.sync(),o=e,n=s,a=l,Math.random()>.5?c=e+h(90,120):c=e-h(75,90),n<.4?m=h(.7,1):n>.6?m=h(.1,.3):n>.5?m=h(.1,.2):m=h(.8,.9),a<.4?d=h(.7,1):a>.6?d=h(.1,.3):a>.5?d=h(.1,.2):d=h(.8,.9),p=(c-o)/i.slots.length,y=(m-n)/i.slots.length,v=(d-a)/i.slots.length;else{let x=i.slots[f];e=o+p*f,s=n+y*f,l=a+v*f,x.hex=I(e,s,l),x.sync()}}}else{let e,s,l,o,n,a;for(let c of i.slots)if(!c.isLocked){if(s=h(.2,1),l=h(.2,.8),typeof o!="number")e=o=h(0,360);else if(typeof n!="number")e=n=o+30*h(.975,1.025);else if(typeof a!="number")e=a=o-30*h(.975,1.025);else{let m=Math.random();m<.333?e=o:m>.666?e=n:e=a}c.hex=I(e,s,l),c.sync()}}}function Z(i){if(i.algorithm.details=="slot"){let t,e,s,l,o,n,a,c,m,d=Math.random();for(let{hex:p}of i.slots){let{h:y,s:v,l:f}=k(p);if(typeof t!="number")t=y;else if(typeof e!="number"){let u=t,x=u-y;x>180?u-=360:x<-180&&(u+=360),x=u-y,(x<-90||x>90)&&(e=y)}(typeof l!="number"||v>l)&&(l=v),(typeof s!="number"||v<s)&&(s=v),(typeof n!="number"||f>n)&&(n=f),(typeof o!="number"||f<o)&&(o=f)}return d>.5&&e?a=e*h(.925,1.025):a=t*h(.925,1.025),c=h(s,l)*h(.95,1.05),m=h(o,n)*h(.95,1.05),I(a,c,m)}else{let t,e,s,l,o;for(let n of i.slots)n.isLocked||(e=h(.2,1),s=h(.2,.8),typeof l!="number"?t=l=h(0,360):typeof o!="number"?t=o=l+150*h(.975,1.025):Math.random()<.5?t=l*h(.975,1.025):t=o*h(.975,1.025),n.hex=I(t,e,s),n.sync())}}function Q(i){if(i.algorithm.details=="slot"){let t,e,s,l,o,n,a,c,m,d,p=Math.random();for(let{hex:y}of i.slots){let{h:v,s:f,l:u}=k(y);if(typeof t!="number")t=v;else if(typeof e!="number"){let x=t,r=x-v;r>180?x-=360:r<-180&&(x+=360),r=x-v,(r<-30||r>30)&&(e=v)}else if(typeof s!="number"){let x=t,r=e,b=x-v,L=r-v;b>180?x-=360:b<-180&&(x+=360),L>180?r-=360:L<-180&&(r+=360),b=x-v,L=r-v,(b>30||b<-30)&&(L>30||L<-30)&&(s=v)}(typeof o!="number"||f>o)&&(o=f),(typeof l!="number"||f<l)&&(l=f),(typeof a!="number"||u>a)&&(a=u),(typeof n!="number"||u<n)&&(n=u)}return p<.333&&s?c=s:p>.666&&e?c=e:c=t,m=h(l,o)*h(.95,1.05),d=h(n,a)*h(.95,1.05),I(c,m,d)}else{let t,e,s,l,o,n;for(let a of i.slots)if(!a.isLocked){if(e=h(.2,1),s=h(.2,.8),typeof l!="number")t=l=h(0,360);else if(typeof o!="number")t=o=l+150*h(.975,1.025);else if(typeof n!="number")t=n=l-150*h(.975,1.025);else{let c=Math.random();c<.333?t=l*h(.975,1.025):c>.666?t=o*h(.975,1.025):t=n*h(.975,1.025)}a.hex=I(t,e,s),a.sync()}}}function _(i){if(i.algorithm.details=="slot"){let t,e,s,l,o,n,a,c,m,d,p=Math.random();for(let{hex:y}of i.slots){let{h:v,s:f,l:u}=k(y);if(typeof t!="number")t=v;else if(typeof e!="number"){let x=t,r=x-v;r>180?x-=360:r<-180&&(x+=360),r=x-v,(r<-90||r>90)&&(e=v)}else if(typeof s!="number"){let x=t,r=e,b=x-v,L=r-v;b>180?x-=360:b<-180&&(x+=360),L>180?r-=360:L<-180&&(r+=360),b=x-v,L=r-v,(b>90||b<-90)&&(L>90||L<-90)&&(s=v)}(typeof o!="number"||f>o)&&(o=f),(typeof l!="number"||f<l)&&(l=f),(typeof a!="number"||u>a)&&(a=u),(typeof n!="number"||u<n)&&(n=u)}return p<.333?c=t:p>.666?c=e:c=s,m=h(l,o)*h(.95,1.05),d=h(n,a)*h(.95,1.05),I(c,m,d)}else{let t,e,s,l,o,n;for(let a of i.slots)if(!a.isLocked){if(e=h(.2,1),s=h(.2,.8),typeof l!="number")t=l=h(0,360);else if(typeof o!="number")t=o=l+120;else if(typeof n!="number")t=n=l-120;else{let c=Math.random();c<.333?t=l:c<.666?t=o:t=n}a.hex=I(t,e,s),a.sync()}}}function ee(i){if(i.algorithm.details=="slot"){let t,e,s,l,o,n,a,c,m,d,p,y=Math.random();for(let{hex:v}of i.slots){let{h:f,s:u,l:x}=k(v);if(typeof t!="number")t=f;else if(typeof e!="number"){let r=t,b=r-f;b>180?r-=360:b<-180&&(r+=360),b=r-f,(b<-45||b>45)&&(e=f)}else if(typeof s!="number"){let r=t,b=e,L=r-f,S=b-f;L>180?r-=360:L<-180&&(r+=360),S>180?b-=360:S<-180&&(b+=360),L=r-f,S=b-f,(L>45||L<-45)&&(S>45||S<-45)&&(s=f)}else if(typeof l!="number"){let r=t,b=e,L=s,S=r-f,T=b-f,M=L-f;S>180?r-=360:S<-180&&(r+=360),T>180?b-=360:T<-180&&(b+=360),M>180?L-=360:M<-180&&(L+=360),S=r-f,T=b-f,M=L-f,(S>45||S<-45)&&(T>45||T<-45)&&(M>45||M<-45)&&(l=f)}(typeof n!="number"||u>n)&&(n=u),(typeof o!="number"||u<o)&&(o=u),(typeof c!="number"||x>c)&&(c=x),(typeof a!="number"||x<a)&&(a=x)}return typeof l=="number"&&y<.25?m=l:typeof s=="number"&&y<.5?m=s:typeof e=="number"&&y<.75?m=e:m=t,d=h(o,n)*h(.95,1.05),p=h(a,c)*h(.95,1.05),I(m,d,p)}else{let t,e,s,l,o,n,a;for(let c of i.slots)if(!c.isLocked){if(e=h(.2,1),s=h(.2,.8),typeof l!="number")t=l=h(0,360);else if(typeof o!="number")t=o=l+60;else if(typeof n!="number")t=n=l-120;else if(typeof a!="number")t=a=l+180;else{let m=Math.random();m<.25?t=l:m>.5?t=o:m>.75?t=n:t=a}c.hex=I(t,e,s),c.sync()}}}function te(i){if(i.algorithm.details=="slot"){let t,e,s,l,o,n,a,c,m,d,p,y=Math.random();for(let{hex:v}of i.slots){let{h:f,s:u,l:x}=k(v);if(typeof t!="number")t=f;else if(typeof e!="number"){let r=t,b=r-f;b>180?r-=360:b<-180&&(r+=360),b=r-f,(b<-85||b>85)&&(e=f)}else if(typeof s!="number"){let r=t,b=e,L=r-f,S=b-f;L>180?r-=360:L<-180&&(r+=360),S>180?b-=360:S<-180&&(b+=360),L=r-f,S=b-f,(L<-85||L>85)&&(S<-85||S>85)&&(s=f)}else if(typeof l!="number"){let r=t,b=e,L=s,S=r-f,T=b-f,M=L-f;S>180?r-=360:S<-180&&(r+=360),T>180?b-=360:T<-180&&(b+=360),M>180?L-=360:M<-180&&(L+=360),S=r-f,T=b-f,M=L-f,(S<-85||S>85&&T<-85||T>85&&(M<-85||M>85))&&(l=f)}(typeof n!="number"||u>n)&&(n=u),(typeof o!="number"||u<o)&&(o=u),(typeof c!="number"||x>c)&&(c=x),(typeof a!="number"||x<a)&&(a=x)}return typeof l=="number"&&y<.25?m=l:typeof s=="number"&&y<.5?m=s:typeof e=="number"&&y<.75?m=e:m=t,d=h(o,n)*h(.95,1.05),p=h(a,c)*h(.95,1.05),I(m,d,p)}else{let t,e,s,l,o,n,a;for(let c of i.slots)if(!c.isLocked){if(e=h(.2,1),s=h(.2,.8),typeof l!="number")t=l=h(0,360);else if(typeof o!="number")t=o=l+60;else if(typeof n!="number")t=n=l-120;else if(typeof a!="number")t=a=l+180;else{let m=Math.random();m<.25?t=l:m>.5?t=o:m>.75?t=n:t=a}c.hex=I(t,e,s),c.sync()}}}function fe(i,t){switch(Math.round(h(0,7))){case 0:return F(i);case 1:return X(i,t);case 2:default:return G(i,t);case 3:return Z(i);case 4:return Q(i);case 5:return _(i);case 6:return ee(i);case 7:return te(i)}}const pe=[F,X,G,Z,Q,_,ee,te,fe];let he=document.getElementById("palette");class ye{constructor(){j(this,"slots",[]);j(this,"plus",{palette:this,disabled:!1,active:!1,show(t){if(!this.active){let e=this.render(t.toString()),s=this.palette.slots[t];s?document.getElementById(s.id).after(e):(s=this.palette.slots[t+1],document.getElementById(s.id).before(e)),this.active=!0}},hide(){var t;this.active&&((t=document.getElementById("plus-button"))==null||t.parentElement.parentElement.remove(),this.active=!1)},render(t){let e=document.createElement("div");e.classList.add("plus-container");let s=document.createElement("div");s.classList.add("circle");let l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("data-color-index",t),l.setAttribute("viewBox","0 0 100 100"),l.id="plus-button";let o=document.createElementNS("http://www.w3.org/2000/svg","use");return o.setAttribute("href","#icon-plus-button"),o.setAttribute("viewBox","0 0 100 100"),l.append(o),s.append(l),e.append(s),e}});j(this,"algorithm",{list:pe,get(t){t=="slot"?this.details="slot":this.details="";let e=w.settings.lastColorAlgorithmIndex;return e||(w.settings={lastColorAlgorithmIndex:1}),this.list[e]},details:"",direction:{h:0,s:0,l:0},preference:{h:void 0,s:void 0,l:void 0}})}removeSlot(t,e){e||(e={animations:!0});let s=t.data+1;for(let o=s;o<this.slots.length;o++)this.slots[o].data--;let l=document.getElementById(t.id);if(this.slots.splice(t.data,1),e.animations==!0){let o=function(){l.remove(),l.removeEventListener("animationend",o),l.removeEventListener("animationcancel",o)};l.classList.add("deinit"),l.addEventListener("animationend",o),l.addEventListener("animationcancel",o)}else l.remove();return t}addSlot(t,e){var n;let s={palette:this,hex:t.hex,isLocked:typeof t.isLocked=="boolean"?t.isLocked:!1,id:t.id||ce(),index:typeof t.index!="number"?this.slots.length:t.index,get data(){var c;let a=parseInt((c=document.getElementById(this.id))==null?void 0:c.getAttribute("data-color-index"));return typeof a=="number"?a:this.data=this.index},set data(a){var c;(c=document.getElementById(this.id))==null||c.setAttribute("data-color-index",a.toString()),this.index=a},generate(){this.hex=this.palette.algorithm.get("slot")(this.palette,this.index),this.sync()},sync(){let a=document.getElementById(this.id);if(this.hex){let{lum:c}=k(this.hex);c<.5?a.classList.add("isLight"):a.classList.remove("isLight"),a.style.backgroundColor="#"+this.hex,a.getElementsByClassName("hex")[0].innerHTML="#"+this.hex}}};s.hex||(s.hex=this.algorithm.get("slot")(this,s.index));let l=this.createSwatch(s,e),o=document.getElementById((n=this.slots[s.index-1])==null?void 0:n.id);o?o.after(l):he.prepend(l),s.data=s.index,this.slots.splice(s.index,0,s);for(let a=s.index+1;a<this.slots.length;a++)this.slots[a].data++;return s}createSwatch(t,e){e||(e={animations:!0});let s=document.createElement("div");if(s.classList.add("swatch"),s.setAttribute("data-color-index",t.data),s.id=t.id,t.hex){s.style.backgroundColor="#"+t.hex;let{lum:x}=k(t.hex);x<.5?s.classList.add("isLight"):s.classList.remove("isLight")}if(e.animations==!0){let x=function(){s.classList.remove("init"),s.removeEventListener("animationend",x),s.removeEventListener("animationcancel",x)};s.classList.add("init"),s.addEventListener("animationend",x),s.addEventListener("animationcancel",x)}let l=document.createElement("div");l.classList.add("options");let o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.classList.add("icon","x"),o.setAttribute("viewBox","0 0 100 100");let n=document.createElementNS("http://www.w3.org/2000/svg","use");n.setAttribute("href","#icon-x");let a=document.createElementNS("http://www.w3.org/2000/svg","use");a.setAttribute("viewBox","0 0 100 100"),a.setAttribute("href","#icon-lock-body");let c=document.createElementNS("http://www.w3.org/2000/svg","use");c.setAttribute("viewBox","0 0 100 100"),c.setAttribute("href","#icon-lock-arm");let m=document.createElementNS("http://www.w3.org/2000/svg","svg");m.setAttribute("viewBox","0 0 100 100"),m.classList.add("icon","lock"),t.isLocked&&m.classList.add("locked");let d=document.createElement("div");d.classList.add("info");let p=document.createElement("h2");p.classList.add("hex"),p.innerHTML="#"+t.hex;let y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.classList.add("icon"),y.setAttribute("viewBox","0 0 100 100");let v=document.createElementNS("http://www.w3.org/2000/svg","use");v.setAttribute("href","#icon-copy");let f=document.createElement("div");f.classList.add("detector","left");let u=document.createElement("div");return u.classList.add("detector"),o.append(n),m.append(c,a),y.append(v),d.append(p,y),l.append(o,m,d),s.append(l,f,u),s}generate(t){let e={animations:!1};if(t)if(t.length==this.slots.length)for(let s=0;s<t.length;s++)this.slots[s].hex=t[s],this.slots[s].sync();else{for(let s of this.slots)document.getElementById(s.id).remove();this.slots=[];for(let s=0;s<t.length;s++)this.addSlot({index:s,hex:t[s]},e)}else if(this.slots.length>0)this.algorithm.get()(this);else{for(let s=0;s<5;s++)this.addSlot({},e);this.algorithm.get()(this)}return this.slots}}class ge{constructor(t){j(this,"routes");j(this,"loadContent",t=>{if(t){let{base:e,ids:s}=t;typeof e!="string"&&(e=t);let l=this.routes.get(e);s?l(s):l()}else this.routes.get("404")()});j(this,"routeToURL",(t,e)=>{let s=this.deconstructURL(t,e);console.log(s);let{base:l,ids:o}=s;this.routes.has(l)?l==="create"?o?this.idsAreValid(o)?this.loadContent(s):this.loadContent():this.loadContent(s):this.loadContent(s):this.loadContent()});j(this,"navigateTo",(t,e,s)=>{e=e||!1,e?history.replaceState("","",t):history.pushState("","","/polychrome"+t),this.routeToURL(t,s)});this.routes=new Map(t)}deconstructURL(t,e){let s=t.replace(/^\//,"").replace(/\/$/,"").split("/");return e?{site:s[0],base:s[1]||"",ids:s[2]?s[2].split("-"):null}:{base:s[0],ids:s[1]?s[1].split("-"):null}}idsAreValid(t){for(let e of t)if(!/^[a-f0-9]{6}$/.test(e)||t.length>8)return!1;return!0}}function ve(){window.ontouchstart=e=>{var s;if(e.target.closest("#nav-button"))if(i.classList.toggle("visible"),i.classList.contains("visible")){let l=document.createElement("div");l.classList.add("overlay"),t.append(l),document.body.style.overflowY="hidden",g.plus.hide(),l.addEventListener("click",()=>{l.remove(),i.classList.remove("visible"),document.body.style.overflowY=""},{once:!0}),document.body.style.overflowY="hidden"}else(s=t.querySelector(".overlay"))==null||s.remove(),document.body.style.overflowY=""},document.querySelector("#palette").onclick=async e=>{let s=e.target,l=s.closest(".plus-container svg");if(l){const{ids:n}=q.deconstructURL(location.pathname),a=parseInt(l.getAttribute("data-color-index"));let c=g.addSlot({index:a+1});n.splice(a+1,0,c.hex),history.replaceState("","",n.join("-")),g.plus.hide(),H.create.push({undo(){g.removeSlot(c,{animations:!1}),n.splice(a+1,1),history.replaceState("","",n.join("-"))},redo(){g.addSlot(c,{animations:!1}),n.splice(a+1,0,c.hex),history.replaceState("","",n.join("-"))}}),g.slots.length==8&&g.plus.hide();return}let o=s.closest(".lock");if(o){let n=s.closest(".swatch"),a=parseInt(n.getAttribute("data-color-index")),c=g.slots[a];c.isLocked=!c.isLocked,o.classList.toggle("locked"),H.create.push({undo(){let m=g.slots[a],d=document.getElementById(m.id);m.isLocked=!m.isLocked,d.querySelector(".lock").classList.toggle("locked")},redo(){let m=g.slots[a],d=document.getElementById(m.id);m.isLocked=!m.isLocked,d.querySelector(".lock").classList.toggle("locked")}});return}if(s.closest(".x")){let n=s.closest(".swatch"),a=g.slots[parseInt(n.getAttribute("data-color-index"))],{ids:c}=q.deconstructURL(location.pathname);g.removeSlot(a),c.splice(a.data,1),history.replaceState("","",c.join("-")),H.create.push({undo(){g.addSlot(a,{animations:!1}),c.splice(a.data,0,a.hex),history.replaceState("","",c.join("-"))},redo(){g.removeSlot(a,{animations:!1}),c.splice(a.data,1),history.replaceState("","",c.join("-"))}});return}if(s.closest(".info")){let n=s.closest(".swatch"),a=g.slots[parseInt(n.getAttribute("data-color-index"))];if(s.closest(".hex")){let c=J([{id:""}],{type:"color-picker",hex:a.hex});n.append(c);return}if(s.closest(".icon")){await navigator.clipboard.writeText(a.hex).then(()=>{let c=E("Copied hex to clipboard!",{pos:[e.x,e.y]});c.classList.add("at-mouse-pos"),document.body.append(c)},()=>{let c=E("Copy to clipboard failed.",{pos:[e.x,e.y]});c.classList.add("at-mouse-pos"),document.body.append(c)});return}}},document.querySelector(".palettes-page .saved-palettes-wrapper").onclick=async e=>{let s=e.target,l=s.closest(".swatch");if(l){let n=l.parentElement.parentElement;await navigator.clipboard.writeText(A.items[parseInt(n.getAttribute("data-palette-index"))][parseInt(l.getAttribute("data-color-index"))]).then(()=>{let a=E("Copied hex to clipboard!",{pos:[e.x,e.y]});a.classList.add("at-mouse-pos"),document.body.append(a)},()=>{let a=E("Copy to clipboard failed.",{pos:[e.x,e.y]});a.classList.add("at-mouse-pos"),document.body.append(a)});return}if(s.closest(".clear-overlay")){s.closest(".popover").remove();return}if(s.closest("#palettes-open")){q.navigateTo("/create/"+w.savedPalettes.items[parseInt(s.closest(".palette-container").getAttribute("data-palette-index"))].join("-"));return}if(s.closest("#palettes-copy")){await navigator.clipboard.writeText(A.items[parseInt(s.closest(".palette-container").getAttribute("data-palette-index"))].join(`
`)).then(()=>{let n=E("Copied hex to clipboard!",{pos:[e.x,e.y]});n.classList.add("at-mouse-pos"),document.body.append(n)},()=>{let n=E("Copy to clipboard failed.",{pos:[e.x,e.y]});n.classList.add("at-mouse-pos"),document.body.append(n)});return}if(s.closest("#palettes-remove")){let n=parseInt(s.closest(".palette-container").getAttribute("data-palette-index")),a=A.items[n],c={undo(){A.addItem(a,n)},redo(){A.removeItem(n)}};H.palettes.push(c),A.removeItem(n);let m=E("Removed palette.");document.body.append(m);return}let o=s.closest(".more");if(o){let n=J([{content:"Open",id:"palettes-open"},{content:"Remove",id:"palettes-remove"},{content:"Copy",id:"palettes-copy"}],{type:"menu"});o.parentElement.append(n);return}},document.querySelector(".toolbar").onclick=async e=>{let s=e.target;if(s.closest(".undo")){q.deconstructURL(location.pathname).base=="create"?H.create.undo():H.palettes.undo();return}if(s.closest(".redo")){q.deconstructURL(location.pathname).base=="create"?H.create.redo():H.palettes.redo();return}if(s.closest(".copy")){if(q.deconstructURL(location.pathname).base=="create"){let l=[];for(let{hex:o}of g.slots)l.push(o);await navigator.clipboard.writeText(l.join(`
`)).then(()=>{let o=E("Copied palette!");document.body.append(o)},()=>{let o=E("Failed to copy.");document.body.append(o)})}else{let l=[];for(let o of A.items)l.push(o.join("-"));await navigator.clipboard.writeText(l.join(`,
`)).then(()=>{let o=E("Copied palettes to clipboard!");document.body.append(o)},()=>{let o=E("Copy to clipboard failed.");document.body.append(o)})}return}if(s.closest(".generate")){let l=[];for(let{hex:n}of g.slots)l.push(n);g.generate();let o=[];for(let{hex:n}of g.slots)o.push(n);history.replaceState("","","/create/"+o.join("-")),l&&H.create.push({undo:()=>{g.generate(l),history.replaceState("","","/create/"+l.join("-"))},redo:()=>{g.generate(o),history.replaceState("","","/create/"+o.join("-"))}});return}if(s.closest(".save")){if(!w.settings.cookiesOk){document.body.append(E("You'll need to enable cookies in settings for that feature."));return}let l=[];for(let{hex:n}of g.slots)l.push(n);A.addItem(l);let o=E("Saved palette!");document.body.append(o);return}if(s.closest(".remove-all")){K({message:"Are you sure you want to delete all of your palettes? You won't be able to undo this.",value:"remove-all"},[{message:"Yes, delete away.",value:"yes",call(){for(let o=0;A.items.length;o++)A.removeItem(0);let l=E("All palettes removed.");document.body.append(l)}},{message:"No, please don't delete my stuff!",value:"no"}]);return}if(s.closest(".import")){if(q.deconstructURL(location.pathname,!0).base=="create"){let l=W("Paste hex code palette below!","import-create");document.body.append(l)}else{if(!w.settings.cookiesOk){document.body.append(E("You'll need to enable cookies in settings for that feature."));return}let l=W("Paste hex code palette below! Separate palettes by commas.","import-palettes");document.body.append(l)}return}};let i=document.querySelector(".main-nav"),t=document.querySelector(".main-header");onclick=async e=>{var n,a;let s=e.target,l=s.closest("a");if(l){e.preventDefault();let c=l.getAttribute("href");i.classList.remove("visible"),(n=document.querySelector(".overlay"))==null||n.remove(),document.body.style.overflowY="",c!=location.pathname&&q.navigateTo(c);return}if(s.closest("#nav-button"))if(i.classList.toggle("visible"),i.classList.contains("visible")){let c=document.createElement("div");c.classList.add("overlay"),t.append(c),document.body.style.overflowY="hidden",g.plus.hide(),c.addEventListener("click",()=>{c.remove(),i.classList.remove("visible"),document.body.style.overflowY=""},{once:!0}),document.body.style.overflowY="hidden"}else(a=t.querySelector(".overlay"))==null||a.remove(),document.body.style.overflowY="";if(s.closest("#settings")){let c=me();document.body.append(c);return}let o=s.closest(".confirmation-screen");if(o){if(s.closest(".overlay")&&(o==document.querySelector(".cookies")&&(w.settings={cookiesOk:!0},w.info={firstVisit:!0}),o.remove()),o==document.querySelector(".remove-all-confirmation")){if(s.closest(".yes")){for(let m=0;A.items.length;m++)A.removeItem(0);o.remove();let c=E("All palettes removed.");document.body.append(c)}else s.closest(".no")&&o.remove();return}if(o==document.querySelector(".import-create")){let c=q.deconstructURL(location.pathname).ids,m=s.closest(".yes"),d=s.closest(".no");if(m){let p=o.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-",""),y=!(/[g-z~`!#$%\^&*+=\[\]\\';,/{}|\\":<>\?]/g.test(p)||p.length==0||p.length%6!=0),v="Invalid values entered. Try again.";if(y){v="Successfully imported values.";let u=p.match(/.{1,6}/g);g.generate(u),H.create.push({undo(){g.generate(c)},redo(){g.generate(u)}})}let f=E(v);document.body.append(f),o.remove()}else d&&o.remove();return}if(o==document.querySelector(".import-palettes")){let c=s.closest(".yes"),m=s.closest(".no");if(c){let d=o.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-","").replaceAll("#","").toLowerCase(),p="Invalid values entered. Try again.",y=!(/[g-z~`!#$%\^&*+=\[\]\\';/{}|\\":<>\?]/g.test(d)||d.replaceAll(",","").length%6!=0||d.length==0);console.log(d.replaceAll(",","").length%6!=0);let v=d.split(",");for(let u of v)(u.length/6>8||!(u.length>=6))&&(y=!1);if(y){let u=0;for(let x of v)u++,A.addItem(x.match(/.{1,6}/g));p="Successfully imported values.",H.palettes.push({undo(){for(let x=u;x>0;x--)A.removeItem(A.items.length-1)},redo(){for(let x of v)A.addItem(x.match(/.{1,6}/g))}})}let f=E(p);document.body.append(f),o.remove()}else m&&o.remove();return}if(o==document.querySelector(".settings-popover")){let c=s.closest(".yes"),m=s.closest(".no");if(c){let d=w.settings;d.lastColorAlgorithmIndex=o.querySelector("#algorithm").selectedIndex,d.cookiesOk=o.querySelector("#cookies-ok").checked,w.settings=d;let p="Changes saved.";o.remove();let y=E(p);document.body.append(y)}else if(m){let d="Changes discarded.";o.remove();let p=E(d);document.body.append(p)}return}if(o==document.querySelector(".cookies-confirmation")){let c=s.closest(".yes"),m=s.closest(".no");if(c){w.settings={cookiesOk:!0},o.remove();let d=E("Thanks, enjoy the site! :)");document.body.append(d)}else if(m){w.settings={cookiesOk:!1},o.remove();let d=E("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(d)}return}}}}function be(){window.addEventListener("scroll",i,!1),window.addEventListener("touchmove",i,{passive:!1});function i(t){q.deconstructURL(location.pathname).base=="create"&&(t.preventDefault(),t.stopPropagation())}window.ontouchstart=t=>{let e=t.target.closest(".create-page .swatch");if(e&&!t.target.closest(".options div")&&!t.target.closest(".options svg")){let s=function(v){if(v.preventDefault(),l){let f=v.touches[0].clientY-c;e.style.translate="0 "+f+"px";let u=e,x=g.slots.length-m-1;if(y=0,p=0,f>0)for(let r=0;r<x;r++)y=(r*2+1)*n,u=u.nextElementSibling,f>y?(p++,u.style.translate!="0 -100%"&&(u.style.translate="0 -100%")):u.style.translate=="0 -100%"&&(u.style.translate="0 0");else for(let r=0;r<m;r++)y=(r*2+1)*n,u=u.previousElementSibling,-f>y?(p--,u.style.translate!="0 100%"&&(u.style.translate="0 100%")):u.style.translate=="0 100%"&&(u.style.translate="0 0")}else{let f=v.touches[0].clientX-a;e.style.translate=f+"px";let u=e,x=g.slots.length-m-1;if(y=0,p=0,f>0)for(let r=0;r<x;r++)y=(r*2+1)*o,u=u.nextElementSibling,f>y?(p++,u.style.translate!="-100%"&&(u.style.translate="-100%")):u.style.translate=="-100%"&&(u.style.translate="");else for(let r=0;r<m;r++)y=(r*2+1)*o,u=u.previousElementSibling,-f>y?(p--,u.style.translate!="100%"&&(u.style.translate="100%")):u.style.translate=="100%"&&(u.style.translate="")}},l=!1;document.body.classList.contains("vertical")&&(l=!0),g.plus.disabled=!0,g.plus.hide(),e.classList.add("is-dragging");let o=e.clientWidth/2,n=e.clientHeight/2,a=t.touches[0].clientX,c=t.touches[0].clientY,m=parseInt(e.getAttribute("data-color-index")),d=g.slots[m],p=0,y;window.addEventListener("touchmove",s,{passive:!1}),window.addEventListener("touchend",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("touchmove",s),e.style.translate=`${l?"0 ":""}${p*100}%`;function v(){e.removeEventListener("transitionend",v),e.removeEventListener("transitioncancel",v),e.classList.remove("is-released");let f=e;for(let r=0;r<p;r++)g.slots.splice(d.data,1),g.slots.splice(d.data+1,0,d),d.data++,f=f.nextElementSibling,g.slots[d.data-1].data--;for(let r=0;r>p;r--)g.slots.splice(d.data,1),g.slots.splice(d.data-1,0,d),d.data--,f=f.previousElementSibling,g.slots[d.data+1].data++;let u=e.cloneNode(!0);p>0?(f.after(u),e.remove()):p<0&&(f.before(u),e.remove()),e.style.translate="";let x=[];for(let r of g.slots){let b=document.getElementById(r.id);b.style.transition="transform 0s",b.style.translate="",setTimeout(()=>{b.style.transition=""},1),x.push(r.hex)}e=u,history.replaceState("","",x.join("-")),g.plus.disabled=!1,p&&H.create.push({undo(){g.plus.hide();let r=e=document.getElementById(d.id);for(let L=0;L<-p;L++){g.slots.splice(d.data,1),g.slots.splice(d.data+1,0,d),d.data++,r=r.nextElementSibling;let S=parseInt(r.getAttribute("data-color-index"));r.setAttribute("data-color-index",(S-1).toString())}for(let L=0;L>-p;L--){g.slots.splice(d.data,1),g.slots.splice(d.data-1,0,d),d.data--,r=r.previousElementSibling;let S=parseInt(r.getAttribute("data-color-index"));r.setAttribute("data-color-index",(S+1).toString())}u=e.cloneNode(!0),-p>0?(r.after(u),e.remove()):-p<0&&(r.before(u),e.remove());let b=[];for(let L of g.slots)b.push(L.hex);history.replaceState("","",b.join("-"))},redo(){g.plus.hide();let r=e=document.getElementById(d.id);for(let L=0;L<p;L++)g.slots.splice(d.data,1),g.slots.splice(d.data+1,0,d),d.data++,r=r.nextElementSibling,m=parseInt(r.getAttribute("data-color-index")),r.setAttribute("data-color-index",(m-1).toString());for(let L=0;L>p;L--)g.slots.splice(d.data,1),g.slots.splice(d.data-1,0,d),d.data--,r=r.previousElementSibling,m=parseInt(r.getAttribute("data-color-index")),r.setAttribute("data-color-index",(m+1).toString());u=e.cloneNode(!0),p>0?(r.after(u),e.remove()):p<0&&(r.before(u),e.remove());let b=[];for(let L of g.slots)b.push(L.hex);history.replaceState("","",b.join("-"))}})}e.addEventListener("transitionend",v),e.addEventListener("transitioncancel",v)},{once:!0})}},onmousedown=t=>{let e=t.target.closest(".create-page .swatch");if(e&&!t.target.closest(".options div")&&!t.target.closest(".options svg")){let s=function(v){if(l){let f=v.y-c;e.style.translate="0 "+f+"px";let u=e,x=g.slots.length-m-1;if(y=0,p=0,f>0)for(let r=0;r<x;r++)y=(r*2+1)*n,u=u.nextElementSibling,f>y?(p++,u.style.translate!="0 -100%"&&(u.style.translate="0 -100%")):u.style.translate=="0 -100%"&&(u.style.translate="");else for(let r=0;r<m;r++)y=(r*2+1)*n,u=u.previousElementSibling,-f>y?(p--,u.style.translate!="0 100%"&&(u.style.translate="0 100%")):u.style.translate=="0 100%"&&(u.style.translate="")}else{let f=v.x-a;e.style.translate=f+"px";let u=e,x=g.slots.length-m-1;if(y=0,p=0,f>0)for(let r=0;r<x;r++)y=(r*2+1)*o,u=u.nextElementSibling,f>y?(p++,u.style.translate!="-100%"&&(u.style.translate="-100%")):u.style.translate=="-100%"&&(u.style.translate="");else for(let r=0;r<m;r++)y=(r*2+1)*o,u=u.previousElementSibling,-f>y?(p--,u.style.translate!="100%"&&(u.style.translate="100%")):u.style.translate=="100%"&&(u.style.translate="")}},l=!1;document.body.classList.contains("vertical")&&(l=!0),g.plus.disabled=!0,g.plus.hide(),e.classList.add("is-dragging");let o=e.clientWidth/2,n=e.clientHeight/2,a=t.x,c=t.y,m=parseInt(e.getAttribute("data-color-index")),d=g.slots[m],p=0,y;addEventListener("mousemove",s),addEventListener("mouseup",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("mousemove",s),e.style.translate=`${l?"0 ":""}${p*100}%`;function v(){e.removeEventListener("transitionend",v),e.removeEventListener("transitioncancel",v),e.classList.remove("is-released");let f=e;for(let r=0;r<p;r++)g.slots.splice(d.data,1),g.slots.splice(d.data+1,0,d),d.data++,f=f.nextElementSibling,g.slots[d.data-1].data--;for(let r=0;r>p;r--)g.slots.splice(d.data,1),g.slots.splice(d.data-1,0,d),d.data--,f=f.previousElementSibling,g.slots[d.data+1].data++;let u=e.cloneNode(!0);p>0?(f.after(u),e.remove()):p<0&&(f.before(u),e.remove()),e.style.translate="";let x=[];for(let r of g.slots){let b=document.getElementById(r.id);b.style.transition="transform 0s",b.style.translate="",setTimeout(()=>{b.style.transition=""},1),x.push(r.hex)}e=u,history.replaceState("","",x.join("-")),g.plus.disabled=!1,p&&H.create.push({undo(){g.plus.hide();let r=e=document.getElementById(d.id);for(let L=0;L<-p;L++){g.slots.splice(d.data,1),g.slots.splice(d.data+1,0,d),d.data++,r=r.nextElementSibling;let S=parseInt(r.getAttribute("data-color-index"));r.setAttribute("data-color-index",(S-1).toString())}for(let L=0;L>-p;L--){g.slots.splice(d.data,1),g.slots.splice(d.data-1,0,d),d.data--,r=r.previousElementSibling;let S=parseInt(r.getAttribute("data-color-index"));r.setAttribute("data-color-index",(S+1).toString())}u=e.cloneNode(!0),-p>0?(r.after(u),e.remove()):-p<0&&(r.before(u),e.remove());let b=[];for(let L of g.slots)b.push(L.hex);history.replaceState("","",b.join("-"))},redo(){g.plus.hide();let r=e=document.getElementById(d.id);for(let L=0;L<p;L++)g.slots.splice(d.data,1),g.slots.splice(d.data+1,0,d),d.data++,r=r.nextElementSibling,m=parseInt(r.getAttribute("data-color-index")),r.setAttribute("data-color-index",(m-1).toString());for(let L=0;L>p;L--)g.slots.splice(d.data,1),g.slots.splice(d.data-1,0,d),d.data--,r=r.previousElementSibling,m=parseInt(r.getAttribute("data-color-index")),r.setAttribute("data-color-index",(m+1).toString());u=e.cloneNode(!0),p>0?(r.after(u),e.remove()):p<0&&(r.before(u),e.remove());let b=[];for(let L of g.slots)b.push(L.hex);history.replaceState("","",b.join("-"))}})}e.addEventListener("transitionend",v),e.addEventListener("transitioncancel",v)},{once:!0}),ondragstart=()=>!1}}}let xe=document.querySelector(".main-nav");function Le(){onkeydown=i=>{var t,e,s,l;if(i.metaKey||i.ctrlKey){let{base:o}=q.deconstructURL(location.pathname,!0);if(i.key==="z"||i.key==="Z")if(o==="palettes"){i.shiftKey?H.palettes.redo():H.palettes.undo();return}else{i.shiftKey?H.create.redo():H.create.undo();return}if(o==="create"){let n=parseInt(i.key);if(n>=0&&n<=9){i.preventDefault();let a=g.slots[n-1]||g.slots[g.slots.length-1],c=document.getElementById(a.id);H.create.push({undo(){let m=g.slots[n-1]||g.slots[g.slots.length-1],d=document.getElementById(m.id);m.isLocked=!m.isLocked,d.querySelector(".lock").classList.toggle("locked")},redo(){let m=g.slots[n-1]||g.slots[g.slots.length-1],d=document.getElementById(m.id);m.isLocked=!m.isLocked,d.querySelector(".lock").classList.toggle("locked")}}),a.isLocked=!a.isLocked,c.querySelector(".lock").classList.toggle("locked");return}}}if(i.key===" "){let{base:o}=q.deconstructURL(location.pathname,!0);if(o==="create"){i.preventDefault();let n=[];for(let{hex:c}of g.slots)n.push(c);g.generate();let a=[];for(let{hex:c}of g.slots)a.push(c);history.replaceState("","","/polychrome/create/"+a.join("-")),H.create.push({undo:()=>{g.generate(n),history.replaceState("","","/polychrome/create/"+n.join("-")),g.plus.hide()},redo:()=>{g.generate(a),history.replaceState("","","/polychrome/create/"+a.join("-"))}})}return}if(i.key==="Escape"){(t=document.querySelector(".confirmation-screen"))==null||t.remove(),xe.classList.remove("visible"),(e=document.querySelector(".overlay"))==null||e.remove();return}if(i.key==="y"||i.key==="Y"){((s=document.querySelector(".confirmation-screen"))==null?void 0:s.querySelector(".yes")).click();return}if(i.key==="n"||i.key==="N"){((l=document.querySelector(".confirmation-screen"))==null?void 0:l.querySelector(".no")).click();return}//! NOT DONE
if(i.key==="Enter"){let o=document.activeElement;console.log(o);return}i.key}}let g=new ye,A=new ue,q=new ge([["",R("Home",document.getElementById("landing-page"))],["palettes",R("Palettes",document.getElementById("palettes-page"),A)],["create",R("Create",document.getElementById("create-page"),g)],["404",R("404 Not Found",document.getElementById("not-found-page"))]]);q.routeToURL(location.pathname,!0);setTimeout(()=>{document.querySelector(":root").style.display="initial",window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")},200);onpopstate=()=>q.navigateTo(location.pathname,!0,!0);ve();be();Le();onmouseover=i=>{if(!g.plus.disabled){const t=i.target,e=t.closest(".swatch");if(e)if(t.closest(".detector")&&g.slots.length<8){const l=t.closest(".left");let o=parseInt(e.getAttribute("data-color-index"));l&&o--,g.plus.show(o)}else g.plus.hide()}};w.info.firstVisit&&K({message:"This site relies on local storage and cookies to save palettes.",value:"cookies"},[{message:"Sure, sounds good to me.",value:"yes",call(){w.info={firstVisit:!1},w.settings={cookiesOk:!0};let i=E("Thanks, enjoy the site! :)");document.body.append(i)}},{message:"No thanks, I don't want to save palettes.",value:"no",call(){w.info={firstVisit:!1},w.settings={cookiesOk:!1};for(let t=0;t<A.items.length;t++)A.removeItem(0);let i=E("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(i)}}]);onresize=()=>{window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")};(navigator.userAgent.includes("Android")||navigator.userAgent.includes("like Mac"))&&document.body.classList.add("mobile");
