var se=Object.defineProperty;var le=(o,t,e)=>t in o?se(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var j=(o,t,e)=>(le(o,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const i of l)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&s(n)}).observe(document,{childList:!0,subtree:!0});function e(l){const i={};return l.integrity&&(i.integrity=l.integrity),l.referrerpolicy&&(i.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?i.credentials="include":l.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(l){if(l.ep)return;l.ep=!0;const i=e(l);fetch(l.href,i)}})();let U;const ie=new Uint8Array(16);function oe(){if(!U&&(U=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!U))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return U(ie)}const T=[];for(let o=0;o<256;++o)T.push((o+256).toString(16).slice(1));function ne(o,t=0){return(T[o[t+0]]+T[o[t+1]]+T[o[t+2]]+T[o[t+3]]+"-"+T[o[t+4]]+T[o[t+5]]+"-"+T[o[t+6]]+T[o[t+7]]+"-"+T[o[t+8]]+T[o[t+9]]+"-"+T[o[t+10]]+T[o[t+11]]+T[o[t+12]]+T[o[t+13]]+T[o[t+14]]+T[o[t+15]]).toLowerCase()}const ae=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),z={randomUUID:ae};function re(o,t,e){if(z.randomUUID&&!t&&!o)return z.randomUUID();o=o||{};const s=o.random||(o.rng||oe)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let l=0;l<16;++l)t[e+l]=s[l];return t}return ne(s)}const de=document.title;function k(o){let t=parseInt(o[0]+o[1],16)/255,e=parseInt(o[2]+o[3],16)/255,s=parseInt(o[4]+o[5],16)/255,l=Math.max(t,e,s),i=Math.min(t,e,s),n,c,m=t*.299+e*.587+s*.114,a=(l+i)/2;if(l==i)n=c=0;else{let r=l-i;switch(c=a>.5?r/(2-l-i):r/(l+i),l){case t:n=(e-s)/r+(e<s?6:0);break;case e:n=(s-t)/r+2;break;default:n=(t-e)/r+4;break}n=n*60}return{r:t,g:e,b:s,h:n,s:c,l:a,lum:m}}function I(o,t,e){o>360?o-=360:o<0&&(o+=360),t>1?t=1:t<0&&(t=0),e>1?e=1:e<0&&(e=0),t*=100;const s=t*Math.min(e,1-e)/100,l=i=>{const n=(i+o/30)%12,c=e-s*Math.max(Math.min(n-3,9-n,1),-1);return Math.round(255*c).toString(16).padStart(2,"0")};return`${l(0)}${l(8)}${l(4)}`}const w={get info(){let o=localStorage.getItem("info");return o?JSON.parse(o):(localStorage.setItem("info",JSON.stringify({firstVisit:!0})),this.info)},set info(o){let t=this.info;if(o)for(let[e,s]of Object.entries(o))t[e]=s;localStorage.setItem("info",JSON.stringify(t))},get settings(){let o=localStorage.getItem("settings");return o?JSON.parse(o):(localStorage.setItem("settings",JSON.stringify({lastColorAlgorithmIndex:2,cookiesOk:!1})),this.settings)},set settings(o){let t=this.settings;if(o)for(let[e,s]of Object.entries(o))t[e]=s;localStorage.setItem("settings",JSON.stringify(t))},savedPalettes:{get items(){let o=localStorage.getItem("saved-palettes"),t;if(o){let e=[];t=JSON.parse(o);for(let s of t)e.push(s);return e}else return[]},set items(o){localStorage.setItem("saved-palettes",JSON.stringify(o))},addItem(o){let t=this.items;t.push(o),this.items=t},removeItem(o){this.items.splice(o,1)}}},H={create:{cmds:[],cmdIndex:-1,push(o){this.cmds.splice(this.cmdIndex+1,1/0,o),this.cmdIndex=this.cmds.length-1},undo(){this.cmdIndex>-1&&(this.cmds[this.cmdIndex].undo(),this.cmdIndex--)},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}},palettes:{cmds:[],cmdIndex:-1,push(o){this.cmds.splice(this.cmdIndex+1,1/0,o),this.cmdIndex=this.cmds.length-1},undo(){if(this.cmdIndex>-1){let o=this.cmds[this.cmdIndex];this.cmdIndex--,o.undo()}},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}}},O=document.querySelector(".toolbar");function R(o,t,e){return s=>{document.title=de+" | "+o;const l=document.querySelector("main.visible");l&&l.classList.remove("visible");const i=t;if(i==null||i.classList.add("visible"),o=="Palettes")document.body.parentElement.style.overflow="",document.body.style.overflow="",O.classList.add("palettes"),O.classList.remove("create"),e.draw(w.savedPalettes.items);else if(o=="Create")if(document.body.parentElement.style.overflow="hidden",document.body.style.overflow="hidden",O.classList.add("create"),O.classList.remove("palettes"),s)e.generate(s);else{let n=e.generate(),c=[];for(let m of n)c.push(m.hex);history.replaceState("","",c.join("-"))}else O.classList.remove("palettes","create"),document.documentElement.style.overflow="",document.body.style.overflow=""}}const h=(o,t)=>Math.random()*(t-o)+o,ce=()=>btoa(parseInt(re(),16).toString(36)).replaceAll("=","");function E(o,t){const e=document.createElement("div");e.classList.add("tooltip","appearing");const s=document.createElement("h2");return s.innerHTML=o,e.append(s),t!=null&&t.pos?(e.style.left=t.pos[0]+"px",e.style.top=t.pos[1]+"px"):e.classList.add("centered"),setTimeout(()=>{t&&t.pos&&(e.clientWidth+t.pos[0]>document.body.clientWidth?(e.style.translate="-100%",e.clientHeight+t.pos[1]>document.body.clientHeight&&(e.style.translate="-100 -100%")):e.clientHeight+t.pos[1]>document.body.clientHeight&&(e.style.translate="0 -100%"))},0),e.addEventListener("animationend",()=>{e.classList.remove("appearing"),setTimeout(()=>{e.classList.add("disappearing"),e.addEventListener("animationend",()=>{e.remove()},{once:!0})},(t==null?void 0:t.duration)||1e3)},{once:!0}),e}function J(o,t){let e=document.createElement("div");e.classList.add("popover");let s=document.createElement("div");if(s.classList.add("clear-overlay"),(t==null?void 0:t.type)=="menu"){let l=document.createElement("ul");l.classList.add("list");for(let i of o){let n=document.createElement("div");n.id=i.id,n.classList.add("choice"),i.content&&(n.innerHTML=i.content),l.append(n)}e.append(l,s)}else if((t==null?void 0:t.type)=="color-picker"){let l=document.createElement("canvas");l.id="color-picker",l.classList.add("color-picker");let i=l.getContext("2d"),{h:n}=k(t.hex),c=`hsl(${n}, 100%, 50%)`,m=i.createLinearGradient(0,0,i.canvas.width,0);m.addColorStop(0,"#fff"),m.addColorStop(1,c),i.fillStyle=m,i.fillRect(0,0,i.canvas.width,i.canvas.height);let a=i.createLinearGradient(0,0,0,i.canvas.height);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"black"),i.fillStyle=a,i.fillRect(0,0,i.canvas.width,i.canvas.height);let r=document.createElement("div");r.classList.add("color-picker-cursor");let p=document.createElement("input");p.setAttribute("min","0"),p.setAttribute("max","360"),p.setAttribute("type","range");let y=document.createElement("div");y.classList.add("huebar");let v=document.createElement("div");v.classList.add("huebar-cursor");let f=document.createElement("input");f.setAttribute("min","0"),f.setAttribute("max","360"),f.setAttribute("type","range"),l.append(r,p),y.append(v,f),e.append(l,y)}return e}function K(o,t){let e=document.createElement("div");e.classList.add("confirmation-screen",o.value+"-confirmation");let s=document.createElement("div");s.classList.add("box");let l=document.createElement("h2");l.innerHTML=o.message;let i=document.createElement("ul"),n=document.createElement("div");n.classList.add("overlay"),s.append(l,i),e.append(s,n);for(let{message:c,value:m,call:a}of t){let r=document.createElement("li");r.innerHTML=c,r.classList.add(m),i.append(r),r.addEventListener("click",()=>{a&&a(),e.remove()},{once:!0})}document.body.append(e)}function W(o,t){let e=document.createElement("div");e.classList.add("confirmation-screen",t);let s=document.createElement("h2");s.innerHTML=o;let l=document.createElement("textarea"),i=document.createElement("div");i.classList.add("overlay");let n=document.createElement("div");n.classList.add("box");let c=document.createElement("ul"),m=document.createElement("li");m.classList.add("yes"),m.innerHTML="Confirm";let a=document.createElement("li");return a.innerHTML="Cancel",a.classList.add("no"),c.append(a,m),n.append(s,l,c),e.append(n,i),e}function me(){let o=document.createElement("div");o.classList.add("confirmation-screen","settings-popover");let t=document.createElement("div");t.classList.add("box");let e=document.createElement("div");e.classList.add("overlay");let s=document.createElement("h2");s.innerText="Settings";let l=document.createElement("ul");l.classList.add("options");let i=document.createElement("li"),n=document.createElement("label");n.innerText="Algorithm";let c=document.createElement("select");c.id="algorithm";let m=document.createElement("option");m.value="random",m.innerText="Random Algorithm";let a=document.createElement("option");a.value="monochromatic",a.innerText="Monochromatic";let r=document.createElement("option");r.value="analogous",r.innerText="Analogous";let p=document.createElement("option");p.value="complementary",p.innerText="Complementary";let y=document.createElement("option");y.value="split-complementary",y.innerText="Split Complementary";let v=document.createElement("option");v.value="triadic",v.innerText="Triadic";let f=document.createElement("option");f.value="tetradic",f.innerText="Tetradic";let u=document.createElement("option");u.value="square",u.innerText="Square";let x=document.createElement("option");x.value="randomize",x.innerText="Randomize Colors";let d=document.createElement("ul");d.classList.add("confirmation");let b=document.createElement("li");b.classList.add("yes"),b.innerText="Confirm";let L=document.createElement("li");L.classList.add("no"),L.innerText="Cancel",d.append(L,b),c.append(x,a,r,p,y,v,f,u,m),c.selectedIndex=w.settings.lastColorAlgorithmIndex;let S=document.createElement("li");S.classList.add("horizontal");let C=document.createElement("div"),M=document.createElement("label");M.innerText="Cookies";let D=document.createElement("label");D.innerText="That's fine!",D.setAttribute("for","cookies-ok");let Y=document.createElement("label");Y.innerText="No thanks.",Y.setAttribute("for","cookies-not-ok");let V=document.createElement("div"),$=document.createElement("div");V.classList.add("op"),$.classList.add("op");let q=document.createElement("input");q.id="cookies-ok",q.value="cookies-ok",q.setAttribute("type","radio"),q.classList.add("true");let B=document.createElement("input");return B.id="cookies-not-ok",B.value="cookies-not-ok",B.setAttribute("type","radio"),B.classList.add("false"),w.settings.cookiesOk?q.checked=!0:B.checked=!0,q.addEventListener("change",()=>{q.checked?B.checked=!1:B.checked=!0}),B.addEventListener("change",()=>{B.checked?q.checked=!1:q.checked=!0}),V.append(q,D),$.append(B,Y),S.append(M,C),C.append(V,$),i.append(n,c),l.append(i,S),t.append(s,l,d),o.append(e,t),o}let P=document.querySelector(".saved-palettes-wrapper");class ue{constructor(){j(this,"items",[]);this.items=w.savedPalettes.items}draw(t){for(;P.childElementCount>0;)P.lastChild.remove();if(t)for(let s=0;s<t.length;s++){let l=t[s],i=document.createElement("div");i.setAttribute("data-palette-index",s.toString()),i.classList.add("palette-container");let n=document.createElement("div");n.classList.add("palette");let c=document.createElement("div");c.classList.add("options");let m=document.createElement("div");m.classList.add("more");let a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("viewBox","0 0 100 100");let r=document.createElementNS("http://www.w3.org/2000/svg","use");r.setAttribute("href","#icon-more-horizontal");for(let p=0;p<l.length;p++){let y=l[p],{lum:v}=k(y),f=document.createElement("div");f.setAttribute("data-color-index",p.toString()),f.classList.add("swatch"),f.style.backgroundColor="#"+y,v<.5&&f.classList.add("isLight");let u=document.createElement("h2");u.innerHTML="#"+y,u.classList.add("text"),f.append(u),n.append(f)}a.append(r),m.append(a),c.append(m),i.append(n,c),P.append(i)}let e=document.querySelector(".palettes-page .when-empty");P.childElementCount==0?e.classList.remove("hidden"):e.classList.add("hidden")}addItem(t,e){typeof e=="number"?this.items.splice(e,0,t):this.items.push(t),w.savedPalettes.items=this.items,this.draw(this.items)}removeItem(t){this.items.splice(t,1),w.savedPalettes.items=this.items,this.draw(this.items)}}function F(o){if(o.algorithm.details=="slot"){let t=[];for(let e=0;e<6;e++)t.push(Math.round(h(0,15)).toString(16));return t.join("")}else for(let t of o.slots)if(!t.isLocked){let e=[];for(let s=0;s<6;s++)e.push(Math.round(h(0,15)).toString(16));t.hex=e.join(""),t.sync()}}function X(o,t){if(o.algorithm.details=="slot")if(Math.random()>.5){let e=0,s=0,l=0,i=o.slots[t-2],n=o.slots[t-1],c=o.slots[t],m=o.slots[t+1];if(c){let{h:a,s:r,l:p}=k(c.hex);if(e=a,n){let{s:y,l:v}=k(n.hex);s=r-(r-y)/2,l=p-(p-v)/2}else if(m){let{s:y,l:v}=k(m.hex);s=r-(y-r)/2,l=p-(v-p)/2}else s=r*h(.7,1.3),l=p*h(.7,1.3)}else if(n){let{h:a,s:r,l:p}=k(n.hex);if(e=a,i){let{s:y,l:v}=k(i.hex);s=r+(r-y)/2,l=p+(p-v)/2}else s=r*h(.7,1.3),l=p*h(.7,1.3)}else s=h(.2,1),l=h(.1,.9);return s*=h(.95,1.05),l*=h(.95,1.05),I(e,s,l)}else{let e,s,l,i,n,c,m;for(let{hex:a}of o.slots){let{h:r,s:p,l:y}=k(a);typeof e!="number"&&(e=r),(typeof l!="number"||p>l)&&(l=p),(typeof s!="number"||p<s)&&(s=p),(typeof n!="number"||y>n)&&(n=y),(typeof i!="number"||y<i)&&(i=y)}return c=h(s,l)*h(.95,1.05),m=h(i,n)*h(.95,1.05),I(e,c,m)}else if(o.algorithm.details=="increment"||Math.random()>.5){let e=[],s=h(0,360),l=0,i=0,n=0,c=0,m=0,a=0,r=0,p=0;for(let y of o.slots)y.isLocked||e.push(y);for(let y=0;y<e.length;y++)if(y==0){let v=o.slots[0];l=h(.1,1),i=h(.1,.9),v.hex=I(s,l,i),v.sync(),n=l,c=i,n<.4?m=h(.7,1):n>.6?m=h(.1,.3):n>.5?m=h(.1,.2):m=h(.8,.9),c<.4?a=h(.7,1):c>.6?a=h(.1,.3):c>.5?a=h(.1,.2):a=h(.8,.9),r=(m-n)/o.slots.length,p=(a-c)/o.slots.length}else{let v=o.slots[y];l=n+r*y,i=c+p*y,v.hex=I(s,l,i),v.sync()}}else{let e=h(0,360),s,l,i;for(let n of o.slots)n.isLocked||(s=h(.2,1),l=h(.2,.8),typeof i!="number"&&(e=i=h(0,360)),n.hex=I(e,s,l),n.sync())}}function G(o,t){if(o.algorithm.details=="slot")if(Math.random()>.5){let e=0,s=0,l=0,i=o.slots[t-2],n=o.slots[t-1],c=o.slots[t],m=o.slots[t+1];if(c){let{h:a,s:r,l:p}=k(c.hex);if(n){let{h:y,s:v,l:f}=k(n.hex),u=a-y;u>180?u=a-y-360:u<-180&&(u=a-y+360),e=a-u/2,s=r-(r-v)/2,l=p-(p-f)/2}else if(m){let{h:y,s:v,l:f}=k(m.hex),u=y-a;u>180?u=y-a-360:u<-180&&(u=y-a+360),e=a-u/2,s=r-(v-r)/2,l=p-(f-p)/2}else e=a*h(.7,1.3),s=r*h(.7,1.3),l=p*h(.7,1.3)}else if(n){let{h:a,s:r,l:p}=k(n.hex);if(i){let{h:y,s:v,l:f}=k(i.hex),u=a-y;u>180?u=a-y-360:u<-180&&(u=a-y+360),e=a+u/2,s=r+(r-v)/2,l=p+(p-f)/2}else e=a*h(.7,1.3),s=r*h(.7,1.3),l=p*h(.7,1.3)}else e=h(0,360),s=h(.2,1),l=h(.1,.9);return e*=h(.95,1.05),s*=h(.95,1.05),l*=h(.95,1.05),I(e,s,l)}else{let e,s,l,i,n,c,m,a,r,p,y=Math.random();for(let{hex:v}of o.slots){let{h:f,s:u,l:x}=k(v);if(typeof e!="number")e=f;else if(typeof s!="number"){let d=e,b=d-f;b>180?d-=360:b<-180&&(d+=360),b=d-f,(b<-25||b>25)&&(s=f)}else if(typeof l!="number"){let d=e,b=s,L=d-f,S=b-f;L>180?d-=360:L<-180&&(d+=360),S>180?b-=360:S<-180&&(b+=360),L=d-f,S=b-f,(L>25||L<-25)&&(S>25||S<-25)&&(l=f)}(typeof n!="number"||u>n)&&(n=u),(typeof i!="number"||u<i)&&(i=u),(typeof m!="number"||x>m)&&(m=x),(typeof c!="number"||x<c)&&(c=x)}return l&&y<.333?a=l:s&&y>.666?a=s:a=e,r=h(i,n)*h(.95,1.05),p=h(c,m)*h(.95,1.05),I(a,r,p)}else if(o.algorithm.details=="increment"||Math.random()>.5){let e=0,s=0,l=0,i=0,n=0,c=0,m=0,a=0,r=0,p=0,y=0,v=0;for(let f=0;f<o.slots.length;f++){let u=o.slots[f];if(!u.isLocked)if(!i)e=i=h(0,360),s=n=h(.1,1),l=c=h(.1,.9),u.hex=I(e,s,l),u.sync(),i=e,n=s,c=l,Math.random()>.5?m=e+h(90,120):m=e-h(75,90),n<.4?a=h(.7,1):n>.6?a=h(.1,.3):n>.5?a=h(.1,.2):a=h(.8,.9),c<.4?r=h(.7,1):c>.6?r=h(.1,.3):c>.5?r=h(.1,.2):r=h(.8,.9),p=(m-i)/o.slots.length,y=(a-n)/o.slots.length,v=(r-c)/o.slots.length;else{let x=o.slots[f];e=i+p*f,s=n+y*f,l=c+v*f,x.hex=I(e,s,l),x.sync()}}}else{let e,s,l,i,n,c;for(let m of o.slots)if(!m.isLocked){if(s=h(.2,1),l=h(.2,.8),typeof i!="number")e=i=h(0,360);else if(typeof n!="number")e=n=i+30*h(.975,1.025);else if(typeof c!="number")e=c=i-30*h(.975,1.025);else{let a=Math.random();a<.333?e=i:a>.666?e=n:e=c}m.hex=I(e,s,l),m.sync()}}}function Z(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,n,c,m,a,r=Math.random();for(let{hex:p}of o.slots){let{h:y,s:v,l:f}=k(p);if(typeof t!="number")t=y;else if(typeof e!="number"){let u=t,x=u-y;x>180?u-=360:x<-180&&(u+=360),x=u-y,(x<-90||x>90)&&(e=y)}(typeof l!="number"||v>l)&&(l=v),(typeof s!="number"||v<s)&&(s=v),(typeof n!="number"||f>n)&&(n=f),(typeof i!="number"||f<i)&&(i=f)}return r>.5&&e?c=e*h(.925,1.025):c=t*h(.925,1.025),m=h(s,l)*h(.95,1.05),a=h(i,n)*h(.95,1.05),I(c,m,a)}else{let t,e,s,l,i;for(let n of o.slots)n.isLocked||(e=h(.2,1),s=h(.2,.8),typeof l!="number"?t=l=h(0,360):typeof i!="number"?t=i=l+150*h(.975,1.025):Math.random()<.5?t=l*h(.975,1.025):t=i*h(.975,1.025),n.hex=I(t,e,s),n.sync())}}function Q(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,n,c,m,a,r,p=Math.random();for(let{hex:y}of o.slots){let{h:v,s:f,l:u}=k(y);if(typeof t!="number")t=v;else if(typeof e!="number"){let x=t,d=x-v;d>180?x-=360:d<-180&&(x+=360),d=x-v,(d<-30||d>30)&&(e=v)}else if(typeof s!="number"){let x=t,d=e,b=x-v,L=d-v;b>180?x-=360:b<-180&&(x+=360),L>180?d-=360:L<-180&&(d+=360),b=x-v,L=d-v,(b>30||b<-30)&&(L>30||L<-30)&&(s=v)}(typeof i!="number"||f>i)&&(i=f),(typeof l!="number"||f<l)&&(l=f),(typeof c!="number"||u>c)&&(c=u),(typeof n!="number"||u<n)&&(n=u)}return p<.333&&s?m=s:p>.666&&e?m=e:m=t,a=h(l,i)*h(.95,1.05),r=h(n,c)*h(.95,1.05),I(m,a,r)}else{let t,e,s,l,i,n;for(let c of o.slots)if(!c.isLocked){if(e=h(.2,1),s=h(.2,.8),typeof l!="number")t=l=h(0,360);else if(typeof i!="number")t=i=l+150*h(.975,1.025);else if(typeof n!="number")t=n=l-150*h(.975,1.025);else{let m=Math.random();m<.333?t=l*h(.975,1.025):m>.666?t=i*h(.975,1.025):t=n*h(.975,1.025)}c.hex=I(t,e,s),c.sync()}}}function _(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,n,c,m,a,r,p=Math.random();for(let{hex:y}of o.slots){let{h:v,s:f,l:u}=k(y);if(typeof t!="number")t=v;else if(typeof e!="number"){let x=t,d=x-v;d>180?x-=360:d<-180&&(x+=360),d=x-v,(d<-90||d>90)&&(e=v)}else if(typeof s!="number"){let x=t,d=e,b=x-v,L=d-v;b>180?x-=360:b<-180&&(x+=360),L>180?d-=360:L<-180&&(d+=360),b=x-v,L=d-v,(b>90||b<-90)&&(L>90||L<-90)&&(s=v)}(typeof i!="number"||f>i)&&(i=f),(typeof l!="number"||f<l)&&(l=f),(typeof c!="number"||u>c)&&(c=u),(typeof n!="number"||u<n)&&(n=u)}return p<.333?m=t:p>.666?m=e:m=s,a=h(l,i)*h(.95,1.05),r=h(n,c)*h(.95,1.05),I(m,a,r)}else{let t,e,s,l,i,n;for(let c of o.slots)if(!c.isLocked){if(e=h(.2,1),s=h(.2,.8),typeof l!="number")t=l=h(0,360);else if(typeof i!="number")t=i=l+120;else if(typeof n!="number")t=n=l-120;else{let m=Math.random();m<.333?t=l:m<.666?t=i:t=n}c.hex=I(t,e,s),c.sync()}}}function ee(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,n,c,m,a,r,p,y=Math.random();for(let{hex:v}of o.slots){let{h:f,s:u,l:x}=k(v);if(typeof t!="number")t=f;else if(typeof e!="number"){let d=t,b=d-f;b>180?d-=360:b<-180&&(d+=360),b=d-f,(b<-45||b>45)&&(e=f)}else if(typeof s!="number"){let d=t,b=e,L=d-f,S=b-f;L>180?d-=360:L<-180&&(d+=360),S>180?b-=360:S<-180&&(b+=360),L=d-f,S=b-f,(L>45||L<-45)&&(S>45||S<-45)&&(s=f)}else if(typeof l!="number"){let d=t,b=e,L=s,S=d-f,C=b-f,M=L-f;S>180?d-=360:S<-180&&(d+=360),C>180?b-=360:C<-180&&(b+=360),M>180?L-=360:M<-180&&(L+=360),S=d-f,C=b-f,M=L-f,(S>45||S<-45)&&(C>45||C<-45)&&(M>45||M<-45)&&(l=f)}(typeof n!="number"||u>n)&&(n=u),(typeof i!="number"||u<i)&&(i=u),(typeof m!="number"||x>m)&&(m=x),(typeof c!="number"||x<c)&&(c=x)}return typeof l=="number"&&y<.25?a=l:typeof s=="number"&&y<.5?a=s:typeof e=="number"&&y<.75?a=e:a=t,r=h(i,n)*h(.95,1.05),p=h(c,m)*h(.95,1.05),I(a,r,p)}else{let t,e,s,l,i,n,c;for(let m of o.slots)if(!m.isLocked){if(e=h(.2,1),s=h(.2,.8),typeof l!="number")t=l=h(0,360);else if(typeof i!="number")t=i=l+60;else if(typeof n!="number")t=n=l-120;else if(typeof c!="number")t=c=l+180;else{let a=Math.random();a<.25?t=l:a>.5?t=i:a>.75?t=n:t=c}m.hex=I(t,e,s),m.sync()}}}function te(o){if(o.algorithm.details=="slot"){let t,e,s,l,i,n,c,m,a,r,p,y=Math.random();for(let{hex:v}of o.slots){let{h:f,s:u,l:x}=k(v);if(typeof t!="number")t=f;else if(typeof e!="number"){let d=t,b=d-f;b>180?d-=360:b<-180&&(d+=360),b=d-f,(b<-85||b>85)&&(e=f)}else if(typeof s!="number"){let d=t,b=e,L=d-f,S=b-f;L>180?d-=360:L<-180&&(d+=360),S>180?b-=360:S<-180&&(b+=360),L=d-f,S=b-f,(L<-85||L>85)&&(S<-85||S>85)&&(s=f)}else if(typeof l!="number"){let d=t,b=e,L=s,S=d-f,C=b-f,M=L-f;S>180?d-=360:S<-180&&(d+=360),C>180?b-=360:C<-180&&(b+=360),M>180?L-=360:M<-180&&(L+=360),S=d-f,C=b-f,M=L-f,(S<-85||S>85&&C<-85||C>85&&(M<-85||M>85))&&(l=f)}(typeof n!="number"||u>n)&&(n=u),(typeof i!="number"||u<i)&&(i=u),(typeof m!="number"||x>m)&&(m=x),(typeof c!="number"||x<c)&&(c=x)}return typeof l=="number"&&y<.25?a=l:typeof s=="number"&&y<.5?a=s:typeof e=="number"&&y<.75?a=e:a=t,r=h(i,n)*h(.95,1.05),p=h(c,m)*h(.95,1.05),I(a,r,p)}else{let t,e,s,l,i,n,c;for(let m of o.slots)if(!m.isLocked){if(e=h(.2,1),s=h(.2,.8),typeof l!="number")t=l=h(0,360);else if(typeof i!="number")t=i=l+60;else if(typeof n!="number")t=n=l-120;else if(typeof c!="number")t=c=l+180;else{let a=Math.random();a<.25?t=l:a>.5?t=i:a>.75?t=n:t=c}m.hex=I(t,e,s),m.sync()}}}function fe(o,t){switch(Math.round(h(0,7))){case 0:return F(o);case 1:return X(o,t);case 2:default:return G(o,t);case 3:return Z(o);case 4:return Q(o);case 5:return _(o);case 6:return ee(o);case 7:return te(o)}}const pe=[F,X,G,Z,Q,_,ee,te,fe];let he=document.getElementById("palette");class ye{constructor(){j(this,"slots",[]);j(this,"plus",{palette:this,disabled:!1,active:!1,show(t){if(!this.active){let e=this.render(t.toString()),s=this.palette.slots[t];s?document.getElementById(s.id).after(e):(s=this.palette.slots[t+1],document.getElementById(s.id).before(e)),this.active=!0}},hide(){var t;this.active&&((t=document.getElementById("plus-button"))==null||t.parentElement.parentElement.remove(),this.active=!1)},render(t){let e=document.createElement("div");e.classList.add("plus-container");let s=document.createElement("div");s.classList.add("circle");let l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("data-color-index",t),l.setAttribute("viewBox","0 0 100 100"),l.id="plus-button";let i=document.createElementNS("http://www.w3.org/2000/svg","use");return i.setAttribute("href","#icon-plus-button"),i.setAttribute("viewBox","0 0 100 100"),l.append(i),s.append(l),e.append(s),e}});j(this,"algorithm",{list:pe,get(t){t=="slot"?this.details="slot":this.details="";let e=w.settings.lastColorAlgorithmIndex;return typeof e!="number"&&(w.settings={lastColorAlgorithmIndex:1}),this.list[e]},details:"",direction:{h:0,s:0,l:0},preference:{h:void 0,s:void 0,l:void 0}})}removeSlot(t,e){e||(e={animations:!0});let s=t.data+1;for(let i=s;i<this.slots.length;i++)this.slots[i].data--;let l=document.getElementById(t.id);if(this.slots.splice(t.data,1),e.animations==!0){let i=function(){l.remove(),l.removeEventListener("animationend",i),l.removeEventListener("animationcancel",i)};l.classList.add("deinit"),l.addEventListener("animationend",i),l.addEventListener("animationcancel",i)}else l.remove();return t}addSlot(t,e){var n;let s={palette:this,hex:t.hex,isLocked:typeof t.isLocked=="boolean"?t.isLocked:!1,id:t.id||ce(),index:typeof t.index!="number"?this.slots.length:t.index,get data(){var m;let c=parseInt((m=document.getElementById(this.id))==null?void 0:m.getAttribute("data-color-index"));return typeof c=="number"?c:this.data=this.index},set data(c){var m;(m=document.getElementById(this.id))==null||m.setAttribute("data-color-index",c.toString()),this.index=c},generate(){this.hex=this.palette.algorithm.get("slot")(this.palette,this.index),this.sync()},sync(){let c=document.getElementById(this.id);if(this.hex){let{lum:m}=k(this.hex);m<.5?c.classList.add("isLight"):c.classList.remove("isLight"),c.style.backgroundColor="#"+this.hex,c.getElementsByClassName("hex")[0].innerHTML="#"+this.hex}}};s.hex||(s.hex=this.algorithm.get("slot")(this,s.index));let l=this.createSwatch(s,e),i=document.getElementById((n=this.slots[s.index-1])==null?void 0:n.id);i?i.after(l):he.prepend(l),s.data=s.index,this.slots.splice(s.index,0,s);for(let c=s.index+1;c<this.slots.length;c++)this.slots[c].data++;return s}createSwatch(t,e){e||(e={animations:!0});let s=document.createElement("div");if(s.classList.add("swatch"),s.setAttribute("data-color-index",t.data),s.id=t.id,t.hex){s.style.backgroundColor="#"+t.hex;let{lum:x}=k(t.hex);x<.5?s.classList.add("isLight"):s.classList.remove("isLight")}if(e.animations==!0){let x=function(){s.classList.remove("init"),s.removeEventListener("animationend",x),s.removeEventListener("animationcancel",x)};s.classList.add("init"),s.addEventListener("animationend",x),s.addEventListener("animationcancel",x)}let l=document.createElement("div");l.classList.add("options");let i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.classList.add("icon","x"),i.setAttribute("viewBox","0 0 100 100");let n=document.createElementNS("http://www.w3.org/2000/svg","use");n.setAttribute("href","#icon-x");let c=document.createElementNS("http://www.w3.org/2000/svg","use");c.setAttribute("viewBox","0 0 100 100"),c.setAttribute("href","#icon-lock-body");let m=document.createElementNS("http://www.w3.org/2000/svg","use");m.setAttribute("viewBox","0 0 100 100"),m.setAttribute("href","#icon-lock-arm");let a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.setAttribute("viewBox","0 0 100 100"),a.classList.add("icon","lock"),t.isLocked&&a.classList.add("locked");let r=document.createElement("div");r.classList.add("info");let p=document.createElement("h2");p.classList.add("hex"),p.innerHTML="#"+t.hex;let y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.classList.add("icon"),y.setAttribute("viewBox","0 0 100 100");let v=document.createElementNS("http://www.w3.org/2000/svg","use");v.setAttribute("href","#icon-copy");let f=document.createElement("div");f.classList.add("detector","left");let u=document.createElement("div");return u.classList.add("detector"),i.append(n),a.append(m,c),y.append(v),r.append(p,y),l.append(i,a,r),s.append(l,f,u),s}generate(t){let e={animations:!1};if(t)if(t.length==this.slots.length)for(let s=0;s<t.length;s++)this.slots[s].hex=t[s],this.slots[s].sync();else{for(let s of this.slots)document.getElementById(s.id).remove();this.slots=[];for(let s=0;s<t.length;s++)this.addSlot({index:s,hex:t[s]},e)}else if(this.slots.length>0)this.algorithm.get()(this);else{for(let s=0;s<5;s++)this.addSlot({},e);this.algorithm.get()(this)}return this.slots}}class ge{constructor(t){j(this,"routes");j(this,"loadContent",t=>{if(t){let{base:e,ids:s}=t;typeof e!="string"&&(e=t);let l=this.routes.get(e);s?l(s):l()}else this.routes.get("404")()});j(this,"routeToURL",(t,e)=>{let s=this.deconstructURL(t,e);console.log(s);let{base:l,ids:i}=s;this.routes.has(l)?l==="create"?i?this.idsAreValid(i)?this.loadContent(s):this.loadContent():this.loadContent(s):this.loadContent(s):this.loadContent()});j(this,"navigateTo",(t,e,s)=>{e=e||!1,e?history.replaceState("","",t):history.pushState("","","/polychrome"+t),this.routeToURL(t,s)});this.routes=new Map(t)}deconstructURL(t,e){let s=t.replace(/^\//,"").replace(/\/$/,"").split("/");return e?{site:s[0],base:s[1]||"",ids:s[2]?s[2].split("-"):null}:{base:s[0],ids:s[1]?s[1].split("-"):null}}idsAreValid(t){for(let e of t)if(!/^[a-f0-9]{6}$/.test(e)||t.length>8)return!1;return!0}}function ve(){document.querySelector("#palette").onclick=async e=>{let s=e.target,l=e.pointerType,i=s.closest(".plus-container svg");if(i){const{ids:c}=N.deconstructURL(location.pathname),m=parseInt(i.getAttribute("data-color-index"));let a=g.addSlot({index:m+1});c.splice(m+1,0,a.hex),history.replaceState("","",c.join("-")),g.plus.hide(),H.create.push({undo(){g.removeSlot(a,{animations:!1}),c.splice(m+1,1),history.replaceState("","",c.join("-"))},redo(){g.addSlot(a,{animations:!1}),c.splice(m+1,0,a.hex),history.replaceState("","",c.join("-"))}}),g.slots.length==8&&g.plus.hide();return}let n=s.closest(".lock");if(n){l=="touch"&&n.blur();let c=s.closest(".swatch"),m=parseInt(c.getAttribute("data-color-index")),a=g.slots[m];a.isLocked=!a.isLocked,n.classList.toggle("locked"),H.create.push({undo(){let r=g.slots[m],p=document.getElementById(r.id);r.isLocked=!r.isLocked,p.querySelector(".lock").classList.toggle("locked")},redo(){let r=g.slots[m],p=document.getElementById(r.id);r.isLocked=!r.isLocked,p.querySelector(".lock").classList.toggle("locked")}});return}if(s.closest(".x")){let c=s.closest(".swatch"),m=g.slots[parseInt(c.getAttribute("data-color-index"))],{ids:a}=N.deconstructURL(location.pathname);g.removeSlot(m),a.splice(m.data,1),history.replaceState("","",a.join("-")),H.create.push({undo(){g.addSlot(m,{animations:!1}),a.splice(m.data,0,m.hex),history.replaceState("","",a.join("-"))},redo(){g.removeSlot(m,{animations:!1}),a.splice(m.data,1),history.replaceState("","",a.join("-"))}});return}if(s.closest(".info")){let c=s.closest(".swatch"),m=g.slots[parseInt(c.getAttribute("data-color-index"))];if(s.closest(".hex")){let a=J([{id:""}],{type:"color-picker",hex:m.hex});c.append(a);return}if(s.closest(".icon")){await navigator.clipboard.writeText(m.hex).then(()=>{let a=E("Copied hex to clipboard!",{pos:[e.x,e.y]});a.classList.add("at-mouse-pos"),document.body.append(a)},()=>{let a=E("Copy to clipboard failed.",{pos:[e.x,e.y]});a.classList.add("at-mouse-pos"),document.body.append(a)});return}}},document.querySelector(".palettes-page .saved-palettes-wrapper").onclick=async e=>{let s=e.target,l=s.closest(".swatch");if(l){let n=l.parentElement.parentElement;await navigator.clipboard.writeText(A.items[parseInt(n.getAttribute("data-palette-index"))][parseInt(l.getAttribute("data-color-index"))]).then(()=>{let c=E("Copied hex to clipboard!",{pos:[e.x,e.y]});c.classList.add("at-mouse-pos"),document.body.append(c)},()=>{let c=E("Copy to clipboard failed.",{pos:[e.x,e.y]});c.classList.add("at-mouse-pos"),document.body.append(c)});return}if(s.closest(".clear-overlay")){s.closest(".popover").remove();return}if(s.closest("#palettes-open")){N.navigateTo("/create/"+w.savedPalettes.items[parseInt(s.closest(".palette-container").getAttribute("data-palette-index"))].join("-"));return}if(s.closest("#palettes-copy")){await navigator.clipboard.writeText(A.items[parseInt(s.closest(".palette-container").getAttribute("data-palette-index"))].join(`
`)).then(()=>{let n=E("Copied hex to clipboard!",{pos:[e.x,e.y]});n.classList.add("at-mouse-pos"),document.body.append(n)},()=>{let n=E("Copy to clipboard failed.",{pos:[e.x,e.y]});n.classList.add("at-mouse-pos"),document.body.append(n)});return}if(s.closest("#palettes-remove")){let n=parseInt(s.closest(".palette-container").getAttribute("data-palette-index")),c=A.items[n],m={undo(){A.addItem(c,n)},redo(){A.removeItem(n)}};H.palettes.push(m),A.removeItem(n);let a=E("Removed palette.");document.body.append(a);return}let i=s.closest(".more");if(i){let n=J([{content:"Open",id:"palettes-open"},{content:"Remove",id:"palettes-remove"},{content:"Copy",id:"palettes-copy"}],{type:"menu"});i.parentElement.append(n);return}},document.querySelector(".toolbar").onclick=async e=>{let s=e.target;if(s.closest(".undo")){N.deconstructURL(location.pathname,!0).base=="create"?H.create.undo():H.palettes.undo();return}if(s.closest(".redo")){N.deconstructURL(location.pathname,!0).base=="create"?H.create.redo():H.palettes.redo();return}if(s.closest(".copy")){if(N.deconstructURL(location.pathname,!0).base=="create"){let l=[];for(let{hex:i}of g.slots)l.push(i);await navigator.clipboard.writeText(l.join(`
`)).then(()=>{let i=E("Copied palette!");document.body.append(i)},()=>{let i=E("Failed to copy.");document.body.append(i)})}else{let l=[];for(let i of A.items)l.push(i.join("-"));await navigator.clipboard.writeText(l.join(`,
`)).then(()=>{let i=E("Copied palettes to clipboard!");document.body.append(i)},()=>{let i=E("Copy to clipboard failed.");document.body.append(i)})}return}if(s.closest(".generate")){let l=[];for(let{hex:n}of g.slots)l.push(n);g.generate();let i=[];for(let{hex:n}of g.slots)i.push(n);history.replaceState("","","/create/"+i.join("-")),l&&H.create.push({undo:()=>{g.generate(l),history.replaceState("","","/create/"+l.join("-"))},redo:()=>{g.generate(i),history.replaceState("","","/create/"+i.join("-"))}});return}if(s.closest(".save")){if(!w.settings.cookiesOk){document.body.append(E("You'll need to enable cookies in settings for that feature."));return}let l=[];for(let{hex:n}of g.slots)l.push(n);A.addItem(l);let i=E("Saved palette!");document.body.append(i);return}if(s.closest(".remove-all")){K({message:"Are you sure you want to delete all of your palettes? You won't be able to undo this.",value:"remove-all"},[{message:"Yes, delete away.",value:"yes",call(){for(let i=0;A.items.length;i++)A.removeItem(0);let l=E("All palettes removed.");document.body.append(l)}},{message:"No, please don't delete my stuff!",value:"no"}]);return}if(s.closest(".import")){if(N.deconstructURL(location.pathname,!0).base=="create"){let l=W("Paste hex code palette below!","import-create");document.body.append(l)}else{if(!w.settings.cookiesOk){document.body.append(E("You'll need to enable cookies in settings for that feature."));return}let l=W("Paste hex code palette below! Separate palettes by commas.","import-palettes");document.body.append(l)}return}};let o=document.querySelector(".main-nav"),t=document.querySelector(".main-header");onclick=async e=>{var n,c;let s=e.target,l=s.closest("a");if(l){e.preventDefault();let m=l.getAttribute("href");o.classList.remove("visible"),(n=document.querySelector(".overlay"))==null||n.remove(),document.body.style.overflowY="",m!=location.pathname&&N.navigateTo(m);return}if(s.closest("#nav-button"))if(o.classList.toggle("visible"),o.classList.contains("visible")){let m=document.createElement("div");m.classList.add("overlay"),t.append(m),document.body.style.overflowY="hidden",g.plus.hide(),m.addEventListener("click",()=>{m.remove(),o.classList.remove("visible"),document.body.style.overflowY=""},{once:!0}),document.body.style.overflowY="hidden"}else(c=t.querySelector(".overlay"))==null||c.remove(),document.body.style.overflowY="";if(s.closest("#settings")){let m=me();document.body.append(m);return}let i=s.closest(".confirmation-screen");if(i){if(s.closest(".overlay")&&(i==document.querySelector(".cookies")&&(w.settings={cookiesOk:!0},w.info={firstVisit:!0}),i.remove()),i==document.querySelector(".remove-all-confirmation")){if(s.closest(".yes")){for(let a=0;A.items.length;a++)A.removeItem(0);i.remove();let m=E("All palettes removed.");document.body.append(m)}else s.closest(".no")&&i.remove();return}if(i==document.querySelector(".import-create")){let m=N.deconstructURL(location.pathname,!0).ids,a=s.closest(".yes"),r=s.closest(".no");if(a){let p=i.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-",""),y=!(/[g-z~`!#$%\^&*+=\[\]\\';,/{}|\\":<>\?]/g.test(p)||p.length==0||p.length%6!=0),v="Invalid values entered. Try again.";if(y){v="Successfully imported values.";let u=p.match(/.{1,6}/g);g.generate(u),H.create.push({undo(){g.generate(m)},redo(){g.generate(u)}})}let f=E(v);document.body.append(f),i.remove()}else r&&i.remove();return}if(i==document.querySelector(".import-palettes")){let m=s.closest(".yes"),a=s.closest(".no");if(m){let r=i.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-","").replaceAll("#","").toLowerCase(),p="Invalid values entered. Try again.",y=!(/[g-z~`!#$%\^&*+=\[\]\\';/{}|\\":<>\?]/g.test(r)||r.replaceAll(",","").length%6!=0||r.length==0);console.log(r.replaceAll(",","").length%6!=0);let v=r.split(",");for(let u of v)(u.length/6>8||!(u.length>=6))&&(y=!1);if(y){let u=0;for(let x of v)u++,A.addItem(x.match(/.{1,6}/g));p="Successfully imported values.",H.palettes.push({undo(){for(let x=u;x>0;x--)A.removeItem(A.items.length-1)},redo(){for(let x of v)A.addItem(x.match(/.{1,6}/g))}})}let f=E(p);document.body.append(f),i.remove()}else a&&i.remove();return}if(i==document.querySelector(".settings-popover")){let m=s.closest(".yes"),a=s.closest(".no");if(m){let r=w.settings;r.lastColorAlgorithmIndex=i.querySelector("#algorithm").selectedIndex,r.cookiesOk=i.querySelector("#cookies-ok").checked,w.settings=r;let p="Changes saved.";i.remove();let y=E(p);document.body.append(y)}else if(a){let r="Changes discarded.";i.remove();let p=E(r);document.body.append(p)}return}if(i==document.querySelector(".cookies-confirmation")){let m=s.closest(".yes"),a=s.closest(".no");if(m){w.settings={cookiesOk:!0},i.remove();let r=E("Thanks, enjoy the site! :)");document.body.append(r)}else if(a){w.settings={cookiesOk:!1},i.remove();let r=E("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(r)}return}}}}function be(){window.addEventListener("scroll",o,!1),window.addEventListener("touchmove",o,{passive:!1});function o(t){N.deconstructURL(location.pathname).base=="create"&&(t.preventDefault(),t.stopPropagation())}window.ontouchstart=t=>{let e=t.targetTouches[0].target.closest(".create-page .swatch");if(e&&!t.targetTouches[0].target.closest(".options div")&&!t.targetTouches[0].target.closest(".options svg")){let s=function(v){if(v.preventDefault(),l){let f=v.touches[0].clientY-m;e.style.translate="0 "+f+"px";let u=e,x=g.slots.length-a-1;if(y=0,p=0,f>0)for(let d=0;d<x;d++)y=(d*2+1)*n,u=u.nextElementSibling,f>y?(p++,u.style.translate!="0 -100%"&&(u.style.translate="0 -100%")):u.style.translate=="0 -100%"&&(u.style.translate="0 0");else for(let d=0;d<a;d++)y=(d*2+1)*n,u=u.previousElementSibling,-f>y?(p--,u.style.translate!="0 100%"&&(u.style.translate="0 100%")):u.style.translate=="0 100%"&&(u.style.translate="0 0")}else{let f=v.touches[0].clientX-c;e.style.translate=f+"px";let u=e,x=g.slots.length-a-1;if(y=0,p=0,f>0)for(let d=0;d<x;d++)y=(d*2+1)*i,u=u.nextElementSibling,f>y?(p++,u.style.translate!="-100%"&&(u.style.translate="-100%")):u.style.translate=="-100%"&&(u.style.translate="");else for(let d=0;d<a;d++)y=(d*2+1)*i,u=u.previousElementSibling,-f>y?(p--,u.style.translate!="100%"&&(u.style.translate="100%")):u.style.translate=="100%"&&(u.style.translate="")}},l=!1;document.body.classList.contains("vertical")&&(l=!0),g.plus.disabled=!0,g.plus.hide(),e.classList.add("is-dragging");let i=e.clientWidth/2,n=e.clientHeight/2,c=t.touches[0].clientX,m=t.touches[0].clientY,a=parseInt(e.getAttribute("data-color-index")),r=g.slots[a],p=0,y;window.addEventListener("touchmove",s,{passive:!1}),window.addEventListener("touchend",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("touchmove",s),e.style.translate=`${l?"0 ":""}${p*100}%`;function v(){e.removeEventListener("transitionend",v),e.removeEventListener("transitioncancel",v),e.classList.remove("is-released");let f=e;for(let d=0;d<p;d++)g.slots.splice(r.data,1),g.slots.splice(r.data+1,0,r),r.data++,f=f.nextElementSibling,g.slots[r.data-1].data--;for(let d=0;d>p;d--)g.slots.splice(r.data,1),g.slots.splice(r.data-1,0,r),r.data--,f=f.previousElementSibling,g.slots[r.data+1].data++;let u=e.cloneNode(!0);p>0?(f.after(u),e.remove()):p<0&&(f.before(u),e.remove()),e.style.translate="";let x=[];for(let d of g.slots){let b=document.getElementById(d.id);b.style.transition="transform 0s",b.style.translate="",setTimeout(()=>{b.style.transition=""},1),x.push(d.hex)}e=u,history.replaceState("","",x.join("-")),g.plus.disabled=!1,p&&H.create.push({undo(){g.plus.hide();let d=e=document.getElementById(r.id);for(let L=0;L<-p;L++){g.slots.splice(r.data,1),g.slots.splice(r.data+1,0,r),r.data++,d=d.nextElementSibling;let S=parseInt(d.getAttribute("data-color-index"));d.setAttribute("data-color-index",(S-1).toString())}for(let L=0;L>-p;L--){g.slots.splice(r.data,1),g.slots.splice(r.data-1,0,r),r.data--,d=d.previousElementSibling;let S=parseInt(d.getAttribute("data-color-index"));d.setAttribute("data-color-index",(S+1).toString())}u=e.cloneNode(!0),-p>0?(d.after(u),e.remove()):-p<0&&(d.before(u),e.remove());let b=[];for(let L of g.slots)b.push(L.hex);history.replaceState("","",b.join("-"))},redo(){g.plus.hide();let d=e=document.getElementById(r.id);for(let L=0;L<p;L++)g.slots.splice(r.data,1),g.slots.splice(r.data+1,0,r),r.data++,d=d.nextElementSibling,a=parseInt(d.getAttribute("data-color-index")),d.setAttribute("data-color-index",(a-1).toString());for(let L=0;L>p;L--)g.slots.splice(r.data,1),g.slots.splice(r.data-1,0,r),r.data--,d=d.previousElementSibling,a=parseInt(d.getAttribute("data-color-index")),d.setAttribute("data-color-index",(a+1).toString());u=e.cloneNode(!0),p>0?(d.after(u),e.remove()):p<0&&(d.before(u),e.remove());let b=[];for(let L of g.slots)b.push(L.hex);history.replaceState("","",b.join("-"))}})}e.addEventListener("transitionend",v),e.addEventListener("transitioncancel",v)},{once:!0})}},onmousedown=t=>{let e=t.target.closest(".create-page .swatch");if(e&&!t.target.closest(".options div")&&!t.target.closest(".options svg")){let s=function(v){if(l){let f=v.y-m;e.style.translate="0 "+f+"px";let u=e,x=g.slots.length-a-1;if(y=0,p=0,f>0)for(let d=0;d<x;d++)y=(d*2+1)*n,u=u.nextElementSibling,f>y?(p++,u.style.translate!="0px -100%"&&(u.style.translate="0px -100%")):u.style.translate=="0px -100%"&&(u.style.translate="");else for(let d=0;d<a;d++)y=(d*2+1)*n,u=u.previousElementSibling,-f>y?(p--,u.style.translate!="0px 100%"&&(u.style.translate="0px 100%")):u.style.translate=="0px 100%"&&(u.style.translate="")}else{let f=v.x-c;e.style.translate=f+"px";let u=e,x=g.slots.length-a-1;if(y=0,p=0,f>0)for(let d=0;d<x;d++)y=(d*2+1)*i,u=u.nextElementSibling,f>y?(p++,u.style.translate!="-100%"&&(u.style.translate="-100%")):u.style.translate=="-100%"&&(u.style.translate="");else for(let d=0;d<a;d++)y=(d*2+1)*i,u=u.previousElementSibling,-f>y?(p--,u.style.translate!="100%"&&(u.style.translate="100%")):u.style.translate=="100%"&&(u.style.translate="")}},l=!1;document.body.classList.contains("vertical")&&(l=!0),g.plus.disabled=!0,g.plus.hide(),e.classList.add("is-dragging");let i=e.clientWidth/2,n=e.clientHeight/2,c=t.x,m=t.y,a=parseInt(e.getAttribute("data-color-index")),r=g.slots[a],p=0,y;addEventListener("mousemove",s),addEventListener("mouseup",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("mousemove",s),e.style.translate=`${l?"0 ":""}${p*100}%`;function v(){e.removeEventListener("transitionend",v),e.removeEventListener("transitioncancel",v),e.classList.remove("is-released");let f=e;for(let d=0;d<p;d++)g.slots.splice(r.data,1),g.slots.splice(r.data+1,0,r),r.data++,f=f.nextElementSibling,g.slots[r.data-1].data--;for(let d=0;d>p;d--)g.slots.splice(r.data,1),g.slots.splice(r.data-1,0,r),r.data--,f=f.previousElementSibling,g.slots[r.data+1].data++;let u=e.cloneNode(!0);p>0?(f.after(u),e.remove()):p<0&&(f.before(u),e.remove()),e.style.translate="";let x=[];for(let d of g.slots){let b=document.getElementById(d.id);b.style.transition="transform 0s",b.style.translate="",setTimeout(()=>{b.style.transition=""},1),x.push(d.hex)}e=u,history.replaceState("","",x.join("-")),g.plus.disabled=!1,p&&H.create.push({undo(){g.plus.hide();let d=e=document.getElementById(r.id);for(let L=0;L<-p;L++){g.slots.splice(r.data,1),g.slots.splice(r.data+1,0,r),r.data++,d=d.nextElementSibling;let S=parseInt(d.getAttribute("data-color-index"));d.setAttribute("data-color-index",(S-1).toString())}for(let L=0;L>-p;L--){g.slots.splice(r.data,1),g.slots.splice(r.data-1,0,r),r.data--,d=d.previousElementSibling;let S=parseInt(d.getAttribute("data-color-index"));d.setAttribute("data-color-index",(S+1).toString())}u=e.cloneNode(!0),-p>0?(d.after(u),e.remove()):-p<0&&(d.before(u),e.remove());let b=[];for(let L of g.slots)b.push(L.hex);history.replaceState("","",b.join("-"))},redo(){g.plus.hide();let d=e=document.getElementById(r.id);for(let L=0;L<p;L++)g.slots.splice(r.data,1),g.slots.splice(r.data+1,0,r),r.data++,d=d.nextElementSibling,a=parseInt(d.getAttribute("data-color-index")),d.setAttribute("data-color-index",(a-1).toString());for(let L=0;L>p;L--)g.slots.splice(r.data,1),g.slots.splice(r.data-1,0,r),r.data--,d=d.previousElementSibling,a=parseInt(d.getAttribute("data-color-index")),d.setAttribute("data-color-index",(a+1).toString());u=e.cloneNode(!0),p>0?(d.after(u),e.remove()):p<0&&(d.before(u),e.remove());let b=[];for(let L of g.slots)b.push(L.hex);history.replaceState("","",b.join("-"))}})}e.addEventListener("transitionend",v),e.addEventListener("transitioncancel",v)},{once:!0}),ondragstart=()=>!1}}}let xe=document.querySelector(".main-nav");function Le(){onkeydown=o=>{var t,e,s,l;if(o.metaKey||o.ctrlKey){let{base:i}=N.deconstructURL(location.pathname,!0);if(o.key==="z"||o.key==="Z")if(i==="palettes"){o.shiftKey?H.palettes.redo():H.palettes.undo();return}else{o.shiftKey?H.create.redo():H.create.undo();return}if(i==="create"){let n=parseInt(o.key);if(n>=0&&n<=9){o.preventDefault();let c=g.slots[n-1]||g.slots[g.slots.length-1],m=document.getElementById(c.id);H.create.push({undo(){let a=g.slots[n-1]||g.slots[g.slots.length-1],r=document.getElementById(a.id);a.isLocked=!a.isLocked,r.querySelector(".lock").classList.toggle("locked")},redo(){let a=g.slots[n-1]||g.slots[g.slots.length-1],r=document.getElementById(a.id);a.isLocked=!a.isLocked,r.querySelector(".lock").classList.toggle("locked")}}),c.isLocked=!c.isLocked,m.querySelector(".lock").classList.toggle("locked");return}}}if(o.key===" "){let{base:i}=N.deconstructURL(location.pathname,!0);if(i==="create"){o.preventDefault();let n=[];for(let{hex:m}of g.slots)n.push(m);g.generate();let c=[];for(let{hex:m}of g.slots)c.push(m);history.replaceState("","","/polychrome/create/"+c.join("-")),H.create.push({undo:()=>{g.generate(n),history.replaceState("","","/polychrome/create/"+n.join("-")),g.plus.hide()},redo:()=>{g.generate(c),history.replaceState("","","/polychrome/create/"+c.join("-"))}})}return}if(o.key==="Escape"){(t=document.querySelector(".confirmation-screen"))==null||t.remove(),xe.classList.remove("visible"),(e=document.querySelector(".overlay"))==null||e.remove();return}if(o.key==="y"||o.key==="Y"){((s=document.querySelector(".confirmation-screen"))==null?void 0:s.querySelector(".yes")).click();return}if(o.key==="n"||o.key==="N"){((l=document.querySelector(".confirmation-screen"))==null?void 0:l.querySelector(".no")).click();return}//! NOT DONE
if(o.key==="Enter"){let i=document.activeElement;console.log(i);return}o.key}}let g=new ye,A=new ue,N=new ge([["",R("Home",document.getElementById("landing-page"))],["palettes",R("Palettes",document.getElementById("palettes-page"),A)],["create",R("Create",document.getElementById("create-page"),g)],["404",R("404 Not Found",document.getElementById("not-found-page"))]]);N.routeToURL(location.pathname,!0);setTimeout(()=>{document.querySelector(":root").style.display="initial",window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")},200);onpopstate=()=>N.navigateTo(location.pathname,!0,!0);ve();be();Le();onmouseover=o=>{if(!g.plus.disabled){const t=o.target,e=t.closest(".swatch");if(e)if(t.closest(".detector")&&g.slots.length<8){const l=t.closest(".left");let i=parseInt(e.getAttribute("data-color-index"));l&&i--,g.plus.show(i)}else g.plus.hide()}};w.info.firstVisit&&K({message:"This site relies on local storage and cookies to save palettes.",value:"cookies"},[{message:"Sure, sounds good to me.",value:"yes",call(){w.info={firstVisit:!1},w.settings={cookiesOk:!0};let o=E("Thanks, enjoy the site! :)");document.body.append(o)}},{message:"No thanks, I don't want to save palettes.",value:"no",call(){w.info={firstVisit:!1},w.settings={cookiesOk:!1};for(let t=0;t<A.items.length;t++)A.removeItem(0);let o=E("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(o)}}]);onresize=()=>{window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")};(navigator.userAgent.includes("Android")||navigator.userAgent.includes("like Mac"))&&document.body.classList.add("mobile");
