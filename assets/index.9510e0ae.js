var le=Object.defineProperty;var oe=(i,e,s)=>e in i?le(i,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):i[e]=s;var j=(i,e,s)=>(oe(i,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))t(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function s(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(l){if(l.ep)return;l.ep=!0;const o=s(l);fetch(l.href,o)}})();let U;const ie=new Uint8Array(16);function ne(){if(!U&&(U=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!U))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return U(ie)}const C=[];for(let i=0;i<256;++i)C.push((i+256).toString(16).slice(1));function ae(i,e=0){return(C[i[e+0]]+C[i[e+1]]+C[i[e+2]]+C[i[e+3]]+"-"+C[i[e+4]]+C[i[e+5]]+"-"+C[i[e+6]]+C[i[e+7]]+"-"+C[i[e+8]]+C[i[e+9]]+"-"+C[i[e+10]]+C[i[e+11]]+C[i[e+12]]+C[i[e+13]]+C[i[e+14]]+C[i[e+15]]).toLowerCase()}const re=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),z={randomUUID:re};function de(i,e,s){if(z.randomUUID&&!e&&!i)return z.randomUUID();i=i||{};const t=i.random||(i.rng||ne)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,e){s=s||0;for(let l=0;l<16;++l)e[s+l]=t[l];return e}return ae(t)}const ce=document.title;function k(i){let e=parseInt(i[0]+i[1],16)/255,s=parseInt(i[2]+i[3],16)/255,t=parseInt(i[4]+i[5],16)/255,l=Math.max(e,s,t),o=Math.min(e,s,t),a,c,r=e*.299+s*.587+t*.114,n=(l+o)/2;if(l==o)a=c=0;else{let u=l-o;switch(c=n>.5?u/(2-l-o):u/(l+o),l){case e:a=(s-t)/u+(s<t?6:0);break;case s:a=(t-e)/u+2;break;default:a=(e-s)/u+4;break}a=a*60}return{r:e,g:s,b:t,h:a,s:c,l:n,lum:r}}function I(i,e,s){i>360?i-=360:i<0&&(i+=360),e>1?e=1:e<0&&(e=0),s>1?s=1:s<0&&(s=0),e*=100;const t=e*Math.min(s,1-s)/100,l=o=>{const a=(o+i/30)%12,c=s-t*Math.max(Math.min(a-3,9-a,1),-1);return Math.round(255*c).toString(16).padStart(2,"0")};return`${l(0)}${l(8)}${l(4)}`}const w={get info(){let i=localStorage.getItem("info");return i?JSON.parse(i):(localStorage.setItem("info",JSON.stringify({firstVisit:!0})),this.info)},set info(i){let e=this.info;if(i)for(let[s,t]of Object.entries(i))e[s]=t;localStorage.setItem("info",JSON.stringify(e))},get settings(){let i=localStorage.getItem("settings");return i?JSON.parse(i):(localStorage.setItem("settings",JSON.stringify({lastColorAlgorithmIndex:2,cookiesOk:!1})),this.settings)},set settings(i){let e=this.settings;if(i)for(let[s,t]of Object.entries(i))e[s]=t;localStorage.setItem("settings",JSON.stringify(e))},savedPalettes:{get items(){let i=localStorage.getItem("saved-palettes"),e;if(i){let s=[];e=JSON.parse(i);for(let t of e)s.push(t);return s}else return[]},set items(i){localStorage.setItem("saved-palettes",JSON.stringify(i))},addItem(i){let e=this.items;e.push(i),this.items=e},removeItem(i){this.items.splice(i,1)}}},H={create:{cmds:[],cmdIndex:-1,push(i){this.cmds.splice(this.cmdIndex+1,1/0,i),this.cmdIndex=this.cmds.length-1},undo(){this.cmdIndex>-1&&(this.cmds[this.cmdIndex].undo(),this.cmdIndex--)},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}},palettes:{cmds:[],cmdIndex:-1,push(i){this.cmds.splice(this.cmdIndex+1,1/0,i),this.cmdIndex=this.cmds.length-1},undo(){if(this.cmdIndex>-1){let i=this.cmds[this.cmdIndex];this.cmdIndex--,i.undo()}},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}}},O=document.querySelector(".toolbar");function R(i,e,s){return t=>{document.title=ce+" | "+i;const l=document.querySelector("main.visible");l&&l.classList.remove("visible");const o=e;if(o==null||o.classList.add("visible"),i=="Palettes")document.body.parentElement.style.overflow="",document.body.style.overflow="",O.classList.add("palettes"),O.classList.remove("create"),s.draw(w.savedPalettes.items);else if(i=="Create")if(document.body.parentElement.style.overflow="hidden",document.body.style.overflow="hidden",O.classList.add("create"),O.classList.remove("palettes"),t)s.generate(t);else{let a=s.generate(),c=[];for(let r of a)c.push(r.hex);history.replaceState("","",c.join("-"))}else O.classList.remove("palettes","create"),document.documentElement.style.overflow="",document.body.style.overflow=""}}const f=(i,e)=>Math.random()*(e-i)+i,me=()=>btoa(parseInt(de(),16).toString(36)).replaceAll("=","");function E(i,e){const s=document.createElement("div");s.classList.add("tooltip","appearing");const t=document.createElement("h2");return t.innerHTML=i,s.append(t),e!=null&&e.pos?(s.style.left=e.pos[0]+"px",s.style.top=e.pos[1]+"px"):s.classList.add("centered"),setTimeout(()=>{e&&e.pos&&(s.clientWidth+e.pos[0]>document.body.clientWidth?(s.style.translate="-100%",s.clientHeight+e.pos[1]>document.body.clientHeight&&(s.style.translate="-100 -100%")):s.clientHeight+e.pos[1]>document.body.clientHeight&&(s.style.translate="0 -100%"))},0),s.addEventListener("animationend",()=>{s.classList.remove("appearing"),setTimeout(()=>{s.classList.add("disappearing"),s.addEventListener("animationend",()=>{s.remove()},{once:!0})},(e==null?void 0:e.duration)||1e3)},{once:!0}),s}function J(i,e){let s=document.createElement("div");s.classList.add("popover");let t=document.createElement("div");if(t.classList.add("clear-overlay"),(e==null?void 0:e.type)=="menu"){let l=document.createElement("ul");l.classList.add("list");for(let o of i){let a=document.createElement("div");a.id=o.id,a.classList.add("choice"),o.content&&(a.innerHTML=o.content),l.append(a)}s.append(l,t)}else if((e==null?void 0:e.type)=="color-picker"){let l=document.createElement("canvas");l.id="color-picker",l.classList.add("color-picker");let o=l.getContext("2d"),{h:a}=k(e.hex),c=`hsl(${a}, 100%, 50%)`,r=o.createLinearGradient(0,0,o.canvas.width,0);r.addColorStop(0,"#fff"),r.addColorStop(1,c),o.fillStyle=r,o.fillRect(0,0,o.canvas.width,o.canvas.height);let n=o.createLinearGradient(0,0,0,o.canvas.height);n.addColorStop(0,"rgba(0,0,0,0)"),n.addColorStop(1,"black"),o.fillStyle=n,o.fillRect(0,0,o.canvas.width,o.canvas.height);let u=document.createElement("div");u.classList.add("color-picker-cursor");let h=document.createElement("input");h.setAttribute("min","0"),h.setAttribute("max","360"),h.setAttribute("type","range");let y=document.createElement("div");y.classList.add("huebar");let p=document.createElement("div");p.classList.add("huebar-cursor");let d=document.createElement("input");d.setAttribute("min","0"),d.setAttribute("max","360"),d.setAttribute("type","range"),l.append(u,h),y.append(p,d),s.append(l,y)}return s}function K(i,e){let s=document.createElement("div");s.classList.add("confirmation-screen",i.value+"-confirmation");let t=document.createElement("div");t.classList.add("box");let l=document.createElement("h2");l.innerHTML=i.message;let o=document.createElement("ul"),a=document.createElement("div");a.classList.add("overlay"),t.append(l,o),s.append(t,a);for(let{message:c,value:r,call:n}of e){let u=document.createElement("li");u.innerHTML=c,u.classList.add(r),o.append(u),u.addEventListener("click",()=>{n&&n(),s.remove()},{once:!0})}document.body.append(s)}function W(i,e){let s=document.createElement("div");s.classList.add("confirmation-screen",e);let t=document.createElement("h2");t.innerHTML=i;let l=document.createElement("textarea"),o=document.createElement("div");o.classList.add("overlay");let a=document.createElement("div");a.classList.add("box");let c=document.createElement("ul"),r=document.createElement("li");r.classList.add("yes"),r.innerHTML="Confirm";let n=document.createElement("li");return n.innerHTML="Cancel",n.classList.add("no"),c.append(n,r),a.append(t,l,c),s.append(a,o),s}function ue(){let i=document.createElement("div");i.classList.add("confirmation-screen","settings-popover");let e=document.createElement("div");e.classList.add("box");let s=document.createElement("div");s.classList.add("overlay");let t=document.createElement("h2");t.innerText="Settings";let l=document.createElement("ul");l.classList.add("options");let o=document.createElement("li"),a=document.createElement("label");a.innerText="Algorithm";let c=document.createElement("select");c.id="algorithm";let r=document.createElement("option");r.value="random",r.innerText="Random Algorithm";let n=document.createElement("option");n.value="monochromatic",n.innerText="Monochromatic";let u=document.createElement("option");u.value="analogous",u.innerText="Analogous";let h=document.createElement("option");h.value="complementary",h.innerText="Complementary";let y=document.createElement("option");y.value="split-complementary",y.innerText="Split Complementary";let p=document.createElement("option");p.value="triadic",p.innerText="Triadic";let d=document.createElement("option");d.value="tetradic",d.innerText="Tetradic";let b=document.createElement("option");b.value="square",b.innerText="Square";let m=document.createElement("option");m.value="randomize",m.innerText="Randomize Colors";let x=document.createElement("ul");x.classList.add("confirmation");let v=document.createElement("li");v.classList.add("yes"),v.innerText="Confirm";let L=document.createElement("li");L.classList.add("no"),L.innerText="Cancel",x.append(L,v),c.append(m,n,u,h,y,p,d,b,r),c.selectedIndex=w.settings.lastColorAlgorithmIndex;let S=document.createElement("li");S.classList.add("horizontal");let T=document.createElement("div"),M=document.createElement("label");M.innerText="Cookies";let Y=document.createElement("label");Y.innerText="That's fine!",Y.setAttribute("for","cookies-ok");let D=document.createElement("label");D.innerText="No thanks.",D.setAttribute("for","cookies-not-ok");let V=document.createElement("div"),$=document.createElement("div");V.classList.add("op"),$.classList.add("op");let N=document.createElement("input");N.id="cookies-ok",N.value="cookies-ok",N.setAttribute("type","radio"),N.classList.add("true");let B=document.createElement("input");return B.id="cookies-not-ok",B.value="cookies-not-ok",B.setAttribute("type","radio"),B.classList.add("false"),w.settings.cookiesOk?N.checked=!0:B.checked=!0,N.addEventListener("change",()=>{N.checked?B.checked=!1:B.checked=!0}),B.addEventListener("change",()=>{B.checked?N.checked=!1:N.checked=!0}),V.append(N,Y),$.append(B,D),S.append(M,T),T.append(V,$),o.append(a,c),l.append(o,S),e.append(t,l,x),i.append(s,e),i}let P=document.querySelector(".saved-palettes-wrapper");class fe{constructor(){j(this,"items",[]);this.items=w.savedPalettes.items}draw(e){for(;P.childElementCount>0;)P.lastChild.remove();if(e)for(let t=0;t<e.length;t++){let l=e[t],o=document.createElement("div");o.setAttribute("data-palette-index",t.toString()),o.classList.add("palette-container");let a=document.createElement("div");a.classList.add("palette");let c=document.createElement("div");c.classList.add("options");let r=document.createElement("div");r.classList.add("more");let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 100 100");let u=document.createElementNS("http://www.w3.org/2000/svg","use");u.setAttribute("href","#icon-more-horizontal");for(let h=0;h<l.length;h++){let y=l[h],{lum:p}=k(y),d=document.createElement("div");d.setAttribute("data-color-index",h.toString()),d.classList.add("swatch"),d.style.backgroundColor="#"+y,p<.5&&d.classList.add("isLight");let b=document.createElement("h2");b.innerHTML="#"+y,b.classList.add("text"),d.append(b),a.append(d)}n.append(u),r.append(n),c.append(r),o.append(a,c),P.append(o)}let s=document.querySelector(".palettes-page .when-empty");P.childElementCount==0?s.classList.remove("hidden"):s.classList.add("hidden")}addItem(e,s){typeof s=="number"?this.items.splice(s,0,e):this.items.push(e),w.savedPalettes.items=this.items,this.draw(this.items)}removeItem(e){this.items.splice(e,1),w.savedPalettes.items=this.items,this.draw(this.items)}}function F(i){if(i.algorithm.details=="slot"){let e=[];for(let s=0;s<6;s++)e.push(Math.round(f(0,15)).toString(16));return e.join("")}else for(let e of i.slots)if(!e.isLocked){let s=[];for(let t=0;t<6;t++)s.push(Math.round(f(0,15)).toString(16));e.hex=s.join(""),e.sync()}}function X(i,e){if(i.algorithm.details=="slot")if(Math.random()>.5){let s=0,t=0,l=0,o=i.slots[e-2],a=i.slots[e-1],c=i.slots[e],r=i.slots[e+1];if(c){let{h:n,s:u,l:h}=k(c.hex);if(s=n,a){let{s:y,l:p}=k(a.hex);t=u-(u-y)/2,l=h-(h-p)/2}else if(r){let{s:y,l:p}=k(r.hex);t=u-(y-u)/2,l=h-(p-h)/2}else t=u*f(.7,1.3),l=h*f(.7,1.3)}else if(a){let{h:n,s:u,l:h}=k(a.hex);if(s=n,o){let{s:y,l:p}=k(o.hex);t=u+(u-y)/2,l=h+(h-p)/2}else t=u*f(.7,1.3),l=h*f(.7,1.3)}else t=f(.2,1),l=f(.1,.9);return t*=f(.95,1.05),l*=f(.95,1.05),I(s,t,l)}else{let s,t,l,o,a,c,r;for(let{hex:n}of i.slots){let{h:u,s:h,l:y}=k(n);typeof s!="number"&&(s=u),(typeof l!="number"||h>l)&&(l=h),(typeof t!="number"||h<t)&&(t=h),(typeof a!="number"||y>a)&&(a=y),(typeof o!="number"||y<o)&&(o=y)}return c=f(t,l)*f(.95,1.05),r=f(o,a)*f(.95,1.05),I(s,c,r)}else if(i.algorithm.details=="increment"||Math.random()>.5){let s=[],t=f(0,360),l=0,o=0,a=0,c=0,r=0,n=0,u=0,h=0;for(let y of i.slots)y.isLocked||s.push(y);for(let y=0;y<s.length;y++)if(y==0){let p=i.slots[0];l=f(.1,1),o=f(.1,.9),p.hex=I(t,l,o),p.sync(),a=l,c=o,a<.4?r=f(.7,1):a>.6?r=f(.1,.3):a>.5?r=f(.1,.2):r=f(.8,.9),c<.4?n=f(.7,1):c>.6?n=f(.1,.3):c>.5?n=f(.1,.2):n=f(.8,.9),u=(r-a)/i.slots.length,h=(n-c)/i.slots.length}else{let p=i.slots[y];l=a+u*y,o=c+h*y,p.hex=I(t,l,o),p.sync()}}else{let s=f(0,360),t,l,o;for(let a of i.slots)a.isLocked||(t=f(.2,1),l=f(.2,.8),typeof o!="number"&&(s=o=f(0,360)),a.hex=I(s,t,l),a.sync())}}function G(i,e){if(i.algorithm.details=="slot")if(Math.random()>.5){let s=0,t=0,l=0,o=i.slots[e-2],a=i.slots[e-1],c=i.slots[e],r=i.slots[e+1];if(c){let{h:n,s:u,l:h}=k(c.hex);if(a){let{h:y,s:p,l:d}=k(a.hex),b=n-y;b>180?b=n-y-360:b<-180&&(b=n-y+360),s=n-b/2,t=u-(u-p)/2,l=h-(h-d)/2}else if(r){let{h:y,s:p,l:d}=k(r.hex),b=y-n;b>180?b=y-n-360:b<-180&&(b=y-n+360),s=n-b/2,t=u-(p-u)/2,l=h-(d-h)/2}else s=n*f(.7,1.3),t=u*f(.7,1.3),l=h*f(.7,1.3)}else if(a){let{h:n,s:u,l:h}=k(a.hex);if(o){let{h:y,s:p,l:d}=k(o.hex),b=n-y;b>180?b=n-y-360:b<-180&&(b=n-y+360),s=n+b/2,t=u+(u-p)/2,l=h+(h-d)/2}else s=n*f(.7,1.3),t=u*f(.7,1.3),l=h*f(.7,1.3)}else s=f(0,360),t=f(.2,1),l=f(.1,.9);return s*=f(.95,1.05),t*=f(.95,1.05),l*=f(.95,1.05),I(s,t,l)}else{let s,t,l,o,a,c,r,n,u,h,y=Math.random();for(let{hex:p}of i.slots){let{h:d,s:b,l:m}=k(p);if(typeof s!="number")s=d;else if(typeof t!="number"){let x=s,v=x-d;v>180?x-=360:v<-180&&(x+=360),v=x-d,(v<-25||v>25)&&(t=d)}else if(typeof l!="number"){let x=s,v=t,L=x-d,S=v-d;L>180?x-=360:L<-180&&(x+=360),S>180?v-=360:S<-180&&(v+=360),L=x-d,S=v-d,(L>25||L<-25)&&(S>25||S<-25)&&(l=d)}(typeof a!="number"||b>a)&&(a=b),(typeof o!="number"||b<o)&&(o=b),(typeof r!="number"||m>r)&&(r=m),(typeof c!="number"||m<c)&&(c=m)}return l&&y<.333?n=l:t&&y>.666?n=t:n=s,u=f(o,a)*f(.95,1.05),h=f(c,r)*f(.95,1.05),I(n,u,h)}else if(i.algorithm.details=="increment"||Math.random()>.5){let s=0,t=0,l=0,o=0,a=0,c=0,r=0,n=0,u=0,h=0,y=0,p=0;for(let d=0;d<i.slots.length;d++){let b=i.slots[d];if(!b.isLocked)if(!o)s=o=f(0,360),t=a=f(.1,1),l=c=f(.1,.9),b.hex=I(s,t,l),b.sync(),o=s,a=t,c=l,Math.random()>.5?r=s+f(90,120):r=s-f(75,90),a<.4?n=f(.7,1):a>.6?n=f(.1,.3):a>.5?n=f(.1,.2):n=f(.8,.9),c<.4?u=f(.7,1):c>.6?u=f(.1,.3):c>.5?u=f(.1,.2):u=f(.8,.9),h=(r-o)/i.slots.length,y=(n-a)/i.slots.length,p=(u-c)/i.slots.length;else{let m=i.slots[d];s=o+h*d,t=a+y*d,l=c+p*d,m.hex=I(s,t,l),m.sync()}}}else{let s,t,l,o,a,c;for(let r of i.slots)if(!r.isLocked){if(t=f(.2,1),l=f(.2,.8),typeof o!="number")s=o=f(0,360);else if(typeof a!="number")s=a=o+30*f(.975,1.025);else if(typeof c!="number")s=c=o-30*f(.975,1.025);else{let n=Math.random();n<.333?s=o:n>.666?s=a:s=c}r.hex=I(s,t,l),r.sync()}}}function Z(i){if(i.algorithm.details=="slot"){let e,s,t,l,o,a,c,r,n,u=Math.random();for(let{hex:h}of i.slots){let{h:y,s:p,l:d}=k(h);if(typeof e!="number")e=y;else if(typeof s!="number"){let b=e,m=b-y;m>180?b-=360:m<-180&&(b+=360),m=b-y,(m<-90||m>90)&&(s=y)}(typeof l!="number"||p>l)&&(l=p),(typeof t!="number"||p<t)&&(t=p),(typeof a!="number"||d>a)&&(a=d),(typeof o!="number"||d<o)&&(o=d)}return u>.5&&s?c=s*f(.925,1.025):c=e*f(.925,1.025),r=f(t,l)*f(.95,1.05),n=f(o,a)*f(.95,1.05),I(c,r,n)}else{let e,s,t,l,o;for(let a of i.slots)a.isLocked||(s=f(.2,1),t=f(.2,.8),typeof l!="number"?e=l=f(0,360):typeof o!="number"?e=o=l+150*f(.975,1.025):Math.random()<.5?e=l*f(.975,1.025):e=o*f(.975,1.025),a.hex=I(e,s,t),a.sync())}}function Q(i){if(i.algorithm.details=="slot"){let e,s,t,l,o,a,c,r,n,u,h=Math.random();for(let{hex:y}of i.slots){let{h:p,s:d,l:b}=k(y);if(typeof e!="number")e=p;else if(typeof s!="number"){let m=e,x=m-p;x>180?m-=360:x<-180&&(m+=360),x=m-p,(x<-30||x>30)&&(s=p)}else if(typeof t!="number"){let m=e,x=s,v=m-p,L=x-p;v>180?m-=360:v<-180&&(m+=360),L>180?x-=360:L<-180&&(x+=360),v=m-p,L=x-p,(v>30||v<-30)&&(L>30||L<-30)&&(t=p)}(typeof o!="number"||d>o)&&(o=d),(typeof l!="number"||d<l)&&(l=d),(typeof c!="number"||b>c)&&(c=b),(typeof a!="number"||b<a)&&(a=b)}return h<.333&&t?r=t:h>.666&&s?r=s:r=e,n=f(l,o)*f(.95,1.05),u=f(a,c)*f(.95,1.05),I(r,n,u)}else{let e,s,t,l,o,a;for(let c of i.slots)if(!c.isLocked){if(s=f(.2,1),t=f(.2,.8),typeof l!="number")e=l=f(0,360);else if(typeof o!="number")e=o=l+150*f(.975,1.025);else if(typeof a!="number")e=a=l-150*f(.975,1.025);else{let r=Math.random();r<.333?e=l*f(.975,1.025):r>.666?e=o*f(.975,1.025):e=a*f(.975,1.025)}c.hex=I(e,s,t),c.sync()}}}function _(i){if(i.algorithm.details=="slot"){let e,s,t,l,o,a,c,r,n,u,h=Math.random();for(let{hex:y}of i.slots){let{h:p,s:d,l:b}=k(y);if(typeof e!="number")e=p;else if(typeof s!="number"){let m=e,x=m-p;x>180?m-=360:x<-180&&(m+=360),x=m-p,(x<-90||x>90)&&(s=p)}else if(typeof t!="number"){let m=e,x=s,v=m-p,L=x-p;v>180?m-=360:v<-180&&(m+=360),L>180?x-=360:L<-180&&(x+=360),v=m-p,L=x-p,(v>90||v<-90)&&(L>90||L<-90)&&(t=p)}(typeof o!="number"||d>o)&&(o=d),(typeof l!="number"||d<l)&&(l=d),(typeof c!="number"||b>c)&&(c=b),(typeof a!="number"||b<a)&&(a=b)}return h<.333?r=e:h>.666?r=s:r=t,n=f(l,o)*f(.95,1.05),u=f(a,c)*f(.95,1.05),I(r,n,u)}else{let e,s,t,l,o,a;for(let c of i.slots)if(!c.isLocked){if(s=f(.2,1),t=f(.2,.8),typeof l!="number")e=l=f(0,360);else if(typeof o!="number")e=o=l+120;else if(typeof a!="number")e=a=l-120;else{let r=Math.random();r<.333?e=l:r<.666?e=o:e=a}c.hex=I(e,s,t),c.sync()}}}function ee(i){if(i.algorithm.details=="slot"){let e,s,t,l,o,a,c,r,n,u,h,y=Math.random();for(let{hex:p}of i.slots){let{h:d,s:b,l:m}=k(p);if(typeof e!="number")e=d;else if(typeof s!="number"){let x=e,v=x-d;v>180?x-=360:v<-180&&(x+=360),v=x-d,(v<-45||v>45)&&(s=d)}else if(typeof t!="number"){let x=e,v=s,L=x-d,S=v-d;L>180?x-=360:L<-180&&(x+=360),S>180?v-=360:S<-180&&(v+=360),L=x-d,S=v-d,(L>45||L<-45)&&(S>45||S<-45)&&(t=d)}else if(typeof l!="number"){let x=e,v=s,L=t,S=x-d,T=v-d,M=L-d;S>180?x-=360:S<-180&&(x+=360),T>180?v-=360:T<-180&&(v+=360),M>180?L-=360:M<-180&&(L+=360),S=x-d,T=v-d,M=L-d,(S>45||S<-45)&&(T>45||T<-45)&&(M>45||M<-45)&&(l=d)}(typeof a!="number"||b>a)&&(a=b),(typeof o!="number"||b<o)&&(o=b),(typeof r!="number"||m>r)&&(r=m),(typeof c!="number"||m<c)&&(c=m)}return typeof l=="number"&&y<.25?n=l:typeof t=="number"&&y<.5?n=t:typeof s=="number"&&y<.75?n=s:n=e,u=f(o,a)*f(.95,1.05),h=f(c,r)*f(.95,1.05),I(n,u,h)}else{let e,s,t,l,o,a,c;for(let r of i.slots)if(!r.isLocked){if(s=f(.2,1),t=f(.2,.8),typeof l!="number")e=l=f(0,360);else if(typeof o!="number")e=o=l+60;else if(typeof a!="number")e=a=l-120;else if(typeof c!="number")e=c=l+180;else{let n=Math.random();n<.25?e=l:n>.5?e=o:n>.75?e=a:e=c}r.hex=I(e,s,t),r.sync()}}}function te(i){if(i.algorithm.details=="slot"){let e,s,t,l,o,a,c,r,n,u,h,y=Math.random();for(let{hex:p}of i.slots){let{h:d,s:b,l:m}=k(p);if(typeof e!="number")e=d;else if(typeof s!="number"){let x=e,v=x-d;v>180?x-=360:v<-180&&(x+=360),v=x-d,(v<-85||v>85)&&(s=d)}else if(typeof t!="number"){let x=e,v=s,L=x-d,S=v-d;L>180?x-=360:L<-180&&(x+=360),S>180?v-=360:S<-180&&(v+=360),L=x-d,S=v-d,(L<-85||L>85)&&(S<-85||S>85)&&(t=d)}else if(typeof l!="number"){let x=e,v=s,L=t,S=x-d,T=v-d,M=L-d;S>180?x-=360:S<-180&&(x+=360),T>180?v-=360:T<-180&&(v+=360),M>180?L-=360:M<-180&&(L+=360),S=x-d,T=v-d,M=L-d,(S<-85||S>85&&T<-85||T>85&&(M<-85||M>85))&&(l=d)}(typeof a!="number"||b>a)&&(a=b),(typeof o!="number"||b<o)&&(o=b),(typeof r!="number"||m>r)&&(r=m),(typeof c!="number"||m<c)&&(c=m)}return typeof l=="number"&&y<.25?n=l:typeof t=="number"&&y<.5?n=t:typeof s=="number"&&y<.75?n=s:n=e,u=f(o,a)*f(.95,1.05),h=f(c,r)*f(.95,1.05),I(n,u,h)}else{let e,s,t,l,o,a,c;for(let r of i.slots)if(!r.isLocked){if(s=f(.2,1),t=f(.2,.8),typeof l!="number")e=l=f(0,360);else if(typeof o!="number")e=o=l+60;else if(typeof a!="number")e=a=l-120;else if(typeof c!="number")e=c=l+180;else{let n=Math.random();n<.25?e=l:n>.5?e=o:n>.75?e=a:e=c}r.hex=I(e,s,t),r.sync()}}}function pe(i,e){switch(Math.round(f(0,7))){case 0:return F(i);case 1:return X(i,e);case 2:default:return G(i,e);case 3:return Z(i);case 4:return Q(i);case 5:return _(i);case 6:return ee(i);case 7:return te(i)}}const he=[F,X,G,Z,Q,_,ee,te,pe];let ye=document.getElementById("palette");class ge{constructor(){j(this,"slots",[]);j(this,"plus",{palette:this,disabled:!1,active:!1,show(e){if(!this.active){let s=this.render(e.toString()),t=this.palette.slots[e];t?document.getElementById(t.id).after(s):(t=this.palette.slots[e+1],document.getElementById(t.id).before(s)),this.active=!0}},hide(){var e;this.active&&((e=document.getElementById("plus-button"))==null||e.parentElement.parentElement.remove(),this.active=!1)},render(e){let s=document.createElement("div");s.classList.add("plus-container");let t=document.createElement("div");t.classList.add("circle");let l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("data-color-index",e),l.setAttribute("viewBox","0 0 100 100"),l.id="plus-button";let o=document.createElementNS("http://www.w3.org/2000/svg","use");return o.setAttribute("href","#icon-plus-button"),o.setAttribute("viewBox","0 0 100 100"),l.append(o),t.append(l),s.append(t),s}});j(this,"algorithm",{list:he,get(e){e=="slot"?this.details="slot":this.details="";let s=w.settings.lastColorAlgorithmIndex;return s||(w.settings={lastColorAlgorithmIndex:1}),this.list[s]},details:"",direction:{h:0,s:0,l:0},preference:{h:void 0,s:void 0,l:void 0}})}removeSlot(e,s){s||(s={animations:!0});let t=e.data+1;for(let o=t;o<this.slots.length;o++)this.slots[o].data--;let l=document.getElementById(e.id);if(this.slots.splice(e.data,1),s.animations==!0){let o=function(){l.remove(),l.removeEventListener("animationend",o),l.removeEventListener("animationcancel",o)};l.classList.add("deinit"),l.addEventListener("animationend",o),l.addEventListener("animationcancel",o)}else l.remove();return e}addSlot(e,s){var a;let t={palette:this,hex:e.hex,isLocked:typeof e.isLocked=="boolean"?e.isLocked:!1,id:e.id||me(),index:typeof e.index!="number"?this.slots.length:e.index,get data(){var r;let c=parseInt((r=document.getElementById(this.id))==null?void 0:r.getAttribute("data-color-index"));return typeof c=="number"?c:this.data=this.index},set data(c){var r;(r=document.getElementById(this.id))==null||r.setAttribute("data-color-index",c.toString()),this.index=c},generate(){this.hex=this.palette.algorithm.get("slot")(this.palette,this.index),this.sync()},sync(){let c=document.getElementById(this.id);if(this.hex){let{lum:r}=k(this.hex);r<.5?c.classList.add("isLight"):c.classList.remove("isLight"),c.style.backgroundColor="#"+this.hex,c.getElementsByClassName("hex")[0].innerHTML="#"+this.hex}}};t.hex||(t.hex=this.algorithm.get("slot")(this,t.index));let l=this.createSwatch(t,s),o=document.getElementById((a=this.slots[t.index-1])==null?void 0:a.id);o?o.after(l):ye.prepend(l),t.data=t.index,this.slots.splice(t.index,0,t);for(let c=t.index+1;c<this.slots.length;c++)this.slots[c].data++;return t}createSwatch(e,s){s||(s={animations:!0});let t=document.createElement("div");if(t.classList.add("swatch"),t.setAttribute("data-color-index",e.data),t.id=e.id,e.hex){t.style.backgroundColor="#"+e.hex;let{lum:m}=k(e.hex);m<.5?t.classList.add("isLight"):t.classList.remove("isLight")}if(s.animations==!0){let m=function(){t.classList.remove("init"),t.removeEventListener("animationend",m),t.removeEventListener("animationcancel",m)};t.classList.add("init"),t.addEventListener("animationend",m),t.addEventListener("animationcancel",m)}let l=document.createElement("div");l.classList.add("options");let o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.classList.add("icon","x"),o.setAttribute("viewBox","0 0 100 100");let a=document.createElementNS("http://www.w3.org/2000/svg","use");a.setAttribute("href","#icon-x");let c=document.createElementNS("http://www.w3.org/2000/svg","use");c.setAttribute("viewBox","0 0 100 100"),c.setAttribute("href","#icon-lock-body");let r=document.createElementNS("http://www.w3.org/2000/svg","use");r.setAttribute("viewBox","0 0 100 100"),r.setAttribute("href","#icon-lock-arm");let n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 100 100"),n.classList.add("icon","lock"),e.isLocked&&n.classList.add("locked");let u=document.createElement("div");u.classList.add("info");let h=document.createElement("h2");h.classList.add("hex"),h.innerHTML="#"+e.hex;let y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.classList.add("icon"),y.setAttribute("viewBox","0 0 100 100");let p=document.createElementNS("http://www.w3.org/2000/svg","use");p.setAttribute("href","#icon-copy");let d=document.createElement("div");d.classList.add("detector","left");let b=document.createElement("div");return b.classList.add("detector"),o.append(a),n.append(r,c),y.append(p),u.append(h,y),l.append(o,n,u),t.append(l,d,b),t}generate(e){let s={animations:!1};if(e)if(e.length==this.slots.length)for(let t=0;t<e.length;t++)this.slots[t].hex=e[t],this.slots[t].sync();else{for(let t of this.slots)document.getElementById(t.id).remove();this.slots=[];for(let t=0;t<e.length;t++)this.addSlot({index:t,hex:e[t]},s)}else if(this.slots.length>0)this.algorithm.get()(this);else{for(let t=0;t<5;t++)this.addSlot({},s);this.algorithm.get()(this)}return this.slots}}class ve{constructor(e){j(this,"routes");j(this,"loadContent",e=>{if(e){let{base:s,ids:t}=e;typeof s!="string"&&(s=e);let l=this.routes.get(s);t?l(t):l()}else this.routes.get("404")()});j(this,"routeToURL",(e,s)=>{let t=this.deconstructURL(e,s);console.log(t);let{base:l,ids:o}=t;this.routes.has(l)?l==="create"?o?this.idsAreValid(o)?this.loadContent(t):this.loadContent():this.loadContent(t):this.loadContent(t):this.loadContent()});j(this,"navigateTo",(e,s,t)=>{s=s||!1,s?history.replaceState("","",e):history.pushState("","","/polychrome"+e),this.routeToURL(e,t)});this.routes=new Map(e)}deconstructURL(e,s){let t=e.replace(/^\//,"").replace(/\/$/,"").split("/");return s?{site:t[0],base:t[1]||"",ids:t[2]?t[2].split("-"):null}:{base:t[0],ids:t[1]?t[1].split("-"):null}}idsAreValid(e){for(let s of e)if(!/^[a-f0-9]{6}$/.test(s)||e.length>8)return!1;return!0}}function be(){window.ontouchstart=s=>{var t;if(s.target.closest("#nav-button"))if(i.classList.toggle("visible"),i.classList.contains("visible")){let l=document.createElement("div");l.classList.add("overlay"),e.append(l),document.body.style.overflowY="hidden",g.plus.hide(),l.addEventListener("click",()=>{l.remove(),i.classList.remove("visible"),document.body.style.overflowY=""},{once:!0}),document.body.style.overflowY="hidden"}else(t=e.querySelector(".overlay"))==null||t.remove(),document.body.style.overflowY=""},document.querySelector("#palette").onclick=async s=>{let t=s.target,l=t.closest(".plus-container svg");if(l){const{ids:a}=q.deconstructURL(location.pathname),c=parseInt(l.getAttribute("data-color-index"));let r=g.addSlot({index:c+1});a.splice(c+1,0,r.hex),history.replaceState("","",a.join("-")),g.plus.hide(),H.create.push({undo(){g.removeSlot(r,{animations:!1}),a.splice(c+1,1),history.replaceState("","",a.join("-"))},redo(){g.addSlot(r,{animations:!1}),a.splice(c+1,0,r.hex),history.replaceState("","",a.join("-"))}}),g.slots.length==8&&g.plus.hide();return}let o=t.closest(".lock");if(o){let a=t.closest(".swatch"),c=parseInt(a.getAttribute("data-color-index")),r=g.slots[c];r.isLocked=!r.isLocked,o.classList.toggle("locked"),H.create.push({undo(){let n=g.slots[c],u=document.getElementById(n.id);n.isLocked=!n.isLocked,u.querySelector(".lock").classList.toggle("locked")},redo(){let n=g.slots[c],u=document.getElementById(n.id);n.isLocked=!n.isLocked,u.querySelector(".lock").classList.toggle("locked")}});return}if(t.closest(".x")){let a=t.closest(".swatch"),c=g.slots[parseInt(a.getAttribute("data-color-index"))],{ids:r}=q.deconstructURL(location.pathname);g.removeSlot(c),r.splice(c.data,1),history.replaceState("","",r.join("-")),H.create.push({undo(){g.addSlot(c,{animations:!1}),r.splice(c.data,0,c.hex),history.replaceState("","",r.join("-"))},redo(){g.removeSlot(c,{animations:!1}),r.splice(c.data,1),history.replaceState("","",r.join("-"))}});return}if(t.closest(".info")){let a=t.closest(".swatch"),c=g.slots[parseInt(a.getAttribute("data-color-index"))];if(t.closest(".hex")){let r=J([{id:""}],{type:"color-picker",hex:c.hex});a.append(r);return}if(t.closest(".icon")){await navigator.clipboard.writeText(c.hex).then(()=>{let r=E("Copied hex to clipboard!",{pos:[s.x,s.y]});r.classList.add("at-mouse-pos"),document.body.append(r)},()=>{let r=E("Copy to clipboard failed.",{pos:[s.x,s.y]});r.classList.add("at-mouse-pos"),document.body.append(r)});return}}},document.querySelector(".palettes-page .saved-palettes-wrapper").onclick=async s=>{let t=s.target,l=t.closest(".swatch");if(l){let a=l.parentElement.parentElement;await navigator.clipboard.writeText(A.items[parseInt(a.getAttribute("data-palette-index"))][parseInt(l.getAttribute("data-color-index"))]).then(()=>{let c=E("Copied hex to clipboard!",{pos:[s.x,s.y]});c.classList.add("at-mouse-pos"),document.body.append(c)},()=>{let c=E("Copy to clipboard failed.",{pos:[s.x,s.y]});c.classList.add("at-mouse-pos"),document.body.append(c)});return}if(t.closest(".clear-overlay")){t.closest(".popover").remove();return}if(t.closest("#palettes-open")){q.navigateTo("/create/"+w.savedPalettes.items[parseInt(t.closest(".palette-container").getAttribute("data-palette-index"))].join("-"));return}if(t.closest("#palettes-copy")){await navigator.clipboard.writeText(A.items[parseInt(t.closest(".palette-container").getAttribute("data-palette-index"))].join(`
`)).then(()=>{let a=E("Copied hex to clipboard!",{pos:[s.x,s.y]});a.classList.add("at-mouse-pos"),document.body.append(a)},()=>{let a=E("Copy to clipboard failed.",{pos:[s.x,s.y]});a.classList.add("at-mouse-pos"),document.body.append(a)});return}if(t.closest("#palettes-remove")){let a=parseInt(t.closest(".palette-container").getAttribute("data-palette-index")),c=A.items[a],r={undo(){A.addItem(c,a)},redo(){A.removeItem(a)}};H.palettes.push(r),A.removeItem(a);let n=E("Removed palette.");document.body.append(n);return}let o=t.closest(".more");if(o){let a=J([{content:"Open",id:"palettes-open"},{content:"Remove",id:"palettes-remove"},{content:"Copy",id:"palettes-copy"}],{type:"menu"});o.parentElement.append(a);return}},document.querySelector(".toolbar").onclick=async s=>{let t=s.target;if(t.closest(".undo")){q.deconstructURL(location.pathname).base=="create"?H.create.undo():H.palettes.undo();return}if(t.closest(".redo")){q.deconstructURL(location.pathname).base=="create"?H.create.redo():H.palettes.redo();return}if(t.closest(".copy")){if(q.deconstructURL(location.pathname).base=="create"){let l=[];for(let{hex:o}of g.slots)l.push(o);await navigator.clipboard.writeText(l.join(`
`)).then(()=>{let o=E("Copied palette!");document.body.append(o)},()=>{let o=E("Failed to copy.");document.body.append(o)})}else{let l=[];for(let o of A.items)l.push(o.join("-"));await navigator.clipboard.writeText(l.join(`,
`)).then(()=>{let o=E("Copied palettes to clipboard!");document.body.append(o)},()=>{let o=E("Copy to clipboard failed.");document.body.append(o)})}return}if(t.closest(".generate")){let l=[];for(let{hex:a}of g.slots)l.push(a);g.generate();let o=[];for(let{hex:a}of g.slots)o.push(a);history.replaceState("","","/create/"+o.join("-")),l&&H.create.push({undo:()=>{g.generate(l),history.replaceState("","","/create/"+l.join("-"))},redo:()=>{g.generate(o),history.replaceState("","","/create/"+o.join("-"))}});return}if(t.closest(".save")){if(!w.settings.cookiesOk){document.body.append(E("You'll need to enable cookies in settings for that feature."));return}let l=[];for(let{hex:a}of g.slots)l.push(a);A.addItem(l);let o=E("Saved palette!");document.body.append(o);return}if(t.closest(".remove-all")){K({message:"Are you sure you want to delete all of your palettes? You won't be able to undo this.",value:"remove-all"},[{message:"Yes, delete away.",value:"yes",call(){for(let o=0;A.items.length;o++)A.removeItem(0);let l=E("All palettes removed.");document.body.append(l)}},{message:"No, please don't delete my stuff!",value:"no"}]);return}if(t.closest(".import")){if(q.deconstructURL(location.pathname,!0).base=="create"){let l=W("Paste hex code palette below!","import-create");document.body.append(l)}else{if(!w.settings.cookiesOk){document.body.append(E("You'll need to enable cookies in settings for that feature."));return}let l=W("Paste hex code palette below! Separate palettes by commas.","import-palettes");document.body.append(l)}return}};let i=document.querySelector(".main-nav"),e=document.querySelector(".main-header");onclick=async s=>{var a,c;let t=s.target,l=t.closest("a");if(l){s.preventDefault();let r=l.getAttribute("href");i.classList.remove("visible"),(a=document.querySelector(".overlay"))==null||a.remove(),document.body.style.overflowY="",r!=location.pathname&&q.navigateTo(r);return}if(t.closest("#nav-button"))if(i.classList.toggle("visible"),i.classList.contains("visible")){let r=document.createElement("div");r.classList.add("overlay"),e.append(r),document.body.style.overflowY="hidden",g.plus.hide(),r.addEventListener("click",()=>{r.remove(),i.classList.remove("visible"),document.body.style.overflowY=""},{once:!0}),document.body.style.overflowY="hidden"}else(c=e.querySelector(".overlay"))==null||c.remove(),document.body.style.overflowY="";if(t.closest("#settings")){let r=ue();document.body.append(r);return}let o=t.closest(".confirmation-screen");if(o){if(t.closest(".overlay")&&(o==document.querySelector(".cookies")&&(w.settings={cookiesOk:!0},w.info={firstVisit:!0}),o.remove()),o==document.querySelector(".remove-all-confirmation")){if(t.closest(".yes")){for(let n=0;A.items.length;n++)A.removeItem(0);o.remove();let r=E("All palettes removed.");document.body.append(r)}else t.closest(".no")&&o.remove();return}if(o==document.querySelector(".import-create")){let r=q.deconstructURL(location.pathname).ids,n=t.closest(".yes"),u=t.closest(".no");if(n){let h=o.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-",""),y=!(/[g-z~`!#$%\^&*+=\[\]\\';,/{}|\\":<>\?]/g.test(h)||h.length==0||h.length%6!=0),p="Invalid values entered. Try again.";if(y){p="Successfully imported values.";let b=h.match(/.{1,6}/g);g.generate(b),H.create.push({undo(){g.generate(r)},redo(){g.generate(b)}})}let d=E(p);document.body.append(d),o.remove()}else u&&o.remove();return}if(o==document.querySelector(".import-palettes")){let r=t.closest(".yes"),n=t.closest(".no");if(r){let u=o.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-","").replaceAll("#","").toLowerCase(),h="Invalid values entered. Try again.",y=!(/[g-z~`!#$%\^&*+=\[\]\\';/{}|\\":<>\?]/g.test(u)||u.replaceAll(",","").length%6!=0||u.length==0);console.log(u.replaceAll(",","").length%6!=0);let p=u.split(",");for(let b of p)(b.length/6>8||!(b.length>=6))&&(y=!1);if(y){let b=0;for(let m of p)b++,A.addItem(m.match(/.{1,6}/g));h="Successfully imported values.",H.palettes.push({undo(){for(let m=b;m>0;m--)A.removeItem(A.items.length-1)},redo(){for(let m of p)A.addItem(m.match(/.{1,6}/g))}})}let d=E(h);document.body.append(d),o.remove()}else n&&o.remove();return}if(o==document.querySelector(".settings-popover")){let r=t.closest(".yes"),n=t.closest(".no");if(r){let u=w.settings;u.lastColorAlgorithmIndex=o.querySelector("#algorithm").selectedIndex,u.cookiesOk=o.querySelector("#cookies-ok").checked,w.settings=u;let h="Changes saved.";o.remove();let y=E(h);document.body.append(y)}else if(n){let u="Changes discarded.";o.remove();let h=E(u);document.body.append(h)}return}if(o==document.querySelector(".cookies-confirmation")){let r=t.closest(".yes"),n=t.closest(".no");if(r){w.settings={cookiesOk:!0},o.remove();let u=E("Thanks, enjoy the site! :)");document.body.append(u)}else if(n){w.settings={cookiesOk:!1},o.remove();let u=E("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(u)}return}}}}window.addEventListener("scroll",se,!1);window.addEventListener("touchmove",se,{passive:!1});function se(i){q.deconstructURL(location.pathname).base=="create"&&(i.preventDefault(),i.stopPropagation())}window.ontouchstart=i=>{let e=i.target.closest(".create-page .swatch");if(e&&!i.target.closest(".options div")&&!i.target.closest(".options svg")){let s=function(y){if(y.preventDefault(),t){let p=y.touches[0].clientY-c;e.style.translate="0 "+p+"px";let d=e,b=g.slots.length-r-1;if(h=0,u=0,p>0)for(let m=0;m<b;m++)h=(m*2+1)*o,d=d.nextElementSibling,p>h?(u++,d.style.translate!="0 -100%"&&(d.style.translate="0 -100%")):d.style.translate=="0 -100%"&&(d.style.translate="0 0");else for(let m=0;m<r;m++)h=(m*2+1)*o,d=d.previousElementSibling,-p>h?(u--,d.style.translate!="0 100%"&&(d.style.translate="0 100%")):d.style.translate=="0 100%"&&(d.style.translate="0 0")}else{let p=y.touches[0].clientX-a;e.style.translate=p+"px";let d=e,b=g.slots.length-r-1;if(h=0,u=0,p>0)for(let m=0;m<b;m++)h=(m*2+1)*l,d=d.nextElementSibling,p>h?(u++,d.style.translate!="-100%"&&(d.style.translate="-100%")):d.style.translate=="-100%"&&(d.style.translate="");else for(let m=0;m<r;m++)h=(m*2+1)*l,d=d.previousElementSibling,-p>h?(u--,d.style.translate!="100%"&&(d.style.translate="100%")):d.style.translate=="100%"&&(d.style.translate="")}},t=!1;document.body.classList.contains("vertical")&&(t=!0),g.plus.disabled=!0,g.plus.hide(),e.classList.add("is-dragging");let l=e.clientWidth/2,o=e.clientHeight/2,a=i.touches[0].clientX,c=i.touches[0].clientY,r=parseInt(e.getAttribute("data-color-index")),n=g.slots[r],u=0,h;window.addEventListener("touchmove",s,{passive:!1}),window.addEventListener("touchend",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("touchmove",s),e.style.translate=`${t?"0 ":""}${u*100}%`;function y(){e.removeEventListener("transitionend",y),e.removeEventListener("transitioncancel",y),e.classList.remove("is-released");let p=e;for(let m=0;m<u;m++)g.slots.splice(n.data,1),g.slots.splice(n.data+1,0,n),n.data++,p=p.nextElementSibling,g.slots[n.data-1].data--;for(let m=0;m>u;m--)g.slots.splice(n.data,1),g.slots.splice(n.data-1,0,n),n.data--,p=p.previousElementSibling,g.slots[n.data+1].data++;let d=e.cloneNode(!0);u>0?(p.after(d),e.remove()):u<0&&(p.before(d),e.remove()),e.style.translate="";let b=[];for(let m of g.slots){let x=document.getElementById(m.id);x.style.transition="transform 0s",x.style.translate="",setTimeout(()=>{x.style.transition=""},1),b.push(m.hex)}e=d,history.replaceState("","",b.join("-")),g.plus.disabled=!1,u&&H.create.push({undo(){g.plus.hide();let m=e=document.getElementById(n.id);for(let v=0;v<-u;v++){g.slots.splice(n.data,1),g.slots.splice(n.data+1,0,n),n.data++,m=m.nextElementSibling;let L=parseInt(m.getAttribute("data-color-index"));m.setAttribute("data-color-index",(L-1).toString())}for(let v=0;v>-u;v--){g.slots.splice(n.data,1),g.slots.splice(n.data-1,0,n),n.data--,m=m.previousElementSibling;let L=parseInt(m.getAttribute("data-color-index"));m.setAttribute("data-color-index",(L+1).toString())}d=e.cloneNode(!0),-u>0?(m.after(d),e.remove()):-u<0&&(m.before(d),e.remove());let x=[];for(let v of g.slots)x.push(v.hex);history.replaceState("","",x.join("-"))},redo(){g.plus.hide();let m=e=document.getElementById(n.id);for(let v=0;v<u;v++)g.slots.splice(n.data,1),g.slots.splice(n.data+1,0,n),n.data++,m=m.nextElementSibling,r=parseInt(m.getAttribute("data-color-index")),m.setAttribute("data-color-index",(r-1).toString());for(let v=0;v>u;v--)g.slots.splice(n.data,1),g.slots.splice(n.data-1,0,n),n.data--,m=m.previousElementSibling,r=parseInt(m.getAttribute("data-color-index")),m.setAttribute("data-color-index",(r+1).toString());d=e.cloneNode(!0),u>0?(m.after(d),e.remove()):u<0&&(m.before(d),e.remove());let x=[];for(let v of g.slots)x.push(v.hex);history.replaceState("","",x.join("-"))}})}e.addEventListener("transitionend",y),e.addEventListener("transitioncancel",y)},{once:!0})}};function xe(){onmousedown=i=>{let e=i.target.closest(".create-page .swatch");if(e&&!i.target.closest(".options div")&&!i.target.closest(".options svg")){let s=function(y){if(t){let p=y.y-c;e.style.translate="0 "+p+"px";let d=e,b=g.slots.length-r-1;if(h=0,u=0,p>0)for(let m=0;m<b;m++)h=(m*2+1)*o,d=d.nextElementSibling,p>h?(u++,d.style.translate!="0 -100%"&&(d.style.translate="0 -100%")):d.style.translate=="0 -100%"&&(d.style.translate="");else for(let m=0;m<r;m++)h=(m*2+1)*o,d=d.previousElementSibling,-p>h?(u--,d.style.translate!="0 100%"&&(d.style.translate="0 100%")):d.style.translate=="0 100%"&&(d.style.translate="")}else{let p=y.x-a;e.style.translate=p+"px";let d=e,b=g.slots.length-r-1;if(h=0,u=0,p>0)for(let m=0;m<b;m++)h=(m*2+1)*l,d=d.nextElementSibling,p>h?(u++,d.style.translate!="-100%"&&(d.style.translate="-100%")):d.style.translate=="-100%"&&(d.style.translate="");else for(let m=0;m<r;m++)h=(m*2+1)*l,d=d.previousElementSibling,-p>h?(u--,d.style.translate!="100%"&&(d.style.translate="100%")):d.style.translate=="100%"&&(d.style.translate="")}},t=!1;document.body.classList.contains("vertical")&&(t=!0),g.plus.disabled=!0,g.plus.hide(),e.classList.add("is-dragging");let l=e.clientWidth/2,o=e.clientHeight/2,a=i.x,c=i.y,r=parseInt(e.getAttribute("data-color-index")),n=g.slots[r],u=0,h;addEventListener("mousemove",s),addEventListener("mouseup",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("mousemove",s),e.style.translate=`${t?"0 ":""}${u*100}%`;function y(){e.removeEventListener("transitionend",y),e.removeEventListener("transitioncancel",y),e.classList.remove("is-released");let p=e;for(let m=0;m<u;m++)g.slots.splice(n.data,1),g.slots.splice(n.data+1,0,n),n.data++,p=p.nextElementSibling,g.slots[n.data-1].data--;for(let m=0;m>u;m--)g.slots.splice(n.data,1),g.slots.splice(n.data-1,0,n),n.data--,p=p.previousElementSibling,g.slots[n.data+1].data++;let d=e.cloneNode(!0);u>0?(p.after(d),e.remove()):u<0&&(p.before(d),e.remove()),e.style.translate="";let b=[];for(let m of g.slots){let x=document.getElementById(m.id);x.style.transition="transform 0s",x.style.translate="",setTimeout(()=>{x.style.transition=""},1),b.push(m.hex)}e=d,history.replaceState("","",b.join("-")),g.plus.disabled=!1,u&&H.create.push({undo(){g.plus.hide();let m=e=document.getElementById(n.id);for(let v=0;v<-u;v++){g.slots.splice(n.data,1),g.slots.splice(n.data+1,0,n),n.data++,m=m.nextElementSibling;let L=parseInt(m.getAttribute("data-color-index"));m.setAttribute("data-color-index",(L-1).toString())}for(let v=0;v>-u;v--){g.slots.splice(n.data,1),g.slots.splice(n.data-1,0,n),n.data--,m=m.previousElementSibling;let L=parseInt(m.getAttribute("data-color-index"));m.setAttribute("data-color-index",(L+1).toString())}d=e.cloneNode(!0),-u>0?(m.after(d),e.remove()):-u<0&&(m.before(d),e.remove());let x=[];for(let v of g.slots)x.push(v.hex);history.replaceState("","",x.join("-"))},redo(){g.plus.hide();let m=e=document.getElementById(n.id);for(let v=0;v<u;v++)g.slots.splice(n.data,1),g.slots.splice(n.data+1,0,n),n.data++,m=m.nextElementSibling,r=parseInt(m.getAttribute("data-color-index")),m.setAttribute("data-color-index",(r-1).toString());for(let v=0;v>u;v--)g.slots.splice(n.data,1),g.slots.splice(n.data-1,0,n),n.data--,m=m.previousElementSibling,r=parseInt(m.getAttribute("data-color-index")),m.setAttribute("data-color-index",(r+1).toString());d=e.cloneNode(!0),u>0?(m.after(d),e.remove()):u<0&&(m.before(d),e.remove());let x=[];for(let v of g.slots)x.push(v.hex);history.replaceState("","",x.join("-"))}})}e.addEventListener("transitionend",y),e.addEventListener("transitioncancel",y)},{once:!0}),ondragstart=()=>!1}}}let Le=document.querySelector(".main-nav");function Se(){onkeydown=i=>{var e,s,t,l;if(i.metaKey||i.ctrlKey){let{base:o}=q.deconstructURL(location.pathname,!0);if(i.key==="z"||i.key==="Z")if(o==="palettes"){i.shiftKey?H.palettes.redo():H.palettes.undo();return}else{i.shiftKey?H.create.redo():H.create.undo();return}if(o==="create"){let a=parseInt(i.key);if(a>=0&&a<=9){i.preventDefault();let c=g.slots[a-1]||g.slots[g.slots.length-1],r=document.getElementById(c.id);H.create.push({undo(){let n=g.slots[a-1]||g.slots[g.slots.length-1],u=document.getElementById(n.id);n.isLocked=!n.isLocked,u.querySelector(".lock").classList.toggle("locked")},redo(){let n=g.slots[a-1]||g.slots[g.slots.length-1],u=document.getElementById(n.id);n.isLocked=!n.isLocked,u.querySelector(".lock").classList.toggle("locked")}}),c.isLocked=!c.isLocked,r.querySelector(".lock").classList.toggle("locked");return}}}if(i.key===" "){let{base:o}=q.deconstructURL(location.pathname,!0);if(o==="create"){i.preventDefault();let a=[];for(let{hex:r}of g.slots)a.push(r);g.generate();let c=[];for(let{hex:r}of g.slots)c.push(r);history.replaceState("","","/polychrome/create/"+c.join("-")),H.create.push({undo:()=>{g.generate(a),history.replaceState("","","/polychrome/create/"+a.join("-")),g.plus.hide()},redo:()=>{g.generate(c),history.replaceState("","","/polychrome/create/"+c.join("-"))}})}return}if(i.key==="Escape"){(e=document.querySelector(".confirmation-screen"))==null||e.remove(),Le.classList.remove("visible"),(s=document.querySelector(".overlay"))==null||s.remove();return}if(i.key==="y"||i.key==="Y"){((t=document.querySelector(".confirmation-screen"))==null?void 0:t.querySelector(".yes")).click();return}if(i.key==="n"||i.key==="N"){((l=document.querySelector(".confirmation-screen"))==null?void 0:l.querySelector(".no")).click();return}//! NOT DONE
if(i.key==="Enter"){let o=document.activeElement;console.log(o);return}i.key}}let g=new ge,A=new fe,q=new ve([["",R("Home",document.getElementById("landing-page"))],["palettes",R("Palettes",document.getElementById("palettes-page"),A)],["create",R("Create",document.getElementById("create-page"),g)],["404",R("404 Not Found",document.getElementById("not-found-page"))]]);q.routeToURL(location.pathname,!0);setTimeout(()=>{document.querySelector(":root").style.display="initial",window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")},200);onpopstate=()=>q.navigateTo(location.pathname,!0,!0);be();xe();Se();onmouseover=i=>{if(!g.plus.disabled){const e=i.target,s=e.closest(".swatch");if(s)if(e.closest(".detector")&&g.slots.length<8){const l=e.closest(".left");let o=parseInt(s.getAttribute("data-color-index"));l&&o--,g.plus.show(o)}else g.plus.hide()}};w.info.firstVisit&&K({message:"This site relies on local storage and cookies to save palettes.",value:"cookies"},[{message:"Sure, sounds good to me.",value:"yes",call(){w.info={firstVisit:!1},w.settings={cookiesOk:!0};let i=E("Thanks, enjoy the site! :)");document.body.append(i)}},{message:"No thanks, I don't want to save palettes.",value:"no",call(){w.info={firstVisit:!1},w.settings={cookiesOk:!1};for(let e=0;e<A.items.length;e++)A.removeItem(0);let i=E("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(i)}}]);onresize=()=>{window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")};(navigator.userAgent.includes("Android")||navigator.userAgent.includes("like Mac"))&&document.body.classList.add("mobile");
