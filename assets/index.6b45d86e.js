var oe=Object.defineProperty;var ie=(a,e,l)=>e in a?oe(a,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[e]=l;var B=(a,e,l)=>(ie(a,typeof e!="symbol"?e+"":e,l),l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function l(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function t(o){if(o.ep)return;o.ep=!0;const s=l(o);fetch(o.href,s)}})();let R;const ne=new Uint8Array(16);function ae(){if(!R&&(R=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!R))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return R(ne)}const T=[];for(let a=0;a<256;++a)T.push((a+256).toString(16).slice(1));function re(a,e=0){return(T[a[e+0]]+T[a[e+1]]+T[a[e+2]]+T[a[e+3]]+"-"+T[a[e+4]]+T[a[e+5]]+"-"+T[a[e+6]]+T[a[e+7]]+"-"+T[a[e+8]]+T[a[e+9]]+"-"+T[a[e+10]]+T[a[e+11]]+T[a[e+12]]+T[a[e+13]]+T[a[e+14]]+T[a[e+15]]).toLowerCase()}const de=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),F={randomUUID:de};function ce(a,e,l){if(F.randomUUID&&!e&&!a)return F.randomUUID();a=a||{};const t=a.random||(a.rng||ae)();if(t[6]=t[6]&15|64,t[8]=t[8]&63|128,e){l=l||0;for(let o=0;o<16;++o)e[l+o]=t[o];return e}return re(t)}const me=document.title;function H(a){let e=parseInt(a[0]+a[1],16)/255,l=parseInt(a[2]+a[3],16)/255,t=parseInt(a[4]+a[5],16)/255,o=Math.max(e,l,t),s=Math.min(e,l,t),i,d,n=e*.299+l*.587+t*.114,r=(o+s)/2;if(o==s)i=d=0;else{let m=o-s;switch(d=r>.5?m/(2-o-s):m/(o+s),o){case e:i=(l-t)/m+(l<t?6:0);break;case l:i=(t-e)/m+2;break;default:i=(e-l)/m+4;break}i=i*60}return{r:e,g:l,b:t,h:i,s:d,l:r,lum:n}}function C(a,e,l){a>360?a-=360:a<0&&(a+=360),e>1?e=1:e<0&&(e=0),l>1?l=1:l<0&&(l=0),e*=100;const t=e*Math.min(l,1-l)/100,o=s=>{const i=(s+a/30)%12,d=l-t*Math.max(Math.min(i-3,9-i,1),-1);return Math.round(255*d).toString(16).padStart(2,"0")};return`${o(0)}${o(8)}${o(4)}`}const E={get info(){let a=localStorage.getItem("info");return a?JSON.parse(a):(localStorage.setItem("info",JSON.stringify({firstVisit:!0})),this.info)},set info(a){let e=this.info;if(a)for(let[l,t]of Object.entries(a))e[l]=t;localStorage.setItem("info",JSON.stringify(e))},get settings(){let a=localStorage.getItem("settings");return a?JSON.parse(a):(localStorage.setItem("settings",JSON.stringify({lastColorAlgorithmIndex:2,cookiesOk:!1})),this.settings)},set settings(a){let e=this.settings;if(a)for(let[l,t]of Object.entries(a))e[l]=t;localStorage.setItem("settings",JSON.stringify(e))},savedPalettes:{get items(){let a=localStorage.getItem("saved-palettes"),e;if(a){let l=[];e=JSON.parse(a);for(let t of e)l.push(t);return l}else return[]},set items(a){localStorage.setItem("saved-palettes",JSON.stringify(a))},addItem(a){let e=this.items;e.push(a),this.items=e},removeItem(a){this.items.splice(a,1)}}},I={create:{cmds:[],cmdIndex:-1,push(a){this.cmds.splice(this.cmdIndex+1,1/0,a),this.cmdIndex=this.cmds.length-1},undo(){this.cmdIndex>-1&&(this.cmds[this.cmdIndex].undo(),this.cmdIndex--)},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}},palettes:{cmds:[],cmdIndex:-1,push(a){this.cmds.splice(this.cmdIndex+1,1/0,a),this.cmdIndex=this.cmds.length-1},undo(){if(this.cmdIndex>-1){let a=this.cmds[this.cmdIndex];this.cmdIndex--,a.undo()}},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}}},O=document.querySelector(".toolbar");function U(a,e,l){return t=>{document.title=me+" | "+a;const o=document.querySelector("main.visible");o&&o.classList.remove("visible");const s=e;if(s==null||s.classList.add("visible"),a=="Palettes")document.body.parentElement.style.overflow="",document.body.style.overflow="",O.classList.add("palettes"),O.classList.remove("create"),l.draw(E.savedPalettes.items);else if(a=="Create")if(document.body.parentElement.style.overflow="hidden",document.body.style.overflow="hidden",O.classList.add("create"),O.classList.remove("palettes"),t)l.generate(t);else{let i=l.generate(),d=[];for(let n of i)d.push(n.hex);history.replaceState("","",d.join("-"))}else O.classList.remove("palettes","create"),document.documentElement.style.overflow="",document.body.style.overflow=""}}const y=(a,e)=>Math.random()*(e-a)+a,ue=()=>btoa(parseInt(ce(),16).toString(36)).replaceAll("=","");function S(a,e){const l=document.createElement("div");l.classList.add("tooltip","appearing");const t=document.createElement("h2");return t.innerHTML=a,l.append(t),e!=null&&e.pos?(l.style.left=e.pos[0]+"px",l.style.top=e.pos[1]+"px"):l.classList.add("centered"),l.addEventListener("animationend",()=>{l.classList.remove("appearing"),setTimeout(()=>{l.classList.add("disappearing"),l.addEventListener("animationend",()=>{l.remove()},{once:!0})},(e==null?void 0:e.duration)||1e3)},{once:!0}),l}function P(a,e){let l=document.createElement("div");l.classList.add("popover");let t=document.createElement("div");if(t.classList.add("clear-overlay"),(e==null?void 0:e.type)=="menu"){let o=document.createElement("ul");o.classList.add("list");for(let s of a){let i=document.createElement("div");i.id=s.id,i.classList.add("choice"),s.content&&(i.innerHTML=s.content),o.append(i)}l.append(o,t)}else if((e==null?void 0:e.type)=="color-picker"){let o=document.createElement("canvas");o.id="color-picker",o.classList.add("color-picker");let s=o.getContext("2d"),{h:i}=H(e.hex),d=`hsl(${i}, 100%, 50%)`,n=s.createLinearGradient(0,0,s.canvas.width,0);n.addColorStop(0,"#fff"),n.addColorStop(1,d),s.fillStyle=n,s.fillRect(0,0,s.canvas.width,s.canvas.height);let r=s.createLinearGradient(0,0,0,s.canvas.height);r.addColorStop(0,"rgba(0,0,0,0)"),r.addColorStop(1,"black"),s.fillStyle=r,s.fillRect(0,0,s.canvas.width,s.canvas.height);let m=document.createElement("div");m.classList.add("color-picker-cursor");let f=document.createElement("input");f.setAttribute("min","0"),f.setAttribute("max","360"),f.setAttribute("type","range");let g=document.createElement("div");g.classList.add("huebar");let h=document.createElement("div");h.classList.add("huebar-cursor");let c=document.createElement("input");c.setAttribute("min","0"),c.setAttribute("max","360"),c.setAttribute("type","range"),o.append(m,f),g.append(h,c),l.append(o,g)}return l}function J(a,e){let l=document.createElement("div");l.classList.add("confirmation-screen",a.value+"-confirmation");let t=document.createElement("div");t.classList.add("box");let o=document.createElement("h2");o.innerHTML=a.message;let s=document.createElement("ul"),i=document.createElement("div");i.classList.add("overlay"),t.append(o,s),l.append(t,i);for(let{message:d,value:n,call:r}of e){let m=document.createElement("li");m.innerHTML=d,m.classList.add(n),s.append(m),m.addEventListener("click",()=>{r&&r(),l.remove()},{once:!0})}document.body.append(l)}function D(a,e){let l=document.createElement("div");l.classList.add("confirmation-screen",e);let t=document.createElement("h2");t.innerHTML=a;let o=document.createElement("textarea"),s=document.createElement("div");s.classList.add("overlay");let i=document.createElement("div");i.classList.add("box");let d=document.createElement("ul"),n=document.createElement("li");n.classList.add("yes"),n.innerHTML="Confirm";let r=document.createElement("li");return r.innerHTML="Cancel",r.classList.add("no"),d.append(r,n),i.append(t,o,d),l.append(i,s),l}function K(){let a=document.createElement("div");a.classList.add("confirmation-screen","settings-popover");let e=document.createElement("div");e.classList.add("box");let l=document.createElement("div");l.classList.add("overlay");let t=document.createElement("h2");t.innerText="Settings";let o=document.createElement("ul");o.classList.add("options");let s=document.createElement("li"),i=document.createElement("label");i.innerText="Algorithm";let d=document.createElement("select");d.id="algorithm";let n=document.createElement("option");n.value="random",n.innerText="Random Algorithm";let r=document.createElement("option");r.value="monochromatic",r.innerText="Monochromatic";let m=document.createElement("option");m.value="analogous",m.innerText="Analogous";let f=document.createElement("option");f.value="complementary",f.innerText="Complementary";let g=document.createElement("option");g.value="split-complementary",g.innerText="Split Complementary";let h=document.createElement("option");h.value="triadic",h.innerText="Triadic";let c=document.createElement("option");c.value="tetradic",c.innerText="Tetradic";let v=document.createElement("option");v.value="square",v.innerText="Square";let u=document.createElement("option");u.value="randomize",u.innerText="Randomize Colors";let x=document.createElement("ul");x.classList.add("confirmation");let b=document.createElement("li");b.classList.add("yes"),b.innerText="Confirm";let L=document.createElement("li");L.classList.add("no"),L.innerText="Cancel",x.append(L,b),d.append(u,r,m,f,g,h,c,v,n),d.selectedIndex=E.settings.lastColorAlgorithmIndex;let k=document.createElement("li");k.classList.add("horizontal");let q=document.createElement("div"),M=document.createElement("label");M.innerText="Cookies";let V=document.createElement("label");V.innerText="That's fine!",V.setAttribute("for","cookies-ok");let $=document.createElement("label");$.innerText="No thanks.",$.setAttribute("for","cookies-not-ok");let z=document.createElement("div"),X=document.createElement("div");z.classList.add("op"),X.classList.add("op");let j=document.createElement("input");j.id="cookies-ok",j.value="cookies-ok",j.setAttribute("type","radio"),j.classList.add("true");let N=document.createElement("input");return N.id="cookies-not-ok",N.value="cookies-not-ok",N.setAttribute("type","radio"),N.classList.add("false"),E.settings.cookiesOk?j.checked=!0:N.checked=!0,j.addEventListener("change",()=>{j.checked?N.checked=!1:N.checked=!0}),N.addEventListener("change",()=>{N.checked?j.checked=!1:j.checked=!0}),z.append(j,V),X.append(N,$),k.append(M,q),q.append(z,X),s.append(i,d),o.append(s,k),e.append(t,o,x),a.append(l,e),a}let Y=document.querySelector(".saved-palettes-wrapper");class pe{constructor(){B(this,"items",[]);this.items=E.savedPalettes.items}draw(e){for(;Y.childElementCount>0;)Y.lastChild.remove();if(e)for(let t=0;t<e.length;t++){let o=e[t],s=document.createElement("div");s.setAttribute("data-palette-index",t.toString()),s.classList.add("palette-container");let i=document.createElement("div");i.classList.add("palette");let d=document.createElement("div");d.classList.add("options");let n=document.createElement("div");n.classList.add("more");let r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","0 0 100 100");let m=document.createElementNS("http://www.w3.org/2000/svg","use");m.setAttribute("href","#icon-more-horizontal");for(let f=0;f<o.length;f++){let g=o[f],{lum:h}=H(g),c=document.createElement("div");c.setAttribute("data-color-index",f.toString()),c.classList.add("swatch"),c.style.backgroundColor="#"+g,h<.5&&c.classList.add("isLight");let v=document.createElement("h2");v.innerHTML="#"+g,v.classList.add("text"),c.append(v),i.append(c)}r.append(m),n.append(r),d.append(n),s.append(i,d),Y.append(s)}let l=document.querySelector(".palettes-page .when-empty");Y.childElementCount==0?l.classList.remove("hidden"):l.classList.add("hidden")}addItem(e,l){typeof l=="number"?this.items.splice(l,0,e):this.items.push(e),E.savedPalettes.items=this.items,this.draw(this.items)}removeItem(e){this.items.splice(e,1),E.savedPalettes.items=this.items,this.draw(this.items)}}function W(a){if(a.algorithm.details=="slot"){let e=[];for(let l=0;l<6;l++)e.push(Math.round(y(0,15)).toString(16));return e.join("")}else for(let e of a.slots)if(!e.isLocked){let l=[];for(let t=0;t<6;t++)l.push(Math.round(y(0,15)).toString(16));e.hex=l.join(""),e.sync()}}function G(a,e){if(a.algorithm.details=="slot")if(Math.random()>.5){let l=0,t=0,o=0,s=a.slots[e-2],i=a.slots[e-1],d=a.slots[e],n=a.slots[e+1];if(d){let{h:r,s:m,l:f}=H(d.hex);if(l=r,i){let{s:g,l:h}=H(i.hex);t=m-(m-g)/2,o=f-(f-h)/2}else if(n){let{s:g,l:h}=H(n.hex);t=m-(g-m)/2,o=f-(h-f)/2}else t=m*y(.7,1.3),o=f*y(.7,1.3)}else if(i){let{h:r,s:m,l:f}=H(i.hex);if(l=r,s){let{s:g,l:h}=H(s.hex);t=m+(m-g)/2,o=f+(f-h)/2}else t=m*y(.7,1.3),o=f*y(.7,1.3)}else t=y(.2,1),o=y(.1,.9);return t*=y(.95,1.05),o*=y(.95,1.05),C(l,t,o)}else{let l,t,o,s,i,d,n;for(let{hex:r}of a.slots){let{h:m,s:f,l:g}=H(r);typeof l!="number"&&(l=m),(typeof o!="number"||f>o)&&(o=f),(typeof t!="number"||f<t)&&(t=f),(typeof i!="number"||g>i)&&(i=g),(typeof s!="number"||g<s)&&(s=g)}return d=y(t,o)*y(.95,1.05),n=y(s,i)*y(.95,1.05),C(l,d,n)}else if(a.algorithm.details=="increment"||Math.random()>.5){let l=[],t=y(0,360),o=0,s=0,i=0,d=0,n=0,r=0,m=0,f=0;for(let g of a.slots)g.isLocked||l.push(g);for(let g=0;g<l.length;g++)if(g==0){let h=a.slots[0];o=y(.1,1),s=y(.1,.9),h.hex=C(t,o,s),h.sync(),i=o,d=s,i<.4?n=y(.7,1):i>.6?n=y(.1,.3):i>.5?n=y(.1,.2):n=y(.8,.9),d<.4?r=y(.7,1):d>.6?r=y(.1,.3):d>.5?r=y(.1,.2):r=y(.8,.9),m=(n-i)/a.slots.length,f=(r-d)/a.slots.length}else{let h=a.slots[g];o=i+m*g,s=d+f*g,h.hex=C(t,o,s),h.sync()}}else{let l=y(0,360),t,o,s;for(let i of a.slots)i.isLocked||(t=y(.2,1),o=y(.2,.8),typeof s!="number"&&(l=s=y(0,360)),i.hex=C(l,t,o),i.sync())}}function Z(a,e){if(a.algorithm.details=="slot")if(Math.random()>.5){let l=0,t=0,o=0,s=a.slots[e-2],i=a.slots[e-1],d=a.slots[e],n=a.slots[e+1];if(d){let{h:r,s:m,l:f}=H(d.hex);if(i){let{h:g,s:h,l:c}=H(i.hex),v=r-g;v>180?v=r-g-360:v<-180&&(v=r-g+360),l=r-v/2,t=m-(m-h)/2,o=f-(f-c)/2}else if(n){let{h:g,s:h,l:c}=H(n.hex),v=g-r;v>180?v=g-r-360:v<-180&&(v=g-r+360),l=r-v/2,t=m-(h-m)/2,o=f-(c-f)/2}else l=r*y(.7,1.3),t=m*y(.7,1.3),o=f*y(.7,1.3)}else if(i){let{h:r,s:m,l:f}=H(i.hex);if(s){let{h:g,s:h,l:c}=H(s.hex),v=r-g;v>180?v=r-g-360:v<-180&&(v=r-g+360),l=r+v/2,t=m+(m-h)/2,o=f+(f-c)/2}else l=r*y(.7,1.3),t=m*y(.7,1.3),o=f*y(.7,1.3)}else l=y(0,360),t=y(.2,1),o=y(.1,.9);return l*=y(.95,1.05),t*=y(.95,1.05),o*=y(.95,1.05),C(l,t,o)}else{let l,t,o,s,i,d,n,r,m,f,g=Math.random();for(let{hex:h}of a.slots){let{h:c,s:v,l:u}=H(h);if(typeof l!="number")l=c;else if(typeof t!="number"){let x=l,b=x-c;b>180?x-=360:b<-180&&(x+=360),b=x-c,(b<-25||b>25)&&(t=c)}else if(typeof o!="number"){let x=l,b=t,L=x-c,k=b-c;L>180?x-=360:L<-180&&(x+=360),k>180?b-=360:k<-180&&(b+=360),L=x-c,k=b-c,(L>25||L<-25)&&(k>25||k<-25)&&(o=c)}(typeof i!="number"||v>i)&&(i=v),(typeof s!="number"||v<s)&&(s=v),(typeof n!="number"||u>n)&&(n=u),(typeof d!="number"||u<d)&&(d=u)}return o&&g<.333?r=o:t&&g>.666?r=t:r=l,m=y(s,i)*y(.95,1.05),f=y(d,n)*y(.95,1.05),C(r,m,f)}else if(a.algorithm.details=="increment"||Math.random()>.5){let l=0,t=0,o=0,s=0,i=0,d=0,n=0,r=0,m=0,f=0,g=0,h=0;for(let c=0;c<a.slots.length;c++){let v=a.slots[c];if(!v.isLocked)if(!s)l=s=y(0,360),t=i=y(.1,1),o=d=y(.1,.9),v.hex=C(l,t,o),v.sync(),s=l,i=t,d=o,Math.random()>.5?n=l+y(90,120):n=l-y(75,90),i<.4?r=y(.7,1):i>.6?r=y(.1,.3):i>.5?r=y(.1,.2):r=y(.8,.9),d<.4?m=y(.7,1):d>.6?m=y(.1,.3):d>.5?m=y(.1,.2):m=y(.8,.9),f=(n-s)/a.slots.length,g=(r-i)/a.slots.length,h=(m-d)/a.slots.length;else{let u=a.slots[c];l=s+f*c,t=i+g*c,o=d+h*c,u.hex=C(l,t,o),u.sync()}}}else{let l,t,o,s,i,d;for(let n of a.slots)if(!n.isLocked){if(t=y(.2,1),o=y(.2,.8),typeof s!="number")l=s=y(0,360);else if(typeof i!="number")l=i=s+30*y(.975,1.025);else if(typeof d!="number")l=d=s-30*y(.975,1.025);else{let r=Math.random();r<.333?l=s:r>.666?l=i:l=d}n.hex=C(l,t,o),n.sync()}}}function Q(a){if(a.algorithm.details=="slot"){let e,l,t,o,s,i,d,n,r,m=Math.random();for(let{hex:f}of a.slots){let{h:g,s:h,l:c}=H(f);if(typeof e!="number")e=g;else if(typeof l!="number"){let v=e,u=v-g;u>180?v-=360:u<-180&&(v+=360),u=v-g,(u<-90||u>90)&&(l=g)}(typeof o!="number"||h>o)&&(o=h),(typeof t!="number"||h<t)&&(t=h),(typeof i!="number"||c>i)&&(i=c),(typeof s!="number"||c<s)&&(s=c)}return m>.5&&l?d=l*y(.925,1.025):d=e*y(.925,1.025),n=y(t,o)*y(.95,1.05),r=y(s,i)*y(.95,1.05),C(d,n,r)}else{let e,l,t,o,s;for(let i of a.slots)i.isLocked||(l=y(.2,1),t=y(.2,.8),typeof o!="number"?e=o=y(0,360):typeof s!="number"?e=s=o+150*y(.975,1.025):Math.random()<.5?e=o*y(.975,1.025):e=s*y(.975,1.025),i.hex=C(e,l,t),i.sync())}}function _(a){if(a.algorithm.details=="slot"){let e,l,t,o,s,i,d,n,r,m,f=Math.random();for(let{hex:g}of a.slots){let{h,s:c,l:v}=H(g);if(typeof e!="number")e=h;else if(typeof l!="number"){let u=e,x=u-h;x>180?u-=360:x<-180&&(u+=360),x=u-h,(x<-30||x>30)&&(l=h)}else if(typeof t!="number"){let u=e,x=l,b=u-h,L=x-h;b>180?u-=360:b<-180&&(u+=360),L>180?x-=360:L<-180&&(x+=360),b=u-h,L=x-h,(b>30||b<-30)&&(L>30||L<-30)&&(t=h)}(typeof s!="number"||c>s)&&(s=c),(typeof o!="number"||c<o)&&(o=c),(typeof d!="number"||v>d)&&(d=v),(typeof i!="number"||v<i)&&(i=v)}return f<.333&&t?n=t:f>.666&&l?n=l:n=e,r=y(o,s)*y(.95,1.05),m=y(i,d)*y(.95,1.05),C(n,r,m)}else{let e,l,t,o,s,i;for(let d of a.slots)if(!d.isLocked){if(l=y(.2,1),t=y(.2,.8),typeof o!="number")e=o=y(0,360);else if(typeof s!="number")e=s=o+150*y(.975,1.025);else if(typeof i!="number")e=i=o-150*y(.975,1.025);else{let n=Math.random();n<.333?e=o*y(.975,1.025):n>.666?e=s*y(.975,1.025):e=i*y(.975,1.025)}d.hex=C(e,l,t),d.sync()}}}function ee(a){if(a.algorithm.details=="slot"){let e,l,t,o,s,i,d,n,r,m,f=Math.random();for(let{hex:g}of a.slots){let{h,s:c,l:v}=H(g);if(typeof e!="number")e=h;else if(typeof l!="number"){let u=e,x=u-h;x>180?u-=360:x<-180&&(u+=360),x=u-h,(x<-90||x>90)&&(l=h)}else if(typeof t!="number"){let u=e,x=l,b=u-h,L=x-h;b>180?u-=360:b<-180&&(u+=360),L>180?x-=360:L<-180&&(x+=360),b=u-h,L=x-h,(b>90||b<-90)&&(L>90||L<-90)&&(t=h)}(typeof s!="number"||c>s)&&(s=c),(typeof o!="number"||c<o)&&(o=c),(typeof d!="number"||v>d)&&(d=v),(typeof i!="number"||v<i)&&(i=v)}return f<.333?n=e:f>.666?n=l:n=t,r=y(o,s)*y(.95,1.05),m=y(i,d)*y(.95,1.05),C(n,r,m)}else{let e,l,t,o,s,i;for(let d of a.slots)if(!d.isLocked){if(l=y(.2,1),t=y(.2,.8),typeof o!="number")e=o=y(0,360);else if(typeof s!="number")e=s=o+120;else if(typeof i!="number")e=i=o-120;else{let n=Math.random();n<.333?e=o:n<.666?e=s:e=i}d.hex=C(e,l,t),d.sync()}}}function te(a){if(a.algorithm.details=="slot"){let e,l,t,o,s,i,d,n,r,m,f,g=Math.random();for(let{hex:h}of a.slots){let{h:c,s:v,l:u}=H(h);if(typeof e!="number")e=c;else if(typeof l!="number"){let x=e,b=x-c;b>180?x-=360:b<-180&&(x+=360),b=x-c,(b<-45||b>45)&&(l=c)}else if(typeof t!="number"){let x=e,b=l,L=x-c,k=b-c;L>180?x-=360:L<-180&&(x+=360),k>180?b-=360:k<-180&&(b+=360),L=x-c,k=b-c,(L>45||L<-45)&&(k>45||k<-45)&&(t=c)}else if(typeof o!="number"){let x=e,b=l,L=t,k=x-c,q=b-c,M=L-c;k>180?x-=360:k<-180&&(x+=360),q>180?b-=360:q<-180&&(b+=360),M>180?L-=360:M<-180&&(L+=360),k=x-c,q=b-c,M=L-c,(k>45||k<-45)&&(q>45||q<-45)&&(M>45||M<-45)&&(o=c)}(typeof i!="number"||v>i)&&(i=v),(typeof s!="number"||v<s)&&(s=v),(typeof n!="number"||u>n)&&(n=u),(typeof d!="number"||u<d)&&(d=u)}return typeof o=="number"&&g<.25?r=o:typeof t=="number"&&g<.5?r=t:typeof l=="number"&&g<.75?r=l:r=e,m=y(s,i)*y(.95,1.05),f=y(d,n)*y(.95,1.05),C(r,m,f)}else{let e,l,t,o,s,i,d;for(let n of a.slots)if(!n.isLocked){if(l=y(.2,1),t=y(.2,.8),typeof o!="number")e=o=y(0,360);else if(typeof s!="number")e=s=o+60;else if(typeof i!="number")e=i=o-120;else if(typeof d!="number")e=d=o+180;else{let r=Math.random();r<.25?e=o:r>.5?e=s:r>.75?e=i:e=d}n.hex=C(e,l,t),n.sync()}}}function se(a){if(a.algorithm.details=="slot"){let e,l,t,o,s,i,d,n,r,m,f,g=Math.random();for(let{hex:h}of a.slots){let{h:c,s:v,l:u}=H(h);if(typeof e!="number")e=c;else if(typeof l!="number"){let x=e,b=x-c;b>180?x-=360:b<-180&&(x+=360),b=x-c,(b<-85||b>85)&&(l=c)}else if(typeof t!="number"){let x=e,b=l,L=x-c,k=b-c;L>180?x-=360:L<-180&&(x+=360),k>180?b-=360:k<-180&&(b+=360),L=x-c,k=b-c,(L<-85||L>85)&&(k<-85||k>85)&&(t=c)}else if(typeof o!="number"){let x=e,b=l,L=t,k=x-c,q=b-c,M=L-c;k>180?x-=360:k<-180&&(x+=360),q>180?b-=360:q<-180&&(b+=360),M>180?L-=360:M<-180&&(L+=360),k=x-c,q=b-c,M=L-c,(k<-85||k>85&&q<-85||q>85&&(M<-85||M>85))&&(o=c)}(typeof i!="number"||v>i)&&(i=v),(typeof s!="number"||v<s)&&(s=v),(typeof n!="number"||u>n)&&(n=u),(typeof d!="number"||u<d)&&(d=u)}return typeof o=="number"&&g<.25?r=o:typeof t=="number"&&g<.5?r=t:typeof l=="number"&&g<.75?r=l:r=e,m=y(s,i)*y(.95,1.05),f=y(d,n)*y(.95,1.05),C(r,m,f)}else{let e,l,t,o,s,i,d;for(let n of a.slots)if(!n.isLocked){if(l=y(.2,1),t=y(.2,.8),typeof o!="number")e=o=y(0,360);else if(typeof s!="number")e=s=o+60;else if(typeof i!="number")e=i=o-120;else if(typeof d!="number")e=d=o+180;else{let r=Math.random();r<.25?e=o:r>.5?e=s:r>.75?e=i:e=d}n.hex=C(e,l,t),n.sync()}}}function fe(a,e){switch(Math.round(y(0,7))){case 0:return W(a);case 1:return G(a,e);case 2:default:return Z(a,e);case 3:return Q(a);case 4:return _(a);case 5:return ee(a);case 6:return te(a);case 7:return se(a)}}const he=[W,G,Z,Q,_,ee,te,se,fe];let ye=document.getElementById("palette");class ge{constructor(){B(this,"slots",[]);B(this,"plus",{palette:this,disabled:!1,active:!1,show(e){if(!this.active){let l=this.render(e.toString()),t=this.palette.slots[e];t?document.getElementById(t.id).after(l):(t=this.palette.slots[e+1],document.getElementById(t.id).before(l)),this.active=!0}},hide(){var e;this.active&&((e=document.getElementById("plus-button"))==null||e.parentElement.parentElement.remove(),this.active=!1)},render(e){let l=document.createElement("div");l.classList.add("plus-container");let t=document.createElement("div");t.classList.add("circle");let o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("data-color-index",e),o.setAttribute("viewBox","0 0 100 100"),o.id="plus-button";let s=document.createElementNS("http://www.w3.org/2000/svg","use");return s.setAttribute("href","#icon-plus-button"),s.setAttribute("viewBox","0 0 100 100"),o.append(s),t.append(o),l.append(t),l}});B(this,"algorithm",{list:he,get(e){e=="slot"?this.details="slot":this.details="";let l=E.settings.lastColorAlgorithmIndex;return l||(E.settings={lastColorAlgorithmIndex:1}),this.list[l]},details:"",direction:{h:0,s:0,l:0},preference:{h:void 0,s:void 0,l:void 0}})}removeSlot(e,l){l||(l={animations:!0});let t=e.data+1;for(let s=t;s<this.slots.length;s++)this.slots[s].data--;let o=document.getElementById(e.id);if(this.slots.splice(e.data,1),l.animations==!0){let s=function(){o.remove(),o.removeEventListener("animationend",s),o.removeEventListener("animationcancel",s)};o.classList.add("deinit"),o.addEventListener("animationend",s),o.addEventListener("animationcancel",s)}else o.remove();return e}addSlot(e,l){var i;let t={palette:this,hex:e.hex,isLocked:typeof e.isLocked=="boolean"?e.isLocked:!1,id:e.id||ue(),index:typeof e.index!="number"?this.slots.length:e.index,get data(){var n;let d=parseInt((n=document.getElementById(this.id))==null?void 0:n.getAttribute("data-color-index"));return typeof d=="number"?d:this.data=this.index},set data(d){var n;(n=document.getElementById(this.id))==null||n.setAttribute("data-color-index",d.toString()),this.index=d},generate(){this.hex=this.palette.algorithm.get("slot")(this.palette,this.index),this.sync()},sync(){let d=document.getElementById(this.id);if(this.hex){let{lum:n}=H(this.hex);n<.5?d.classList.add("isLight"):d.classList.remove("isLight"),d.style.backgroundColor="#"+this.hex,d.getElementsByClassName("hex")[0].innerHTML="#"+this.hex}}};t.hex||(t.hex=this.algorithm.get("slot")(this,t.index));let o=this.createSwatch(t,l),s=document.getElementById((i=this.slots[t.index-1])==null?void 0:i.id);s?s.after(o):ye.prepend(o),t.data=t.index,this.slots.splice(t.index,0,t);for(let d=t.index+1;d<this.slots.length;d++)this.slots[d].data++;return t}createSwatch(e,l){l||(l={animations:!0});let t=document.createElement("div");if(t.classList.add("swatch"),t.setAttribute("data-color-index",e.data),t.id=e.id,e.hex){t.style.backgroundColor="#"+e.hex;let{lum:u}=H(e.hex);u<.5?t.classList.add("isLight"):t.classList.remove("isLight")}if(l.animations==!0){let u=function(){t.classList.remove("init"),t.removeEventListener("animationend",u),t.removeEventListener("animationcancel",u)};t.classList.add("init"),t.addEventListener("animationend",u),t.addEventListener("animationcancel",u)}let o=document.createElement("div");o.classList.add("options");let s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.classList.add("icon","x"),s.setAttribute("viewBox","0 0 100 100");let i=document.createElementNS("http://www.w3.org/2000/svg","use");i.setAttribute("href","#icon-x");let d=document.createElementNS("http://www.w3.org/2000/svg","use");d.setAttribute("viewBox","0 0 100 100"),d.setAttribute("href","#icon-lock-body");let n=document.createElementNS("http://www.w3.org/2000/svg","use");n.setAttribute("viewBox","0 0 100 100"),n.setAttribute("href","#icon-lock-arm");let r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("viewBox","0 0 100 100"),r.classList.add("icon","lock"),e.isLocked&&r.classList.add("locked");let m=document.createElement("div");m.classList.add("info");let f=document.createElement("h2");f.classList.add("hex"),f.innerHTML="#"+e.hex;let g=document.createElementNS("http://www.w3.org/2000/svg","svg");g.classList.add("icon"),g.setAttribute("viewBox","0 0 100 100");let h=document.createElementNS("http://www.w3.org/2000/svg","use");h.setAttribute("href","#icon-copy");let c=document.createElement("div");c.classList.add("detector","left");let v=document.createElement("div");return v.classList.add("detector"),s.append(i),r.append(n,d),g.append(h),m.append(f,g),o.append(s,r,m),t.append(o,c,v),t}generate(e){let l={animations:!1};if(e)if(e.length==this.slots.length)for(let t=0;t<e.length;t++)this.slots[t].hex=e[t],this.slots[t].sync();else{for(let t of this.slots)document.getElementById(t.id).remove();this.slots=[];for(let t=0;t<e.length;t++)this.addSlot({index:t,hex:e[t]},l)}else if(this.slots.length>0)this.algorithm.get()(this);else{for(let t=0;t<5;t++)this.addSlot({},l);this.algorithm.get()(this)}return this.slots}}class ve{constructor(e){B(this,"routes");B(this,"loadContent",e=>{if(e){let{base:l,ids:t}=e;typeof l!="string"&&(l=e);let o=this.routes.get(l);t?o(t):o()}else this.routes.get("404")()});B(this,"routeToURL",(e,l)=>{let t=this.deconstructURL(e,l);console.log(t);let{base:o,ids:s}=t;this.routes.has(o)?o==="create"?s?this.idsAreValid(s)?this.loadContent(t):this.loadContent():this.loadContent(t):this.loadContent(t):this.loadContent()});B(this,"navigateTo",(e,l,t)=>{l=l||!1,l?history.replaceState("","",e):history.pushState("","","/polychrome"+e),this.routeToURL(e,t)});this.routes=new Map(e)}deconstructURL(e,l){let t=e.replace(/^\//,"").replace(/\/$/,"").split("/");return l?{site:t[0],base:t[1]||"",ids:t[2]?t[2].split("-"):null}:{base:t[0],ids:t[1]?t[1].split("-"):null}}idsAreValid(e){for(let l of e)if(!/^[a-f0-9]{6}$/.test(l)||e.length>8)return!1;return!0}}function be(){document.querySelector("#palette").onclick=async l=>{let t=l.target,o=t.closest(".plus-container svg");if(o){const{ids:i}=A.deconstructURL(location.pathname),d=parseInt(o.getAttribute("data-color-index"));let n=p.addSlot({index:d+1});i.splice(d+1,0,n.hex),history.replaceState("","",i.join("-")),p.plus.hide(),I.create.push({undo(){p.removeSlot(n,{animations:!1}),i.splice(d+1,1),history.replaceState("","",i.join("-"))},redo(){p.addSlot(n,{animations:!1}),i.splice(d+1,0,n.hex),history.replaceState("","",i.join("-"))}}),p.slots.length==8&&p.plus.hide();return}let s=t.closest(".lock");if(s){let i=t.closest(".swatch"),d=parseInt(i.getAttribute("data-color-index")),n=p.slots[d];n.isLocked=!n.isLocked,s.classList.toggle("locked"),I.create.push({undo(){let r=p.slots[d],m=document.getElementById(r.id);r.isLocked=!r.isLocked,m.querySelector(".lock").classList.toggle("locked")},redo(){let r=p.slots[d],m=document.getElementById(r.id);r.isLocked=!r.isLocked,m.querySelector(".lock").classList.toggle("locked")}});return}if(t.closest(".x")){let i=t.closest(".swatch"),d=p.slots[parseInt(i.getAttribute("data-color-index"))],{ids:n}=A.deconstructURL(location.pathname);p.removeSlot(d),n.splice(d.data,1),history.replaceState("","",n.join("-")),I.create.push({undo(){p.addSlot(d,{animations:!1}),n.splice(d.data,0,d.hex),history.replaceState("","",n.join("-"))},redo(){p.removeSlot(d,{animations:!1}),n.splice(d.data,1),history.replaceState("","",n.join("-"))}});return}if(t.closest(".info")){let i=t.closest(".swatch"),d=p.slots[parseInt(i.getAttribute("data-color-index"))];if(t.closest(".hex")){let n=P([{id:""}],{type:"color-picker",hex:d.hex});i.append(n);return}if(t.closest(".icon")){await navigator.clipboard.writeText(d.hex).then(()=>{let n=S("Copied hex to clipboard!",{pos:[l.x,l.y]});n.classList.add("at-mouse-pos"),document.body.append(n)},()=>{let n=S("Copy to clipboard failed.",{pos:[l.x,l.y]});n.classList.add("at-mouse-pos"),document.body.append(n)});return}}},document.querySelector(".palettes-page .saved-palettes-wrapper").onclick=async l=>{let t=l.target,o=t.closest(".swatch");if(o){let i=o.parentElement.parentElement;await navigator.clipboard.writeText(w.items[parseInt(i.getAttribute("data-palette-index"))][parseInt(o.getAttribute("data-color-index"))]).then(()=>{let d=S("Copied hex to clipboard!",{pos:[l.x,l.y]});d.classList.add("at-mouse-pos"),document.body.append(d)},()=>{let d=S("Copy to clipboard failed.",{pos:[l.x,l.y]});d.classList.add("at-mouse-pos"),document.body.append(d)});return}if(t.closest(".clear-overlay")){t.closest(".popover").remove();return}if(t.closest("#palettes-open")){A.navigateTo("/create/"+E.savedPalettes.items[parseInt(t.closest(".palette-container").getAttribute("data-palette-index"))].join("-"));return}if(t.closest("#palettes-copy")){await navigator.clipboard.writeText(w.items[parseInt(t.closest(".palette-container").getAttribute("data-palette-index"))].join(`
`)).then(()=>{let i=S("Copied hex to clipboard!",{pos:[l.x,l.y]});i.classList.add("at-mouse-pos"),document.body.append(i)},()=>{let i=S("Copy to clipboard failed.",{pos:[l.x,l.y]});i.classList.add("at-mouse-pos"),document.body.append(i)});return}if(t.closest("#palettes-remove")){let i=parseInt(t.closest(".palette-container").getAttribute("data-palette-index")),d=w.items[i],n={undo(){w.addItem(d,i)},redo(){w.removeItem(i)}};I.palettes.push(n),w.removeItem(i);let r=S("Removed palette.");document.body.append(r);return}let s=t.closest(".more");if(s){let i=P([{content:"Open",id:"palettes-open"},{content:"Remove",id:"palettes-remove"},{content:"Copy",id:"palettes-copy"}],{type:"menu"});s.parentElement.append(i);return}},document.querySelector(".toolbar").onclick=async l=>{let t=l.target;if(t.closest(".undo")){A.deconstructURL(location.pathname).base=="create"?I.create.undo():I.palettes.undo();return}if(t.closest(".redo")){A.deconstructURL(location.pathname).base=="create"?I.create.redo():I.palettes.redo();return}if(t.closest(".copy")){if(A.deconstructURL(location.pathname).base=="create"){let o=[];for(let{hex:s}of p.slots)o.push(s);await navigator.clipboard.writeText(o.join(`
`)).then(()=>{let s=S("Copied palette!");document.body.append(s)},()=>{let s=S("Failed to copy.");document.body.append(s)})}else{let o=[];for(let s of w.items)o.push(s.join("-"));await navigator.clipboard.writeText(o.join(`,
`)).then(()=>{let s=S("Copied palettes to clipboard!");document.body.append(s)},()=>{let s=S("Copy to clipboard failed.");document.body.append(s)})}return}if(t.closest(".generate")){let o=[];for(let{hex:i}of p.slots)o.push(i);p.generate();let s=[];for(let{hex:i}of p.slots)s.push(i);history.replaceState("","","/create/"+s.join("-")),o&&I.create.push({undo:()=>{p.generate(o),history.replaceState("","","/create/"+o.join("-"))},redo:()=>{p.generate(s),history.replaceState("","","/create/"+s.join("-"))}});return}if(t.closest(".save")){if(!E.settings.cookiesOk){document.body.append(S("You'll need to enable cookies in settings for that feature."));return}let o=[];for(let{hex:i}of p.slots)o.push(i);w.addItem(o);let s=S("Saved palette!");document.body.append(s);return}if(t.closest(".remove-all")){J({message:"Are you sure you want to delete all of your palettes? You won't be able to undo this.",value:"remove-all"},[{message:"Yes, delete away.",value:"yes",call(){for(let s=0;w.items.length;s++)w.removeItem(0);let o=S("All palettes removed.");document.body.append(o)}},{message:"No, please don't delete my stuff!",value:"no"}]);return}if(t.closest(".import")){if(A.deconstructURL(location.pathname,!0).base=="create"){let o=D("Paste hex code palette below!","import-create");document.body.append(o)}else{if(!E.settings.cookiesOk){document.body.append(S("You'll need to enable cookies in settings for that feature."));return}let o=D("Paste hex code palette below! Separate palettes by commas.","import-palettes");document.body.append(o)}return}};let a=document.querySelector(".main-nav"),e=document.querySelector(".main-header");onclick=async l=>{var i,d;let t=l.target,o=t.closest("a");if(o){l.preventDefault();let n=o.getAttribute("href");a.classList.remove("visible"),(i=document.querySelector(".overlay"))==null||i.remove(),document.body.style.overflowY="",n!=location.pathname&&A.navigateTo(n);return}if(t.closest("#nav-button"))if(a.classList.toggle("visible"),a.classList.contains("visible")){let n=document.createElement("div");n.classList.add("overlay"),e.append(n),document.body.style.overflowY="hidden",p.plus.hide(),n.addEventListener("click",()=>{n.remove(),a.classList.remove("visible"),document.body.style.overflowY=""},{once:!0}),document.body.style.overflowY="hidden"}else(d=e.querySelector(".overlay"))==null||d.remove(),document.body.style.overflowY="";if(t.closest("#settings")){let n=K();document.body.append(n);return}let s=t.closest(".confirmation-screen");if(s){if(t.closest(".overlay")&&(s==document.querySelector(".cookies")&&(E.settings={cookiesOk:!0},E.info={firstVisit:!0}),s.remove()),s==document.querySelector(".remove-all-confirmation")){if(t.closest(".yes")){for(let r=0;w.items.length;r++)w.removeItem(0);s.remove();let n=S("All palettes removed.");document.body.append(n)}else t.closest(".no")&&s.remove();return}if(s==document.querySelector(".import-create")){let n=A.deconstructURL(location.pathname).ids,r=t.closest(".yes"),m=t.closest(".no");if(r){let f=s.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-",""),g=!(/[g-z~`!#$%\^&*+=\[\]\\';,/{}|\\":<>\?]/g.test(f)||f.length==0||f.length%6!=0),h="Invalid values entered. Try again.";if(g){h="Successfully imported values.";let v=f.match(/.{1,6}/g);p.generate(v),I.create.push({undo(){p.generate(n)},redo(){p.generate(v)}})}let c=S(h);document.body.append(c),s.remove()}else m&&s.remove();return}if(s==document.querySelector(".import-palettes")){let n=t.closest(".yes"),r=t.closest(".no");if(n){let m=s.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-","").replaceAll("#","").toLowerCase(),f="Invalid values entered. Try again.",g=!(/[g-z~`!#$%\^&*+=\[\]\\';/{}|\\":<>\?]/g.test(m)||m.replaceAll(",","").length%6!=0||m.length==0);console.log(m.replaceAll(",","").length%6!=0);let h=m.split(",");for(let v of h)(v.length/6>8||!(v.length>=6))&&(g=!1);if(g){let v=0;for(let u of h)v++,w.addItem(u.match(/.{1,6}/g));f="Successfully imported values.",I.palettes.push({undo(){for(let u=v;u>0;u--)w.removeItem(w.items.length-1)},redo(){for(let u of h)w.addItem(u.match(/.{1,6}/g))}})}let c=S(f);document.body.append(c),s.remove()}else r&&s.remove();return}if(s==document.querySelector(".settings-popover")){let n=t.closest(".yes"),r=t.closest(".no");if(n){let m=E.settings;m.lastColorAlgorithmIndex=s.querySelector("#algorithm").selectedIndex,m.cookiesOk=s.querySelector("#cookies-ok").checked,E.settings=m;let f="Changes saved.";s.remove();let g=S(f);document.body.append(g)}else if(r){let m="Changes discarded.";s.remove();let f=S(m);document.body.append(f)}return}if(s==document.querySelector(".cookies-confirmation")){let n=t.closest(".yes"),r=t.closest(".no");if(n){E.settings={cookiesOk:!0},s.remove();let m=S("Thanks, enjoy the site! :)");document.body.append(m)}else if(r){E.settings={cookiesOk:!1},s.remove();let m=S("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(m)}return}}}}window.addEventListener("scroll",le,!1);window.addEventListener("touchmove",le,{passive:!1});function le(a){A.deconstructURL(location.pathname).base=="create"&&(a.preventDefault(),a.stopPropagation())}window.ontouchstart=a=>{let e=a.target.closest(".create-page .swatch");if(e&&!a.target.closest(".options div")&&!a.target.closest(".options svg")){let l=function(g){if(g.preventDefault(),t){let h=g.touches[0].clientY-d;e.style.translate="0 "+h+"px";let c=e,v=p.slots.length-n-1;if(f=0,m=0,h>0)for(let u=0;u<v;u++)f=(u*2+1)*s,c=c.nextElementSibling,h>f?(m++,c.style.translate!="0 -100%"&&(c.style.translate="0 -100%")):c.style.translate=="0 -100%"&&(c.style.translate="0 0");else for(let u=0;u<n;u++)f=(u*2+1)*s,c=c.previousElementSibling,-h>f?(m--,c.style.translate!="0 100%"&&(c.style.translate="0 100%")):c.style.translate=="0 100%"&&(c.style.translate="0 0")}else{let h=g.touches[0].clientX-i;e.style.translate=h+"px";let c=e,v=p.slots.length-n-1;if(f=0,m=0,h>0)for(let u=0;u<v;u++)f=(u*2+1)*o,c=c.nextElementSibling,h>f?(m++,c.style.translate!="-100%"&&(c.style.translate="-100%")):c.style.translate=="-100%"&&(c.style.translate="");else for(let u=0;u<n;u++)f=(u*2+1)*o,c=c.previousElementSibling,-h>f?(m--,c.style.translate!="100%"&&(c.style.translate="100%")):c.style.translate=="100%"&&(c.style.translate="")}},t=!1;document.body.classList.contains("vertical")&&(t=!0),p.plus.disabled=!0,p.plus.hide(),e.classList.add("is-dragging");let o=e.clientWidth/2,s=e.clientHeight/2,i=a.touches[0].clientX,d=a.touches[0].clientY,n=parseInt(e.getAttribute("data-color-index")),r=p.slots[n],m=0,f;window.addEventListener("touchmove",l,{passive:!1}),window.addEventListener("touchend",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("touchmove",l),e.style.translate=`${t?"0 ":""}${m*100}%`;function g(){e.removeEventListener("transitionend",g),e.removeEventListener("transitioncancel",g),e.classList.remove("is-released");let h=e;for(let u=0;u<m;u++)p.slots.splice(r.data,1),p.slots.splice(r.data+1,0,r),r.data++,h=h.nextElementSibling,p.slots[r.data-1].data--;for(let u=0;u>m;u--)p.slots.splice(r.data,1),p.slots.splice(r.data-1,0,r),r.data--,h=h.previousElementSibling,p.slots[r.data+1].data++;let c=e.cloneNode(!0);m>0?(h.after(c),e.remove()):m<0&&(h.before(c),e.remove()),e.style.translate="";let v=[];for(let u of p.slots){let x=document.getElementById(u.id);x.style.transition="transform 0s",x.style.translate="",setTimeout(()=>{x.style.transition=""},1),v.push(u.hex)}e=c,history.replaceState("","",v.join("-")),p.plus.disabled=!1,m&&I.create.push({undo(){p.plus.hide();let u=e=document.getElementById(r.id);for(let b=0;b<-m;b++){p.slots.splice(r.data,1),p.slots.splice(r.data+1,0,r),r.data++,u=u.nextElementSibling;let L=parseInt(u.getAttribute("data-color-index"));u.setAttribute("data-color-index",(L-1).toString())}for(let b=0;b>-m;b--){p.slots.splice(r.data,1),p.slots.splice(r.data-1,0,r),r.data--,u=u.previousElementSibling;let L=parseInt(u.getAttribute("data-color-index"));u.setAttribute("data-color-index",(L+1).toString())}c=e.cloneNode(!0),-m>0?(u.after(c),e.remove()):-m<0&&(u.before(c),e.remove());let x=[];for(let b of p.slots)x.push(b.hex);history.replaceState("","",x.join("-"))},redo(){p.plus.hide();let u=e=document.getElementById(r.id);for(let b=0;b<m;b++)p.slots.splice(r.data,1),p.slots.splice(r.data+1,0,r),r.data++,u=u.nextElementSibling,n=parseInt(u.getAttribute("data-color-index")),u.setAttribute("data-color-index",(n-1).toString());for(let b=0;b>m;b--)p.slots.splice(r.data,1),p.slots.splice(r.data-1,0,r),r.data--,u=u.previousElementSibling,n=parseInt(u.getAttribute("data-color-index")),u.setAttribute("data-color-index",(n+1).toString());c=e.cloneNode(!0),m>0?(u.after(c),e.remove()):m<0&&(u.before(c),e.remove());let x=[];for(let b of p.slots)x.push(b.hex);history.replaceState("","",x.join("-"))}})}e.addEventListener("transitionend",g),e.addEventListener("transitioncancel",g)},{once:!0})}};function xe(){onmousedown=a=>{let e=a.target.closest(".create-page .swatch");if(e&&!a.target.closest(".options div")&&!a.target.closest(".options svg")){let l=function(g){if(t){let h=g.y-d;e.style.translate="0 "+h+"px";let c=e,v=p.slots.length-n-1;if(f=0,m=0,h>0)for(let u=0;u<v;u++)f=(u*2+1)*s,c=c.nextElementSibling,h>f?(m++,c.style.translate!="0 -100%"&&(c.style.translate="0 -100%")):c.style.translate=="0 -100%"&&(c.style.translate="");else for(let u=0;u<n;u++)f=(u*2+1)*s,c=c.previousElementSibling,-h>f?(m--,c.style.translate!="0 100%"&&(c.style.translate="0 100%")):c.style.translate=="0 100%"&&(c.style.translate="")}else{let h=g.x-i;e.style.translate=h+"px";let c=e,v=p.slots.length-n-1;if(f=0,m=0,h>0)for(let u=0;u<v;u++)f=(u*2+1)*o,c=c.nextElementSibling,h>f?(m++,c.style.translate!="-100%"&&(c.style.translate="-100%")):c.style.translate=="-100%"&&(c.style.translate="");else for(let u=0;u<n;u++)f=(u*2+1)*o,c=c.previousElementSibling,-h>f?(m--,c.style.translate!="100%"&&(c.style.translate="100%")):c.style.translate=="100%"&&(c.style.translate="")}},t=!1;document.body.classList.contains("vertical")&&(t=!0),p.plus.disabled=!0,p.plus.hide(),e.classList.add("is-dragging");let o=e.clientWidth/2,s=e.clientHeight/2,i=a.x,d=a.y,n=parseInt(e.getAttribute("data-color-index")),r=p.slots[n],m=0,f;addEventListener("mousemove",l),addEventListener("mouseup",()=>{e.classList.remove("is-dragging"),e.classList.add("is-released"),removeEventListener("mousemove",l),e.style.translate=`${t?"0 ":""}${m*100}%`;function g(){e.removeEventListener("transitionend",g),e.removeEventListener("transitioncancel",g),e.classList.remove("is-released");let h=e;for(let u=0;u<m;u++)p.slots.splice(r.data,1),p.slots.splice(r.data+1,0,r),r.data++,h=h.nextElementSibling,p.slots[r.data-1].data--;for(let u=0;u>m;u--)p.slots.splice(r.data,1),p.slots.splice(r.data-1,0,r),r.data--,h=h.previousElementSibling,p.slots[r.data+1].data++;let c=e.cloneNode(!0);m>0?(h.after(c),e.remove()):m<0&&(h.before(c),e.remove()),e.style.translate="";let v=[];for(let u of p.slots){let x=document.getElementById(u.id);x.style.transition="transform 0s",x.style.translate="",setTimeout(()=>{x.style.transition=""},1),v.push(u.hex)}e=c,history.replaceState("","",v.join("-")),p.plus.disabled=!1,m&&I.create.push({undo(){p.plus.hide();let u=e=document.getElementById(r.id);for(let b=0;b<-m;b++){p.slots.splice(r.data,1),p.slots.splice(r.data+1,0,r),r.data++,u=u.nextElementSibling;let L=parseInt(u.getAttribute("data-color-index"));u.setAttribute("data-color-index",(L-1).toString())}for(let b=0;b>-m;b--){p.slots.splice(r.data,1),p.slots.splice(r.data-1,0,r),r.data--,u=u.previousElementSibling;let L=parseInt(u.getAttribute("data-color-index"));u.setAttribute("data-color-index",(L+1).toString())}c=e.cloneNode(!0),-m>0?(u.after(c),e.remove()):-m<0&&(u.before(c),e.remove());let x=[];for(let b of p.slots)x.push(b.hex);history.replaceState("","",x.join("-"))},redo(){p.plus.hide();let u=e=document.getElementById(r.id);for(let b=0;b<m;b++)p.slots.splice(r.data,1),p.slots.splice(r.data+1,0,r),r.data++,u=u.nextElementSibling,n=parseInt(u.getAttribute("data-color-index")),u.setAttribute("data-color-index",(n-1).toString());for(let b=0;b>m;b--)p.slots.splice(r.data,1),p.slots.splice(r.data-1,0,r),r.data--,u=u.previousElementSibling,n=parseInt(u.getAttribute("data-color-index")),u.setAttribute("data-color-index",(n+1).toString());c=e.cloneNode(!0),m>0?(u.after(c),e.remove()):m<0&&(u.before(c),e.remove());let x=[];for(let b of p.slots)x.push(b.hex);history.replaceState("","",x.join("-"))}})}e.addEventListener("transitionend",g),e.addEventListener("transitioncancel",g)},{once:!0}),ondragstart=()=>!1}}}let Le=document.querySelector(".main-nav");function Se(){onkeydown=a=>{var e,l,t,o;if(a.metaKey||a.ctrlKey){let{base:s}=A.deconstructURL(location.pathname,!0);if(a.key==="z"||a.key==="Z")if(s==="palettes"){a.shiftKey?I.palettes.redo():I.palettes.undo();return}else{a.shiftKey?I.create.redo():I.create.undo();return}if(s==="create"){let i=parseInt(a.key);if(i>=0&&i<=9){a.preventDefault();let d=p.slots[i-1]||p.slots[p.slots.length-1],n=document.getElementById(d.id);I.create.push({undo(){let r=p.slots[i-1]||p.slots[p.slots.length-1],m=document.getElementById(r.id);r.isLocked=!r.isLocked,m.querySelector(".lock").classList.toggle("locked")},redo(){let r=p.slots[i-1]||p.slots[p.slots.length-1],m=document.getElementById(r.id);r.isLocked=!r.isLocked,m.querySelector(".lock").classList.toggle("locked")}}),d.isLocked=!d.isLocked,n.querySelector(".lock").classList.toggle("locked");return}}}if(a.key===" "){let{base:s}=A.deconstructURL(location.pathname,!0);if(s==="create"){a.preventDefault();let i=[];for(let{hex:n}of p.slots)i.push(n);p.generate();let d=[];for(let{hex:n}of p.slots)d.push(n);history.replaceState("","","/polychrome/create/"+d.join("-")),I.create.push({undo:()=>{p.generate(i),history.replaceState("","","/polychrome/create/"+i.join("-")),p.plus.hide()},redo:()=>{p.generate(d),history.replaceState("","","/polychrome/create/"+d.join("-"))}})}return}if(a.key==="Escape"){(e=document.querySelector(".confirmation-screen"))==null||e.remove(),Le.classList.remove("visible"),(l=document.querySelector(".overlay"))==null||l.remove();return}if(a.key==="y"||a.key==="Y"){((t=document.querySelector(".confirmation-screen"))==null?void 0:t.querySelector(".yes")).click();return}if(a.key==="n"||a.key==="N"){((o=document.querySelector(".confirmation-screen"))==null?void 0:o.querySelector(".no")).click();return}//! NOT DONE
if(a.key==="Enter"){let s=document.activeElement;console.log(s);return}a.key}}function we(){document.querySelector("#palette").ontouchstart=async l=>{let t=l.target,o=t.closest(".plus-container svg");if(o){const{ids:i}=A.deconstructURL(location.pathname),d=parseInt(o.getAttribute("data-color-index"));let n=p.addSlot({index:d+1});i.splice(d+1,0,n.hex),history.replaceState("","",i.join("-")),p.plus.hide(),I.create.push({undo(){p.removeSlot(n,{animations:!1}),i.splice(d+1,1),history.replaceState("","",i.join("-"))},redo(){p.addSlot(n,{animations:!1}),i.splice(d+1,0,n.hex),history.replaceState("","",i.join("-"))}}),p.slots.length==8&&p.plus.hide();return}let s=t.closest(".lock");if(s){let i=t.closest(".swatch"),d=parseInt(i.getAttribute("data-color-index")),n=p.slots[d];n.isLocked=!n.isLocked,s.classList.toggle("locked"),I.create.push({undo(){let r=p.slots[d],m=document.getElementById(r.id);r.isLocked=!r.isLocked,m.querySelector(".lock").classList.toggle("locked")},redo(){let r=p.slots[d],m=document.getElementById(r.id);r.isLocked=!r.isLocked,m.querySelector(".lock").classList.toggle("locked")}});return}if(t.closest(".x")){let i=t.closest(".swatch"),d=p.slots[parseInt(i.getAttribute("data-color-index"))],{ids:n}=A.deconstructURL(location.pathname);p.removeSlot(d),n.splice(d.data,1),history.replaceState("","",n.join("-")),I.create.push({undo(){p.addSlot(d,{animations:!1}),n.splice(d.data,0,d.hex),history.replaceState("","",n.join("-"))},redo(){p.removeSlot(d,{animations:!1}),n.splice(d.data,1),history.replaceState("","",n.join("-"))}});return}if(t.closest(".info")){let i=t.closest(".swatch"),d=p.slots[parseInt(i.getAttribute("data-color-index"))];if(t.closest(".hex")){let n=P([{id:""}],{type:"color-picker",hex:d.hex});i.append(n);return}if(t.closest(".icon")){await navigator.clipboard.writeText(d.hex).then(()=>{let n=S("Copied hex to clipboard!",{pos:[l.touches[0].clientX,l.touches[0].clientY]});n.classList.add("at-mouse-pos"),document.body.append(n)},()=>{let n=S("Copy to clipboard failed.",{pos:[l.touches[0].clientX,l.touches[0].clientY]});n.classList.add("at-mouse-pos"),document.body.append(n)});return}}},document.querySelector(".palettes-page .saved-palettes-wrapper").ontouchstart=async l=>{let t=l.target,o=t.closest(".swatch");if(o){let i=o.parentElement.parentElement;await navigator.clipboard.writeText(w.items[parseInt(i.getAttribute("data-palette-index"))][parseInt(o.getAttribute("data-color-index"))]).then(()=>{let d=S("Copied hex to clipboard!",{pos:[l.touches[0].clientX,l.touches[0].clientY]});d.classList.add("at-mouse-pos"),document.body.append(d)},()=>{let d=S("Copy to clipboard failed.",{pos:[l.touches[0].clientX,l.touches[0].clientY]});d.classList.add("at-mouse-pos"),document.body.append(d)});return}if(t.closest(".clear-overlay")){t.closest(".popover").remove();return}if(t.closest("#palettes-open")){A.navigateTo("/create/"+E.savedPalettes.items[parseInt(t.closest(".palette-container").getAttribute("data-palette-index"))].join("-"));return}if(t.closest("#palettes-copy")){await navigator.clipboard.writeText(w.items[parseInt(t.closest(".palette-container").getAttribute("data-palette-index"))].join(`
`)).then(()=>{let i=S("Copied hex to clipboard!",{pos:[l.touches[0].clientX,l.touches[0].clientY]});i.classList.add("at-mouse-pos"),document.body.append(i)},()=>{let i=S("Copy to clipboard failed.",{pos:[l.touches[0].clientX,l.touches[0].clientY]});i.classList.add("at-mouse-pos"),document.body.append(i)});return}if(t.closest("#palettes-remove")){let i=parseInt(t.closest(".palette-container").getAttribute("data-palette-index")),d=w.items[i],n={undo(){w.addItem(d,i)},redo(){w.removeItem(i)}};I.palettes.push(n),w.removeItem(i);let r=S("Removed palette.");document.body.append(r);return}let s=t.closest(".more");if(s){let i=P([{content:"Open",id:"palettes-open"},{content:"Remove",id:"palettes-remove"},{content:"Copy",id:"palettes-copy"}],{type:"menu"});s.parentElement.append(i);return}},document.querySelector(".toolbar").ontouchstart=async l=>{let t=l.target;if(t.closest(".undo")){A.deconstructURL(location.pathname).base=="create"?I.create.undo():I.palettes.undo();return}if(t.closest(".redo")){A.deconstructURL(location.pathname).base=="create"?I.create.redo():I.palettes.redo();return}if(t.closest(".copy")){if(A.deconstructURL(location.pathname).base=="create"){let o=[];for(let{hex:s}of p.slots)o.push(s);await navigator.clipboard.writeText(o.join(`
`)).then(()=>{let s=S("Copied palette!");document.body.append(s)},()=>{let s=S("Failed to copy.");document.body.append(s)})}else{let o=[];for(let s of w.items)o.push(s.join("-"));await navigator.clipboard.writeText(o.join(`,
`)).then(()=>{let s=S("Copied palettes to clipboard!");document.body.append(s)},()=>{let s=S("Copy to clipboard failed.");document.body.append(s)})}return}if(t.closest(".generate")){let o=[];for(let{hex:i}of p.slots)o.push(i);p.generate();let s=[];for(let{hex:i}of p.slots)s.push(i);history.replaceState("","","/create/"+s.join("-")),o&&I.create.push({undo:()=>{p.generate(o),history.replaceState("","","/create/"+o.join("-"))},redo:()=>{p.generate(s),history.replaceState("","","/create/"+s.join("-"))}});return}if(t.closest(".save")){if(!E.settings.cookiesOk){document.body.append(S("You'll need to enable cookies in settings for that feature."));return}let o=[];for(let{hex:i}of p.slots)o.push(i);w.addItem(o);let s=S("Saved palette!");document.body.append(s);return}if(t.closest(".remove-all")){J({message:"Are you sure you want to delete all of your palettes? You won't be able to undo this.",value:"remove-all"},[{message:"Yes, delete away.",value:"yes",call(){for(let s=0;w.items.length;s++)w.removeItem(0);let o=S("All palettes removed.");document.body.append(o)}},{message:"No, please don't delete my stuff!",value:"no"}]);return}if(t.closest(".import")){if(A.deconstructURL(location.pathname,!0).base=="create"){let o=D("Paste hex code palette below!","import-create");document.body.append(o)}else{if(!E.settings.cookiesOk){document.body.append(S("You'll need to enable cookies in settings for that feature."));return}let o=D("Paste hex code palette below! Separate palettes by commas.","import-palettes");document.body.append(o)}return}};let a=document.querySelector(".main-nav"),e=document.querySelector(".main-header");ontouchstart=async l=>{var i,d;let t=l.target,o=t.closest("a");if(o){l.preventDefault();let n=o.getAttribute("href");a.classList.remove("visible"),(i=document.querySelector(".overlay"))==null||i.remove(),document.body.style.overflowY="",n!=location.pathname&&A.navigateTo(n);return}if(t.closest("#nav-button"))if(a.classList.toggle("visible"),a.classList.contains("visible")){let n=document.createElement("div");n.classList.add("overlay"),e.append(n),document.body.style.overflowY="hidden",p.plus.hide(),n.addEventListener("touchstart",()=>{n.remove(),a.classList.remove("visible"),document.body.style.overflowY=""},{once:!0}),document.body.style.overflowY="hidden"}else(d=e.querySelector(".overlay"))==null||d.remove(),document.body.style.overflowY="";if(t.closest("#settings")){let n=K();document.body.append(n);return}let s=t.closest(".confirmation-screen");if(s){if(t.closest(".overlay")&&(s==document.querySelector(".cookies")&&(E.settings={cookiesOk:!0},E.info={firstVisit:!0}),s.remove()),s==document.querySelector(".remove-all-confirmation")){if(t.closest(".yes")){for(let r=0;w.items.length;r++)w.removeItem(0);s.remove();let n=S("All palettes removed.");document.body.append(n)}else t.closest(".no")&&s.remove();return}if(s==document.querySelector(".import-create")){let n=A.deconstructURL(location.pathname).ids,r=t.closest(".yes"),m=t.closest(".no");if(r){let f=s.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-",""),g=!(/[g-z~`!#$%\^&*+=\[\]\\';,/{}|\\":<>\?]/g.test(f)||f.length==0||f.length%6!=0),h="Invalid values entered. Try again.";if(g){h="Successfully imported values.";let v=f.match(/.{1,6}/g);p.generate(v),I.create.push({undo(){p.generate(n)},redo(){p.generate(v)}})}let c=S(h);document.body.append(c),s.remove()}else m&&s.remove();return}if(s==document.querySelector(".import-palettes")){let n=t.closest(".yes"),r=t.closest(".no");if(n){let m=s.querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-","").replaceAll("#","").toLowerCase(),f="Invalid values entered. Try again.",g=!(/[g-z~`!#$%\^&*+=\[\]\\';/{}|\\":<>\?]/g.test(m)||m.replaceAll(",","").length%6!=0||m.length==0);console.log(m.replaceAll(",","").length%6!=0);let h=m.split(",");for(let v of h)(v.length/6>8||!(v.length>=6))&&(g=!1);if(g){let v=0;for(let u of h)v++,w.addItem(u.match(/.{1,6}/g));f="Successfully imported values.",I.palettes.push({undo(){for(let u=v;u>0;u--)w.removeItem(w.items.length-1)},redo(){for(let u of h)w.addItem(u.match(/.{1,6}/g))}})}let c=S(f);document.body.append(c),s.remove()}else r&&s.remove();return}if(s==document.querySelector(".settings-popover")){let n=t.closest(".yes"),r=t.closest(".no");if(n){let m=E.settings;m.lastColorAlgorithmIndex=s.querySelector("#algorithm").selectedIndex,m.cookiesOk=s.querySelector("#cookies-ok").checked,E.settings=m;let f="Changes saved.";s.remove();let g=S(f);document.body.append(g)}else if(r){let m="Changes discarded.";s.remove();let f=S(m);document.body.append(f)}return}if(s==document.querySelector(".cookies-confirmation")){let n=t.closest(".yes"),r=t.closest(".no");if(n){E.settings={cookiesOk:!0},s.remove();let m=S("Thanks, enjoy the site! :)");document.body.append(m)}else if(r){E.settings={cookiesOk:!1},s.remove();let m=S("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(m)}return}}}}let p=new ge,w=new pe,A=new ve([["",U("Home",document.getElementById("landing-page"))],["palettes",U("Palettes",document.getElementById("palettes-page"),w)],["create",U("Create",document.getElementById("create-page"),p)],["404",U("404 Not Found",document.getElementById("not-found-page"))]]);A.routeToURL(location.pathname,!0);setTimeout(()=>{document.querySelector(":root").style.display="initial",window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")},200);onpopstate=()=>A.navigateTo(location.pathname,!0,!0);be();we();xe();Se();onmouseover=a=>{if(!p.plus.disabled){const e=a.target,l=e.closest(".swatch");if(l)if(e.closest(".detector")&&p.slots.length<8){const o=e.closest(".left");let s=parseInt(l.getAttribute("data-color-index"));o&&s--,p.plus.show(s)}else p.plus.hide()}};E.info.firstVisit&&J({message:"This site relies on local storage and cookies to save palettes.",value:"cookies"},[{message:"Sure, sounds good to me.",value:"yes",call(){E.info={firstVisit:!1},E.settings={cookiesOk:!0};let a=S("Thanks, enjoy the site! :)");document.body.append(a)}},{message:"No thanks, I don't want to save palettes.",value:"no",call(){E.info={firstVisit:!1},E.settings={cookiesOk:!1};for(let e=0;e<w.items.length;e++)w.removeItem(0);let a=S("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(a)}}]);onresize=()=>{window.innerHeight>window.innerWidth?document.body.classList.add("vertical"):document.body.classList.remove("vertical")};(navigator.userAgent.includes("Android")||navigator.userAgent.includes("like Mac"))&&document.body.classList.add("mobile");
