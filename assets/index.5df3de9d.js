var te=Object.defineProperty;var se=(o,e,t)=>e in o?te(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var B=(o,e,t)=>(se(o,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&s(m)}).observe(document,{childList:!0,subtree:!0});function t(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerpolicy&&(a.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?a.credentials="include":l.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(l){if(l.ep)return;l.ep=!0;const a=t(l);fetch(l.href,a)}})();function k(o){let e=parseInt(o[0]+o[1],16)/255,t=parseInt(o[2]+o[3],16)/255,s=parseInt(o[4]+o[5],16)/255,l=Math.max(e,t,s),a=Math.min(e,t,s),m,u,g=e*.299+t*.587+s*.114,f=(l+a)/2;if(l==a)m=u=0;else{let i=l-a;switch(u=f>.5?i/(2-l-a):i/(l+a),l){case e:m=(t-s)/i+(t<s?6:0);break;case t:m=(s-e)/i+2;break;default:m=(e-t)/i+4;break}m=m*60}return{r:e,g:t,b:s,h:m,s:u,l:f,lum:g}}const I={get info(){let o=localStorage.getItem("info");return o?JSON.parse(o):(localStorage.setItem("info",JSON.stringify({firstVisit:!0})),this.info)},set info(o){let e=this.info;if(o)for(let[t,s]of Object.entries(o))e[t]=s;localStorage.setItem("info",JSON.stringify(e))},get settings(){let o=localStorage.getItem("settings");return o?JSON.parse(o):(localStorage.setItem("settings",JSON.stringify({algorithm:2,cookies:0})),this.settings)},set settings(o){let e=this.settings;if(o)for(let[t,s]of Object.entries(o))e[t]=s;localStorage.setItem("settings",JSON.stringify(e))},savedPalettes:{get items(){let o=localStorage.getItem("saved-palettes"),e;if(o){let t=[];e=JSON.parse(o);for(let s of e)t.push(s);return t}else return[]},set items(o){localStorage.setItem("saved-palettes",JSON.stringify(o))},addItem(o){let e=this.items;e.push(o),this.items=e},removeItem(o){this.items.splice(o,1)}}},E={create:{cmds:[],cmdIndex:-1,push(o){this.cmds.splice(this.cmdIndex+1,1/0,o),this.cmdIndex=this.cmds.length-1},undo(){this.cmdIndex>-1&&(this.cmds[this.cmdIndex].undo(),this.cmdIndex--)},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}},palettes:{cmds:[],cmdIndex:-1,push(o){this.cmds.splice(this.cmdIndex+1,1/0,o),this.cmdIndex=this.cmds.length-1},undo(){if(this.cmdIndex>-1){let o=this.cmds[this.cmdIndex];this.cmdIndex--,o.undo()}},redo(){this.cmdIndex<this.cmds.length-1&&(this.cmdIndex++,this.cmds[this.cmdIndex].redo())}}},h=(o,e)=>Math.random()*(e-o)+o;function w(o,e){const t=document.createElement("div");t.classList.add("tooltip","appearing");const s=document.createElement("h2");return s.innerHTML=o,t.append(s),(e==null?void 0:e.pos)&&!(navigator.userAgent.includes("Android")||navigator.userAgent.includes("like Mac"))?(t.style.left=e.pos[0]+"px",t.style.top=e.pos[1]+"px",setTimeout(()=>{t.clientWidth+e.pos[0]>document.body.clientWidth?(t.style.translate="-100%",t.clientHeight+e.pos[1]>document.body.clientHeight&&(t.style.translate="-100 -100%")):t.clientHeight+e.pos[1]>document.body.clientHeight&&(t.style.translate="0 -100%")},0)):t.classList.add("centered"),t.addEventListener("animationend",()=>{t.classList.remove("appearing"),setTimeout(()=>{t.classList.add("disappearing"),t.addEventListener("animationend",()=>{t.remove()},{once:!0})},(e==null?void 0:e.duration)||1e3)},{once:!0}),t}function D(o,e){let t=document.createElement("div");t.classList.add("popover");let s=new IntersectionObserver(m=>{let u=m[0];!u.isIntersecting&&u.intersectionRatio<1&&(t.style.translate="0 -100%")},{threshold:1});s.observe(t),setTimeout(()=>{s.unobserve(t)},10),(e==null?void 0:e.type)=="tool-menu"&&t.classList.add("bottom");let l=document.createElement("div");l.classList.add("clear-overlay"),document.body.append(l);let a=document.createElement("ul");if(a.classList.add("list"),o)for(let{message:m,classes:u,attributes:g,call:f}of o){let i=document.createElement("div");if(i.classList.add("choice"),i.innerHTML=m,u)for(let d of u)i.classList.add(d);if(g)for(let d of g)i.setAttribute(d[0],d[1]);a.append(i),t.append(a),i.onclick=()=>{f&&f(),document.querySelector(".clear-overlay").remove()},i.ontouchend=()=>{f&&f(),document.querySelector(".clear-overlay").remove()}}return t}function j(o,e){let t=document.createElement("div");t.classList.add("confirmation-screen");let s=document.createElement("h2");s.innerHTML=o;let l=document.createElement("div");l.classList.add("overlay");let a=document.createElement("div");a.classList.add("box"),a.append(s),t.append(a,l);function m(){var p,y,c;(p=e==null?void 0:e.confirmation)!=null&&p.value&&t.classList.add(e.confirmation.value);let u=document.createElement("ul"),g=document.createElement("li");g.classList.add("yes"),g.innerHTML=((y=e==null?void 0:e.confirmation)==null?void 0:y.confirm.message)||"Confirm";let f=document.createElement("li");f.classList.add("no"),f.innerHTML=((c=e==null?void 0:e.confirmation)==null?void 0:c.cancel.message)||"Cancel";let i=()=>{var r;(r=e==null?void 0:e.confirmation)!=null&&r.confirm.call&&e.confirmation.confirm.call(),t.remove()},d=()=>{var r;(r=e==null?void 0:e.confirmation)!=null&&r.cancel.call&&e.confirmation.cancel.call(),t.remove()};return g.onclick=i,g.ontouchend=i,f.onclick=d,f.ontouchend=d,u.append(f,g),u}if((e==null?void 0:e.type)=="input"){let u=document.createElement("textarea");a.append(u)}if(e&&e.settings){let u=document.createElement("ul");u.classList.add("options");for(let{message:g,value:f,choices:i}of e.settings){let d=document.createElement("li"),p=document.createElement("label");p.innerText=g;let y=document.createElement("select");y.id=f;let c=0;for(let{message:r,value:x}of i){let n=document.createElement("option");n.innerText=r,n.id=(typeof x=="number"?x:c).toString(),c++,y.append(n)}y.selectedIndex=I.settings[f],d.append(p,y),u.append(d)}a.append(u)}a.append(m()),document.body.append(t)}let U=document.querySelector(".saved-palettes-wrapper");class le{constructor(){B(this,"items",[]);this.items=I.savedPalettes.items}draw(e){for(;U.childElementCount>0;)U.lastChild.remove();if(e)for(let s=0;s<e.length;s++){let l=e[s],a=document.createElement("div");a.setAttribute("data-palette-index",s.toString()),a.classList.add("palette-container");let m=document.createElement("div");m.classList.add("palette");let u=document.createElement("div");u.classList.add("options");let g=document.createElement("div");g.classList.add("more");let f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("viewBox","0 0 100 100");let i=document.createElementNS("http://www.w3.org/2000/svg","use");i.setAttribute("href","#icon-more-horizontal");for(let d=0;d<l.length;d++){let p=l[d],{lum:y}=k(p),c=document.createElement("div");c.setAttribute("data-color-index",d.toString()),c.classList.add("swatch"),c.style.backgroundColor="#"+p,y<.5&&c.classList.add("isLight");let r=document.createElement("h2");r.innerHTML="#"+p,r.classList.add("text"),c.append(r),m.append(c)}f.append(i),g.append(f),u.append(g),a.append(m,u),U.append(a)}let t=document.querySelector(".palettes-page .when-empty");U.childElementCount==0?t.classList.remove("hidden"):t.classList.add("hidden")}addItem(e,t){typeof t=="number"?this.items.splice(t,0,e):this.items.push(e),I.savedPalettes.items=this.items,this.draw(this.items)}removeItem(e){this.items.splice(e,1),I.savedPalettes.items=this.items,this.draw(this.items)}}function H(o,e,t){o>360?o-=360:o<0&&(o+=360),e>1?e=1:e<0&&(e=0),t>1?t=1:t<0&&(t=0),e*=100;const s=e*Math.min(t,1-t)/100,l=a=>{const m=(a+o/30)%12,u=t-s*Math.max(Math.min(m-3,9-m,1),-1);return Math.round(255*u).toString(16).padStart(2,"0")};return`${l(0)}${l(8)}${l(4)}`}function X(o){if(o.algorithm.details=="slot"){let e=[];for(let t=0;t<6;t++)e.push(Math.round(h(0,15)).toString(16));return e.join("")}else for(let e of o.slots)if(!e.isLocked){let t=[];for(let s=0;s<6;s++)t.push(Math.round(h(0,15)).toString(16));e.hex=t.join(""),e.sync()}}function z(o,e){if(o.algorithm.details=="slot")if(Math.random()>.5){let t=0,s=0,l=0,a=o.slots[e-2],m=o.slots[e-1],u=o.slots[e],g=o.slots[e+1];if(u){let{h:f,s:i,l:d}=k(u.hex);if(t=f,m){let{s:p,l:y}=k(m.hex);s=i-(i-p)/2,l=d-(d-y)/2}else if(g){let{s:p,l:y}=k(g.hex);s=i-(p-i)/2,l=d-(y-d)/2}else s=i*h(.7,1.3),l=d*h(.7,1.3)}else if(m){let{h:f,s:i,l:d}=k(m.hex);if(t=f,a){let{s:p,l:y}=k(a.hex);s=i+(i-p)/2,l=d+(d-y)/2}else s=i*h(.7,1.3),l=d*h(.7,1.3)}else s=h(.2,1),l=h(.1,.9);return s*=h(.95,1.05),l*=h(.95,1.05),H(t,s,l)}else{let t,s,l,a,m,u,g;for(let{hex:f}of o.slots){let{h:i,s:d,l:p}=k(f);typeof t!="number"&&(t=i),(typeof l!="number"||d>l)&&(l=d),(typeof s!="number"||d<s)&&(s=d),(typeof m!="number"||p>m)&&(m=p),(typeof a!="number"||p<a)&&(a=p)}return u=h(s,l)*h(.95,1.05),g=h(a,m)*h(.95,1.05),H(t,u,g)}else if(o.algorithm.details=="increment"||Math.random()>.5){let t=[],s=h(0,360),l=0,a=0,m=0,u=0,g=0,f=0,i=0,d=0;for(let p of o.slots)p.isLocked||t.push(p);for(let p=0;p<t.length;p++)if(p==0){let y=o.slots[0];l=h(.1,1),a=h(.1,.9),y.hex=H(s,l,a),y.sync(),m=l,u=a,m<.4?g=h(.7,1):m>.6?g=h(.1,.3):m>.5?g=h(.1,.2):g=h(.8,.9),u<.4?f=h(.7,1):u>.6?f=h(.1,.3):u>.5?f=h(.1,.2):f=h(.8,.9),i=(g-m)/o.slots.length,d=(f-u)/o.slots.length}else{let y=o.slots[p];l=m+i*p,a=u+d*p,y.hex=H(s,l,a),y.sync()}}else{let t=h(0,360),s,l,a;for(let m of o.slots)m.isLocked||(s=h(.2,1),l=h(.2,.8),typeof a!="number"&&(t=a=h(0,360)),m.hex=H(t,s,l),m.sync())}}function J(o,e){if(o.algorithm.details=="slot")if(Math.random()>.5){let t=0,s=0,l=0,a=o.slots[e-2],m=o.slots[e-1],u=o.slots[e],g=o.slots[e+1];if(u){let{h:f,s:i,l:d}=k(u.hex);if(m){let{h:p,s:y,l:c}=k(m.hex),r=f-p;r>180?r=f-p-360:r<-180&&(r=f-p+360),t=f-r/2,s=i-(i-y)/2,l=d-(d-c)/2}else if(g){let{h:p,s:y,l:c}=k(g.hex),r=p-f;r>180?r=p-f-360:r<-180&&(r=p-f+360),t=f-r/2,s=i-(y-i)/2,l=d-(c-d)/2}else t=f*h(.7,1.3),s=i*h(.7,1.3),l=d*h(.7,1.3)}else if(m){let{h:f,s:i,l:d}=k(m.hex);if(a){let{h:p,s:y,l:c}=k(a.hex),r=f-p;r>180?r=f-p-360:r<-180&&(r=f-p+360),t=f+r/2,s=i+(i-y)/2,l=d+(d-c)/2}else t=f*h(.7,1.3),s=i*h(.7,1.3),l=d*h(.7,1.3)}else t=h(0,360),s=h(.2,1),l=h(.1,.9);return t*=h(.95,1.05),s*=h(.95,1.05),l*=h(.95,1.05),H(t,s,l)}else{let t,s,l,a,m,u,g,f,i,d,p=Math.random();for(let{hex:y}of o.slots){let{h:c,s:r,l:x}=k(y);if(typeof t!="number")t=c;else if(typeof s!="number"){let n=t,b=n-c;b>180?n-=360:b<-180&&(n+=360),b=n-c,(b<-25||b>25)&&(s=c)}else if(typeof l!="number"){let n=t,b=s,L=n-c,S=b-c;L>180?n-=360:L<-180&&(n+=360),S>180?b-=360:S<-180&&(b+=360),L=n-c,S=b-c,(L>25||L<-25)&&(S>25||S<-25)&&(l=c)}(typeof m!="number"||r>m)&&(m=r),(typeof a!="number"||r<a)&&(a=r),(typeof g!="number"||x>g)&&(g=x),(typeof u!="number"||x<u)&&(u=x)}return l&&p<.333?f=l:s&&p>.666?f=s:f=t,i=h(a,m)*h(.95,1.05),d=h(u,g)*h(.95,1.05),H(f,i,d)}else if(o.algorithm.details=="increment"||Math.random()>.5){let t=0,s=0,l=0,a=0,m=0,u=0,g=0,f=0,i=0,d=0,p=0,y=0;for(let c=0;c<o.slots.length;c++){let r=o.slots[c];if(!r.isLocked)if(!a)t=a=h(0,360),s=m=h(.1,1),l=u=h(.1,.9),r.hex=H(t,s,l),r.sync(),a=t,m=s,u=l,Math.random()>.5?g=t+h(90,120):g=t-h(75,90),m<.4?f=h(.7,1):m>.6?f=h(.1,.3):m>.5?f=h(.1,.2):f=h(.8,.9),u<.4?i=h(.7,1):u>.6?i=h(.1,.3):u>.5?i=h(.1,.2):i=h(.8,.9),d=(g-a)/o.slots.length,p=(f-m)/o.slots.length,y=(i-u)/o.slots.length;else{let x=o.slots[c];t=a+d*c,s=m+p*c,l=u+y*c,x.hex=H(t,s,l),x.sync()}}}else{let t,s,l,a,m,u;for(let g of o.slots)if(!g.isLocked){if(s=h(.2,1),l=h(.2,.8),typeof a!="number")t=a=h(0,360);else if(typeof m!="number")t=m=a+30*h(.975,1.025);else if(typeof u!="number")t=u=a-30*h(.975,1.025);else{let f=Math.random();f<.333?t=a:f>.666?t=m:t=u}g.hex=H(t,s,l),g.sync()}}}function W(o){if(o.algorithm.details=="slot"){let e,t,s,l,a,m,u,g,f,i=Math.random();for(let{hex:d}of o.slots){let{h:p,s:y,l:c}=k(d);if(typeof e!="number")e=p;else if(typeof t!="number"){let r=e,x=r-p;x>180?r-=360:x<-180&&(r+=360),x=r-p,(x<-90||x>90)&&(t=p)}(typeof l!="number"||y>l)&&(l=y),(typeof s!="number"||y<s)&&(s=y),(typeof m!="number"||c>m)&&(m=c),(typeof a!="number"||c<a)&&(a=c)}return i>.5&&t?u=t*h(.925,1.025):u=e*h(.925,1.025),g=h(s,l)*h(.95,1.05),f=h(a,m)*h(.95,1.05),H(u,g,f)}else{let e,t,s,l,a;for(let m of o.slots)m.isLocked||(t=h(.2,1),s=h(.2,.8),typeof l!="number"?e=l=h(0,360):typeof a!="number"?e=a=l+150*h(.975,1.025):Math.random()<.5?e=l*h(.975,1.025):e=a*h(.975,1.025),m.hex=H(e,t,s),m.sync())}}function K(o){if(o.algorithm.details=="slot"){let e,t,s,l,a,m,u,g,f,i,d=Math.random();for(let{hex:p}of o.slots){let{h:y,s:c,l:r}=k(p);if(typeof e!="number")e=y;else if(typeof t!="number"){let x=e,n=x-y;n>180?x-=360:n<-180&&(x+=360),n=x-y,(n<-30||n>30)&&(t=y)}else if(typeof s!="number"){let x=e,n=t,b=x-y,L=n-y;b>180?x-=360:b<-180&&(x+=360),L>180?n-=360:L<-180&&(n+=360),b=x-y,L=n-y,(b>30||b<-30)&&(L>30||L<-30)&&(s=y)}(typeof a!="number"||c>a)&&(a=c),(typeof l!="number"||c<l)&&(l=c),(typeof u!="number"||r>u)&&(u=r),(typeof m!="number"||r<m)&&(m=r)}return d<.333&&s?g=s:d>.666&&t?g=t:g=e,f=h(l,a)*h(.95,1.05),i=h(m,u)*h(.95,1.05),H(g,f,i)}else{let e,t,s,l,a,m;for(let u of o.slots)if(!u.isLocked){if(t=h(.2,1),s=h(.2,.8),typeof l!="number")e=l=h(0,360);else if(typeof a!="number")e=a=l+150*h(.975,1.025);else if(typeof m!="number")e=m=l-150*h(.975,1.025);else{let g=Math.random();g<.333?e=l*h(.975,1.025):g>.666?e=a*h(.975,1.025):e=m*h(.975,1.025)}u.hex=H(e,t,s),u.sync()}}}function F(o){if(o.algorithm.details=="slot"){let e,t,s,l,a,m,u,g,f,i,d=Math.random();for(let{hex:p}of o.slots){let{h:y,s:c,l:r}=k(p);if(typeof e!="number")e=y;else if(typeof t!="number"){let x=e,n=x-y;n>180?x-=360:n<-180&&(x+=360),n=x-y,(n<-90||n>90)&&(t=y)}else if(typeof s!="number"){let x=e,n=t,b=x-y,L=n-y;b>180?x-=360:b<-180&&(x+=360),L>180?n-=360:L<-180&&(n+=360),b=x-y,L=n-y,(b>90||b<-90)&&(L>90||L<-90)&&(s=y)}(typeof a!="number"||c>a)&&(a=c),(typeof l!="number"||c<l)&&(l=c),(typeof u!="number"||r>u)&&(u=r),(typeof m!="number"||r<m)&&(m=r)}return d<.333?g=e:d>.666?g=t:g=s,f=h(l,a)*h(.95,1.05),i=h(m,u)*h(.95,1.05),H(g,f,i)}else{let e,t,s,l,a,m;for(let u of o.slots)if(!u.isLocked){if(t=h(.2,1),s=h(.2,.8),typeof l!="number")e=l=h(0,360);else if(typeof a!="number")e=a=l+120;else if(typeof m!="number")e=m=l-120;else{let g=Math.random();g<.333?e=l:g<.666?e=a:e=m}u.hex=H(e,t,s),u.sync()}}}function Z(o){if(o.algorithm.details=="slot"){let e,t,s,l,a,m,u,g,f,i,d,p=Math.random();for(let{hex:y}of o.slots){let{h:c,s:r,l:x}=k(y);if(typeof e!="number")e=c;else if(typeof t!="number"){let n=e,b=n-c;b>180?n-=360:b<-180&&(n+=360),b=n-c,(b<-45||b>45)&&(t=c)}else if(typeof s!="number"){let n=e,b=t,L=n-c,S=b-c;L>180?n-=360:L<-180&&(n+=360),S>180?b-=360:S<-180&&(b+=360),L=n-c,S=b-c,(L>45||L<-45)&&(S>45||S<-45)&&(s=c)}else if(typeof l!="number"){let n=e,b=t,L=s,S=n-c,M=b-c,q=L-c;S>180?n-=360:S<-180&&(n+=360),M>180?b-=360:M<-180&&(b+=360),q>180?L-=360:q<-180&&(L+=360),S=n-c,M=b-c,q=L-c,(S>45||S<-45)&&(M>45||M<-45)&&(q>45||q<-45)&&(l=c)}(typeof m!="number"||r>m)&&(m=r),(typeof a!="number"||r<a)&&(a=r),(typeof g!="number"||x>g)&&(g=x),(typeof u!="number"||x<u)&&(u=x)}return typeof l=="number"&&p<.25?f=l:typeof s=="number"&&p<.5?f=s:typeof t=="number"&&p<.75?f=t:f=e,i=h(a,m)*h(.95,1.05),d=h(u,g)*h(.95,1.05),H(f,i,d)}else{let e,t,s,l,a,m,u;for(let g of o.slots)if(!g.isLocked){if(t=h(.2,1),s=h(.2,.8),typeof l!="number")e=l=h(0,360);else if(typeof a!="number")e=a=l+60;else if(typeof m!="number")e=m=l-120;else if(typeof u!="number")e=u=l+180;else{let f=Math.random();f<.25?e=l:f>.5?e=a:f>.75?e=m:e=u}g.hex=H(e,t,s),g.sync()}}}function G(o){if(o.algorithm.details=="slot"){let e,t,s,l,a,m,u,g,f,i,d,p=Math.random();for(let{hex:y}of o.slots){let{h:c,s:r,l:x}=k(y);if(typeof e!="number")e=c;else if(typeof t!="number"){let n=e,b=n-c;b>180?n-=360:b<-180&&(n+=360),b=n-c,(b<-85||b>85)&&(t=c)}else if(typeof s!="number"){let n=e,b=t,L=n-c,S=b-c;L>180?n-=360:L<-180&&(n+=360),S>180?b-=360:S<-180&&(b+=360),L=n-c,S=b-c,(L<-85||L>85)&&(S<-85||S>85)&&(s=c)}else if(typeof l!="number"){let n=e,b=t,L=s,S=n-c,M=b-c,q=L-c;S>180?n-=360:S<-180&&(n+=360),M>180?b-=360:M<-180&&(b+=360),q>180?L-=360:q<-180&&(L+=360),S=n-c,M=b-c,q=L-c,(S<-85||S>85&&M<-85||M>85&&(q<-85||q>85))&&(l=c)}(typeof m!="number"||r>m)&&(m=r),(typeof a!="number"||r<a)&&(a=r),(typeof g!="number"||x>g)&&(g=x),(typeof u!="number"||x<u)&&(u=x)}return typeof l=="number"&&p<.25?f=l:typeof s=="number"&&p<.5?f=s:typeof t=="number"&&p<.75?f=t:f=e,i=h(a,m)*h(.95,1.05),d=h(u,g)*h(.95,1.05),H(f,i,d)}else{let e,t,s,l,a,m,u;for(let g of o.slots)if(!g.isLocked){if(t=h(.2,1),s=h(.2,.8),typeof l!="number")e=l=h(0,360);else if(typeof a!="number")e=a=l+60;else if(typeof m!="number")e=m=l-120;else if(typeof u!="number")e=u=l+180;else{let f=Math.random();f<.25?e=l:f>.5?e=a:f>.75?e=m:e=u}g.hex=H(e,t,s),g.sync()}}}function oe(o,e){switch(Math.round(h(0,7))){case 0:return X(o);case 1:return z(o,e);case 2:default:return J(o,e);case 3:return W(o);case 4:return K(o);case 5:return F(o);case 6:return Z(o);case 7:return G(o)}}const ie=[X,z,J,W,K,F,Z,G,oe];let R;const ne=new Uint8Array(16);function ae(){if(!R&&(R=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!R))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return R(ne)}const T=[];for(let o=0;o<256;++o)T.push((o+256).toString(16).slice(1));function re(o,e=0){return(T[o[e+0]]+T[o[e+1]]+T[o[e+2]]+T[o[e+3]]+"-"+T[o[e+4]]+T[o[e+5]]+"-"+T[o[e+6]]+T[o[e+7]]+"-"+T[o[e+8]]+T[o[e+9]]+"-"+T[o[e+10]]+T[o[e+11]]+T[o[e+12]]+T[o[e+13]]+T[o[e+14]]+T[o[e+15]]).toLowerCase()}const ce=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),$={randomUUID:ce};function de(o,e,t){if($.randomUUID&&!e&&!o)return $.randomUUID();o=o||{};const s=o.random||(o.rng||ae)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,e){t=t||0;for(let l=0;l<16;++l)e[t+l]=s[l];return e}return re(s)}let me=document.getElementById("palette");class ue{constructor(){B(this,"slots",[]);B(this,"plus",{palette:this,disabled:!1,active:!1,show(e){if(!this.active){let t=this.render(e.toString()),s=this.palette.slots[e];s?document.getElementById(s.id).after(t):(s=this.palette.slots[e+1],document.getElementById(s.id).before(t)),this.active=!0}},hide(e){var t;this.active&&(this.disabled=!0,setTimeout(()=>{this.disabled=!1},typeof e=="number"?e:300),(t=document.getElementById("plus-button"))==null||t.parentElement.parentElement.remove(),this.active=!1)},render(e){let t=document.createElement("div");t.classList.add("plus-container");let s=document.createElement("div");s.classList.add("circle");let l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("data-color-index",e),l.setAttribute("viewBox","0 0 100 100"),l.id="plus-button";let a=document.createElementNS("http://www.w3.org/2000/svg","use");return a.setAttribute("href","#icon-plus-button"),a.setAttribute("viewBox","0 0 100 100"),l.append(a),s.append(l),t.append(s),t}});B(this,"algorithm",{list:ie,get(e){e=="slot"?this.details="slot":this.details="";let t=I.settings.algorithm;return this.list[t]},details:"",direction:{h:0,s:0,l:0},preference:{h:void 0,s:void 0,l:void 0}})}removeSlot(e,t){t||(t={animations:!0});let s=e.data+1;for(let a=s;a<this.slots.length;a++)this.slots[a].data--;let l=document.getElementById(e.id);if(this.slots.splice(e.data,1),t.animations==!0){let a=function(){l.remove(),l.removeEventListener("animationend",a),l.removeEventListener("animationcancel",a)};l.classList.add("deinit"),l.addEventListener("animationend",a),l.addEventListener("animationcancel",a)}else l.remove();return e}addSlot(e,t){var m;let s={palette:this,hex:e.hex,isLocked:typeof e.isLocked=="boolean"?e.isLocked:!1,id:e.id||btoa(parseInt(de(),16).toString(36)).replaceAll("=",""),index:typeof e.index!="number"?this.slots.length:e.index,get data(){var g;let u=parseInt((g=document.getElementById(this.id))==null?void 0:g.getAttribute("data-color-index"));return typeof u=="number"?u:this.data=this.index},set data(u){var g;(g=document.getElementById(this.id))==null||g.setAttribute("data-color-index",u.toString()),this.index=u},generate(){this.hex=this.palette.algorithm.get("slot")(this.palette,this.index),this.sync()},sync(){let u=document.getElementById(this.id);if(this.hex){let{lum:g}=k(this.hex);g<.5?u.classList.add("isLight"):u.classList.remove("isLight"),u.style.backgroundColor="#"+this.hex,u.getElementsByClassName("hex")[0].innerHTML="#"+this.hex}}};s.hex||(s.hex=this.algorithm.get("slot")(this,s.index));let l=this.createSwatch(s,t),a=document.getElementById((m=this.slots[s.index-1])==null?void 0:m.id);a?a.after(l):me.prepend(l),s.data=s.index,this.slots.splice(s.index,0,s);for(let u=s.index+1;u<this.slots.length;u++)this.slots[u].data++;return s}createSwatch(e,t){t||(t={animations:!0});let s=document.createElement("div");if(s.classList.add("swatch"),s.setAttribute("data-color-index",e.data),s.id=e.id,e.hex){s.style.backgroundColor="#"+e.hex;let{lum:n}=k(e.hex);n<.5?s.classList.add("isLight"):s.classList.remove("isLight")}if(t.animations==!0){let n=function(){s.classList.remove("init"),s.removeEventListener("animationend",n),s.removeEventListener("animationcancel",n)};s.classList.add("init"),s.addEventListener("animationend",n),s.addEventListener("animationcancel",n)}let l=document.createElement("div");l.classList.add("options");let a=document.createElementNS("http://www.w3.org/2000/svg","svg");a.classList.add("icon","x"),a.setAttribute("viewBox","0 0 100 100");let m=document.createElementNS("http://www.w3.org/2000/svg","use");m.setAttribute("href","#icon-x");let u=document.createElementNS("http://www.w3.org/2000/svg","use");u.setAttribute("viewBox","0 0 100 100"),u.setAttribute("href","#icon-lock-body");let g=document.createElementNS("http://www.w3.org/2000/svg","use");g.setAttribute("viewBox","0 0 100 100"),g.setAttribute("href","#icon-lock-arm");let f=document.createElementNS("http://www.w3.org/2000/svg","svg");f.setAttribute("viewBox","0 0 100 100"),f.classList.add("icon","lock"),e.isLocked&&f.classList.add("locked");let i=document.createElement("div");i.classList.add("info-container");let d=document.createElement("div");d.classList.add("info");let p=document.createElement("h2");p.classList.add("hex"),p.innerHTML="#"+e.hex;let y=document.createElementNS("http://www.w3.org/2000/svg","svg");y.classList.add("icon"),y.setAttribute("viewBox","0 0 100 100");let c=document.createElementNS("http://www.w3.org/2000/svg","use");c.setAttribute("href","#icon-copy");let r=document.createElement("div");r.classList.add("detector","left");let x=document.createElement("div");return x.classList.add("detector"),a.append(m),f.append(g,u),y.append(c),d.append(p,y),i.append(d),l.append(a,f,i),s.append(l,r,x),s}generate(e){let t={animations:!1};if(e)if(e.length==this.slots.length)for(let s=0;s<e.length;s++)this.slots[s].hex=e[s],this.slots[s].sync();else{for(let s of this.slots)document.getElementById(s.id).remove();this.slots=[];for(let s=0;s<e.length;s++)this.addSlot({index:s,hex:e[s]},t)}else if(this.slots.length>0)this.algorithm.get()(this);else{for(let s=0;s<5;s++)this.addSlot({},t);this.algorithm.get()(this)}return this.slots}}class fe{constructor(e){B(this,"routes");B(this,"loadContent",e=>{if(e){let{base:t,ids:s}=e;typeof t!="string"&&(t=e);let l=this.routes.get(t);s?l(s):l()}else this.routes.get("404")()});B(this,"routeToURL",e=>{let t=this.deconstructURL(e),{base:s,ids:l}=t;this.routes.has(s)?s==="create"?l?this.idsAreValid(l)?this.loadContent(t):this.loadContent():this.loadContent(t):this.loadContent(t):this.loadContent()});B(this,"navigateTo",(e,t)=>{t=t||!1,t?history.replaceState("","",e):history.pushState("","","/polychrome"+e),this.routeToURL(e)});this.routes=new Map(e)}deconstructURL(e){let t=e.replace(/^\//,"").replace(/\/$/,"").split("/");return t[0]=="polychrome"?{site:"polychrome",base:t[1]||"",ids:t[2]?t[2].split("-"):null}:{site:"polychrome",base:t[0],ids:t[1]?t[1].split("-"):null}}idsAreValid(e){for(let t of e)if(!/^[a-f0-9]{6}$/.test(t)||e.length>10)return!1;return!0}}function he(){let o=document.querySelector("#palette");o.onclick=t,o.ontouchend=t;let e=!1;async function t(i){let d=i.target;if(e)return;i.pointerType!="mouse"&&(focus(),e=!0,setTimeout(()=>{e=!1},75));let p=d.closest(".plus-container svg");if(p){const{ids:c}=C.deconstructURL(location.pathname),r=parseInt(p.getAttribute("data-color-index"));let x=v.addSlot({index:r+1});c.splice(r+1,0,x.hex),history.replaceState("","",c.join("-")),v.plus.hide(),E.create.push({undo(){v.removeSlot(x,{animations:!1}),c.splice(r+1,1),history.replaceState("","",c.join("-")),v.plus.hide()},redo(){v.addSlot(x,{animations:!1}),c.splice(r+1,0,x.hex),history.replaceState("","",c.join("-")),v.plus.hide()}}),v.slots.length>9&&v.plus.hide();return}let y=d.closest(".lock");if(y){let c=d.closest(".swatch"),r=parseInt(c.getAttribute("data-color-index")),x=v.slots[r];x.isLocked=!x.isLocked,y.classList.toggle("locked"),E.create.push({undo(){let n=v.slots[r],b=document.getElementById(n.id);n.isLocked=!n.isLocked,b.querySelector(".lock").classList.toggle("locked")},redo(){let n=v.slots[r],b=document.getElementById(n.id);n.isLocked=!n.isLocked,b.querySelector(".lock").classList.toggle("locked")}});return}if(d.closest(".x")){let c=d.closest(".swatch"),r=v.slots[parseInt(c.getAttribute("data-color-index"))],{ids:x}=C.deconstructURL(location.pathname);v.removeSlot(r),x.splice(r.data,1),history.replaceState("","",x.join("-")),v.plus.hide(),E.create.push({undo(){v.addSlot(r,{animations:!1}),x.splice(r.data,0,r.hex),history.replaceState("","",x.join("-")),v.plus.hide()},redo(){v.removeSlot(r,{animations:!1}),x.splice(r.data,1),history.replaceState("","",x.join("-")),v.plus.hide()}});return}if(d.closest(".info")){e=!0,setTimeout(()=>{e=!1},75);let c=d.closest(".swatch"),r=v.slots[parseInt(c.getAttribute("data-color-index"))];if(d.closest(".icon")){await navigator.clipboard.writeText(r.hex).then(()=>{let x=w("Copied hex to clipboard!",{pos:[i.x||i.changedTouches[i.changedTouches.length-1].pageX,i.y||i.changedTouches[i.changedTouches.length-1].pageY]});x.classList.add("at-mouse-pos"),document.body.append(x)},()=>{let x=w("Copy to clipboard failed.",{pos:[i.x||i.changedTouches[i.changedTouches.length-1].pageX,i.y||i.changedTouches[i.changedTouches.length-1].pageY]});x.classList.add("at-mouse-pos"),document.body.append(x)});return}}}let s=document.querySelector(".saved-palettes-wrapper");s.ontouchend=l,s.onclick=l;async function l(i){var c,r;let d=i.target;if(e)return;i.pointerType!="mouse"&&(focus(),e=!0,setTimeout(()=>{e=!1},75));let p=d.closest(".swatch");if(p){i.preventDefault();let x=p.parentElement.parentElement;await navigator.clipboard.writeText(A.items[parseInt(x.getAttribute("data-palette-index"))][parseInt(p.getAttribute("data-color-index"))]).then(()=>document.body.append(w("Copied hex to clipboard!",{pos:[i.x||i.changedTouches[i.changedTouches.length-1].pageX,i.y||i.changedTouches[i.changedTouches.length-1].pageY]})),()=>document.body.append(w("Copy to clipboard failed.",{pos:[i.x||i.changedTouches[i.changedTouches.length-1].pageX,i.y||i.changedTouches[i.changedTouches.length-1].pageY]})));return}let y=d.closest(".more");if(y){e=!0,setTimeout(()=>{e=!1},75),y.parentElement.append(D([{message:"Open",call(){C.navigateTo("/create/"+I.savedPalettes.items[parseInt(d.closest(".palette-container").getAttribute("data-palette-index"))].join("-"))}},{message:"Copy",async call(){await navigator.clipboard.writeText(A.items[parseInt(d.closest(".palette-container").getAttribute("data-palette-index"))].join(`
`)).then(()=>document.body.append(w("Copied hex to clipboard!",{pos:[i.x||i.changedTouches[i.changedTouches.length-1].pageX,i.y||i.changedTouches[i.changedTouches.length-1].pageY]})),()=>document.body.append(w("Copy to clipboard failed.",{pos:[i.x||i.changedTouches[i.changedTouches.length-1].pageX,i.y||i.changedTouches[i.changedTouches.length-1].pageY]})))}},{message:"Remove",call(){let x=parseInt(d.closest(".palette-container").getAttribute("data-palette-index")),n=A.items[x];E.palettes.push({undo(){A.addItem(n,x)},redo(){A.removeItem(x)}}),A.removeItem(x),document.body.append(w("Removed palette."))}}],{type:"menu"}));return}(c=document.querySelector(".popover"))==null||c.remove(),(r=document.querySelector(".clear-overlay"))==null||r.remove()}let a=document.querySelector(".toolbar");a.ontouchend=m,a.onclick=m;async function m(i){if(e)return;i.pointerType!="mouse"&&(focus(),e=!0,setTimeout(()=>{e=!1},75));let d=i.target;if(d.closest(".undo")){C.deconstructURL(location.pathname).base=="create"?E.create.undo():E.palettes.undo();return}if(d.closest(".redo")){C.deconstructURL(location.pathname).base=="create"?E.create.redo():E.palettes.redo();return}if(d.closest(".copy")){O();return}if(d.closest(".generate")){let p=[];for(let{hex:c}of v.slots)p.push(c);v.generate();let y=[];for(let{hex:c}of v.slots)y.push(c);history.replaceState("","","/create/"+y.join("-")),p&&E.create.push({undo:()=>{v.generate(p),history.replaceState("","","/create/"+p.join("-"))},redo:()=>{v.generate(y),history.replaceState("","","/create/"+y.join("-"))}});return}if(d.closest(".save")){Q();return}if(d.closest(".remove-all")){_();return}if(d.closest(".import")){V();return}if(d.closest(".more")){ge();return}}let u=document.querySelector(".main-nav"),g=document.querySelector(".main-header");window.ontouchend=f,window.onclick=f;async function f(i){var c,r,x,n;if(e)return;i.pointerType!="mouse"&&(focus(),e=!0,setTimeout(()=>{e=!1},75));let d=i.target;(c=document.querySelector(".popover"))==null||c.remove(),(r=document.querySelector(".clear-overlay"))==null||r.remove();let p=d.closest("a");if(p){i.preventDefault();let b=p.getAttribute("href");u.classList.remove("visible"),(x=document.querySelector(".overlay"))==null||x.remove(),document.body.style.overflowY="",b!=location.pathname&&C.navigateTo(b);return}if(d.closest("#nav-button"))if(u.classList.toggle("visible"),u.classList.contains("visible")){let b=document.createElement("div");b.classList.add("overlay"),g.append(b),document.body.style.overflowY="hidden",v.plus.hide(),setTimeout(()=>{b.addEventListener("click",()=>{b.remove(),u.classList.remove("visible"),document.body.style.overflowY=""},{once:!0})},50),document.body.style.overflowY="hidden"}else(n=g.querySelector(".overlay"))==null||n.remove(),document.body.style.overflowY="";if(d.closest("#settings")){j("Settings",{confirmation:{confirm:{message:"Confirm",call(){var S;let b=I.settings,L=document.querySelector(".confirmation-screen .box ul.options").firstChild;for(let M of Object.keys(b))console.log(M),b[M]=L.querySelector("select").selectedIndex,L=L.nextSibling;b.algorithm=document.querySelector(".confirmation-screen #algorithm").selectedIndex,I.settings=b,document.body.append(w("Changes saved.")),document.querySelector(".main-nav").classList.remove("visible"),(S=document.querySelector(".overlay"))==null||S.remove()}},cancel:{message:"Cancel",call(){document.body.append(w("Changes discarded."))}}},settings:[{message:"Algorithm",value:"algorithm",choices:[{message:"Random Algorithm"},{message:"Monochromatic"},{message:"Analogous"},{message:"Complementary"},{message:"Split Complementary"},{message:"Triadic"},{message:"Tetradic"},{message:"Square"},{message:"Randomize"}]},{message:"Cookies",value:"cookies",choices:[{message:"No, thank you",value:0},{message:"Sure, that's fine",value:1}]}]});return}let y=d.closest(".confirmation-screen");if(y){if(d.closest(".overlay")&&(y==document.querySelector(".cookies")&&(I.settings={cookies:1},I.info={firstVisit:!0}),y.remove()),y.classList.contains("remove-all")){if(d.closest(".yes")){for(let L=0;A.items.length;L++)A.removeItem(0);y.remove();let b=w("All palettes removed.");document.body.append(b)}else d.closest(".no")&&y.remove();return}if(y==document.querySelector(".cookies-confirmation")){let b=d.closest(".yes"),L=d.closest(".no");if(b){I.settings={cookies:1},y.remove();let S=w("Thanks, enjoy the site! :)");document.body.append(S)}else if(L){I.settings={cookies:0},y.remove();let S=w("You won't be able to save your palettes. You can change this in settings.",{duration:2500});document.body.append(S)}return}}}}async function O(){if(C.deconstructURL(location.pathname).base=="create"){let o=[];for(let{hex:e}of v.slots)o.push(e);await navigator.clipboard.writeText(o.join(`
`)).then(()=>{let e=w("Copied palette!");document.body.append(e)},()=>{let e=w("Failed to copy.");document.body.append(e)})}else{let o=[];for(let e of A.items)o.push(e.join("-"));await navigator.clipboard.writeText(o.join(`,
`)).then(()=>{let e=w("Copied palettes to clipboard!");document.body.append(e)},()=>{let e=w("Copy to clipboard failed.");document.body.append(e)})}}function Q(){if(!I.settings.cookies){document.body.append(w("You'll need to enable cookies in settings for that feature."));return}let o=[];for(let{hex:t}of v.slots)o.push(t);A.addItem(o);let e=w("Saved palette!");document.body.append(e)}function P(o){const{ids:e}=C.deconstructURL(location.pathname);let t=[];for(let s=0;s<o;s++)t.push(v.addSlot({})),e.push(t[s].hex);history.replaceState("","",e.join("-")),E.create.push({undo(){for(let s=0;s<o;s++)v.removeSlot(t[t.length-1-s],{animations:!1}),e.pop();history.replaceState("","",e.join("-"))},redo(){for(let s=0;s<o;s++)v.addSlot(t[s],{animations:!1}),e.push(t[s].hex);history.replaceState("","",e.join("-"))}})}function pe(){let o=[{message:"1",classes:["add-color"],call:()=>P(1)},{message:"2",classes:["add-color"],call:()=>P(2)},{message:"3",classes:["add-color"],call:()=>P(3)},{message:"4",classes:["add-color"],call:()=>P(4)}];for(let e=v.slots.length+4;e>10;e--)o.pop();if(o.length<1){document.body.append(w("Too many colors!"));return}document.body.append(D(o,{type:"tool-menu"}))}function _(){j("Are you sure you want to delete all of your palettes? You won't be able to undo this.",{confirmation:{confirm:{message:"Yes, delete away.",call(){for(let e=0;A.items.length;e++)A.removeItem(0);let o=w("All palettes removed.");document.body.append(o)}},cancel:{message:"No, please don't delete my stuff!"}}})}function V(){if(C.deconstructURL(location.pathname).base=="create")j("Paste hex code palette below!",{confirmation:{confirm:{message:"Confirm",call(){let o=C.deconstructURL(location.pathname).ids,e=document.querySelector(".confirmation-screen").querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-",""),t=!(/[g-z~`!#$%\^&*+=\[\]\\';,/{}|\\":<>\?]/g.test(e)||e.length==0||e.length%6!=0),s="Invalid values entered. Try again.";if(t){s="Successfully imported values.";let a=e.match(/.{1,6}/g);v.generate(a),E.create.push({undo(){v.generate(o)},redo(){v.generate(a)}})}let l=w(s);document.body.append(l)}},cancel:{message:"Cancel"}},type:"input"});else{if(!I.settings.cookies){document.body.append(w("You'll need to enable cookies in settings for that feature."));return}j("Paste hex code palette below! Separate palettes with commas.",{confirmation:{confirm:{message:"Confirm",call(){let e=document.querySelector(".confirmation-screen").querySelector("textarea").value.trim().replaceAll(" ","").replaceAll(`
`,"").replaceAll("-","").replaceAll("#","").toLowerCase(),t="Invalid values entered. Try again.",s=!(/[g-z~`!#$%\^&*+=\[\]\\';/{}|\\":<>\?]/g.test(e)||e.replaceAll(",","").length%6!=0||e.length==0);e.replaceAll(",","").length%6;let l=e.split(",");for(let a of l)(a.length/6>10||!(a.length>=6))&&(s=!1);if(s){let a=0;for(let m of l)a++,A.addItem(m.match(/.{1,6}/g));t="Successfully imported values.",E.palettes.push({undo(){for(let m=a;m>0;m--)A.removeItem(A.items.length-1)},redo(){for(let m of l)A.addItem(m.match(/.{1,6}/g))}})}document.body.append(w(t))}},cancel:{message:"Cancel"}},type:"input"})}}function ge(){C.deconstructURL(location.pathname).base=="create"?document.body.append(D([{message:"Save",classes:["save"],call:Q},{message:"Import",classes:["import"],call:V},{message:"Copy",classes:["copy"],call:O},{message:"Add Colors",classes:["add-colors"],call:pe}],{type:"tool-menu"})):document.body.append(D([{message:"Remove All",classes:["remove-all"],call:_},{message:"Import",classes:["import"],call:V},{message:"Copy All",classes:["copy"],call:O}],{type:"tool-menu"}))}function ye(){window.addEventListener("scroll",o,!1),window.addEventListener("touchmove",o,{passive:!1});function o(e){C.deconstructURL(location.pathname).base=="create"&&(e.preventDefault(),e.stopPropagation())}window.ontouchstart=e=>{let t=e.targetTouches[0].target.closest(".create-page .swatch");if(t&&!e.targetTouches[0].target.closest(".options div")&&!e.targetTouches[0].target.closest(".options svg")){let s=function(y){if(y.preventDefault(),l){let c=y.touches[0].clientY-g;t.style.translate="0 "+c+"px";let r=t,x=v.slots.length-f-1;if(p=0,d=0,c>0)for(let n=0;n<x;n++)p=(n*2+1)*m,r=r.nextElementSibling,c>p?(d++,r.style.translate!="0px -100%"&&(r.style.translate="0 -100%")):r.style.translate=="0px -100%"&&(r.style.translate="0 0");else for(let n=0;n<f;n++)p=(n*2+1)*m,r=r.previousElementSibling,-c>p?(d--,r.style.translate!="0px 100%"&&(r.style.translate="0 100%")):r.style.translate=="0px 100%"&&(r.style.translate="0 0")}else{let c=y.touches[0].clientX-u;t.style.translate=c+"px";let r=t,x=v.slots.length-f-1;if(p=0,d=0,c>0)for(let n=0;n<x;n++)p=(n*2+1)*a,r=r.nextElementSibling,c>p?(d++,r.style.translate!="-100%"&&(r.style.translate="-100%")):r.style.translate=="-100%"&&(r.style.translate="");else for(let n=0;n<f;n++)p=(n*2+1)*a,r=r.previousElementSibling,-c>p?(d--,r.style.translate!="100%"&&(r.style.translate="100%")):r.style.translate=="100%"&&(r.style.translate="")}},l=!1;document.body.classList.contains("vertical")&&(l=!0),v.plus.disabled=!0,v.plus.hide(),t.classList.add("is-dragging");let a=t.clientWidth/2,m=t.clientHeight/2,u=e.touches[0].clientX,g=e.touches[0].clientY,f=parseInt(t.getAttribute("data-color-index")),i=v.slots[f],d=0,p;window.addEventListener("touchmove",s,{passive:!1}),window.addEventListener("touchend",()=>{t.classList.remove("is-dragging"),t.classList.add("is-released"),removeEventListener("touchmove",s),t.style.translate=`${l?"0 ":""}${d*100}%`;function y(){t.removeEventListener("transitionend",y),t.removeEventListener("transitioncancel",y),t.classList.remove("is-released");let c=t;for(let n=0;n<d;n++)v.slots.splice(i.data,1),v.slots.splice(i.data+1,0,i),i.data++,c=c.nextElementSibling,v.slots[i.data-1].data--;for(let n=0;n>d;n--)v.slots.splice(i.data,1),v.slots.splice(i.data-1,0,i),i.data--,c=c.previousElementSibling,v.slots[i.data+1].data++;let r=t.cloneNode(!0);d>0?(c.after(r),t.remove()):d<0&&(c.before(r),t.remove()),t.style.translate="";let x=[];for(let n of v.slots){let b=document.getElementById(n.id);b.style.transition="transform 0s",b.style.translate="",setTimeout(()=>{b.style.transition=""},1),x.push(n.hex)}t=r,history.replaceState("","",x.join("-")),v.plus.disabled=!1,d&&E.create.push({undo(){v.plus.hide();let n=t=document.getElementById(i.id);for(let L=0;L<-d;L++){v.slots.splice(i.data,1),v.slots.splice(i.data+1,0,i),i.data++,n=n.nextElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S-1).toString())}for(let L=0;L>-d;L--){v.slots.splice(i.data,1),v.slots.splice(i.data-1,0,i),i.data--,n=n.previousElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S+1).toString())}r=t.cloneNode(!0),-d>0?(n.after(r),t.remove()):-d<0&&(n.before(r),t.remove());let b=[];for(let L of v.slots)b.push(L.hex);history.replaceState("","",b.join("-"))},redo(){v.plus.hide();let n=t=document.getElementById(i.id);for(let L=0;L<d;L++)v.slots.splice(i.data,1),v.slots.splice(i.data+1,0,i),i.data++,n=n.nextElementSibling,f=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(f-1).toString());for(let L=0;L>d;L--)v.slots.splice(i.data,1),v.slots.splice(i.data-1,0,i),i.data--,n=n.previousElementSibling,f=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(f+1).toString());r=t.cloneNode(!0),d>0?(n.after(r),t.remove()):d<0&&(n.before(r),t.remove());let b=[];for(let L of v.slots)b.push(L.hex);history.replaceState("","",b.join("-"))}})}t.addEventListener("transitionend",y),t.addEventListener("transitioncancel",y)},{once:!0})}},onmousedown=e=>{let t=e.target.closest(".create-page .swatch");if(t&&!e.target.closest(".options div")&&!e.target.closest(".options svg")){let s=function(y){if(l){let c=y.y-g;t.style.translate="0 "+c+"px";let r=t,x=v.slots.length-f-1;if(p=0,d=0,c>0)for(let n=0;n<x;n++)p=(n*2+1)*m,r=r.nextElementSibling,c>p?(d++,r.style.translate!="0px -100%"&&(r.style.translate="0px -100%")):r.style.translate=="0px -100%"&&(r.style.translate="");else for(let n=0;n<f;n++)p=(n*2+1)*m,r=r.previousElementSibling,-c>p?(d--,r.style.translate!="0px 100%"&&(r.style.translate="0px 100%")):r.style.translate=="0px 100%"&&(r.style.translate="")}else{let c=y.x-u;t.style.translate=c+"px";let r=t,x=v.slots.length-f-1;if(p=0,d=0,c>0)for(let n=0;n<x;n++)p=(n*2+1)*a,r=r.nextElementSibling,c>p?(d++,r.style.translate!="-100%"&&(r.style.translate="-100%")):r.style.translate=="-100%"&&(r.style.translate="");else for(let n=0;n<f;n++)p=(n*2+1)*a,r=r.previousElementSibling,-c>p?(d--,r.style.translate!="100%"&&(r.style.translate="100%")):r.style.translate=="100%"&&(r.style.translate="")}},l=!1;document.body.classList.contains("vertical")&&(l=!0),v.plus.disabled=!0,v.plus.hide(),t.classList.add("is-dragging");let a=t.clientWidth/2,m=t.clientHeight/2,u=e.x,g=e.y,f=parseInt(t.getAttribute("data-color-index")),i=v.slots[f],d=0,p;addEventListener("mousemove",s),addEventListener("mouseup",()=>{t.classList.remove("is-dragging"),t.classList.add("is-released"),removeEventListener("mousemove",s),t.style.translate=`${l?"0 ":""}${d*100}%`;function y(){t.removeEventListener("transitionend",y),t.removeEventListener("transitioncancel",y),t.classList.remove("is-released");let c=t;for(let n=0;n<d;n++)v.slots.splice(i.data,1),v.slots.splice(i.data+1,0,i),i.data++,c=c.nextElementSibling,v.slots[i.data-1].data--;for(let n=0;n>d;n--)v.slots.splice(i.data,1),v.slots.splice(i.data-1,0,i),i.data--,c=c.previousElementSibling,v.slots[i.data+1].data++;let r=t.cloneNode(!0);d>0?(c.after(r),t.remove()):d<0&&(c.before(r),t.remove()),t.style.translate="";let x=[];for(let n of v.slots){let b=document.getElementById(n.id);b.style.transition="transform 0s",b.style.translate="",setTimeout(()=>{b.style.transition=""},1),x.push(n.hex)}t=r,history.replaceState("","",x.join("-")),v.plus.disabled=!1,d&&E.create.push({undo(){v.plus.hide();let n=t=document.getElementById(i.id);for(let L=0;L<-d;L++){v.slots.splice(i.data,1),v.slots.splice(i.data+1,0,i),i.data++,n=n.nextElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S-1).toString())}for(let L=0;L>-d;L--){v.slots.splice(i.data,1),v.slots.splice(i.data-1,0,i),i.data--,n=n.previousElementSibling;let S=parseInt(n.getAttribute("data-color-index"));n.setAttribute("data-color-index",(S+1).toString())}r=t.cloneNode(!0),-d>0?(n.after(r),t.remove()):-d<0&&(n.before(r),t.remove());let b=[];for(let L of v.slots)b.push(L.hex);history.replaceState("","",b.join("-"))},redo(){v.plus.hide();let n=t=document.getElementById(i.id);for(let L=0;L<d;L++)v.slots.splice(i.data,1),v.slots.splice(i.data+1,0,i),i.data++,n=n.nextElementSibling,f=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(f-1).toString());for(let L=0;L>d;L--)v.slots.splice(i.data,1),v.slots.splice(i.data-1,0,i),i.data--,n=n.previousElementSibling,f=parseInt(n.getAttribute("data-color-index")),n.setAttribute("data-color-index",(f+1).toString());r=t.cloneNode(!0),d>0?(n.after(r),t.remove()):d<0&&(n.before(r),t.remove());let b=[];for(let L of v.slots)b.push(L.hex);history.replaceState("","",b.join("-"))}})}t.addEventListener("transitionend",y),t.addEventListener("transitioncancel",y)},{once:!0}),ondragstart=()=>!1}}}let ve=document.querySelector(".main-nav");function be(){onkeydown=o=>{var e,t;if(document.querySelector(".confirmation-screen")){if(o.key==="Escape"){(e=document.querySelector(".confirmation-screen"))==null||e.remove();return}return}if(o.metaKey||o.ctrlKey){let{base:s}=C.deconstructURL(location.pathname);if(o.key==="z"||o.key==="Z")if(s==="palettes"){o.shiftKey?E.palettes.redo():E.palettes.undo();return}else{o.shiftKey?E.create.redo():E.create.undo();return}if(s==="create"){let l=parseInt(o.key);if(l>=0&&l<=9){o.preventDefault();let a=v.slots[l-1]||v.slots[v.slots.length-1],m=document.getElementById(a.id);E.create.push({undo(){let u=v.slots[l-1]||v.slots[v.slots.length-1],g=document.getElementById(u.id);u.isLocked=!u.isLocked,g.querySelector(".lock").classList.toggle("locked")},redo(){let u=v.slots[l-1]||v.slots[v.slots.length-1],g=document.getElementById(u.id);u.isLocked=!u.isLocked,g.querySelector(".lock").classList.toggle("locked")}}),a.isLocked=!a.isLocked,m.querySelector(".lock").classList.toggle("locked");return}}}if(o.key===" "){let{base:s}=C.deconstructURL(location.pathname);if(s==="create"){o.preventDefault();let l=[];for(let{hex:m}of v.slots)l.push(m);v.generate();let a=[];for(let{hex:m}of v.slots)a.push(m);history.replaceState("","","/polychrome/create/"+a.join("-")),E.create.push({undo:()=>{v.generate(l),history.replaceState("","","/polychrome/create/"+l.join("-")),v.plus.hide()},redo:()=>{v.generate(a),history.replaceState("","","/polychrome/create/"+a.join("-"))}})}return}if(o.key==="Escape"){ve.classList.remove("visible"),(t=document.querySelector(".overlay"))==null||t.remove();return}//! NOT DONE
if(o.key==="Enter"){let s=document.activeElement;console.log(s);return}o.key}}let v=new ue,A=new le;const xe=document.title,N=document.querySelector(".toolbar");function Y(o,e,t){return s=>{document.title=xe+" | "+o;const l=document.querySelector("main.visible");l&&l.classList.remove("visible");const a=e;if(a==null||a.classList.add("visible"),o=="Palettes")document.body.parentElement.style.overflow="",document.body.style.overflow="",N.classList.add("palettes"),N.classList.remove("create"),t.draw(I.savedPalettes.items);else if(o=="Create")if(document.body.parentElement.style.overflow="hidden",document.body.style.overflow="hidden",N.classList.add("create"),N.classList.remove("palettes"),s)t.generate(s);else{let m=t.generate(),u=[];for(let g of m)u.push(g.hex);history.replaceState("","",u.join("-"))}else N.classList.remove("palettes","create"),document.documentElement.style.overflow="",document.body.style.overflow=""}}let C=new fe([["",Y("Home",document.getElementById("landing-page"))],["palettes",Y("Palettes",document.getElementById("palettes-page"),A)],["create",Y("Create",document.getElementById("create-page"),v)],["404",Y("404 Not Found",document.getElementById("not-found-page"))]]);C.routeToURL(location.pathname);onpopstate=()=>C.navigateTo(location.pathname,!0);I.info.firstVisit&&j("This site relies on local storage and cookies to save palettes.",{confirmation:{confirm:{message:"Sure, sounds good to me.",call(){I.info={firstVisit:!1},I.settings={cookies:1},document.body.append(w("Thanks, enjoy the site! :)"))}},cancel:{message:"No thanks, I don't want to save palettes.",call(){I.info={firstVisit:!1},I.settings={cookies:0};for(let o=0;o<A.items.length;o++)A.removeItem(0);document.body.append(w("You won't be able to save your palettes. You can change this in settings.",{duration:2500}))}}}});(navigator.userAgent.includes("Android")||navigator.userAgent.includes("like Mac"))&&document.body.classList.add("mobile");function ee(){document.querySelector(":root").style.display="initial",window.innerHeight>window.innerWidth?(document.body.classList.add("vertical"),document.body.classList.remove("landscape-thin")):window.innerWidth/window.innerHeight<1.6?(document.body.classList.add("landscape-thin"),document.body.classList.remove("vertical")):document.body.classList.remove("vertical","landscape-thin")}setTimeout(ee,200);onresize=ee;he();ye();be();onmouseover=o=>{if(!v.plus.disabled){const e=o.target,t=e.closest(".swatch");if(t)if(e.closest(".detector")&&v.slots.length<10){const l=e.closest(".left");let a=parseInt(t.getAttribute("data-color-index"));l&&a--,v.plus.show(a)}else v.plus.hide(0)}};
